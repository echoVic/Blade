{
  "version": 3,
  "sources": ["../packages/cli/src/ui/themes/colors.ts", "../packages/cli/src/ui/themes/theme.ts", "../packages/cli/src/ui/themes/themes-presets.ts", "../packages/cli/src/ui/themes/theme-manager.ts", "../packages/cli/src/ui/themes/styles.ts", "../packages/cli/src/ui/themes/semantic-colors.ts", "../packages/cli/src/ui/themes/index.ts", "../packages/cli/src/blade.tsx", "../packages/cli/src/contexts/SessionContext.tsx", "../packages/cli/src/components/EnhancedReplInterface.tsx", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/external.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/util.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/ZodError.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/locales/en.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/errors.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/parseUtil.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/errorUtil.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js", "../packages/core/src/types/config.ts", "../packages/core/src/config/index.ts", "../packages/core/src/utils/secure-http-client.ts", "../packages/core/src/utils/path-security.ts", "../packages/core/src/utils/error-handler.ts", "../packages/core/src/error/BladeError.ts", "../packages/core/src/error/RetryManager.ts", "../packages/core/src/error/RecoveryManager.ts", "../packages/core/src/error/ErrorMonitor.ts", "../packages/core/src/error/ErrorFactory.ts", "../packages/core/src/error/ErrorSerializer.ts", "../packages/core/src/error/ErrorBoundary.ts", "../packages/core/src/config/defaults.ts", "../packages/core/src/config/ConfigManager.ts", "../packages/core/src/llm/LLMManager.ts", "../packages/core/src/agent/Agent.ts", "../packages/core/src/context/ContextManager.ts", "../packages/core/src/context/storage/PersistentStore.ts", "../packages/core/src/agent/ToolComponent.ts", "../packages/core/src/tools/ToolManager.ts", "../packages/core/src/tools/builtin/file-system.ts", "../packages/core/src/tools/base/ConfirmableToolBase.ts", "../packages/core/src/tools/builtin/git/git-add.ts", "../packages/core/src/tools/builtin/git/git-branch.ts", "../packages/core/src/tools/builtin/git/git-diff.ts", "../packages/core/src/tools/builtin/git/git-log.ts", "../packages/core/src/tools/builtin/git/git-smart-commit.ts", "../packages/core/src/tools/builtin/git/git-status.ts", "../packages/core/src/tools/builtin/smart/smart-code-review.ts", "../packages/core/src/tools/builtin/smart/smart-doc-generator.ts", "../packages/core/src/agent/MCPComponent.ts", "../packages/core/src/mcp/server/MCPServer.ts", "../packages/core/src/mcp/config/MCPConfig.ts", "../packages/core/src/mcp/oauth-provider.ts", "../packages/core/src/mcp/oauth-token-storage.ts", "../packages/cli/src/config/ConfigService.ts", "../packages/cli/src/services/CommandOrchestrator.ts", "../packages/cli/src/components/ErrorBoundary.tsx", "../packages/cli/src/commands/agent-llm.ts", "../packages/cli/src/config/config-manager.ts", "../packages/cli/src/config/types.ts", "../packages/cli/src/ui/components/Animation.ts", "../packages/cli/src/ui/components/Display.ts", "../packages/cli/src/ui/components/Input.ts", "../packages/cli/src/ui/components/Layout.ts", "../packages/cli/src/ui/components/List.ts", "../packages/cli/src/ui/components/Progress.ts", "../packages/cli/src/ui/index.ts", "../packages/cli/src/ui/utils/formatter.ts", "../packages/cli/src/commands/config.ts", "../packages/cli/src/commands/llm.ts", "../packages/cli/src/commands/mcp.ts", "../packages/cli/src/commands/tools.ts", "../packages/cli/index.ts"],
  "sourcesContent": ["/**\n * UI\u989C\u8272\u4E3B\u9898\u914D\u7F6E\n */\n\nexport const UIColors = {\n  // \u4E3B\u8981\u989C\u8272\n  primary: '#0066cc',\n  secondary: '#6c757d',\n\n  // \u72B6\u6001\u989C\u8272\n  success: '#28a745',\n  warning: '#ffc107',\n  error: '#dc3545',\n  info: '#17a2b8',\n\n  // \u7070\u5EA6\u989C\u8272\n  light: '#f8f9fa',\n  dark: '#343a40',\n  muted: '#6c757d',\n\n  // \u6587\u672C\u989C\u8272\n  text: {\n    primary: '#212529',\n    secondary: '#6c757d',\n    muted: '#6c757d',\n    light: '#ffffff',\n  },\n\n  // \u80CC\u666F\u989C\u8272\n  background: {\n    primary: '#ffffff',\n    secondary: '#f8f9fa',\n    dark: '#343a40',\n  },\n\n  // \u8FB9\u6846\u989C\u8272\n  border: {\n    light: '#dee2e6',\n    dark: '#495057',\n  },\n\n  // \u7279\u6B8A\u7528\u9014\u989C\u8272\n  accent: '#e83e8c',\n  highlight: '#fff3cd',\n} as const;\n\nexport type UIColorKey = keyof typeof UIColors;\n", "/**\n * \u4E3B\u9898\u5B9A\u4E49\u548C\u5DE5\u5177\u51FD\u6570\n */\n\n// \u57FA\u7840\u989C\u8272\u7C7B\u578B\nexport interface BaseColors {\n  // \u4E3B\u8981\u989C\u8272\n  primary: string;\n  secondary: string;\n  accent: string;\n  \n  // \u72B6\u6001\u989C\u8272\n  success: string;\n  warning: string;\n  error: string;\n  info: string;\n  \n  // \u7070\u5EA6\u989C\u8272\n  light: string;\n  dark: string;\n  muted: string;\n  \n  // \u6587\u672C\u989C\u8272\n  text: {\n    primary: string;\n    secondary: string;\n    muted: string;\n    light: string;\n  };\n  \n  // \u80CC\u666F\u989C\u8272\n  background: {\n    primary: string;\n    secondary: string;\n    dark: string;\n  };\n  \n  // \u8FB9\u6846\u989C\u8272\n  border: {\n    light: string;\n    dark: string;\n  };\n  \n  // \u7279\u6B8A\u7528\u9014\u989C\u8272\n  highlight: string;\n}\n\n// \u4E3B\u9898\u914D\u7F6E\u63A5\u53E3\nexport interface Theme {\n  name: string;\n  colors: BaseColors;\n  spacing: {\n    xs: number;\n    sm: number;\n    md: number;\n    lg: number;\n    xl: number;\n  };\n  typography: {\n    fontSize: {\n      xs: number;\n      sm: number;\n      base: number;\n      lg: number;\n      xl: number;\n      '2xl': number;\n      '3xl': number;\n    };\n    fontWeight: {\n      light: number;\n      normal: number;\n      medium: number;\n      semibold: number;\n      bold: number;\n    };\n  };\n  borderRadius: {\n    sm: number;\n    base: number;\n    lg: number;\n    xl: number;\n  };\n  boxShadow: {\n    sm: string;\n    base: string;\n    lg: string;\n  };\n}\n\n// \u4E3B\u9898\u9A8C\u8BC1\u51FD\u6570\nexport function validateTheme(theme: any): theme is Theme {\n  // \u68C0\u67E5\u5FC5\u9700\u7684\u5C5E\u6027\n  if (!theme || typeof theme !== 'object') {\n    return false;\n  }\n  \n  if (!theme.name || typeof theme.name !== 'string') {\n    return false;\n  }\n  \n  // \u68C0\u67E5\u989C\u8272\u914D\u7F6E\n  if (!theme.colors || typeof theme.colors !== 'object') {\n    return false;\n  }\n  \n  const requiredColorKeys = [\n    'primary', 'secondary', 'accent', 'success', 'warning', \n    'error', 'info', 'light', 'dark', 'muted', 'highlight'\n  ];\n  \n  for (const key of requiredColorKeys) {\n    if (!theme.colors[key] || typeof theme.colors[key] !== 'string') {\n      return false;\n    }\n  }\n  \n  // \u68C0\u67E5\u5D4C\u5957\u5BF9\u8C61\n  if (!theme.colors.text || typeof theme.colors.text !== 'object') {\n    return false;\n  }\n  \n  if (!theme.colors.background || typeof theme.colors.background !== 'object') {\n    return false;\n  }\n  \n  if (!theme.colors.border || typeof theme.colors.border !== 'object') {\n    return false;\n  }\n  \n  const requiredTextKeys = ['primary', 'secondary', 'muted', 'light'];\n  const requiredBgKeys = ['primary', 'secondary', 'dark'];\n  const requiredBorderKeys = ['light', 'dark'];\n  \n  for (const key of requiredTextKeys) {\n    if (!theme.colors.text[key] || typeof theme.colors.text[key] !== 'string') {\n      return false;\n    }\n  }\n  \n  for (const key of requiredBgKeys) {\n    if (!theme.colors.background[key] || typeof theme.colors.background[key] !== 'string') {\n      return false;\n    }\n  }\n  \n  for (const key of requiredBorderKeys) {\n    if (!theme.colors.border[key] || typeof theme.colors.border[key] !== 'string') {\n      return false;\n    }\n  }\n  \n  // \u68C0\u67E5\u5176\u4ED6\u914D\u7F6E\n  if (!theme.spacing || typeof theme.spacing !== 'object') {\n    return false;\n  }\n  \n  if (!theme.typography || typeof theme.typography !== 'object') {\n    return false;\n  }\n  \n  if (!theme.borderRadius || typeof theme.borderRadius !== 'object') {\n    return false;\n  }\n  \n  if (!theme.boxShadow || typeof theme.boxShadow !== 'object') {\n    return false;\n  }\n  \n  return true;\n}\n\n// \u989C\u8272\u6DF7\u5408\u51FD\u6570\nexport function blendColors(color1: string, color2: string, ratio: number): string {\n  // \u79FB\u9664 # \u524D\u7F00\n  const c1 = color1.replace('#', '');\n  const c2 = color2.replace('#', '');\n  \n  // \u89E3\u6790 RGB \u503C\n  const r1 = parseInt(c1.substring(0, 2), 16);\n  const g1 = parseInt(c1.substring(2, 4), 16);\n  const b1 = parseInt(c1.substring(4, 6), 16);\n  \n  const r2 = parseInt(c2.substring(0, 2), 16);\n  const g2 = parseInt(c2.substring(2, 4), 16);\n  const b2 = parseInt(c2.substring(4, 6), 16);\n  \n  // \u6DF7\u5408\u989C\u8272\n  const r = Math.round(r1 * (1 - ratio) + r2 * ratio);\n  const g = Math.round(g1 * (1 - ratio) + g2 * ratio);\n  const b = Math.round(b1 * (1 - ratio) + b2 * ratio);\n  \n  // \u8F6C\u6362\u56DE\u5341\u516D\u8FDB\u5236\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n}\n\n// \u989C\u8272\u4EAE\u5EA6\u8BA1\u7B97\nexport function getColorBrightness(color: string): number {\n  const c = color.replace('#', '');\n  const r = parseInt(c.substring(0, 2), 16);\n  const g = parseInt(c.substring(2, 4), 16);\n  const b = parseInt(c.substring(4, 6), 16);\n  \n  // \u4F7F\u7528\u76F8\u5BF9\u4EAE\u5EA6\u516C\u5F0F\n  return (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n}\n\n// \u751F\u6210\u5BF9\u6BD4\u8272\nexport function getContrastColor(color: string): string {\n  const brightness = getColorBrightness(color);\n  return brightness > 0.5 ? '#000000' : '#ffffff';\n}", "/**\n * \u5185\u7F6E\u4E3B\u9898\u9884\u8BBE\n */\nimport { Theme } from './theme.js';\n\n// Ayu Dark \u4E3B\u9898\nexport const ayuDark: Theme = {\n  name: 'ayu-dark',\n  colors: {\n    primary: '#ffcc66',\n    secondary: '#bae67e',\n    accent: '#73d0ff',\n    success: '#bae67e',\n    warning: '#ffcc66',\n    error: '#ff3333',\n    info: '#73d0ff',\n    light: '#f0f0f0',\n    dark: '#000000',\n    muted: '#5c6773',\n    highlight: '#2d323b',\n    text: {\n      primary: '#e6e1cf',\n      secondary: '#bae67e',\n      muted: '#5c6773',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#0f1419',\n      secondary: '#14191f',\n      dark: '#000000',\n    },\n    border: {\n      light: '#2d323b',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.2)',\n    base: '0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2)',\n    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2)',\n  },\n};\n\n// Dracula \u4E3B\u9898\nexport const dracula: Theme = {\n  name: 'dracula',\n  colors: {\n    primary: '#bd93f9',\n    secondary: '#ffb86c',\n    accent: '#ff79c6',\n    success: '#50fa7b',\n    warning: '#f1fa8c',\n    error: '#ff5555',\n    info: '#8be9fd',\n    light: '#f8f8f2',\n    dark: '#282a36',\n    muted: '#6272a4',\n    highlight: '#44475a',\n    text: {\n      primary: '#f8f8f2',\n      secondary: '#f1fa8c',\n      muted: '#6272a4',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#282a36',\n      secondary: '#44475a',\n      dark: '#21222c',\n    },\n    border: {\n      light: '#44475a',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(40, 42, 54, 0.2)',\n    base: '0 1px 3px 0 rgba(40, 42, 54, 0.3), 0 1px 2px 0 rgba(40, 42, 54, 0.2)',\n    lg: '0 10px 15px -3px rgba(40, 42, 54, 0.3), 0 4px 6px -2px rgba(40, 42, 54, 0.2)',\n  },\n};\n\n// Monokai \u4E3B\u9898\nexport const monokai: Theme = {\n  name: 'monokai',\n  colors: {\n    primary: '#66d9ef',\n    secondary: '#a6e22e',\n    accent: '#f92672',\n    success: '#a6e22e',\n    warning: '#e6db74',\n    error: '#f92672',\n    info: '#66d9ef',\n    light: '#f8f8f2',\n    dark: '#272822',\n    muted: '#75715e',\n    highlight: '#3e3d32',\n    text: {\n      primary: '#f8f8f2',\n      secondary: '#e6db74',\n      muted: '#75715e',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#272822',\n      secondary: '#3e3d32',\n      dark: '#1e1f1c',\n    },\n    border: {\n      light: '#3e3d32',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(39, 40, 34, 0.2)',\n    base: '0 1px 3px 0 rgba(39, 40, 34, 0.3), 0 1px 2px 0 rgba(39, 40, 34, 0.2)',\n    lg: '0 10px 15px -3px rgba(39, 40, 34, 0.3), 0 4px 6px -2px rgba(39, 40, 34, 0.2)',\n  },\n};\n\n// Nord \u4E3B\u9898\nexport const nord: Theme = {\n  name: 'nord',\n  colors: {\n    primary: '#88c0d0',\n    secondary: '#81a1c1',\n    accent: '#b48ead',\n    success: '#a3be8c',\n    warning: '#ebcb8b',\n    error: '#bf616a',\n    info: '#88c0d0',\n    light: '#eceff4',\n    dark: '#2e3440',\n    muted: '#4c566a',\n    highlight: '#434c5e',\n    text: {\n      primary: '#eceff4',\n      secondary: '#d8dee9',\n      muted: '#4c566a',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#2e3440',\n      secondary: '#3b4252',\n      dark: '#242933',\n    },\n    border: {\n      light: '#434c5e',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(46, 52, 64, 0.2)',\n    base: '0 1px 3px 0 rgba(46, 52, 64, 0.3), 0 1px 2px 0 rgba(46, 52, 64, 0.2)',\n    lg: '0 10px 15px -3px rgba(46, 52, 64, 0.3), 0 4px 6px -2px rgba(46, 52, 64, 0.2)',\n  },\n};\n\n// Solarized Light \u4E3B\u9898\nexport const solarizedLight: Theme = {\n  name: 'solarized-light',\n  colors: {\n    primary: '#268bd2',\n    secondary: '#2aa198',\n    accent: '#d33682',\n    success: '#859900',\n    warning: '#b58900',\n    error: '#dc322f',\n    info: '#268bd2',\n    light: '#fdf6e3',\n    dark: '#073642',\n    muted: '#93a1a1',\n    highlight: '#eee8d5',\n    text: {\n      primary: '#586e75',\n      secondary: '#657b83',\n      muted: '#93a1a1',\n      light: '#002b36',\n    },\n    background: {\n      primary: '#fdf6e3',\n      secondary: '#eee8d5',\n      dark: '#073642',\n    },\n    border: {\n      light: '#eee8d5',\n      dark: '#073642',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(253, 246, 227, 0.2)',\n    base: '0 1px 3px 0 rgba(253, 246, 227, 0.3), 0 1px 2px 0 rgba(253, 246, 227, 0.2)',\n    lg: '0 10px 15px -3px rgba(253, 246, 227, 0.3), 0 4px 6px -2px rgba(253, 246, 227, 0.2)',\n  },\n};\n\n// Solarized Dark \u4E3B\u9898\nexport const solarizedDark: Theme = {\n  name: 'solarized-dark',\n  colors: {\n    primary: '#268bd2',\n    secondary: '#2aa198',\n    accent: '#d33682',\n    success: '#859900',\n    warning: '#b58900',\n    error: '#dc322f',\n    info: '#268bd2',\n    light: '#fdf6e3',\n    dark: '#073642',\n    muted: '#586e75',\n    highlight: '#073642',\n    text: {\n      primary: '#839496',\n      secondary: '#93a1a1',\n      muted: '#586e75',\n      light: '#fdf6e3',\n    },\n    background: {\n      primary: '#002b36',\n      secondary: '#073642',\n      dark: '#001f29',\n    },\n    border: {\n      light: '#073642',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(0, 43, 54, 0.2)',\n    base: '0 1px 3px 0 rgba(0, 43, 54, 0.3), 0 1px 2px 0 rgba(0, 43, 54, 0.2)',\n    lg: '0 10px 15px -3px rgba(0, 43, 54, 0.3), 0 4px 6px -2px rgba(0, 43, 54, 0.2)',\n  },\n};\n\n// Tokyo Night \u4E3B\u9898\nexport const tokyoNight: Theme = {\n  name: 'tokyo-night',\n  colors: {\n    primary: '#7aa2f7',\n    secondary: '#7dcfff',\n    accent: '#bb9af7',\n    success: '#9ece6a',\n    warning: '#e0af68',\n    error: '#f7768e',\n    info: '#7aa2f7',\n    light: '#c0caf5',\n    dark: '#1a1b26',\n    muted: '#565f89',\n    highlight: '#292e42',\n    text: {\n      primary: '#a9b1d6',\n      secondary: '#c0caf5',\n      muted: '#565f89',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#1a1b26',\n      secondary: '#292e42',\n      dark: '#16161e',\n    },\n    border: {\n      light: '#292e42',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(26, 27, 38, 0.2)',\n    base: '0 1px 3px 0 rgba(26, 27, 38, 0.3), 0 1px 2px 0 rgba(26, 27, 38, 0.2)',\n    lg: '0 10px 15px -3px rgba(26, 27, 38, 0.3), 0 4px 6px -2px rgba(26, 27, 38, 0.2)',\n  },\n};\n\n// GitHub \u4E3B\u9898\nexport const github: Theme = {\n  name: 'github',\n  colors: {\n    primary: '#0969da',\n    secondary: '#8250df',\n    accent: '#bc4c00',\n    success: '#1a7f37',\n    warning: '#9a6700',\n    error: '#d1242f',\n    info: '#0969da',\n    light: '#f6f8fa',\n    dark: '#24292f',\n    muted: '#6e7781',\n    highlight: '#ddf4ff',\n    text: {\n      primary: '#24292f',\n      secondary: '#57606a',\n      muted: '#6e7781',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#ffffff',\n      secondary: '#f6f8fa',\n      dark: '#24292f',\n    },\n    border: {\n      light: '#d0d7de',\n      dark: '#24292f',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(255, 255, 255, 0.2)',\n    base: '0 1px 3px 0 rgba(255, 255, 255, 0.3), 0 1px 2px 0 rgba(255, 255, 255, 0.2)',\n    lg: '0 10px 15px -3px rgba(255, 255, 255, 0.3), 0 4px 6px -2px rgba(255, 255, 255, 0.2)',\n  },\n};\n\n// Gruvbox \u4E3B\u9898\nexport const gruvbox: Theme = {\n  name: 'gruvbox',\n  colors: {\n    primary: '#83a598',\n    secondary: '#8ec07c',\n    accent: '#d3869b',\n    success: '#b8bb26',\n    warning: '#fabd2f',\n    error: '#fb4934',\n    info: '#83a598',\n    light: '#fbf1c7',\n    dark: '#282828',\n    muted: '#928374',\n    highlight: '#3c3836',\n    text: {\n      primary: '#ebdbb2',\n      secondary: '#d5c4a1',\n      muted: '#928374',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#282828',\n      secondary: '#3c3836',\n      dark: '#1d2021',\n    },\n    border: {\n      light: '#3c3836',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(40, 40, 40, 0.2)',\n    base: '0 1px 3px 0 rgba(40, 40, 40, 0.3), 0 1px 2px 0 rgba(40, 40, 40, 0.2)',\n    lg: '0 10px 15px -3px rgba(40, 40, 40, 0.3), 0 4px 6px -2px rgba(40, 40, 40, 0.2)',\n  },\n};\n\n// One Dark \u4E3B\u9898\nexport const oneDark: Theme = {\n  name: 'one-dark',\n  colors: {\n    primary: '#61afef',\n    secondary: '#c678dd',\n    accent: '#e5c07b',\n    success: '#98c379',\n    warning: '#e5c07b',\n    error: '#e06c75',\n    info: '#56b6c2',\n    light: '#abb2bf',\n    dark: '#282c34',\n    muted: '#5c6370',\n    highlight: '#3e4451',\n    text: {\n      primary: '#abb2bf',\n      secondary: '#c6c8d0',\n      muted: '#5c6370',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#282c34',\n      secondary: '#3e4451',\n      dark: '#21252b',\n    },\n    border: {\n      light: '#3e4451',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(40, 44, 52, 0.2)',\n    base: '0 1px 3px 0 rgba(40, 44, 52, 0.3), 0 1px 2px 0 rgba(40, 44, 52, 0.2)',\n    lg: '0 10px 15px -3px rgba(40, 44, 52, 0.3), 0 4px 6px -2px rgba(40, 44, 52, 0.2)',\n  },\n};\n\n// Catppuccin \u4E3B\u9898\nexport const catppuccin: Theme = {\n  name: 'catppuccin',\n  colors: {\n    primary: '#89b4fa',\n    secondary: '#cba6f7',\n    accent: '#f5c2e7',\n    success: '#a6e3a1',\n    warning: '#f9e2af',\n    error: '#f38ba8',\n    info: '#89dceb',\n    light: '#cdd6f4',\n    dark: '#11111b',\n    muted: '#6c7086',\n    highlight: '#181825',\n    text: {\n      primary: '#cdd6f4',\n      secondary: '#bac2de',\n      muted: '#6c7086',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#1e1e2e',\n      secondary: '#181825',\n      dark: '#11111b',\n    },\n    border: {\n      light: '#181825',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(30, 30, 46, 0.2)',\n    base: '0 1px 3px 0 rgba(30, 30, 46, 0.3), 0 1px 2px 0 rgba(30, 30, 46, 0.2)',\n    lg: '0 10px 15px -3px rgba(30, 30, 46, 0.3), 0 4px 6px -2px rgba(30, 30, 46, 0.2)',\n  },\n};\n\n// Rose Pine \u4E3B\u9898\nexport const rosePine: Theme = {\n  name: 'rose-pine',\n  colors: {\n    primary: '#9ccfd8',\n    secondary: '#c4a7e7',\n    accent: '#f6c177',\n    success: '#31748f',\n    warning: '#f6c177',\n    error: '#eb6f92',\n    info: '#9ccfd8',\n    light: '#e0def4',\n    dark: '#191724',\n    muted: '#6e6a86',\n    highlight: '#1f1d2e',\n    text: {\n      primary: '#e0def4',\n      secondary: '#cecacd',\n      muted: '#6e6a86',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#191724',\n      secondary: '#1f1d2e',\n      dark: '#12101a',\n    },\n    border: {\n      light: '#1f1d2e',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(25, 23, 36, 0.2)',\n    base: '0 1px 3px 0 rgba(25, 23, 36, 0.3), 0 1px 2px 0 rgba(25, 23, 36, 0.2)',\n    lg: '0 10px 15px -3px rgba(25, 23, 36, 0.3), 0 4px 6px -2px rgba(25, 23, 36, 0.2)',\n  },\n};\n\n// Kanagawa \u4E3B\u9898\nexport const kanagawa: Theme = {\n  name: 'kanagawa',\n  colors: {\n    primary: '#8ba4b0',\n    secondary: '#a292a3',\n    accent: '#c47fd5',\n    success: '#76946a',\n    warning: '#c0a36e',\n    error: '#c34043',\n    info: '#7e9cd8',\n    light: '#dcd7ba',\n    dark: '#1f1f28',\n    muted: '#727169',\n    highlight: '#2a2a37',\n    text: {\n      primary: '#dcd7ba',\n      secondary: '#c8c093',\n      muted: '#727169',\n      light: '#ffffff',\n    },\n    background: {\n      primary: '#1f1f28',\n      secondary: '#2a2a37',\n      dark: '#16161d',\n    },\n    border: {\n      light: '#2a2a37',\n      dark: '#000000',\n    },\n  },\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(31, 31, 40, 0.2)',\n    base: '0 1px 3px 0 rgba(31, 31, 40, 0.3), 0 1px 2px 0 rgba(31, 31, 40, 0.2)',\n    lg: '0 10px 15px -3px rgba(31, 31, 40, 0.3), 0 4px 6px -2px rgba(31, 31, 40, 0.2)',\n  },\n};\n\n// \u5BFC\u51FA\u6240\u6709\u4E3B\u9898\nexport const themes = {\n  'ayu-dark': ayuDark,\n  dracula: dracula,\n  monokai: monokai,\n  nord: nord,\n  'solarized-light': solarizedLight,\n  'solarized-dark': solarizedDark,\n  'tokyo-night': tokyoNight,\n  github: github,\n  gruvbox: gruvbox,\n  'one-dark': oneDark,\n  catppuccin: catppuccin,\n  'rose-pine': rosePine,\n  kanagawa: kanagawa,\n};\n", "/**\n * \u6838\u5FC3\u4E3B\u9898\u7BA1\u7406\u5668\n */\nimport { BaseColors, Theme, validateTheme } from './theme.js';\nimport { themes } from './themes-presets.js';\n\n// \u9ED8\u8BA4\u4E3B\u9898\u914D\u7F6E\nexport const defaultColors: BaseColors = {\n  primary: '#0066cc',\n  secondary: '#6c757d',\n  accent: '#e83e8c',\n  success: '#28a745',\n  warning: '#ffc107',\n  error: '#dc3545',\n  info: '#17a2b8',\n  light: '#f8f9fa',\n  dark: '#343a40',\n  muted: '#6c757d',\n  highlight: '#fff3cd',\n  text: {\n    primary: '#212529',\n    secondary: '#6c757d',\n    muted: '#6c757d',\n    light: '#ffffff',\n  },\n  background: {\n    primary: '#ffffff',\n    secondary: '#f8f9fa',\n    dark: '#343a40',\n  },\n  border: {\n    light: '#dee2e6',\n    dark: '#495057',\n  },\n};\n\nexport const defaultTheme: Theme = {\n  name: 'default',\n  colors: defaultColors,\n  spacing: {\n    xs: 0.25,\n    sm: 0.5,\n    md: 1,\n    lg: 1.5,\n    xl: 2,\n  },\n  typography: {\n    fontSize: {\n      xs: 0.75,\n      sm: 0.875,\n      base: 1,\n      lg: 1.125,\n      xl: 1.25,\n      '2xl': 1.5,\n      '3xl': 1.875,\n    },\n    fontWeight: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n    },\n  },\n  borderRadius: {\n    sm: 0.125,\n    base: 0.25,\n    lg: 0.5,\n    xl: 0.75,\n  },\n  boxShadow: {\n    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\n    base: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',\n    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\n  },\n};\n\n// \u6697\u8272\u4E3B\u9898\u914D\u7F6E\nexport const darkTheme: Theme = {\n  ...defaultTheme,\n  name: 'dark',\n  colors: {\n    ...defaultColors,\n    text: {\n      primary: '#ffffff',\n      secondary: '#e2e8f0',\n      muted: '#94a3b8',\n      light: '#000000',\n    },\n    background: {\n      primary: '#1e293b',\n      secondary: '#334155',\n      dark: '#0f172a',\n    },\n    border: {\n      light: '#475569',\n      dark: '#64748b',\n    },\n  },\n};\n\n// \u4E3B\u9898\u7BA1\u7406\u5668\u7C7B\nexport class ThemeManager {\n  private currentTheme: Theme = defaultTheme;\n  private themes: Map<string, Theme> = new Map();\n\n  constructor() {\n    this.themes.set('default', defaultTheme);\n    this.themes.set('dark', darkTheme);\n\n    // \u6CE8\u518C\u6240\u6709\u9884\u8BBE\u4E3B\u9898\n    for (const [name, theme] of Object.entries(themes)) {\n      this.themes.set(name, theme);\n    }\n  }\n\n  /**\n   * \u8BBE\u7F6E\u5F53\u524D\u4E3B\u9898\n   * @param themeName \u4E3B\u9898\u540D\u79F0\n   */\n  setTheme(themeName: string): void {\n    const theme = this.themes.get(themeName);\n    if (theme) {\n      this.currentTheme = theme;\n    } else {\n      throw new Error(`Theme '${themeName}' not found`);\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u4E3B\u9898\n   * @returns \u5F53\u524D\u4E3B\u9898\u914D\u7F6E\n   */\n  getTheme(): Theme {\n    return this.currentTheme;\n  }\n\n  /**\n   * \u6DFB\u52A0\u65B0\u4E3B\u9898\n   * @param name \u4E3B\u9898\u540D\u79F0\n   * @param theme \u4E3B\u9898\u914D\u7F6E\n   */\n  addTheme(name: string, theme: Theme): void {\n    if (!validateTheme(theme)) {\n      throw new Error(`Invalid theme configuration for '${name}'`);\n    }\n    this.themes.set(name, theme);\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u53EF\u7528\u4E3B\u9898\u540D\u79F0\n   * @returns \u4E3B\u9898\u540D\u79F0\u6570\u7EC4\n   */\n  getAvailableThemes(): string[] {\n    return Array.from(this.themes.keys());\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u4E3B\u9898\u540D\u79F0\n   * @returns \u5F53\u524D\u4E3B\u9898\u540D\u79F0\n   */\n  getCurrentThemeName(): string {\n    return this.currentTheme.name;\n  }\n\n  /**\n   * \u901A\u8FC7\u540D\u79F0\u83B7\u53D6\u4E3B\u9898\n   * @param name \u4E3B\u9898\u540D\u79F0\n   * @returns \u4E3B\u9898\u914D\u7F6E\u6216undefined\n   */\n  getThemeByName(name: string): Theme | undefined {\n    return this.themes.get(name);\n  }\n\n  /**\n   * \u79FB\u9664\u4E3B\u9898\n   * @param name \u4E3B\u9898\u540D\u79F0\n   */\n  removeTheme(name: string): void {\n    if (\n      name === 'default' ||\n      name === 'dark' ||\n      Object.prototype.hasOwnProperty.call(themes, name)\n    ) {\n      throw new Error(`Cannot remove built-in theme '${name}'`);\n    }\n    this.themes.delete(name);\n  }\n\n  /**\n   * \u68C0\u67E5\u4E3B\u9898\u662F\u5426\u5B58\u5728\n   * @param name \u4E3B\u9898\u540D\u79F0\n   * @returns \u662F\u5426\u5B58\u5728\n   */\n  hasTheme(name: string): boolean {\n    return this.themes.has(name);\n  }\n  \n  /**\n   * \u9A8C\u8BC1\u4E3B\u9898\u914D\u7F6E\n   * @param theme \u4E3B\u9898\u914D\u7F6E\n   * @returns \u662F\u5426\u6709\u6548\n   */\n  validateTheme(theme: any): boolean {\n    return validateTheme(theme);\n  }\n}\n\n// \u5BFC\u51FA\u9ED8\u8BA4\u4E3B\u9898\u7BA1\u7406\u5668\u5B9E\u4F8B\nexport const themeManager = new ThemeManager();\n\n// \u5BFC\u51FA\u4E3B\u9898\u914D\u7F6E\u7C7B\u578B\nexport type { BaseColors, Theme };\n", "/**\n * UI\u6837\u5F0F\u914D\u7F6E - \u57FA\u4E8E\u73B0\u4EE3\u5316\u4E3B\u9898\u7CFB\u7EDF\n */\nimport chalk from 'chalk';\nimport { themeManager } from './theme-manager.js';\n\n// \u52A8\u6001\u6837\u5F0F\u751F\u6210\u5668\nexport const UIStyles = {\n  // \u6587\u672C\u6837\u5F0F\n  text: {\n    bold: (text: string) => chalk.bold(text),\n    italic: (text: string) => chalk.italic(text),\n    underline: (text: string) => chalk.underline(text),\n    strikethrough: (text: string) => chalk.strikethrough(text),\n    dim: (text: string) => chalk.dim(text),\n  },\n\n  // \u72B6\u6001\u6837\u5F0F\n  status: {\n    success: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.success)(text);\n    },\n    error: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.error)(text);\n    },\n    warning: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.warning)(text);\n    },\n    info: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.info)(text);\n    },\n    muted: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.muted)(text);\n    },\n  },\n\n  // \u8BED\u4E49\u5316\u6837\u5F0F\n  semantic: {\n    primary: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.primary)(text);\n    },\n    secondary: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.secondary)(text);\n    },\n    accent: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.accent)(text);\n    },\n    highlight: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.bgHex(theme.colors.highlight).hex(theme.colors.text.primary)(text);\n    },\n  },\n\n  // \u6807\u9898\u6837\u5F0F\n  heading: {\n    h1: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.bold.hex(theme.colors.primary)(text);\n    },\n    h2: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.bold.hex(theme.colors.info)(text);\n    },\n    h3: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.bold.hex(theme.colors.success)(text);\n    },\n    h4: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.bold.hex(theme.colors.warning)(text);\n    },\n  },\n\n  // \u7279\u6B8A\u7EC4\u4EF6\u6837\u5F0F\n  component: {\n    header: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.bold.hex(theme.colors.primary)(text);\n    },\n    section: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.info)(text);\n    },\n    label: (text: string) => chalk.white(text),\n    value: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.success)(text);\n    },\n    code: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.gray.bgHex(theme.colors.background.secondary)(` ${text} `);\n    },\n    quote: (text: string) => {\n      const theme = themeManager.getTheme();\n      return chalk.italic.hex(theme.colors.text.secondary)(text);\n    },\n  },\n\n  // \u56FE\u6807\u6837\u5F0F\n  icon: {\n    success: '\u2705',\n    error: '\u274C',\n    warning: '\u26A0\uFE0F',\n    info: '\u2139\uFE0F',\n    loading: '\u23F3',\n    rocket: '\uD83D\uDE80',\n    gear: '\u2699\uFE0F',\n    chat: '\uD83D\uDCAC',\n    tools: '\uD83D\uDD27',\n    config: '\uD83D\uDCCB',\n    mcp: '\uD83D\uDD17',\n  },\n\n  // \u8FB9\u6846\u548C\u5206\u9694\u7B26\n  border: {\n    line: (length: number = 50) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.border.light)('\u2500'.repeat(length));\n    },\n    doubleLine: (length: number = 50) => {\n      const theme = themeManager.getTheme();\n      return chalk.hex(theme.colors.border.dark)('\u2550'.repeat(length));\n    },\n    box: {\n      top: '\u250C',\n      bottom: '\u2514',\n      left: '\u2502',\n      right: '\u2502',\n      horizontal: '\u2500',\n      vertical: '\u2502',\n    },\n  },\n} as const;\n\n// \u4FBF\u6377\u65B9\u6CD5\nexport const $ = {\n  success: UIStyles.status.success,\n  error: UIStyles.status.error,\n  warning: UIStyles.status.warning,\n  info: UIStyles.status.info,\n  muted: UIStyles.status.muted,\n  bold: UIStyles.text.bold,\n  dim: UIStyles.text.dim,\n  header: UIStyles.component.header,\n  code: UIStyles.component.code,\n};", "/**\n * \u8BED\u4E49\u5316\u989C\u8272\u7BA1\u7406\u7CFB\u7EDF\n */\nimport { Theme } from './theme.js';\n\n// \u8BED\u4E49\u5316\u989C\u8272\u6620\u5C04\nexport interface SemanticColorMapping {\n  // \u6587\u672C\u8BED\u4E49\u8272\n  text: {\n    heading: string; // \u6807\u9898\u6587\u672C\n    body: string; // \u6B63\u6587\u6587\u672C\n    caption: string; // \u8F85\u52A9\u6587\u672C\n    link: string; // \u94FE\u63A5\u6587\u672C\n    success: string; // \u6210\u529F\u6587\u672C\n    warning: string; // \u8B66\u544A\u6587\u672C\n    error: string; // \u9519\u8BEF\u6587\u672C\n    info: string; // \u4FE1\u606F\u6587\u672C\n    disabled: string; // \u7981\u7528\u6587\u672C\n    inverted: string; // \u53CD\u8F6C\u6587\u672C\n  };\n\n  // \u80CC\u666F\u8BED\u4E49\u8272\n  background: {\n    page: string; // \u9875\u9762\u80CC\u666F\n    card: string; // \u5361\u7247\u80CC\u666F\n    modal: string; // \u6A21\u6001\u6846\u80CC\u666F\n    popover: string; // \u5F39\u51FA\u5C42\u80CC\u666F\n    success: string; // \u6210\u529F\u80CC\u666F\n    warning: string; // \u8B66\u544A\u80CC\u666F\n    error: string; // \u9519\u8BEF\u80CC\u666F\n    info: string; // \u4FE1\u606F\u80CC\u666F\n    disabled: string; // \u7981\u7528\u80CC\u666F\n    inverted: string; // \u53CD\u8F6C\u80CC\u666F\n  };\n\n  // \u8FB9\u6846\u8BED\u4E49\u8272\n  border: {\n    default: string; // \u9ED8\u8BA4\u8FB9\u6846\n    focus: string; // \u7126\u70B9\u8FB9\u6846\n    success: string; // \u6210\u529F\u8FB9\u6846\n    warning: string; // \u8B66\u544A\u8FB9\u6846\n    error: string; // \u9519\u8BEF\u8FB9\u6846\n    info: string; // \u4FE1\u606F\u8FB9\u6846\n    disabled: string; // \u7981\u7528\u8FB9\u6846\n    divider: string; // \u5206\u5272\u7EBF\n  };\n\n  // \u4EA4\u4E92\u8BED\u4E49\u8272\n  interactive: {\n    primary: string; // \u4E3B\u8981\u4EA4\u4E92\u8272\n    secondary: string; // \u6B21\u8981\u4EA4\u4E92\u8272\n    accent: string; // \u5F3A\u8C03\u4EA4\u4E92\u8272\n    hover: string; // \u60AC\u505C\u72B6\u6001\n    active: string; // \u6FC0\u6D3B\u72B6\u6001\n    focus: string; // \u7126\u70B9\u72B6\u6001\n    disabled: string; // \u7981\u7528\u72B6\u6001\n  };\n\n  // \u72B6\u6001\u8BED\u4E49\u8272\n  status: {\n    success: string; // \u6210\u529F\u72B6\u6001\n    warning: string; // \u8B66\u544A\u72B6\u6001\n    error: string; // \u9519\u8BEF\u72B6\u6001\n    info: string; // \u4FE1\u606F\u72B6\u6001\n    pending: string; // \u5F85\u5904\u7406\u72B6\u6001\n    draft: string; // \u8349\u7A3F\u72B6\u6001\n  };\n\n  // \u529F\u80FD\u8BED\u4E49\u8272\n  functional: {\n    highlight: string; // \u9AD8\u4EAE\u8272\n    selection: string; // \u9009\u4E2D\u8272\n    overlay: string; // \u906E\u7F69\u8272\n    shadow: string; // \u9634\u5F71\u8272\n    backdrop: string; // \u80CC\u666F\u8272\n  };\n}\n\n// \u8BED\u4E49\u5316\u989C\u8272\u7BA1\u7406\u5668\nexport class SemanticColorManager {\n  private theme: Theme;\n  private semanticColors: SemanticColorMapping;\n\n  constructor(theme: Theme) {\n    this.theme = theme;\n    this.semanticColors = this.generateSemanticColors(theme);\n  }\n\n  /**\n   * \u751F\u6210\u8BED\u4E49\u5316\u989C\u8272\u6620\u5C04\n   * @param theme \u4E3B\u9898\u914D\u7F6E\n   * @returns \u8BED\u4E49\u5316\u989C\u8272\u6620\u5C04\n   */\n  private generateSemanticColors(theme: Theme): SemanticColorMapping {\n    const { colors } = theme;\n\n    return {\n      text: {\n        heading: colors.text.primary,\n        body: colors.text.primary,\n        caption: colors.text.secondary,\n        link: colors.primary,\n        success: colors.success,\n        warning: colors.warning,\n        error: colors.error,\n        info: colors.info,\n        disabled: colors.muted,\n        inverted: colors.text.light,\n      },\n      background: {\n        page: colors.background.primary,\n        card: colors.background.primary,\n        modal: colors.background.primary,\n        popover: colors.background.secondary,\n        success: colors.success + '20', // \u900F\u660E\u5EA6\u5904\u7406\n        warning: colors.warning + '20',\n        error: colors.error + '20',\n        info: colors.info + '20',\n        disabled: colors.background.secondary,\n        inverted: colors.background.dark,\n      },\n      border: {\n        default: colors.border.light,\n        focus: colors.primary,\n        success: colors.success,\n        warning: colors.warning,\n        error: colors.error,\n        info: colors.info,\n        disabled: colors.border.light,\n        divider: colors.border.light,\n      },\n      interactive: {\n        primary: colors.primary,\n        secondary: colors.secondary,\n        accent: colors.accent,\n        hover: this.adjustColorBrightness(colors.primary, 0.1),\n        active: this.adjustColorBrightness(colors.primary, -0.1),\n        focus: colors.primary,\n        disabled: colors.muted,\n      },\n      status: {\n        success: colors.success,\n        warning: colors.warning,\n        error: colors.error,\n        info: colors.info,\n        pending: colors.warning,\n        draft: colors.muted,\n      },\n      functional: {\n        highlight: colors.highlight,\n        selection: colors.primary + '30', // \u900F\u660E\u5EA6\u5904\u7406\n        overlay: colors.background.dark + '80',\n        shadow: colors.border.dark + '20',\n        backdrop: colors.background.dark + '60',\n      },\n    };\n  }\n\n  /**\n   * \u8C03\u6574\u989C\u8272\u4EAE\u5EA6\n   * @param color \u539F\u59CB\u989C\u8272\n   * @param amount \u8C03\u6574\u91CF (-1 \u5230 1)\n   * @returns \u8C03\u6574\u540E\u7684\u989C\u8272\n   */\n  private adjustColorBrightness(color: string, amount: number): string {\n    // \u79FB\u9664 # \u524D\u7F00\n    const c = color.replace('#', '');\n\n    // \u89E3\u6790 RGB \u503C\n    let r = parseInt(c.substring(0, 2), 16);\n    let g = parseInt(c.substring(2, 4), 16);\n    let b = parseInt(c.substring(4, 6), 16);\n\n    // \u8C03\u6574\u4EAE\u5EA6\n    r = Math.min(255, Math.max(0, r + amount * 255));\n    g = Math.min(255, Math.max(0, g + amount * 255));\n    b = Math.min(255, Math.max(0, b + amount * 255));\n\n    // \u8F6C\u6362\u56DE\u5341\u516D\u8FDB\u5236\n    return `#${Math.round(r).toString(16).padStart(2, '0')}${Math.round(g).toString(16).padStart(2, '0')}${Math.round(b).toString(16).padStart(2, '0')}`;\n  }\n\n  /**\n   * \u66F4\u65B0\u4E3B\u9898\n   * @param theme \u65B0\u4E3B\u9898\n   */\n  updateTheme(theme: Theme): void {\n    this.theme = theme;\n    this.semanticColors = this.generateSemanticColors(theme);\n  }\n\n  /**\n   * \u83B7\u53D6\u8BED\u4E49\u5316\u989C\u8272\n   * @param category \u989C\u8272\u5206\u7C7B\n   * @param key \u989C\u8272\u952E\u540D\n   * @returns \u989C\u8272\u503C\n   */\n  getColor(category: keyof SemanticColorMapping, key: string): string {\n    const categoryColors = this.semanticColors[category];\n    if (categoryColors && key in categoryColors) {\n      return categoryColors[key as keyof typeof categoryColors];\n    }\n    return '#000000'; // \u9ED8\u8BA4\u989C\u8272\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u8BED\u4E49\u5316\u989C\u8272\n   * @returns \u8BED\u4E49\u5316\u989C\u8272\u6620\u5C04\n   */\n  getAllColors(): SemanticColorMapping {\n    return this.semanticColors;\n  }\n\n  /**\n   * \u83B7\u53D6\u6587\u672C\u8BED\u4E49\u8272\n   * @param key \u952E\u540D\n   * @returns \u989C\u8272\u503C\n   */\n  getTextColor(key: keyof SemanticColorMapping['text']): string {\n    return this.semanticColors.text[key];\n  }\n\n  /**\n   * \u83B7\u53D6\u80CC\u666F\u8BED\u4E49\u8272\n   * @param key \u952E\u540D\n   * @returns \u989C\u8272\u503C\n   */\n  getBackgroundColor(key: keyof SemanticColorMapping['background']): string {\n    return this.semanticColors.background[key];\n  }\n\n  /**\n   * \u83B7\u53D6\u8FB9\u6846\u8BED\u4E49\u8272\n   * @param key \u952E\u540D\n   * @returns \u989C\u8272\u503C\n   */\n  getBorderColor(key: keyof SemanticColorMapping['border']): string {\n    return this.semanticColors.border[key];\n  }\n\n  /**\n   * \u83B7\u53D6\u4EA4\u4E92\u8BED\u4E49\u8272\n   * @param key \u952E\u540D\n   * @returns \u989C\u8272\u503C\n   */\n  getInteractiveColor(key: keyof SemanticColorMapping['interactive']): string {\n    return this.semanticColors.interactive[key];\n  }\n\n  /**\n   * \u83B7\u53D6\u72B6\u6001\u8BED\u4E49\u8272\n   * @param key \u952E\u540D\n   * @returns \u989C\u8272\u503C\n   */\n  getStatusColor(key: keyof SemanticColorMapping['status']): string {\n    return this.semanticColors.status[key];\n  }\n\n  /**\n   * \u83B7\u53D6\u529F\u80FD\u8BED\u4E49\u8272\n   * @param key \u952E\u540D\n   * @returns \u989C\u8272\u503C\n   */\n  getFunctionalColor(key: keyof SemanticColorMapping['functional']): string {\n    return this.semanticColors.functional[key];\n  }\n}\n", "/**\n * \u4E3B\u9898\u6A21\u5757\u5165\u53E3\n */\n\nexport { UIColors } from './colors.js';\nexport { $, UIStyles } from './styles.js';\nexport { ThemeManager, themeManager } from './theme-manager.js';\nexport { type Theme, type BaseColors } from './theme.js';\nexport { SemanticColorManager } from './semantic-colors.js';\n", "\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { render, Box, Text, useApp } from 'ink';\nimport { Command } from 'commander';\n\n// --- UI Components & Contexts ---\nimport { SessionProvider, useSession } from './contexts/SessionContext.js';\nimport { EnhancedReplInterface } from './components/EnhancedReplInterface.js';\nimport { CommandOrchestrator, CommandResult } from './services/CommandOrchestrator.js';\nimport { ConfigService } from './config/ConfigService.js';\nimport { ErrorBoundary } from './components/ErrorBoundary.js';\n\n// --- Command Definitions ---\nimport { agentLlmCommand } from './commands/agent-llm.js';\nimport { configCommand } from './commands/config.js';\nimport { llmCommand } from './commands/llm.js';\nimport { mcpCommand } from './commands/mcp.js';\nimport { toolsCommand } from './commands/tools.js';\n\ninterface BladeAppProps {\n  config?: any;\n  debug?: boolean;\n}\n\nconst BladeAppInner: React.FC<BladeAppProps> = ({ config, debug = false }) => {\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [commandOrchestrator, setCommandOrchestrator] = useState<CommandOrchestrator | null>(null);\n  const [configService] = useState(() => ConfigService.getInstance());\n  const { addAssistantMessage, addUserMessage, clearMessages, resetSession } = useSession();\n  const { exit } = useApp();\n\n  const initializeApp = useCallback(async () => {\n    try {\n      await configService.initialize();\n      const orchestrator = CommandOrchestrator.getInstance();\n      await orchestrator.initialize();\n      setCommandOrchestrator(orchestrator);\n      setIsInitialized(true);\n      addAssistantMessage('\uD83D\uDE80 Blade AI \u52A9\u624B\u5DF2\u542F\u52A8\uFF01\u8F93\u5165 /help \u67E5\u770B\u53EF\u7528\u547D\u4EE4\uFF0C\u6216\u76F4\u63A5\u63D0\u95EE\u3002');\n    } catch (error) {\n      addAssistantMessage(`\u274C \u521D\u59CB\u5316\u5931\u8D25: ${error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF'}`);\n    }\n  }, [configService, addAssistantMessage]);\n\n  const handleCommandSubmit = useCallback(async (input: string): Promise<CommandResult> => {\n    if (!commandOrchestrator) {\n      return { success: false, error: '\u547D\u4EE4\u7F16\u6392\u5668\u672A\u521D\u59CB\u5316' };\n    }\n    addUserMessage(input);\n    try {\n      const result = input.startsWith('/')\n        ? await commandOrchestrator.executeSlashCommand(input.slice(1).split(' ')[0], input.slice(1).split(' ').slice(1))\n        : await commandOrchestrator.executeNaturalLanguage(input);\n      \n      if (result.success && result.output) {\n        addAssistantMessage(result.output);\n      } else if (result.error) {\n        addAssistantMessage(`\u274C ${result.error}`);\n      }\n      return result;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF';\n      const result = { success: false, error: `\u6267\u884C\u5931\u8D25: ${errorMessage}` };\n      addAssistantMessage(`\u274C ${result.error}`);\n      return result;\n    }\n  }, [commandOrchestrator, addUserMessage, addAssistantMessage]);\n\n  const handleClear = useCallback(() => {\n    clearMessages();\n  }, [clearMessages]);\n\n  const handleExit = useCallback(async () => {\n    try {\n      if (commandOrchestrator) {\n        await commandOrchestrator.cleanup();\n      }\n      resetSession();\n    } catch (error) {\n      console.error('\u6E05\u7406\u8D44\u6E90\u65F6\u51FA\u9519:', error);\n    }\n  }, [commandOrchestrator, resetSession]);\n\n  useEffect(() => {\n    if (!isInitialized) {\n      initializeApp();\n    }\n    return () => {\n      handleExit();\n    };\n  }, [isInitialized, initializeApp, handleExit]);\n\n  if (!isInitialized) {\n    return (\n      <Box padding={1}>\n        <Box marginRight={1}><Text>\u26A1</Text></Box>\n        <Text>\u6B63\u5728\u542F\u52A8 Blade AI \u52A9\u624B...</Text>\n      </Box>\n    );\n  }\n\n  return (\n    <EnhancedReplInterface \n      onCommandSubmit={handleCommandSubmit}\n      onClear={handleClear}\n      onExit={() => exit()}\n    />\n  );\n};\n\nexport const BladeApp: React.FC<BladeAppProps> = (props) => (\n  <ErrorBoundary>\n    <SessionProvider>\n      <BladeAppInner {...props} />\n    </SessionProvider>\n  </ErrorBoundary>\n);\n\nexport async function main() {\n  const program = new Command();\n\n  program\n    .version('1.3.0', '-v, --version', '\u663E\u793A\u5F53\u524D\u7248\u672C')\n    .description('Blade AI - \u667A\u80FDAI\u52A9\u624B\u547D\u4EE4\u884C\u754C\u9762')\n    .option('-d, --debug', '\u542F\u7528\u8C03\u8BD5\u6A21\u5F0F');\n\n  // \u6CE8\u518C\u6240\u6709\u547D\u4EE4\n  agentLlmCommand(program);\n  configCommand(program);\n  llmCommand(program);\n  mcpCommand(program);\n  toolsCommand(program);\n\n  // \u8BBE\u7F6E\u9ED8\u8BA4\u52A8\u4F5C\uFF1A\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u5B50\u547D\u4EE4\uFF0C\u5219\u542F\u52A8\u4EA4\u4E92\u5F0FUI\n  program.action((options) => {\n    render(React.createElement(BladeApp, { debug: options.debug }));\n  });\n\n  await program.parseAsync(process.argv);\n\n  // \u5982\u679C\u89E3\u6790\u540E\u6CA1\u6709\u5339\u914D\u5230\u4EFB\u4F55\u5DF2\u77E5\u547D\u4EE4\uFF08\u9664\u4E86\u9ED8\u8BA4\u7684 help, version\uFF09\uFF0C\u5219\u4E5F\u542F\u52A8\u4EA4\u4E92\u5F0FUI\n  // commander \u5728\u6CA1\u6709\u5339\u914D\u5230\u547D\u4EE4\u65F6\uFF0Cargs \u6570\u7EC4\u4F1A\u662F\u7A7A\u7684\n  if (program.args.length === 0 && !program.matchedCommand) {\n     render(React.createElement(BladeApp, { debug: program.opts().debug }));\n  }\n}\n", "import React, { createContext, useContext, useReducer, ReactNode } from 'react';\n\n/**\n * \u4F1A\u8BDD\u6D88\u606F\n */\nexport interface SessionMessage {\n  id: string;\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp: number;\n  metadata?: Record<string, any>;\n}\n\n/**\n * \u4F1A\u8BDD\u72B6\u6001\n */\nexport interface SessionState {\n  messages: SessionMessage[];\n  isThinking: boolean;\n  input: string;\n  currentCommand: string | null;\n  error: string | null;\n  isActive: boolean;\n}\n\n/**\n * \u4F1A\u8BDD\u64CD\u4F5C\n */\nexport type SessionAction =\n  | { type: 'ADD_MESSAGE'; payload: SessionMessage }\n  | { type: 'SET_INPUT'; payload: string }\n  | { type: 'SET_THINKING'; payload: boolean }\n  | { type: 'SET_COMMAND'; payload: string | null }\n  | { type: 'SET_ERROR'; payload: string | null }\n  | { type: 'CLEAR_MESSAGES' }\n  | { type: 'RESET_SESSION' };\n\n/**\n * \u4F1A\u8BDD\u4E0A\u4E0B\u6587\u7C7B\u578B\n */\nexport interface SessionContextType {\n  state: SessionState;\n  dispatch: React.Dispatch<SessionAction>;\n  addUserMessage: (content: string) => void;\n  addAssistantMessage: (content: string) => void;\n  clearMessages: () => void;\n  resetSession: () => void;\n}\n\n// \u521B\u5EFA\u4E0A\u4E0B\u6587\nconst SessionContext = createContext<SessionContextType | undefined>(undefined);\n\n// \u521D\u59CB\u72B6\u6001\nconst initialState: SessionState = {\n  messages: [],\n  isThinking: false,\n  input: '',\n  currentCommand: null,\n  error: null,\n  isActive: true,\n};\n\n// Reducer \u51FD\u6570\nfunction sessionReducer(state: SessionState, action: SessionAction): SessionState {\n  switch (action.type) {\n    case 'ADD_MESSAGE':\n      return {\n        ...state,\n        messages: [...state.messages, action.payload],\n        error: null, // \u6E05\u9664\u9519\u8BEF\u5F53\u6709\u65B0\u6D88\u606F\u65F6\n      };\n    \n    case 'SET_INPUT':\n      return { ...state, input: action.payload };\n    \n    case 'SET_THINKING':\n      return { ...state, isThinking: action.payload };\n    \n    case 'SET_COMMAND':\n      return { ...state, currentCommand: action.payload };\n    \n    case 'SET_ERROR':\n      return { ...state, error: action.payload };\n    \n    case 'CLEAR_MESSAGES':\n      return { ...state, messages: [], error: null };\n    \n    case 'RESET_SESSION':\n      return { ...initialState, isActive: true };\n    \n    default:\n      return state;\n  }\n}\n\n/**\n * \u4F1A\u8BDD\u4E0A\u4E0B\u6587\u63D0\u4F9B\u8005\n */\nexport function SessionProvider({ children }: { children: ReactNode }) {\n  const [state, dispatch] = useReducer(sessionReducer, initialState);\n\n  const addUserMessage = (content: string) => {\n    const message: SessionMessage = {\n      id: Date.now().toString(),\n      role: 'user',\n      content,\n      timestamp: Date.now(),\n    };\n    dispatch({ type: 'ADD_MESSAGE', payload: message });\n  };\n\n  const addAssistantMessage = (content: string) => {\n    const message: SessionMessage = {\n      id: Date.now().toString(),\n      role: 'assistant',\n      content,\n      timestamp: Date.now(),\n    };\n    dispatch({ type: 'ADD_MESSAGE', payload: message });\n  };\n\n  const clearMessages = () => {\n    dispatch({ type: 'CLEAR_MESSAGES' });\n  };\n\n  const resetSession = () => {\n    dispatch({ type: 'RESET_SESSION' });\n  };\n\n  const value: SessionContextType = {\n    state,\n    dispatch,\n    addUserMessage,\n    addAssistantMessage,\n    clearMessages,\n    resetSession,\n  };\n\n  return (\n    <SessionContext.Provider value={value}>\n      {children}\n    </SessionContext.Provider>\n  );\n}\n\n/**\n * \u4F7F\u7528\u4F1A\u8BDD\u4E0A\u4E0B\u6587\u7684 Hook\n */\nexport function useSession(): SessionContextType {\n  const context = useContext(SessionContext);\n  if (context === undefined) {\n    throw new Error('useSession must be used within a SessionProvider');\n  }\n  return context;\n}", "import React, { useState, useCallback } from 'react';\nimport { Box, Text, useInput, useApp, Spacer } from 'ink';\nimport { useSession } from '../contexts/SessionContext.js';\nimport { CommandResult } from '../services/CommandOrchestrator.js';\n\ninterface EnhancedReplInterfaceProps {\n  onCommandSubmit: (command: string) => Promise<CommandResult>;\n  onClear: () => void;\n  onExit: () => void;\n}\n\nexport const EnhancedReplInterface: React.FC<EnhancedReplInterfaceProps> = ({\n  onCommandSubmit,\n  onClear,\n  onExit,\n}) => {\n  const [input, setInput] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [commandHistory, setCommandHistory] = useState<string[]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const { state: sessionState, dispatch } = useSession();\n  const { exit } = useApp();\n\n  const handleSubmit = useCallback(async () => {\n    if (input.trim() && !isProcessing) {\n      const command = input.trim();\n      \n      // \u6DFB\u52A0\u5230\u5386\u53F2\u8BB0\u5F55\n      setCommandHistory(prev => [...prev, command]);\n      setHistoryIndex(-1);\n      \n      setIsProcessing(true);\n      dispatch({ type: 'SET_THINKING', payload: true });\n      \n      try {\n        const result = await onCommandSubmit(command);\n        \n        if (!result.success && result.error) {\n          dispatch({ type: 'SET_ERROR', payload: result.error });\n        }\n        \n        setInput('');\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF';\n        dispatch({ type: 'SET_ERROR', payload: `\u6267\u884C\u5931\u8D25: ${errorMessage}` });\n      } finally {\n        setIsProcessing(false);\n        dispatch({ type: 'SET_THINKING', payload: false });\n      }\n    }\n  }, [input, isProcessing, onCommandSubmit, dispatch]);\n\n  const handleClear = useCallback(() => {\n    onClear();\n    dispatch({ type: 'CLEAR_MESSAGES' });\n    dispatch({ type: 'SET_ERROR', payload: null });\n  }, [onClear, dispatch]);\n\n  const handleExit = useCallback(() => {\n    onExit();\n    exit();\n  }, [onExit, exit]);\n\n  // \u5904\u7406\u7528\u6237\u8F93\u5165\n  useInput((inputKey, key) => {\n    if (key.return) {\n      // \u56DE\u8F66\u952E\u63D0\u4EA4\u547D\u4EE4\n      handleSubmit();\n    } else if (key.ctrl && key.name === 'c') {\n      // Ctrl+C \u9000\u51FA\n      handleExit();\n    } else if (key.ctrl && key.name === 'l') {\n      // Ctrl+L \u6E05\u5C4F\n      handleClear();\n    } else if (key.upArrow && commandHistory.length > 0) {\n      // \u4E0A\u7BAD\u5934 - \u547D\u4EE4\u5386\u53F2\n      const newIndex = historyIndex === -1 ? commandHistory.length - 1 : Math.max(0, historyIndex - 1);\n      setHistoryIndex(newIndex);\n      setInput(commandHistory[newIndex] || '');\n    } else if (key.downArrow) {\n      // \u4E0B\u7BAD\u5934 - \u547D\u4EE4\u5386\u53F2\n      if (historyIndex !== -1) {\n        const newIndex = historyIndex + 1;\n        if (newIndex >= commandHistory.length) {\n          setHistoryIndex(-1);\n          setInput('');\n        } else {\n          setHistoryIndex(newIndex);\n          setInput(commandHistory[newIndex] || '');\n        }\n      }\n    } else if (key.backspace || key.delete) {\n      // \u9000\u683C\u952E\u5220\u9664\u5B57\u7B26\n      setInput(prev => prev.slice(0, -1));\n    } else if (inputKey && key.name !== 'escape') {\n      // \u666E\u901A\u5B57\u7B26\u8F93\u5165\n      setInput(prev => prev + inputKey);\n    }\n  });\n\n  return (\n    <Box flexDirection=\"column\" width=\"100%\" height=\"100%\">\n      {/* \u6807\u9898\u680F */}\n      <Box flexDirection=\"row\" justifyContent=\"space-between\" paddingX={1} paddingY={0}>\n        <Text color=\"blue\">\uD83E\uDD16 Blade AI \u52A9\u624B</Text>\n        <Text color=\"gray\">Ctrl+C \u9000\u51FA | Ctrl+L \u6E05\u5C4F</Text>\n      </Box>\n\n      {/* \u5206\u9694\u7EBF */}\n      <Box height={1} width=\"100%\">\n        <Text color=\"gray\">\u2500</Text>\n        <Spacer />\n        <Text color=\"gray\">\u2500</Text>\n      </Box>\n\n      {/* \u6D88\u606F\u663E\u793A\u533A\u57DF - \u53EF\u6EDA\u52A8 */}\n      <Box flexDirection=\"column\" flexGrow={1} paddingX={1} paddingY={0}>\n        {sessionState.messages.length === 0 && !sessionState.error && (\n          <Box flexDirection=\"column\" paddingY={1}>\n            <Text color=\"blue\">\uD83D\uDE80 \u6B22\u8FCE\u4F7F\u7528 Blade AI \u52A9\u624B!</Text>\n            <Text> </Text>\n            <Text color=\"gray\">\u8F93\u5165 /help \u67E5\u770B\u53EF\u7528\u547D\u4EE4</Text>\n            <Text color=\"gray\">\u76F4\u63A5\u8F93\u5165\u95EE\u9898\u5F00\u59CB\u5BF9\u8BDD</Text>\n          </Box>\n        )}\n\n        {sessionState.messages.map((message) => (\n          <Box key={message.id} flexDirection=\"column\" marginBottom={1}>\n            <Box>\n              <Text color={message.role === 'user' ? 'green' : 'blue'}>\n                {message.role === 'user' ? '\uD83D\uDC64 \u4F60: ' : '\uD83E\uDD16 \u52A9\u624B: '}\n              </Text>\n            </Box>\n            <Box marginLeft={3}>\n              <Text>{message.content}</Text>\n            </Box>\n          </Box>\n        ))}\n        \n        {isProcessing && (\n          <Box flexDirection=\"column\" marginBottom={1}>\n            <Box>\n              <Text color=\"yellow\">\u23F3 \u52A9\u624B\u6B63\u5728\u601D\u8003...</Text>\n            </Box>\n          </Box>\n        )}\n        \n        {sessionState.error && (\n          <Box flexDirection=\"column\" marginBottom={1}>\n            <Box>\n              <Text color=\"red\">\u274C \u9519\u8BEF: </Text>\n            </Box>\n            <Box marginLeft={3}>\n              <Text color=\"red\">{sessionState.error}</Text>\n            </Box>\n          </Box>\n        )}\n      </Box>\n\n      {/* \u8F93\u5165\u533A\u57DF */}\n      <Box flexDirection=\"row\" alignItems=\"center\" paddingX={1} paddingY={1}>\n        <Text color=\"green\">{'>>> '}</Text>\n        <Text>{input}</Text>\n        {isProcessing && <Text color=\"yellow\">|</Text>}\n      </Box>\n\n      {/* \u72B6\u6001\u680F */}\n      <Box flexDirection=\"row\" justifyContent=\"space-between\" paddingX={1} paddingY={0}>\n        <Text color=\"gray\">\n          {sessionState.messages.length > 0 ? `${sessionState.messages.length} \u6761\u6D88\u606F` : '\u6682\u65E0\u6D88\u606F'}\n        </Text>\n        <Text color=\"gray\">\n          {isProcessing ? '\u5904\u7406\u4E2D...' : '\u5C31\u7EEA'}\n        </Text>\n      </Box>\n    </Box>\n  );\n};", "export * from \"./errors.js\";\nexport * from \"./helpers/parseUtil.js\";\nexport * from \"./helpers/typeAliases.js\";\nexport * from \"./helpers/util.js\";\nexport * from \"./types.js\";\nexport * from \"./ZodError.js\";\n", "export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n", "import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n", "import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n", "import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n", "import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n", "export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n", "import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n", "/**\n * Blade \u7EDF\u4E00\u914D\u7F6E\u7CFB\u7EDF - \u7C7B\u578B\u5B9A\u4E49\n * \u652F\u6301\u5206\u5C42\u914D\u7F6E\uFF1AGlobalConfig\u3001EnvConfig\u3001UserConfig\u3001ProjectConfig\n */\n\nimport { z } from 'zod';\n\n// \u57FA\u7840\u914D\u7F6E\u6A21\u5F0F\nexport const AuthConfigSchema = z.object({\n  apiKey: z.string().default(''),\n  baseUrl: z.string().url().default('https://apis.iflow.cn/v1'),\n  modelName: z.string().default('Qwen3-Coder'),\n  searchApiKey: z.string().default(''),\n});\n\nexport const UIConfigSchema = z.object({\n  theme: z.enum(['GitHub', 'dark', 'light', 'auto']).default('GitHub'),\n  hideTips: z.boolean().default(false),\n  hideBanner: z.boolean().default(false),\n});\n\nexport const SecurityConfigSchema = z.object({\n  sandbox: z.enum(['docker', 'none']).default('docker'),\n  trustedFolders: z.array(z.string()).default([]),\n  allowedOperations: z.array(z.string()).default(['read', 'write', 'execute']),\n});\n\nexport const ToolsConfigSchema = z.object({\n  toolDiscoveryCommand: z.string().default('bin/get_tools'),\n  toolCallCommand: z.string().default('bin/call_tool'),\n  summarizeToolOutput: z.record(\n    z.object({\n      tokenBudget: z.number().min(1).optional(),\n    })\n  ).default({}),\n});\n\nexport const MCPConfigSchema = z.object({\n  mcpServers: z.record(\n    z.object({\n      command: z.string(),\n      args: z.array(z.string()).optional(),\n      env: z.record(z.string()).optional(),\n    })\n  ).default({\n    main: {\n      command: 'bin/mcp_server.py',\n    },\n  }),\n});\n\nexport const TelemetryConfigSchema = z.object({\n  enabled: z.boolean().default(true),\n  target: z.enum(['local', 'remote']).default('local'),\n  otlpEndpoint: z.string().url().default('http://localhost:4317'),\n  logPrompts: z.boolean().default(false),\n});\n\nexport const UsageConfigSchema = z.object({\n  usageStatisticsEnabled: z.boolean().default(true),\n  maxSessionTurns: z.number().min(1).max(100).default(10),\n  rateLimit: z.object({\n    requestsPerMinute: z.number().min(1).default(60),\n    requestsPerHour: z.number().min(1).default(3600),\n  }).default({\n    requestsPerMinute: 60,\n    requestsPerHour: 3600,\n  }),\n});\n\nexport const DebugConfigSchema = z.object({\n  debug: z.boolean().default(false),\n  logLevel: z.enum(['error', 'warn', 'info', 'debug', 'trace']).default('info'),\n  logToFile: z.boolean().default(false),\n  logFilePath: z.string().default('./logs/blade.log'),\n});\n\n// \u5168\u5C40\u914D\u7F6E\uFF08\u7CFB\u7EDF\u7EA7\u9ED8\u8BA4\u914D\u7F6E\uFF09\nexport const GlobalConfigSchema = z.object({\n  auth: AuthConfigSchema.default({}),\n  ui: UIConfigSchema.default({}),\n  security: SecurityConfigSchema.default({}),\n  tools: ToolsConfigSchema.default({}),\n  mcp: MCPConfigSchema.default({}),\n  telemetry: TelemetryConfigSchema.default({}),\n  usage: UsageConfigSchema.default({}),\n  debug: DebugConfigSchema.default({}),\n  version: z.string().default('1.0.0'),\n  createdAt: z.string().datetime().default(() => new Date().toISOString()),\n});\n\n// \u73AF\u5883\u914D\u7F6E\uFF08\u73AF\u5883\u53D8\u91CF\u8986\u76D6\uFF09\nexport const EnvConfigSchema = z.object({\n  auth: AuthConfigSchema.partial().default({}),\n  ui: UIConfigSchema.partial().default({}),\n  security: SecurityConfigSchema.partial().default({}),\n  tools: ToolsConfigSchema.partial().default({}),\n  mcp: MCPConfigSchema.partial().default({}),\n  telemetry: TelemetryConfigSchema.partial().default({}),\n  usage: UsageConfigSchema.partial().default({}),\n  debug: DebugConfigSchema.partial().default({}),\n});\n\n// \u7528\u6237\u914D\u7F6E\uFF08\u7528\u6237\u7EA7\u914D\u7F6E\uFF09\nexport const UserConfigSchema = z.object({\n  auth: AuthConfigSchema.partial().default({}),\n  ui: UIConfigSchema.partial().default({}),\n  security: SecurityConfigSchema.partial().default({}),\n  tools: ToolsConfigSchema.partial().default({}),\n  mcp: MCPConfigSchema.partial().default({}),\n  telemetry: TelemetryConfigSchema.partial().default({}),\n  usage: UsageConfigSchema.partial().default({}),\n  debug: DebugConfigSchema.partial().default({}),\n  currentProvider: z.enum(['qwen', 'volcengine']).optional(),\n  currentModel: z.string().optional(),\n  lastUpdated: z.string().datetime().optional(),\n  preferences: z.object({\n    autoSave: z.boolean().default(true),\n    backupEnabled: z.boolean().default(true),\n    backupInterval: z.number().min(1).default(3600), // \u79D2\n  }).default({}),\n});\n\n// \u9879\u76EE\u914D\u7F6E\uFF08\u9879\u76EE\u7EA7\u914D\u7F6E\uFF09\nexport const ProjectConfigSchema = z.object({\n  auth: AuthConfigSchema.partial().default({}),\n  ui: UIConfigSchema.partial().default({}),\n  security: SecurityConfigSchema.partial().default({}),\n  tools: ToolsConfigSchema.partial().default({}),\n  mcp: MCPConfigSchema.partial().default({}),\n  telemetry: TelemetryConfigSchema.partial().default({}),\n  usage: UsageConfigSchema.partial().default({}),\n  debug: DebugConfigSchema.partial().default({}),\n  projectSpecific: z.object({\n    enabled: z.boolean().default(true),\n    overridesGlobal: z.boolean().default(false),\n    inheritFromParent: z.boolean().default(true),\n  }).default({}),\n});\n\n// \u5408\u5E76\u540E\u7684\u5B8C\u6574\u914D\u7F6E\nexport const BladeUnifiedConfigSchema = z.object({\n  auth: AuthConfigSchema,\n  ui: UIConfigSchema,\n  security: SecurityConfigSchema,\n  tools: ToolsConfigSchema,\n  mcp: MCPConfigSchema,\n  telemetry: TelemetryConfigSchema,\n  usage: UsageConfigSchema,\n  debug: DebugConfigSchema,\n  metadata: z.object({\n    sources: z.array(z.enum(['global', 'env', 'user', 'project'])).default(['global']),\n    loadedAt: z.string().datetime().default(() => new Date().toISOString()),\n    configVersion: z.string().default('1.0.0'),\n    validationErrors: z.array(z.string()).default([]),\n  }).default({\n    sources: ['global'],\n    loadedAt: new Date().toISOString(),\n    configVersion: '1.0.0',\n    validationErrors: [],\n  }),\n});\n\n// \u914D\u7F6E\u72B6\u6001\u7C7B\u578B\nexport const ConfigStateSchema = z.object({\n  isValid: z.boolean(),\n  errors: z.array(z.string()),\n  warnings: z.array(z.string()),\n  lastReload: z.string().datetime(),\n  configVersion: z.string(),\n});\n\n// \u5BFC\u51FA\u7C7B\u578B\nexport type AuthConfig = z.infer<typeof AuthConfigSchema>;\nexport type UIConfig = z.infer<typeof UIConfigSchema>;\nexport type SecurityConfig = z.infer<typeof SecurityConfigSchema>;\nexport type ToolsConfig = z.infer<typeof ToolsConfigSchema>;\nexport type MCPConfig = z.infer<typeof MCPConfigSchema>;\nexport type TelemetryConfig = z.infer<typeof TelemetryConfigSchema>;\nexport type UsageConfig = z.infer<typeof UsageConfigSchema>;\nexport type DebugConfig = z.infer<typeof DebugConfigSchema>;\n\nexport type GlobalConfig = z.infer<typeof GlobalConfigSchema>;\nexport type EnvConfig = z.infer<typeof EnvConfigSchema>;\nexport type UserConfig = z.infer<typeof UserConfigSchema>;\nexport type ProjectConfig = z.infer<typeof ProjectConfigSchema>;\n\nexport type BladeUnifiedConfig = z.infer<typeof BladeUnifiedConfigSchema>;\nexport type ConfigState = z.infer<typeof ConfigStateSchema>;\n\n// \u914D\u7F6E\u5C42\u7EA7\nexport enum ConfigLayer {\n  GLOBAL = 'global',\n  ENV = 'env',\n  USER = 'user',\n  PROJECT = 'project',\n}\n\n// \u914D\u7F6E\u52A0\u8F7D\u4F18\u5148\u7EA7\uFF08\u4F18\u5148\u7EA7\u9AD8\u7684\u8986\u76D6\u4F18\u5148\u7EA7\u4F4E\u7684\uFF09\nexport const CONFIG_PRIORITY: ConfigLayer[] = [\n  ConfigLayer.ENV,      // \u6700\u9AD8\u4F18\u5148\u7EA7\uFF1A\u73AF\u5883\u53D8\u91CF\n  ConfigLayer.USER,     // \u7B2C\u4E8C\u4F18\u5148\u7EA7\uFF1A\u7528\u6237\u914D\u7F6E\n  ConfigLayer.PROJECT,  // \u7B2C\u4E09\u4F18\u5148\u7EA7\uFF1A\u9879\u76EE\u914D\u7F6E\n  ConfigLayer.GLOBAL,   // \u6700\u4F4E\u4F18\u5148\u7EA7\uFF1A\u5168\u5C40\u9ED8\u8BA4\n];\n\n// \u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84\u914D\u7F6E\nexport const CONFIG_PATHS = {\n  global: {\n    userConfig: `${process.env.HOME || process.env.USERPROFILE}/.blade/config.json`,\n    userConfigLegacy: `${process.env.HOME || process.env.USERPROFILE}/.blade-config.json`,\n    trustedFolders: `${process.env.HOME || process.env.USERPROFILE}/.blade/trusted-folders.json`,\n  },\n  project: {\n    bladeConfig: './.blade/settings.local.json',\n    packageJson: './package.json',\n    bladeConfigRoot: './.blade/config.json',\n  },\n  env: {\n    configFile: process.env.BLADE_CONFIG_FILE || '',\n  },\n};", "/**\n * \u914D\u7F6E\u7CFB\u7EDF\u6838\u5FC3 API\n * \u63D0\u4F9B\u7EAF\u51FD\u6570\u5F0F\u7684\u914D\u7F6E\u5408\u5E76\u529F\u80FD\uFF0C\u4E0D\u5305\u542B I/O \u64CD\u4F5C\n */\n\nimport { z } from 'zod';\nimport {\n  AuthConfigSchema,\n  UIConfigSchema,\n  SecurityConfigSchema,\n  ToolsConfigSchema,\n  MCPConfigSchema,\n  TelemetryConfigSchema,\n  UsageConfigSchema,\n  DebugConfigSchema,\n  GlobalConfigSchema,\n  EnvConfigSchema,\n  UserConfigSchema,\n  ProjectConfigSchema,\n  BladeUnifiedConfigSchema,\n  ConfigLayer,\n  AuthConfig,\n  UIConfig,\n  SecurityConfig,\n  ToolsConfig,\n  MCPConfig,\n  TelemetryConfig,\n  UsageConfig,\n  DebugConfig,\n  GlobalConfig,\n  EnvConfig,\n  UserConfig,\n  ProjectConfig,\n  BladeUnifiedConfig\n} from '../types/config.js';\n\n/**\n * \u914D\u7F6E\u5C42\u7C7B\u578B\n */\nexport interface ConfigLayers {\n  global?: Partial<GlobalConfig>;\n  env?: Partial<EnvConfig>;\n  user?: Partial<UserConfig>;\n  project?: Partial<ProjectConfig>;\n}\n\n/**\n * \u914D\u7F6E\u5408\u5E76\u9009\u9879\n */\nexport interface ConfigMergeOptions {\n  /** \u662F\u5426\u9A8C\u8BC1\u6700\u7EC8\u914D\u7F6E */\n  validate?: boolean;\n  /** \u662F\u5426\u629B\u51FA\u9A8C\u8BC1\u9519\u8BEF */\n  throwOnError?: boolean;\n  /** \u914D\u7F6E\u52A0\u8F7D\u4F18\u5148\u7EA7 */\n  priority?: ConfigLayer[];\n}\n\n/**\n * \u914D\u7F6E\u5408\u5E76\u7ED3\u679C\n */\nexport interface ConfigMergeResult {\n  config: BladeUnifiedConfig;\n  warnings: string[];\n  errors: string[];\n}\n\n/**\n * \u521B\u5EFA\u5408\u5E76\u540E\u7684\u914D\u7F6E\n * \u8FD9\u662F\u4E00\u4E2A\u7EAF\u51FD\u6570\uFF0C\u4E0D\u6267\u884C\u4EFB\u4F55 I/O \u64CD\u4F5C\n */\nexport function createConfig(\n  layers: ConfigLayers,\n  options: ConfigMergeOptions = {}\n): ConfigMergeResult {\n  const {\n    validate = true,\n    throwOnError = false,\n    priority = [ConfigLayer.ENV, ConfigLayer.USER, ConfigLayer.PROJECT, ConfigLayer.GLOBAL]\n  } = options;\n\n  const warnings: string[] = [];\n  const errors: string[] = [];\n\n  try {\n    const reversedPriority = priority.slice().reverse();\n    let merged: any = {};\n    for (const layer of reversedPriority) {\n      const layerConfig = layers[layer.toLowerCase() as keyof ConfigLayers];\n      if (layerConfig) {\n        merged = deepMerge(merged, layerConfig, new WeakSet());\n      }\n    }\n\n    const configWithDefaults = ensureRequiredFields(merged);\n\n    if (validate) {\n      const validationResult = BladeUnifiedConfigSchema.safeParse(configWithDefaults);\n      if (!validationResult.success) {\n          const formattedErrors = validationResult.error.errors.map(e => `${e.path.join('.')}: ${e.message}`);\n          errors.push(...formattedErrors);\n      }\n    }\n\n    if (errors.length > 0 && throwOnError) {\n      throw new Error(`\u914D\u7F6E\u9A8C\u8BC1\u5931\u8D25: ${errors.join(', ')}`);\n    }\n\n    return {\n      config: configWithDefaults,\n      warnings,\n      errors\n    };\n  } catch (error) {\n    if (throwOnError) {\n      throw error;\n    }\n    \n    errors.push(error instanceof Error ? error.message : '\u672A\u77E5\u914D\u7F6E\u5408\u5E76\u9519\u8BEF');\n    \n    return {\n      config: createDefaultConfig(),\n      warnings,\n      errors\n    };\n  }\n}\n\n/**\n * \u6309\u7167\u4F18\u5148\u7EA7\u5408\u5E76\u914D\u7F6E\u5C42\n */\nfunction mergeConfigLayers(\n  layers: ConfigLayers,\n  priority: ConfigLayer[]\n): BladeUnifiedConfig {\n  let merged: any = {};\n\n  // \u6309\u7167\u4F18\u5148\u7EA7\u987A\u5E8F\u4ECE\u4F4E\u5230\u9AD8\u5408\u5E76\n  for (const layer of priority.slice().reverse()) {\n    const layerConfig = layers[layer.toLowerCase() as keyof ConfigLayers];\n    if (layerConfig) {\n      merged = deepMerge(merged, layerConfig);\n    }\n  }\n\n  // \u786E\u4FDD\u6240\u6709\u5FC5\u9700\u5B57\u6BB5\u90FD\u6709\u9ED8\u8BA4\u503C\n  return ensureRequiredFields(merged);\n}\n\n/**\n * \u6DF1\u5EA6\u5408\u5E76\u5BF9\u8C61\n */\nfunction deepMerge(target: any, source: any, seen = new WeakSet()): any {\n  if (source === null || typeof source !== 'object') {\n    return source;\n  }\n\n  if (seen.has(source)) {\n    return '[Circular]';\n  }\n  seen.add(source);\n\n  if (Array.isArray(source)) {\n    return [...(Array.isArray(target) ? target : []), ...source];\n  }\n\n  const result = { ...target };\n\n  for (const [key, value] of Object.entries(source)) {\n    if (value === undefined) {\n      continue;\n    }\n\n    if (key in result && typeof result[key] === 'object' && typeof value === 'object') {\n      result[key] = deepMerge(result[key], value, seen);\n    } else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * \u9A8C\u8BC1\u914D\u7F6E\n */\nfunction validateConfig(config: any): { warnings: string[]; errors: string[] } {\n  const warnings: string[] = [];\n  const errors: string[] = [];\n\n  try {\n    // \u9A8C\u8BC1\u6574\u4F53\u914D\u7F6E\u7ED3\u6784\n    BladeUnifiedConfigSchema.parse(config);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      errors.push(...error.errors.map(e => `${e.path.join('.')}: ${e.message}`));\n    } else {\n      errors.push('\u914D\u7F6E\u9A8C\u8BC1\u5931\u8D25');\n    }\n  }\n\n  // \u68C0\u67E5\u5404\u4E2A\u5B50\u914D\u7F6E\n  validateSubConfig(config.auth, AuthConfigSchema, 'auth', warnings, errors);\n  validateSubConfig(config.ui, UIConfigSchema, 'ui', warnings, errors);\n  validateSubConfig(config.security, SecurityConfigSchema, 'security', warnings, errors);\n  validateSubConfig(config.tools, ToolsConfigSchema, 'tools', warnings, errors);\n  validateSubConfig(config.mcp, MCPConfigSchema, 'mcp', warnings, errors);\n  validateSubConfig(config.telemetry, TelemetryConfigSchema, 'telemetry', warnings, errors);\n  validateSubConfig(config.usage, UsageConfigSchema, 'usage', warnings, errors);\n  validateSubConfig(config.debug, DebugConfigSchema, 'debug', warnings, errors);\n\n  return { warnings, errors };\n}\n\n/**\n * \u9A8C\u8BC1\u5B50\u914D\u7F6E\n */\nfunction validateSubConfig(\n  config: any,\n  schema: z.ZodSchema,\n  path: string,\n  warnings: string[],\n  errors: string[]\n): void {\n  try {\n    schema.parse(config);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const configErrors = error.errors.map(e => `${path}.${e.path.join('.')}: ${e.message}`);\n      errors.push(...configErrors);\n    }\n  }\n}\n\n/**\n * \u786E\u4FDD\u6240\u6709\u5FC5\u9700\u5B57\u6BB5\u90FD\u6709\u9ED8\u8BA4\u503C\n */\nfunction ensureRequiredFields(config: any): BladeUnifiedConfig {\n  const result = { ...config };\n\n  // \u4E3A\u6BCF\u4E2A\u914D\u7F6E\u90E8\u5206\u63D0\u4F9B\u9ED8\u8BA4\u503C\n  result.auth = { ...AuthConfigSchema.parse({}), ...(result.auth || {}) };\n  result.ui = { ...UIConfigSchema.parse({}), ...(result.ui || {}) };\n  result.security = { ...SecurityConfigSchema.parse({}), ...(result.security || {}) };\n  result.tools = { ...ToolsConfigSchema.parse({}), ...(result.tools || {}) };\n  result.mcp = { ...MCPConfigSchema.parse({}), ...(result.mcp || {}) };\n  result.telemetry = { ...TelemetryConfigSchema.parse({}), ...(result.telemetry || {}) };\n  result.usage = { ...UsageConfigSchema.parse({}), ...(result.usage || {}) };\n  result.debug = { ...DebugConfigSchema.parse({}), ...(result.debug || {}) };\n\n  // \u786E\u4FDD\u5143\u6570\u636E\u5B57\u6BB5\u5B58\u5728\n  result.metadata = {\n    sources: ['global'],\n    loadedAt: new Date().toISOString(),\n    configVersion: '1.0.0',\n    validationErrors: [],\n    ...(result.metadata || {})\n  };\n\n  return result as BladeUnifiedConfig;\n}\n\n/**\n * \u521B\u5EFA\u9ED8\u8BA4\u914D\u7F6E\n */\nfunction createDefaultConfig(): BladeUnifiedConfig {\n  return BladeUnifiedConfigSchema.parse({\n    auth: AuthConfigSchema.parse({}),\n    ui: UIConfigSchema.parse({}),\n    security: SecurityConfigSchema.parse({}),\n    tools: ToolsConfigSchema.parse({}),\n    mcp: MCPConfigSchema.parse({}),\n    telemetry: TelemetryConfigSchema.parse({}),\n    usage: UsageConfigSchema.parse({}),\n    debug: DebugConfigSchema.parse({}),\n    metadata: {\n      sources: ['global'],\n      loadedAt: new Date().toISOString(),\n      configVersion: '1.0.0',\n      validationErrors: []\n    }\n  });\n}\n\n/**\n * \u5DE5\u5177\u51FD\u6570\uFF1A\u4ECE\u6241\u5E73\u914D\u7F6E\u8F6C\u6362\u4E3A\u5206\u5C42\u914D\u7F6E\n */\nexport function flattenToLayered(flatConfig: Record<string, any>): ConfigLayers {\n  const result: ConfigLayers = {};\n\n  // \u8FD9\u91CC\u53EF\u4EE5\u6839\u636E\u9700\u8981\u5B9E\u73B0\u6241\u5E73\u914D\u7F6E\u5230\u5206\u5C42\u914D\u7F6E\u7684\u8F6C\u6362\u903B\u8F91\n  // \u76EE\u524D\u8FD4\u56DE\u4E00\u4E2A\u7A7A\u7684\u5206\u5C42\u914D\u7F6E\n  return result;\n}\n\n/**\n * \u5DE5\u5177\u51FD\u6570\uFF1A\u4ECE\u5206\u5C42\u914D\u7F6E\u8F6C\u6362\u4E3A\u6241\u5E73\u914D\u7F6E\n */\nexport function layeredToFlatten(layeredConfig: ConfigLayers): Record<string, any> {\n  const result: Record<string, any> = {};\n\n  // \u8FD9\u91CC\u53EF\u4EE5\u6839\u636E\u9700\u8981\u5B9E\u73B0\u5206\u5C42\u914D\u7F6E\u5230\u6241\u5E73\u914D\u7F6E\u7684\u8F6C\u6362\u903B\u8F91\n  // \u76EE\u524D\u8FD4\u56DE\u4E00\u4E2A\u7A7A\u7684\u6241\u5E73\u914D\u7F6E\n  return result;\n}", "/**\n * \u5B89\u5168\u7684 HTTP \u5BA2\u6237\u7AEF\n * \u63D0\u4F9B\u589E\u5F3A\u7684\u5B89\u5168\u7279\u6027\n */\n\nimport axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios';\nimport https from 'https';\nimport { createHash, createHmac } from 'crypto';\nimport crypto from 'crypto';\n\nexport interface SecureHttpClientOptions {\n  baseURL?: string;\n  timeout?: number;\n  retryAttempts?: number;\n  retryDelay?: number;\n  validateCertificates?: boolean;\n  enforceTLS12?: boolean;\n  allowedHosts?: string[];\n  rateLimit?: {\n    requests: number;\n    period: number; // \u6BEB\u79D2\n  };\n}\n\nexport class SecureHttpClient {\n  private client: AxiosInstance;\n  private rateLimitMap = new Map<string, { count: number; resetTime: number }>();\n  private options: Required<SecureHttpClientOptions>;\n\n  constructor(options: SecureHttpClientOptions = {}) {\n    this.options = {\n      baseURL: options.baseURL || '',\n      timeout: options.timeout || 30000,\n      retryAttempts: options.retryAttempts || 3,\n      retryDelay: options.retryDelay || 1000,\n      validateCertificates: options.validateCertificates !== false,\n      enforceTLS12: options.enforceTLS12 !== false,\n      allowedHosts: options.allowedHosts || [],\n      rateLimit: options.rateLimit || { requests: 100, period: 60000 },\n    };\n\n    this.client = this.createSecureClient();\n  }\n\n  /**\n   * \u521B\u5EFA\u5B89\u5168\u7684 Axios \u5BA2\u6237\u7AEF\n   */\n  private createSecureClient(): AxiosInstance {\n    const agent = new https.Agent({\n      // \u5F3A\u5236 TLS 1.2+\n      secureProtocol: this.options.enforceTLS12 ? 'TLSv1_2_method' : undefined,\n      // \u9A8C\u8BC1\u8BC1\u4E66\n      rejectUnauthorized: this.options.validateCertificates,\n    });\n\n    const client = axios.create({\n      baseURL: this.options.baseURL,\n      timeout: this.options.timeout,\n      httpsAgent: agent,\n    });\n\n    // \u8BF7\u6C42\u62E6\u622A\u5668 - \u5B89\u5168\u68C0\u67E5\n    client.interceptors.request.use(\n      (config) => {\n        // \u4E3B\u673A\u9A8C\u8BC1\n        if (this.options.allowedHosts && this.options.allowedHosts.length > 0) {\n          const url = new URL(config.url || '', config.baseURL);\n          if (!this.options.allowedHosts.includes(url.hostname)) {\n            throw new Error(`Host ${url.hostname} is not allowed`);\n          }\n        }\n\n        // \u901F\u7387\u9650\u5236\n        if (this.options.rateLimit) {\n          const now = Date.now();\n          const host = config.url ? new URL(config.url, config.baseURL).hostname : 'default';\n          const rateLimitInfo = this.rateLimitMap.get(host);\n\n          if (rateLimitInfo) {\n            if (now < rateLimitInfo.resetTime) {\n              if (rateLimitInfo.count >= this.options.rateLimit.requests) {\n                throw new Error(`Rate limit exceeded for host ${host}`);\n              }\n              rateLimitInfo.count++;\n            } else {\n              rateLimitInfo.count = 1;\n              rateLimitInfo.resetTime = now + this.options.rateLimit.period;\n            }\n          } else {\n            this.rateLimitMap.set(host, {\n              count: 1,\n              resetTime: now + this.options.rateLimit.period,\n            });\n          }\n        }\n\n        return config;\n      },\n      (error) => Promise.reject(error)\n    );\n\n    return client;\n  }\n\n  /**\n   * GET \u8BF7\u6C42\n   */\n  async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.request<T>({ ...config, method: 'GET', url });\n  }\n\n  /**\n   * POST \u8BF7\u6C42\n   */\n  async post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.request<T>({ ...config, method: 'POST', url, data });\n  }\n\n  /**\n   * PUT \u8BF7\u6C42\n   */\n  async put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.request<T>({ ...config, method: 'PUT', url, data });\n  }\n\n  /**\n   * DELETE \u8BF7\u6C42\n   */\n  async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.request<T>({ ...config, method: 'DELETE', url });\n  }\n\n  /**\n   * \u901A\u7528\u8BF7\u6C42\u65B9\u6CD5\n   */\n  async request<T = any>(config: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    let lastError: any;\n    \n    for (let attempt = 0; attempt <= this.options.retryAttempts; attempt++) {\n      try {\n        const response = await this.client.request<T>(config);\n        return response;\n      } catch (error) {\n        lastError = error;\n        \n        // \u5982\u679C\u4E0D\u5E94\u8BE5\u91CD\u8BD5\uFF0C\u5219\u7ACB\u5373\u629B\u51FA\u9519\u8BEF\n        if (!this.shouldRetry(error) || attempt === this.options.retryAttempts) {\n          throw error;\n        }\n        \n        // \u7B49\u5F85\u91CD\u8BD5\u5EF6\u8FDF\n        await new Promise(resolve => setTimeout(resolve, this.options.retryDelay * Math.pow(2, attempt)));\n      }\n    }\n    \n    throw lastError;\n  }\n\n  /**\n   * \u5224\u65AD\u662F\u5426\u5E94\u8BE5\u91CD\u8BD5\n   */\n  private shouldRetry(error: any): boolean {\n    // \u53EA\u5BF9\u67D0\u4E9B\u9519\u8BEF\u7801\u91CD\u8BD5\n    const retryableCodes = [\n      'ECONNRESET',\n      'ECONNABORTED',\n      'ETIMEDOUT',\n      'ENOTFOUND',\n      'EAI_AGAIN',\n    ];\n    \n    const retryableStatus = [408, 429, 500, 502, 503, 504];\n    \n    return (\n      retryableCodes.includes(error.code) ||\n      (error.response && retryableStatus.includes(error.response.status))\n    );\n  }\n}\n\n// \u521B\u5EFA\u9ED8\u8BA4\u5B9E\u4F8B\u5BFC\u51FA\nexport const secureHttpClient = new SecureHttpClient();", "/**\n * \u8DEF\u5F84\u5B89\u5168\u5DE5\u5177\n * \u9632\u6B62\u8DEF\u5F84\u904D\u5386\u653B\u51FB\n */\n\nimport { resolve, normalize, relative, dirname, join } from 'path';\nimport { constants, accessSync } from 'fs';\nimport { homedir } from 'os';\n\nexport class PathSecurity {\n  private static readonly ALLOWED_SCHEMES = ['file:', ''];\n  private static readonly MAX_PATH_LENGTH = 4096; // Linux MAX_PATH\n  private static readonly SUSPICIOUS_PATTERNS = [\n    /\\.\\.\\//g,          // \u76F8\u5BF9\u8DEF\u5F84\n    /\\.\\.\\\\/g,          // Windows \u76F8\u5BF9\u8DEF\u5F84\n    /^[/\\\\]/,           // \u7EDD\u5BF9\u8DEF\u5F84\n    /~\\//,              // Home \u76EE\u5F55\u7B80\u5199\n    /\\$[A-Z_]/,         // \u73AF\u5883\u53D8\u91CF\n  ];\n\n  /**\n   * \u5B89\u5168\u5730\u89E3\u6790\u548C\u9A8C\u8BC1\u6587\u4EF6\u8DEF\u5F84\n   * @param userPath \u7528\u6237\u63D0\u4F9B\u7684\u8DEF\u5F84\n   * @param baseDir \u5141\u8BB8\u7684\u57FA\u7840\u76EE\u5F55\uFF08\u53EF\u9009\uFF09\n   * @param options \u914D\u7F6E\u9009\u9879\n   * @returns \u89E3\u6790\u540E\u7684\u5B89\u5168\u8DEF\u5F84\n   * @throws Error \u5982\u679C\u8DEF\u5F84\u4E0D\u5B89\u5168\n   */\n  static async securePath(\n    userPath: string, \n    baseDir?: string,\n    options: {\n      allowAbsolute?: boolean;\n      checkExistence?: boolean;\n      allowedExtensions?: string[];\n      maxDepth?: number;\n    } = {}\n  ): Promise<string> {\n    const {\n      allowAbsolute = false,\n      checkExistence = false,\n      allowedExtensions,\n      maxDepth = 10\n    } = options;\n\n    // 1. \u57FA\u672C\u9A8C\u8BC1\n    if (!userPath || typeof userPath !== 'string') {\n      throw new Error('\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A');\n    }\n\n    if (userPath.length > this.MAX_PATH_LENGTH) {\n      throw new Error('\u8DEF\u5F84\u8FC7\u957F');\n    }\n\n    // 2. \u68C0\u67E5\u8DEF\u5F84\u534F\u8BAE\n    const hasScheme = /^[a-zA-Z]+:/.test(userPath);\n    if (hasScheme) {\n      const scheme = userPath.split(':')[0] + ':';\n      if (!this.ALLOWED_SCHEMES.includes(scheme)) {\n        throw new Error(`\u4E0D\u652F\u6301\u7684\u8DEF\u5F84\u534F\u8BAE: ${scheme}`);\n      }\n      userPath = userPath.substring(scheme.length);\n    }\n\n    // 3. \u5C55\u5F00 ~ \u548C\u73AF\u5883\u53D8\u91CF\uFF08\u5982\u679C\u4F7F\u7528\u4E86\uFF09\n    let expandedPath = userPath;\n    if (userPath.startsWith('~/')) {\n      expandedPath = join(homedir(), userPath.substring(2));\n    }\n\n    // 4. \u89C4\u8303\u5316\u8DEF\u5F84\n    const normalizedPath = normalize(expandedPath);\n    \n    // 5. \u68C0\u67E5\u53EF\u7591\u6A21\u5F0F\n    for (const pattern of this.SUSPICIOUS_PATTERNS) {\n      if (pattern.test(normalizedPath)) {\n        throw new Error('\u68C0\u6D4B\u5230\u6F5C\u5728\u7684\u8DEF\u5F84\u904D\u5386\u653B\u51FB');\n      }\n    }\n\n    // 6. \u89E3\u6790\u4E3A\u7EDD\u5BF9\u8DEF\u5F84\n    const resolvedPath = resolve(baseDir || process.cwd(), normalizedPath);\n\n    // 7. \u68C0\u67E5\u662F\u5426\u5728\u5141\u8BB8\u7684\u57FA\u7840\u76EE\u5F55\u5185\n    if (baseDir) {\n      const normalizedBase = normalize(baseDir);\n      const relativePath = relative(normalizedBase, resolvedPath);\n      \n      if (relativePath.startsWith('..') || \n          relativePath === '' || \n          this.countPathSegments(relativePath) > maxDepth) {\n        throw new Error('\u8DEF\u5F84\u8D85\u51FA\u5141\u8BB8\u7684\u76EE\u5F55\u8303\u56F4');\n      }\n    } else if (!allowAbsolute && !resolvedPath.startsWith(process.cwd())) {\n      // \u5982\u679C\u4E0D\u5141\u8BB8\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u786E\u4FDD\u5728\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55\u5185\n      const relativePath = relative(process.cwd(), resolvedPath);\n      if (relativePath.startsWith('..')) {\n        throw new Error('\u53EA\u80FD\u5728\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55\u5185\u64CD\u4F5C');\n      }\n    }\n\n    // 8. \u68C0\u67E5\u6587\u4EF6\u6269\u5C55\u540D\n    if (allowedExtensions) {\n      const ext = resolvedPath.split('.').pop()?.toLowerCase();\n      const extWithDot = ext ? `.${ext}` : '';\n      \n      if (!allowedExtensions.some(allowed => \n        allowed === extWithDot || allowed === ext\n      )) {\n        throw new Error(`\u4E0D\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B: ${extWithDot}`);\n      }\n    }\n\n    // 9. \u68C0\u67E5\u8DEF\u5F84\u662F\u5426\u5B58\u5728\uFF08\u53EF\u9009\uFF09\n    if (checkExistence) {\n      try {\n        accessSync(resolvedPath, constants.F_OK);\n      } catch {\n        throw new Error('\u8DEF\u5F84\u4E0D\u5B58\u5728');\n      }\n    }\n\n    return resolvedPath;\n  }\n\n  /**\n   * \u68C0\u67E5\u8DEF\u5F84\u662F\u5426\u5728\u5B89\u5168\u8303\u56F4\u5185\n   * @param path \u8981\u68C0\u67E5\u7684\u8DEF\u5F84\n   * @param allowedDirs \u5141\u8BB8\u7684\u76EE\u5F55\u5217\u8868\n   */\n  static isInAllowedDirs(path: string, allowedDirs: string[]): boolean {\n    const resolvedPath = resolve(path);\n    \n    return allowedDirs.some(dir => {\n      const resolvedDir = resolve(dir);\n      const relativePath = relative(resolvedDir, resolvedPath);\n      return !relativePath.startsWith('..');\n    });\n  }\n\n  /**\n   * \u83B7\u53D6\u5B89\u5168\u7684\u4E34\u65F6\u6587\u4EF6\u8DEF\u5F84\n   * @param prefix \u6587\u4EF6\u540D\u524D\u7F00\n   * @param extension \u6587\u4EF6\u6269\u5C55\u540D\n   */\n  static getSafeTempPath(prefix: string = 'blade', extension: string = 'tmp'): string {\n    const tempDir = require('os').tmpdir();\n    const randomSuffix = Math.random().toString(36).substring(2, 15);\n    const filename = `${prefix}-${randomSuffix}.${extension}`;\n    return join(tempDir, filename);\n  }\n\n  /**\n   * \u6E05\u7406\u8DEF\u5F84\u4E2D\u7684\u5371\u9669\u5B57\u7B26\n   * @param path \u8981\u6E05\u7406\u7684\u8DEF\u5F84\n   */\n  static sanitizePath(path: string): string {\n    return path\n      .replace(/[<>:\"|?*]/g, '_')  // \u66FF\u6362 Windows \u975E\u6CD5\u5B57\u7B26\n      .replace(/\\s+/g, '_')         // \u66FF\u6362\u7A7A\u683C\n      .replace(/^\\./, '_')           // \u907F\u514D\u4EE5\u70B9\u5F00\u5934\n      .replace(/\\.$/, '_')           // \u907F\u514D\u4EE5\u70B9\u7ED3\u5C3E\n      .substring(0, 255);           // \u9650\u5236\u957F\u5EA6\n  }\n\n  /**\n   * \u8BA1\u7B97\u8DEF\u5F84\u6BB5\u6570\n   */\n  private static countPathSegments(path: string): number {\n    return path.split(/[\\\\/]/).filter(Boolean).length;\n  }\n\n  /**\n   * \u83B7\u53D6\u9ED8\u8BA4\u7684\u5141\u8BB8\u76EE\u5F55\u5217\u8868\n   */\n  static getDefaultAllowedDirs(): string[] {\n    return [\n      process.cwd(),\n      join(homedir(), '.blade'),\n      join(homedir(), '.config', 'blade'),\n      require('os').tmpdir(),\n    ];\n  }\n}\n// \u521B\u5EFA\u9ED8\u8BA4\u5B9E\u4F8B\u5BFC\u51FA\nexport const pathSecurity = new PathSecurity();\n", "/**\n * \u5B89\u5168\u9519\u8BEF\u5904\u7406\u5DE5\u5177\n * \u9632\u6B62\u654F\u611F\u4FE1\u606F\u6CC4\u9732\n */\n\nimport { PathSecurity } from './path-security.js';\n\nexport interface ErrorData {\n  code?: string | number;\n  stack?: string;\n  cause?: Error;\n  context?: Record<string, any>;\n  timestamp: string;\n}\n\nexport class ErrorHandler {\n  // \u654F\u611F\u4FE1\u606F\u6A21\u5F0F\n  private static readonly SENSITIVE_PATTERNS = new Map([\n    // API Keys\n    [/apiKey[\"\\']?\\s*[:=]\\s*[\"\\']([^\"']+)[\"\\']/gi, 'apiKey=[REDACTED]'],\n    [/api[\"\\']?\\s*[:]\\s*[\"\\']([^\"']+)[\"\\']/gi, 'api=[REDACTED]'],\n    [/token[\"\\']?\\s*[:=]\\s*[\"\\']([^\"']+)[\"\\']/gi, 'token=[REDACTED]'],\n    [/secret[\"\\']?\\s*[:=]\\s*[\"\\']([^\"']+)[\"\\']/gi, 'secret=[REDACTED]'],\n    \n    // \u8BA4\u8BC1\u4FE1\u606F\n    [/password[\"\\']?\\s*[:=]\\s*[\"\\']([^\"']+)[\"\\']/gi, 'password=[REDACTED]'],\n    [/credential[\"\\']?\\s*[:=]\\s*[\"\\']([^\"']+)[\"\\']/gi, 'credential=[REDACTED]'],\n    [/auth[\"\\']?\\s*[:]\\s*[\"\\']([^\"']+)[\"\\']/gi, 'auth=[REDACTED]'],\n    \n    // URL \u4E2D\u7684\u8BA4\u8BC1\n    [/\\/\\/[^:@]+:[^@]+@/g, '//[REDACTED_USER]:[REDACTED_PASS]@'],\n    \n    // \u73AF\u5883\u53D8\u91CF\n    [/process\\.env\\.[a-zA-Z_][a-zA-Z0-9_]*/gi, 'process.env.[REDACTED_VAR]'],\n    \n    // \u672C\u5730\u6587\u4EF6\u8DEF\u5F84\n    [/[a-zA-Z]:\\\\[^\\\\\\]]*/gi, '[REDACTED_PATH]'],\n    [/\\/(home|Users)\\/[^\\/\\]]+\\/[^\\/\\]]*/gi, '[REDACTED_USER_PATH]'],\n    [/\\/tmp\\/[^\\/\\]]*/gi, '[REDACTED_TMP_PATH]'],\n    [/\\.config\\/[^\\/\\]]*/gi, '[REDACTED_CONFIG_PATH]'],\n    \n    // \u6570\u636E\u5E93\u8FDE\u63A5\u5B57\u7B26\u4E32\n    [/mongodb:\\/\\/[^:@]+:[^@]+@/gi, 'mongodb://[REDACTED_USER]:[REDACTED_PASS]@'],\n    [/postgresql:\\/\\/[^:@]+:[^@]+@/gi, 'postgresql://[REDACTED_USER]:[REDACTED_PASS]@'],\n    [/mysql:\\/\\/[^:@]+:[^@]+@/gi, 'mysql://[REDACTED_USER]:[REDACTED_PASS]@'],\n    \n    // AWS \u51ED\u8BC1\n    [/AKIA[0-9A-Z]{16}/gi, '[REDACTED_AWS_KEY]'],\n    \n    // \u5176\u4ED6\u654F\u611F\u4FE1\u606F\n    [/Bearer [a-zA-Z0-9_\\-\\.=+/]{50,}/gi, 'Bearer [REDACTED_TOKEN]'],\n    [/sk-[a-zA-Z0-9_\\-\\.=+/]{20,}/gi, '[REDACTED_SK]'],\n  ]);\n\n  // \u9519\u8BEF\u4EE3\u7801\u6620\u5C04\n  private static readonly ERROR_CODE_MAPPING = new Map([\n    ['ENOENT', { code: 'FILE_NOT_FOUND', message: '\u6587\u4EF6\u4E0D\u5B58\u5728' }],\n    ['EACCES', { code: 'PERMISSION_DENIED', message: '\u6743\u9650\u4E0D\u8DB3' }],\n    ['EISDIR', { code: 'IS_DIRECTORY', message: '\u76EE\u6807\u662F\u4E00\u4E2A\u76EE\u5F55' }],\n    ['ENOTDIR', { code: 'NOT_DIRECTORY', message: '\u76EE\u6807\u4E0D\u662F\u76EE\u5F55' }],\n    ['EEXIST', { code: 'FILE_EXISTS', message: '\u6587\u4EF6\u5DF2\u5B58\u5728' }],\n    ['EINVAL', { code: 'INVALID_ARGUMENT', message: '\u65E0\u6548\u53C2\u6570' }],\n    ['ENOTEMPTY', { code: 'DIRECTORY_NOT_EMPTY', message: '\u76EE\u5F55\u4E0D\u4E3A\u7A7A' }],\n    ['EMFILE', { code: 'TOO_MANY_FILES', message: '\u6253\u5F00\u7684\u6587\u4EF6\u8FC7\u591A' }],\n    ['ETIMEDOUT', { code: 'TIMEOUT', message: '\u64CD\u4F5C\u8D85\u65F6' }],\n    ['ECONNREFUSED', { code: 'CONNECTION_REFUSED', message: '\u8FDE\u63A5\u88AB\u62D2\u7EDD' }],\n    ['ENOTFOUND', { code: 'HOST_NOT_FOUND', message: '\u4E3B\u673A\u672A\u627E\u5230' }],\n  ]);\n\n  /**\n   * \u521B\u5EFA\u7528\u6237\u53CB\u597D\u7684\u9519\u8BEF\u4FE1\u606F\n   * @param error \u539F\u59CB\u9519\u8BEF\n   * @param options \u9009\u9879\n   * @returns \u7528\u6237\u53CB\u597D\u7684\u9519\u8BEF\u4FE1\u606F\n   */\n  static createFriendlyError(\n    error: Error | string,\n    options: {\n      includeCode?: boolean;\n      includeStack?: boolean;\n      context?: Record<string, any>;\n    } = {}\n  ): {\n    success: false;\n    error: string;\n    code?: string;\n    data?: ErrorData;\n  } {\n    const { includeCode = false, includeStack = false, context = {} } = options;\n    \n    // \u5C06\u5B57\u7B26\u4E32\u8F6C\u6362\u4E3A\u9519\u8BEF\u5BF9\u8C61\n    const errorObj = typeof error === 'string' ? new Error(error) : error;\n    \n    // \u8131\u654F\u9519\u8BEF\u6D88\u606F\n    const sanitizedMessage = this.sanitizeError(errorObj.message);\n    \n    // \u83B7\u53D6\u6807\u51C6\u5316\u7684\u9519\u8BEF\u4EE3\u7801\n    const errorCode = this.getErrorCode(errorObj);\n    \n    // \u521B\u5EFA\u9519\u8BEF\u6570\u636E\n    const errorData: ErrorData = {\n      code: errorCode.code,\n      timestamp: new Date().toISOString(),\n      context: this.sanitizeContext(context),\n    };\n    \n    // \u5982\u679C\u9700\u8981\uFF0C\u5305\u542B\u8C03\u7528\u6808\n    if (includeStack && errorObj.stack) {\n      errorData.stack = this.sanitizeStack(errorObj.stack);\n    }\n    \n    // \u6784\u5EFA\u7528\u6237\u53CB\u597D\u7684\u6D88\u606F\n    let userMessage = errorCode.message || sanitizedMessage;\n    \n    // \u6DFB\u52A0\u89E3\u51B3\u65B9\u6848\uFF08\u5982\u679C\u6709\uFF09\n    const solution = this.getSolution(errorCode.code);\n    if (solution) {\n      userMessage += `\\n\u5EFA\u8BAE: ${solution}`;\n    }\n    \n    return {\n      success: false,\n      error: userMessage,\n      code: includeCode ? errorCode.code : undefined,\n      data: process.env.NODE_ENV === 'development' ? errorData : undefined,\n    };\n  }\n\n  /**\n   * \u8131\u654F\u9519\u8BEF\u6D88\u606F\n   * @param errorMessage \u9519\u8BEF\u6D88\u606F\n   * @returns \u8131\u654F\u540E\u7684\u6D88\u606F\n   */\n  static sanitizeError(errorMessage: string): string {\n    let sanitized = errorMessage;\n\n    // \u5E94\u7528\u6240\u6709\u654F\u611F\u4FE1\u606F\u6A21\u5F0F\n    for (const [pattern, replacement] of this.SENSITIVE_PATTERNS) {\n      sanitized = sanitized.replace(pattern, replacement);\n    }\n\n    // \u8131\u654F\u6587\u4EF6\u8DEF\u5F84\n    if (sanitized.includes('/') || sanitized.includes('\\\\')) {\n      sanitized = this.sanitizeFilePaths(sanitized);\n    }\n\n    // \u8131\u654F\u6570\u5B57 ID\uFF08\u53EF\u80FD\u662F\u654F\u611F\u6570\u636E\uFF09\n    sanitized = sanitized.replace(/\\b\\d{4,}\\b/g, '[ID]');\n\n    // \u9650\u5236\u9519\u8BEF\u6D88\u606F\u957F\u5EA6\n    if (sanitized.length > 500) {\n      sanitized = sanitized.substring(0, 497) + '...';\n    }\n\n    return sanitized.trim();\n  }\n\n  /**\n   * \u8131\u654F\u6587\u4EF6\u8DEF\u5F84\n   * @param text \u5305\u542B\u8DEF\u5F84\u7684\u6587\u672C\n   * @returns \u8131\u654F\u540E\u7684\u6587\u672C\n   */\n  private static sanitizeFilePaths(text: string): string {\n    // \u66FF\u6362\u7528\u6237\u4E3B\u76EE\u5F55\n    const homeDir = require('os').homedir();\n    if (text.includes(homeDir)) {\n      text = text.replace(new RegExp(homeDir, 'g'), '~');\n    }\n\n    // \u66FF\u6362\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55\n    const cwd = process.cwd();\n    if (text.includes(cwd)) {\n      text = text.replace(new RegExp(cwd, 'g'), '[CWD]');\n    }\n\n    // \u4F7F\u7528 PathSecurity \u8FDB\u884C\u989D\u5916\u7684\u8DEF\u5F84\u6E05\u7406\n    try {\n      const paths = text.match(/\\/[^\\\\\\s\\]]+|\\\\[^\\\\\\s\\]]+/g) || [];\n      for (const path of paths) {\n        if (path.length > 20) {\n          const filename = path.split(/[\\\\/]/).pop() || '';\n          text = text.replace(path, `[PATH]${filename ? `/${filename}` : ''}`);\n        }\n      }\n    } catch {\n      // \u5982\u679C\u8DEF\u5F84\u89E3\u6790\u5931\u8D25\uFF0C\u7EE7\u7EED\u5904\u7406\n    }\n\n    return text;\n  }\n\n  /**\n   * \u83B7\u53D6\u6807\u51C6\u5316\u9519\u8BEF\u4EE3\u7801\n   * @param error \u9519\u8BEF\u5BF9\u8C61\n   * @returns \u6807\u51C6\u5316\u9519\u8BEF\u4EE3\u7801\u548C\u4FE1\u606F\n   */\n  private static getErrorCode(error: Error): { code: string; message?: string } {\n    // \u68C0\u67E5 Node.js \u7CFB\u7EDF\u9519\u8BEF\u4EE3\u7801\n    const nodeCode = (error as any).code;\n    if (nodeCode && this.ERROR_CODE_MAPPING.has(nodeCode)) {\n      return this.ERROR_CODE_MAPPING.get(nodeCode)!;\n    }\n\n    // \u68C0\u67E5\u7F51\u7EDC\u76F8\u5173\u9519\u8BEF\n    if (error.name === 'NetworkError' || error.message.includes('network')) {\n      return { code: 'NETWORK_ERROR', message: '\u7F51\u7EDC\u8FDE\u63A5\u9519\u8BEF' };\n    }\n\n    // \u68C0\u67E5\u9A8C\u8BC1\u9519\u8BEF\n    if (error.message.includes('invalid') || error.message.includes('validation')) {\n      return { code: 'VALIDATION_ERROR', message: '\u8F93\u5165\u9A8C\u8BC1\u5931\u8D25' };\n    }\n\n    // \u68C0\u67E5\u6743\u9650\u9519\u8BEF\n    if (error.message.includes('permission') || error.message.includes('unauthorized')) {\n      return { code: 'PERMISSION_ERROR', message: '\u6743\u9650\u4E0D\u8DB3' };\n    }\n\n    // \u68C0\u67E5\u8D85\u65F6\u9519\u8BEF\n    if (error.message.includes('timeout') || error.message.includes('timed out')) {\n      return { code: 'TIMEOUT_ERROR', message: '\u64CD\u4F5C\u8D85\u65F6' };\n    }\n\n    // \u9ED8\u8BA4\u9519\u8BEF\n    return {\n      code: 'UNKNOWN_ERROR',\n      message: '\u53D1\u751F\u4E86\u672A\u77E5\u9519\u8BEF',\n    };\n  }\n\n  /**\n   * \u83B7\u53D6\u9519\u8BEF\u89E3\u51B3\u65B9\u6848\n   * @param code \u9519\u8BEF\u4EE3\u7801\n   * @returns \u89E3\u51B3\u65B9\u6848\u5EFA\u8BAE\n   */\n  private static getSolution(code: string): string | null {\n    const solutions = new Map([\n      ['FILE_NOT_FOUND', '\u8BF7\u68C0\u67E5\u6587\u4EF6\u8DEF\u5F84\u662F\u5426\u6B63\u786E'],\n      ['PERMISSION_DENIED', '\u8BF7\u68C0\u67E5\u6587\u4EF6\u6743\u9650\u6216\u4F7F\u7528\u7BA1\u7406\u5458\u6743\u9650\u8FD0\u884C'],\n      ['NETWORK_ERROR', '\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5\u5E76\u91CD\u8BD5'],\n      ['VALIDATION_ERROR', '\u8BF7\u68C0\u67E5\u8F93\u5165\u6570\u636E\u683C\u5F0F\u662F\u5426\u6B63\u786E'],\n      ['TIMEOUT_ERROR', '\u8BF7\u589E\u52A0\u8D85\u65F6\u65F6\u95F4\u6216\u7A0D\u540E\u91CD\u8BD5'],\n      ['CONNECTION_REFUSED', '\u8BF7\u68C0\u67E5\u670D\u52A1\u662F\u5426\u6B63\u5728\u8FD0\u884C'],\n    ]);\n\n    return solutions.get(code) || null;\n  }\n\n  /**\n   * \u8131\u654F\u8C03\u7528\u6808\n   * @param stack \u8C03\u7528\u6808\u5B57\u7B26\u4E32\n   * @returns \u8131\u654F\u540E\u7684\u8C03\u7528\u6808\n   */\n  private static sanitizeStack(stack: string): string {\n    // \u79FB\u9664\u7528\u6237\u4E3B\u76EE\u5F55\u8DEF\u5F84\n    const homeDir = require('os').homedir();\n    let sanitized = stack.replace(new RegExp(homeDir, 'g'), '~');\n\n    // \u79FB\u9664\u9879\u76EE\u6839\u76EE\u5F55\u8DEF\u5F84\n    const projectRoot = process.cwd();\n    sanitized = sanitized.replace(new RegExp(projectRoot, 'g'), '[PROJECT]');\n\n    // \u79FB\u9664 Node.js \u5185\u90E8\u6A21\u5757\u8DEF\u5F84\uFF08\u8FC7\u957F\uFF09\n    sanitized = sanitized.replace(/node_modules\\/([a-zA-Z0-9_\\-@]+\\/)+/g, 'node_modules/');\n\n    // \u79FB\u9664\u884C\u53F7\u548C\u5217\u53F7\uFF08\u53EF\u80FD\u6CC4\u9732\u6587\u4EF6\u7ED3\u6784\uFF09\n    sanitized = sanitized.replace(/:\\d+:\\d+(\\))?$/gm, '$1');\n\n    return sanitized;\n  }\n\n  /**\n   * \u8131\u654F\u4E0A\u4E0B\u6587\u5BF9\u8C61\n   * @param context \u4E0A\u4E0B\u6587\u5BF9\u8C61\n   * @returns \u8131\u654F\u540E\u7684\u4E0A\u4E0B\u6587\n   */\n  private static sanitizeContext(context: Record<string, any>): Record<string, any> {\n    const sanitized: Record<string, any> = {};\n\n    for (const [key, value] of Object.entries(context)) {\n      // \u8DF3\u8FC7\u654F\u611F\u952E\u540D\n      if (this.isSensitiveKey(key)) {\n        sanitized[key] = '[REDACTED]';\n        continue;\n      }\n\n      // \u5904\u7406\u5B57\u7B26\u4E32\u503C\n      if (typeof value === 'string') {\n        sanitized[key] = this.sanitizeError(value);\n      }\n      // \u5904\u7406\u5BF9\u8C61\u503C\n      else if (value && typeof value === 'object') {\n        sanitized[key] = this.sanitizeContext(value);\n      }\n      // \u5176\u4ED6\u7C7B\u578B\u4FDD\u6301\u4E0D\u53D8\n      else {\n        sanitized[key] = value;\n      }\n    }\n\n    return sanitized;\n  }\n\n  /**\n   * \u68C0\u67E5\u952E\u540D\u662F\u5426\u654F\u611F\n   * @param key \u952E\u540D\n   * @returns \u662F\u5426\u654F\u611F\n   */\n  private static isSensitiveKey(key: string): boolean {\n    const sensitivePatterns = [\n      /password/i,\n      /secret/i,\n      /token/i,\n      /key/i,\n      /auth/i,\n      /credential/i,\n      /api/i,\n      /bearer/i,\n    ];\n\n    return sensitivePatterns.some(pattern => pattern.test(key));\n  }\n\n  /**\n   * \u5305\u88C5\u5F02\u6B65\u51FD\u6570\uFF0C\u63D0\u4F9B\u7EDF\u4E00\u7684\u9519\u8BEF\u5904\u7406\n   * @param fn \u8981\u5305\u88C5\u7684\u51FD\u6570\n   * @param options \u9009\u9879\n   * @returns \u5305\u88C5\u540E\u7684\u51FD\u6570\n   */\n  static wrapAsyncFunction<T extends any[], R>(\n    fn: (...args: T) => Promise<R>,\n    options: {\n      context?: Record<string, any>;\n      rethrow?: boolean;\n    } = {}\n  ) {\n    const { context = {}, rethrow = false } = options;\n\n    return async (...args: T): Promise<R> => {\n      try {\n        return await fn(...args);\n      } catch (error) {\n        const safeError = this.createFriendlyError(error as Error, {\n          includeStack: process.env.NODE_ENV === 'development',\n          context,\n        });\n\n        if (rethrow) {\n          throw new Error(safeError.error);\n        }\n\n        return safeError as any;\n      }\n    };\n  }\n\n  /**\n   * \u8BB0\u5F55\u9519\u8BEF\uFF08\u5B89\u5168\u8BB0\u5F55\uFF09\n   * @param error \u9519\u8BEF\u5BF9\u8C61\n   * @param logger \u65E5\u5FD7\u8BB0\u5F55\u5668\n   */\n  static logError(\n    error: Error | string,\n    logger: {\n      error: (message: string, data?: any) => void;\n      warn?: (message: string, data?: any) => void;\n    }\n  ): void {\n    const safeError = this.createFriendlyError(error, {\n      includeCode: true,\n      includeStack: true,\n    });\n\n    // \u4F7F\u7528\u65E5\u5FD7\u8BB0\u5F55\u5668\u8BB0\u5F55\n    logger.error('Error occurred', {\n      code: safeError.code,\n      message: safeError.error,\n      data: safeError.data,\n    });\n\n    // \u5982\u679C\u6709 warn \u65B9\u6CD5\u4E14\u662F\u53EF\u6062\u590D\u7684\u9519\u8BEF\uFF0C\u8BB0\u5F55\u8B66\u544A\n    if (logger.warn && safeError.data?.code && \n        ['TIMEOUT', 'NETWORK'].includes(safeError.data.code as string)) {\n      logger.warn('Recoverable error', {\n        code: safeError.code,\n        message: safeError.error,\n      });\n    }\n  }\n}\n// \u521B\u5EFA\u9ED8\u8BA4\u5B9E\u4F8B\u5BFC\u51FA\nexport const errorHandler = new ErrorHandler();\n", "/**\n * Blade \u9519\u8BEF\u5904\u7406\u6838\u5FC3\u7C7B\n * \u63D0\u4F9B\u7EDF\u4E00\u7684\u9519\u8BEF\u5904\u7406\u673A\u5236\n */\n\nimport {\n  ErrorDetails,\n  ErrorCodeModule,\n  ErrorSeverity,\n  ErrorCategory\n} from './types.js';\n\n/**\n * Blade \u6838\u5FC3\u9519\u8BEF\u7C7B\n * \u7EE7\u627F\u81EA Error\uFF0C\u63D0\u4F9B\u66F4\u4E30\u5BCC\u7684\u9519\u8BEF\u4FE1\u606F\u548C\u5904\u7406\u80FD\u529B\n */\nexport class BladeError extends Error {\n  public readonly module: ErrorCodeModule;\n  public readonly code: string;\n  public readonly severity: ErrorSeverity;\n  public readonly category: ErrorCategory;\n  public readonly context: Record<string, any>;\n  public readonly timestamp: number;\n  public readonly retryable: boolean;\n  public readonly recoverable: boolean;\n  public readonly suggestions: string[];\n  public readonly relatedErrors: BladeError[];\n  public readonly cause?: any;\n\n  constructor(\n    module: ErrorCodeModule,\n    code: string,\n    message: string,\n    details: Partial<ErrorDetails> = {}\n  ) {\n    super(message);\n    \n    this.name = 'BladeError';\n    this.module = module;\n    this.code = code;\n    this.severity = details.severity || ErrorSeverity.ERROR;\n    this.category = details.category || ErrorCategory.SYSTEM;\n    this.context = details.context || {};\n    this.timestamp = details.timestamp || Date.now();\n    this.retryable = details.retryable || false;\n    this.recoverable = details.recoverable || false;\n    this.suggestions = details.suggestions || [];\n    this.relatedErrors = [];\n    \n    // \u5904\u7406\u9519\u8BEF\u94FE\n    if (details.cause) {\n      this.cause = details.cause;\n    }\n    \n    // \u4FDD\u7559\u539F\u59CB\u5806\u6808\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, BladeError);\n    }\n  }\n\n  /**\n   * \u68C0\u67E5\u9519\u8BEF\u662F\u5426\u53EF\u91CD\u8BD5\n   */\n  isRetryable(): boolean {\n    return this.retryable;\n  }\n\n  /**\n   * \u68C0\u67E5\u9519\u8BEF\u662F\u5426\u53EF\u6062\u590D\n   */\n  isRecoverable(): boolean {\n    return this.recoverable;\n  }\n\n  /**\n   * \u83B7\u53D6\u4EBA\u7C7B\u53EF\u8BFB\u7684\u9519\u8BEF\u6D88\u606F\n   */\n  getHumanReadableMessage(): string {\n    const baseMessage = this.message;\n    if (this.suggestions.length > 0) {\n      return `${baseMessage}\\n\u5EFA\u8BAE: ${this.suggestions.join(', ')}`;\n    }\n    return baseMessage;\n  }\n\n  /**\n   * \u4ECE\u666E\u901A Error \u521B\u5EFA BladeError\n   */\n  static from(\n    error: Error,\n    module: ErrorCodeModule = ErrorCodeModule.CORE,\n    defaultMessage: string = '\u672A\u77E5\u9519\u8BEF'\n  ): BladeError {\n    if (error instanceof BladeError) {\n      return error;\n    }\n    \n    return new BladeError(module, 'UNKNOWN_ERROR', error.message || defaultMessage, {\n       severity: ErrorSeverity.ERROR,\n       category: ErrorCategory.SYSTEM,\n       context: { originalError: error.name, originalStack: error.stack }\n     });\n  }\n\n  /**\n   * \u914D\u7F6E\u76F8\u5173\u9519\u8BEF\u5DE5\u5382\u65B9\u6CD5\n   */\n  static config(code: string, message: string, details?: Partial<ErrorDetails>): BladeError {\n    return new BladeError(\n      ErrorCodeModule.CONFIG,\n      code,\n      message,\n      {\n        ...details,\n        category: ErrorCategory.CONFIGURATION\n      }\n    );\n  }\n\n  /**\n   * LLM \u76F8\u5173\u9519\u8BEF\u5DE5\u5382\u65B9\u6CD5\n   */\n  static llm(code: string, message: string, details?: Partial<ErrorDetails>): BladeError {\n    return new BladeError(\n      ErrorCodeModule.LLM,\n      code,\n      message,\n      {\n        ...details,\n        category: ErrorCategory.LLM\n      }\n    );\n  }\n\n  /**\n   * MCP \u76F8\u5173\u9519\u8BEF\u5DE5\u5382\u65B9\u6CD5\n   */\n  static mcp(code: string, message: string, details?: Partial<ErrorDetails>): BladeError {\n    return new BladeError(\n      ErrorCodeModule.MCP,\n      code,\n      message,\n      {\n        ...details,\n        category: ErrorCategory.API\n      }\n    );\n  }\n\n  /**\n   * Agent \u76F8\u5173\u9519\u8BEF\u5DE5\u5382\u65B9\u6CD5\n   */\n  static agent(code: string, message: string, details?: Partial<ErrorDetails>): BladeError {\n    return new BladeError(\n      ErrorCodeModule.TOOLS,\n      code,\n      message,\n      {\n        ...details,\n        category: ErrorCategory.BUSINESS\n      }\n    );\n  }\n\n  /**\n   * \u5DE5\u5177\u76F8\u5173\u9519\u8BEF\u5DE5\u5382\u65B9\u6CD5\n   */\n  static tools(code: string, message: string, details?: Partial<ErrorDetails>): BladeError {\n    return new BladeError(\n      ErrorCodeModule.TOOLS,\n      code,\n      message,\n      {\n        ...details,\n        category: ErrorCategory.API\n      }\n    );\n  }\n\n  /**\n   * \u5E8F\u5217\u5316\u4E3A JSON\n   */\n  toJSON(): Record<string, any> {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      module: this.module,\n      severity: this.severity,\n      category: this.category,\n      context: this.context,\n      stack: this.stack,\n      timestamp: this.timestamp,\n      retryable: this.retryable,\n      recoverable: this.recoverable,\n      suggestions: this.suggestions\n    };\n  }\n\n  /**\n   * \u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32\n   */\n  toString(): string {\n    return `${this.name} [${this.module}:${this.code}]: ${this.message}`;\n  }\n}\n\n/**\n * \u914D\u7F6E\u9519\u8BEF\u7C7B\n */\nexport class ConfigError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.CONFIG, code, message, {\n      ...details,\n      category: ErrorCategory.CONFIGURATION\n    });\n    this.name = 'ConfigError';\n  }\n}\n\n/**\n * LLM \u9519\u8BEF\u7C7B\n */\nexport class LLMError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.LLM, code, message, {\n      ...details,\n      category: ErrorCategory.LLM\n    });\n    this.name = 'LLMError';\n  }\n}\n\n/**\n * MCP \u9519\u8BEF\u7C7B\n */\nexport class MCPError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.MCP, code, message, {\n      ...details,\n      category: ErrorCategory.API\n    });\n    this.name = 'MCPError';\n  }\n}\n\n/**\n * Agent \u9519\u8BEF\u7C7B\n */\nexport class AgentError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.TOOLS, code, message, {\n      ...details,\n      category: ErrorCategory.BUSINESS\n    });\n    this.name = 'AgentError';\n  }\n}\n\n/**\n * \u5DE5\u5177\u9519\u8BEF\u7C7B\n */\nexport class ToolsError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.TOOLS, code, message, {\n      ...details,\n      category: ErrorCategory.API\n    });\n    this.name = 'ToolsError';\n  }\n}\n\n/**\n * \u6587\u4EF6\u7CFB\u7EDF\u9519\u8BEF\u7C7B\n */\nexport class FileSystemError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.FILE_SYSTEM, code, message, {\n      ...details,\n      category: ErrorCategory.FILE_SYSTEM\n    });\n    this.name = 'FileSystemError';\n  }\n}\n\n/**\n * \u7F51\u7EDC\u9519\u8BEF\u7C7B\n */\nexport class NetworkError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.NETWORK, code, message, {\n      ...details,\n      category: ErrorCategory.NETWORK\n    });\n    this.name = 'NetworkError';\n  }\n}\n\n/**\n * \u5B89\u5168\u9519\u8BEF\u7C7B\n */\nexport class SecurityError extends BladeError {\n  constructor(code: string, message: string, details?: Partial<ErrorDetails>) {\n    super(ErrorCodeModule.SECURITY, code, message, {\n      ...details,\n      category: ErrorCategory.SECURITY\n    });\n    this.name = 'SecurityError';\n  }\n}\n\n// \u9ED8\u8BA4\u5BFC\u51FA\nexport default BladeError;", "/**\n * \u91CD\u8BD5\u7BA1\u7406\u5668\n * \u63D0\u4F9B\u6307\u6570\u9000\u907F\u3001\u91CD\u8BD5\u7B56\u7565\u548C\u7194\u65AD\u5668\u529F\u80FD\n */\n\nimport { BladeError } from './BladeError.js';\nimport { ErrorCodeModule, type RetryConfig } from './types.js';\n\n/**\n * \u91CD\u8BD5\u72B6\u6001\n */\ninterface RetryState {\n  attempts: number;\n  lastAttempt: number;\n  nextDelay: number;\n  errors: BladeError[];\n}\n\n/**\n * \u7194\u65AD\u5668\u72B6\u6001\n */\nenum CircuitState {\n  CLOSED = 'CLOSED',      // \u5173\u95ED\u72B6\u6001\uFF0C\u6B63\u5E38\u8BF7\u6C42\n  OPEN = 'OPEN',          // \u5F00\u542F\u72B6\u6001\uFF0C\u62D2\u7EDD\u8BF7\u6C42\n  HALF_OPEN = 'HALF_OPEN' // \u534A\u5F00\u72B6\u6001\uFF0C\u5C1D\u8BD5\u6062\u590D\n}\n\n/**\n * \u7194\u65AD\u5668\u914D\u7F6E\n */\nexport interface CircuitBreakerConfig {\n  failureThreshold: number; // \u5931\u8D25\u9608\u503C\n  recoveryTimeout: number;  // \u6062\u590D\u8D85\u65F6\uFF08\u6BEB\u79D2\uFF09\n  expectedException?: (error: BladeError) => boolean; // \u671F\u671B\u7684\u5F02\u5E38\n}\n\n/**\n * \u91CD\u8BD5\u7BA1\u7406\u5668\u7C7B\n */\nexport class RetryManager {\n  private retryConfig: RetryConfig;\n  private circuitBreakerConfig?: CircuitBreakerConfig;\n  private retryStates: Map<string, RetryState> = new Map();\n  private circuitStates: Map<string, { state: CircuitState; failures: number; lastFailure: number }> = new Map();\n\n  constructor(config: Partial<RetryConfig> = {}, circuitBreakerConfig?: CircuitBreakerConfig) {\n    this.retryConfig = {\n      maxAttempts: 3,\n      initialDelay: 1000,\n      maxDelay: 30000,\n      backoffFactor: 2,\n      jitter: true,\n      retryableErrors: [],\n      ...config\n    };\n    \n    this.circuitBreakerConfig = circuitBreakerConfig;\n  }\n\n  /**\n   * \u6267\u884C\u5E26\u6709\u91CD\u8BD5\u7684\u5F02\u6B65\u64CD\u4F5C\n   */\n  async execute<T>(\n    operation: () => Promise<T>,\n    operationId?: string\n  ): Promise<T> {\n    const id = operationId || this.generateOperationId();\n    const retryState = this.getOrCreateRetryState(id);\n    \n    // \u68C0\u67E5\u7194\u65AD\u5668\u72B6\u6001\n    if (this.circuitBreakerConfig) {\n      const circuitState = this.getCircuitState(id);\n      if (circuitState.state === CircuitState.OPEN) {\n        throw new BladeError(\n          ErrorCodeModule.CORE,\n          '0004',\n          `\u64CD\u4F5C \"${id}\" \u88AB\u7194\u65AD\u5668\u62D2\u7EDD`,\n          {\n            category: 'NETWORK' as any,\n            retryable: false,\n            context: { circuitState: circuitState.state }\n          }\n        );\n      }\n    }\n\n    while (retryState.attempts < this.retryConfig.maxAttempts) {\n      try {\n        const result = await operation();\n        \n        // \u6210\u529F\uFF0C\u91CD\u7F6E\u72B6\u6001\n        this.resetState(id);\n        return result;\n        \n      } catch (error) {\n        const bladeError = error instanceof BladeError \n          ? error \n          : BladeError.from(error as Error);\n        \n        retryState.errors.push(bladeError);\n        retryState.attempts++;\n        retryState.lastAttempt = Date.now();\n        \n        // \u68C0\u67E5\u662F\u5426\u53EF\u91CD\u8BD5\n        if (!this.shouldRetry(bladeError, retryState.attempts)) {\n          this.updateCircuitState(id, false); // \u66F4\u65B0\u7194\u65AD\u5668\u72B6\u6001\uFF08\u5931\u8D25\uFF09\n          throw bladeError;\n        }\n        \n        // \u8BA1\u7B97\u5EF6\u8FDF\n        retryState.nextDelay = this.calculateDelay(retryState.attempts);\n        \n        // \u8BB0\u5F55\u91CD\u8BD5\u4FE1\u606F\n        console.warn(`\u91CD\u8BD5\u64CD\u4F5C \"${id}\" (\u5C1D\u8BD5 ${retryState.attempts}/${this.retryConfig.maxAttempts})\uFF0C\u5EF6\u8FDF ${retryState.nextDelay}ms`);\n        \n        // \u7B49\u5F85\u5EF6\u8FDF\n        await this.delay(retryState.nextDelay);\n      }\n    }\n    \n    // \u8FBE\u5230\u6700\u5927\u91CD\u8BD5\u6B21\u6570\n    this.updateCircuitState(id, false); // \u66F4\u65B0\u7194\u65AD\u5668\u72B6\u6001\uFF08\u5931\u8D25\uFF09\n    throw retryState.errors[retryState.errors.length - 1];\n  }\n\n  /**\n   * \u6267\u884C\u5E26\u6709\u91CD\u8BD5\u548C\u8D85\u65F6\u7684\u5F02\u6B65\u64CD\u4F5C\n   */\n  async executeWithTimeout<T>(\n    operation: () => Promise<T>,\n    timeoutMs: number,\n    operationId?: string\n  ): Promise<T> {\n    const id = operationId || this.generateOperationId();\n    \n    return Promise.race([\n      this.execute(operation, id),\n      new Promise<never>((_, reject) => {\n        setTimeout(() => {\n          reject(new BladeError(\n            ErrorCodeModule.CORE,\n            '0004',\n            `\u64CD\u4F5C \"${id}\" \u8D85\u65F6`,\n            {\n              category: 'TIMEOUT' as any,\n              retryable: true,\n              context: { timeout: timeoutMs }\n            }\n          ));\n        }, timeoutMs);\n      })\n    ]);\n  }\n\n  /**\n   * \u83B7\u53D6\u91CD\u8BD5\u72B6\u6001\n   */\n  getRetryState(operationId: string): RetryState | undefined {\n    return this.retryStates.get(operationId);\n  }\n\n  /**\n   * \u91CD\u7F6E\u72B6\u6001\n   */\n  resetState(operationId: string): void {\n    this.retryStates.delete(operationId);\n    this.updateCircuitState(operationId, true); // \u66F4\u65B0\u7194\u65AD\u5668\u72B6\u6001\uFF08\u6210\u529F\uFF09\n  }\n\n  /**\n   * \u6E05\u7406\u8FC7\u671F\u7684\u72B6\u6001\n   */\n  cleanup(): void {\n    const now = Date.now();\n    const maxAge = this.retryConfig.maxDelay * 10; // 10\u500D\u6700\u5927\u5EF6\u8FDF\u65F6\u95F4\n    \n    for (const [id, state] of this.retryStates.entries()) {\n      if (now - state.lastAttempt > maxAge) {\n        this.retryStates.delete(id);\n      }\n    }\n    \n    // \u6E05\u7406\u7194\u65AD\u5668\u72B6\u6001\n    if (this.circuitBreakerConfig) {\n      for (const [, circuitState] of this.circuitStates.entries()) {\n        if (circuitState.state === CircuitState.OPEN && \n            now - circuitState.lastFailure > this.circuitBreakerConfig.recoveryTimeout) {\n          // \u7194\u65AD\u5668\u8D85\u65F6\uFF0C\u8FDB\u5165\u534A\u5F00\u72B6\u6001\n          circuitState.state = CircuitState.HALF_OPEN;\n        }\n      }\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6216\u521B\u5EFA\u91CD\u8BD5\u72B6\u6001\n   */\n  private getOrCreateRetryState(operationId: string): RetryState {\n    if (!this.retryStates.has(operationId)) {\n      const state: RetryState = {\n        attempts: 0,\n        lastAttempt: 0,\n        nextDelay: 0,\n        errors: []\n      };\n      this.retryStates.set(operationId, state);\n    }\n    return this.retryStates.get(operationId)!;\n  }\n\n  /**\n   * \u5224\u65AD\u662F\u5426\u5E94\u8BE5\u91CD\u8BD5\n   */\n  private shouldRetry(error: BladeError, attempts: number): boolean {\n    // \u68C0\u67E5\u662F\u5426\u8FBE\u5230\u6700\u5927\u91CD\u8BD5\u6B21\u6570\n    if (attempts >= this.retryConfig.maxAttempts) {\n      return false;\n    }\n    \n    // \u68C0\u67E5\u9519\u8BEF\u662F\u5426\u5728\u53EF\u91CD\u8BD5\u5217\u8868\u4E2D\n    if (this.retryConfig.retryableErrors.length > 0) {\n      return this.retryConfig.retryableErrors.includes(error.code);\n    }\n    \n    // \u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u68C0\u67E5\u9519\u8BEF\u662F\u5426\u6807\u8BB0\u4E3A\u53EF\u91CD\u8BD5\n    return error.isRetryable();\n  }\n\n  /**\n   * \u8BA1\u7B97\u9000\u907F\u5EF6\u8FDF\n   */\n  private calculateDelay(attempts: number): number {\n    let delay = this.retryConfig.initialDelay * Math.pow(this.retryConfig.backoffFactor, attempts - 1);\n    \n    // \u5E94\u7528\u6700\u5927\u5EF6\u8FDF\u9650\u5236\n    delay = Math.min(delay, this.retryConfig.maxDelay);\n    \n    // \u6DFB\u52A0\u6296\u52A8\uFF08\u968F\u673A\u6027\uFF09\n    if (this.retryConfig.jitter) {\n      delay = delay * (0.5 + Math.random() * 0.5);\n    }\n    \n    return Math.floor(delay);\n  }\n\n  /**\n   * \u5EF6\u8FDF\u51FD\u6570\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * \u751F\u6210\u64CD\u4F5CID\n   */\n  private generateOperationId(): string {\n    return `retry_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * \u83B7\u53D6\u7194\u65AD\u5668\u72B6\u6001\n   */\n  private getCircuitState(operationId: string) {\n    if (!this.circuitBreakerConfig) {\n      return { state: CircuitState.CLOSED, failures: 0, lastFailure: 0 };\n    }\n    \n    if (!this.circuitStates.has(operationId)) {\n      this.circuitStates.set(operationId, {\n        state: CircuitState.CLOSED,\n        failures: 0,\n        lastFailure: 0\n      });\n    }\n    \n    return this.circuitStates.get(operationId)!;\n  }\n\n  /**\n   * \u66F4\u65B0\u7194\u65AD\u5668\u72B6\u6001\n   */\n  private updateCircuitState(operationId: string, success: boolean): void {\n    if (!this.circuitBreakerConfig) {\n      return;\n    }\n    \n    const circuitState = this.getCircuitState(operationId);\n    \n    if (success) {\n      // \u6210\u529F\uFF1A\u91CD\u7F6E\u7194\u65AD\u5668\n      circuitState.state = CircuitState.CLOSED;\n      circuitState.failures = 0;\n    } else {\n      // \u5931\u8D25\uFF1A\u589E\u52A0\u5931\u8D25\u8BA1\u6570\n      circuitState.failures++;\n      circuitState.lastFailure = Date.now();\n      \n      // \u68C0\u67E5\u662F\u5426\u5E94\u8BE5\u5F00\u542F\u7194\u65AD\u5668\n      if (circuitState.failures >= this.circuitBreakerConfig.failureThreshold) {\n        circuitState.state = CircuitState.OPEN;\n      }\n    }\n  }\n}\n\n/**\n * \u5168\u5C40\u91CD\u8BD5\u7BA1\u7406\u5668\u5B9E\u4F8B\n */\nexport const globalRetryManager = new RetryManager();\n\n/**\n * \u521B\u5EFA\u91CD\u8BD5\u88C5\u9970\u5668\n */\nexport function retry(config: Partial<RetryConfig> = {}) {\n  const retryManager = new RetryManager(config);\n  \n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    \n    descriptor.value = async function (...args: any[]) {\n      const operationId = `${target.constructor.name}.${propertyKey}`;\n      return retryManager.execute(() => originalMethod.apply(this, args), operationId);\n    };\n    \n    return descriptor;\n  };\n}", "/**\n * \u9519\u8BEF\u6062\u590D\u7BA1\u7406\u5668\n * \u63D0\u4F9B\u9519\u8BEF\u6062\u590D\u7B56\u7565\u548C\u81EA\u52A8\u6062\u590D\u529F\u80FD\n */\n\nimport { BladeError } from './BladeError.js';\nimport type { RecoveryStrategy } from './types.js';\nimport { ErrorCodeModule } from './types.js';\n\n/**\n * \u6062\u590D\u4E0A\u4E0B\u6587\n */\nexport interface RecoveryContext {\n  error: BladeError;\n  attempts: number;\n  maxAttempts: number;\n  operationId: string;\n  startTime: number;\n  additionalContext?: Record<string, any>;\n}\n\n/**\n * \u6062\u590D\u7ED3\u679C\n */\nexport interface RecoveryResult {\n  success: boolean;\n  recovered?: boolean;\n  message?: string;\n  action?: string;\n  nextStep?: string;\n  context?: RecoveryContext;\n}\n\n/**\n * \u9519\u8BEF\u6062\u590D\u7BA1\u7406\u5668\u7C7B\n */\nexport class RecoveryManager {\n  private strategies: Map<string, RecoveryStrategy> = new Map();\n  private defaultMaxAttempts: number = 3;\n  private recoveryTimeout: number = 10000; // 10\u79D2\u6062\u590D\u8D85\u65F6\n\n  constructor(options?: { maxAttempts?: number; recoveryTimeout?: number }) {\n    if (options) {\n      this.defaultMaxAttempts = options.maxAttempts || this.defaultMaxAttempts;\n      this.recoveryTimeout = options.recoveryTimeout || this.recoveryTimeout;\n    }\n\n    this.initializeDefaultStrategies();\n  }\n\n  /**\n   * \u6CE8\u518C\u6062\u590D\u7B56\u7565\n   */\n  registerStrategy(strategy: RecoveryStrategy): void {\n    this.strategies.set(strategy.name, strategy);\n  }\n\n  /**\n   * \u53D6\u6D88\u6CE8\u518C\u6062\u590D\u7B56\u7565\n   */\n  unregisterStrategy(name: string): void {\n    this.strategies.delete(name);\n  }\n\n  /**\n   * \u5C1D\u8BD5\u6062\u590D\u9519\u8BEF\n   */\n  async recover(\n    error: BladeError,\n    operationId?: string,\n    context?: Record<string, any>\n  ): Promise<RecoveryResult> {\n    const startTime = Date.now();\n    let attempts = 0;\n\n    // \u67E5\u627E\u9002\u7528\u7684\u6062\u590D\u7B56\u7565\n    const applicableStrategies = Array.from(this.strategies.values()).filter(strategy =>\n      strategy.condition(error)\n    );\n\n    if (applicableStrategies.length === 0) {\n      return {\n        success: false,\n        recovered: false,\n        message: '\u6CA1\u6709\u627E\u5230\u9002\u7528\u7684\u6062\u590D\u7B56\u7565',\n        context: {\n          error,\n          attempts,\n          maxAttempts: 0,\n          operationId: operationId || 'unknown',\n          startTime,\n          additionalContext: context,\n        },\n      };\n    }\n\n    // \u6309\u987A\u5E8F\u5C1D\u8BD5\u6062\u590D\u7B56\u7565\n    for (const strategy of applicableStrategies) {\n      attempts++;\n\n      try {\n        const timeoutPromise = new Promise<boolean>((_, reject) => {\n          setTimeout(() => {\n            reject(new Error(`\u6062\u590D\u7B56\u7565 \"${strategy.name}\" \u8D85\u65F6`));\n          }, this.recoveryTimeout);\n        });\n\n        const recoveryPromise = strategy.action(error);\n\n        const success = await Promise.race([recoveryPromise, timeoutPromise]);\n\n        if (success) {\n          return {\n            success: true,\n            recovered: true,\n            message: `\u4F7F\u7528\u7B56\u7565 \"${strategy.name}\" \u6210\u529F\u6062\u590D`,\n            action: strategy.name,\n            nextStep: '\u7EE7\u7EED\u6267\u884C',\n            context: {\n              error,\n              attempts,\n              maxAttempts: strategy.maxAttempts,\n              operationId: operationId || 'unknown',\n              startTime,\n              additionalContext: context,\n            },\n          };\n        }\n      } catch (recoveryError) {\n        console.warn(`\u6062\u590D\u7B56\u7565 \"${strategy.name}\" \u6267\u884C\u5931\u8D25:`, recoveryError);\n\n        // \u5F53\u524D\u7B56\u7565\u5931\u8D25\uFF0C\u7EE7\u7EED\u5C1D\u8BD5\u4E0B\u4E00\u4E2A\u7B56\u7565\n        if (attempts >= applicableStrategies.length) {\n          break;\n        }\n\n        // \u77ED\u6682\u5EF6\u8FDF\u540E\u7EE7\u7EED\n        await new Promise(resolve => setTimeout(resolve, 100));\n      }\n    }\n\n    // \u6240\u6709\u53EF\u80FD\u7684\u7B56\u7565\u90FD\u5C1D\u8BD5\u5931\u8D25\n    return {\n      success: false,\n      recovered: false,\n      message: '\u6240\u6709\u6062\u590D\u7B56\u7565\u90FD\u5931\u8D25\u4E86',\n      context: {\n        error,\n        attempts,\n        maxAttempts: applicableStrategies.reduce((sum, s) => sum + s.maxAttempts, 0),\n        operationId: operationId || 'unknown',\n        startTime,\n        additionalContext: context,\n      },\n    };\n  }\n\n  /**\n   * \u6267\u884C\u5E26\u6709\u6062\u590D\u80FD\u529B\u7684\u64CD\u4F5C\n   */\n  async executeWithRecovery<T>(\n    operation: () => Promise<T>,\n    operationId?: string,\n    context?: Record<string, any>\n  ): Promise<T> {\n    try {\n      return await operation();\n    } catch (error) {\n      const bladeError = error instanceof BladeError ? error : BladeError.from(error as Error);\n\n      // \u5C1D\u8BD5\u6062\u590D\n      const recoveryResult = await this.recover(bladeError, operationId, context);\n\n      if (recoveryResult.success && recoveryResult.recovered) {\n        console.info(`\u9519\u8BEF\u6062\u590D\u6210\u529F: ${recoveryResult.message}`);\n\n        // \u5982\u679C\u53EF\u4EE5\u91CD\u65B0\u5C1D\u8BD5\u64CD\u4F5C\uFF0C\u5219\u91CD\u8BD5\n        if (recoveryResult.nextStep === '\u7EE7\u7EED\u6267\u884C') {\n          return await operation();\n        }\n      }\n\n      // \u6062\u590D\u5931\u8D25\uFF0C\u629B\u51FA\u4EE5\u4E0B\u9519\u8BEF\n      throw new BladeError(\n        ErrorCodeModule.CORE,\n        '0004',\n        `\u9519\u8BEF\u65E0\u6CD5\u6062\u590D: ${recoveryResult.message}`,\n        {\n          category: bladeError.category,\n          retryable: false,\n          context: {\n            originalError: bladeError,\n            recoveryResult,\n          },\n        }\n      );\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6062\u590D\u7B56\u7565\u7EDF\u8BA1\n   */\n  getStatistics(): Record<\n    string,\n    {\n      used: number;\n      success: number;\n      failure: number;\n      averageDuration: number;\n    }\n  > {\n    // \u8FD9\u91CC\u5E94\u8BE5\u662F\u5B9E\u9645\u7684\u7EDF\u8BA1\u6570\u636E\uFF0C\u73B0\u9636\u6BB5\u8FD4\u56DE\u7A7A\u5BF9\u8C61\n    return {};\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u9ED8\u8BA4\u6062\u590D\u7B56\u7565\n   */\n  private initializeDefaultStrategies(): void {\n    // \u7F51\u7EDC\u91CD\u8FDE\u7B56\u7565\n    this.registerStrategy({\n      name: 'network-reconnect',\n      condition: error => error.category === 'NETWORK',\n      action: async error => {\n        // \u6A21\u62DF\u7F51\u7EDC\u91CD\u8FDE\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        return true;\n      },\n      maxAttempts: 3,\n    });\n\n    // \u914D\u7F6E\u91CD\u65B0\u52A0\u8F7D\u7B56\u7565\n    this.registerStrategy({\n      name: 'config-reload',\n      condition: error => error.category === 'CONFIGURATION',\n      action: async error => {\n        // \u6A21\u62DF\u914D\u7F6E\u91CD\u65B0\u52A0\u8F7D\n        await new Promise(resolve => setTimeout(resolve, 500));\n        return true;\n      },\n      maxAttempts: 2,\n    });\n\n    // \u7F13\u5B58\u6E05\u7406\u7B56\u7565\n    this.registerStrategy({\n      name: 'cache-clear',\n      condition: error => error.code.includes('CONTEXT'),\n      action: async error => {\n        // \u6A21\u62DF\u7F13\u5B58\u6E05\u7406\n        await new Promise(resolve => setTimeout(resolve, 300));\n        return true;\n      },\n      maxAttempts: 1,\n    });\n\n    // \u5185\u5B58\u4F18\u5316\u7B56\u7565\n    this.registerStrategy({\n      name: 'memory-optimize',\n      condition: error => error.category === 'MEMORY',\n      action: async error => {\n        // \u6A21\u62DF\u5185\u5B58\u4F18\u5316\n        global.gc && global.gc();\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        return true;\n      },\n      maxAttempts: 2,\n    });\n\n    // \u6743\u9650\u91CD\u8BD5\u7B56\u7565\n    this.registerStrategy({\n      name: 'permission-retry',\n      condition: error => error.code.includes('PERMISSION'),\n      action: async error => {\n        // \u6A21\u62DF\u6743\u9650\u91CD\u8BD5\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        return false; // \u6743\u9650\u95EE\u9898\u901A\u5E38\u9700\u8981\u7528\u6237\u5E72\u9884\n      },\n      maxAttempts: 1,\n    });\n  }\n}\n\n/**\n * \u5168\u5C40\u9519\u8BEF\u6062\u590D\u7BA1\u7406\u5668\u5B9E\u4F8B\n */\nexport const globalRecoveryManager = new RecoveryManager();\n\n/**\n * \u521B\u5EFA\u6062\u590D\u88C5\u9970\u5668\n */\nexport function recoverable(strategyNames: string[] = []) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = async function (...args: any[]) {\n      const operationId = `${target.constructor.name}.${propertyKey}`;\n\n      try {\n        return await originalMethod.apply(this, args);\n      } catch (error) {\n        const bladeError = error instanceof BladeError ? error : BladeError.from(error as Error);\n\n        // \u4F7F\u7528\u6307\u5B9A\u7684\u7B56\u7565\u8FDB\u884C\u6062\u590D\n        const applicableStrategies = Array.from(globalRecoveryManager['strategies'].values())\n          .filter(strategy => strategyNames.length === 0 || strategyNames.includes(strategy.name))\n          .filter(strategy => strategy.condition(bladeError));\n\n        if (applicableStrategies.length > 0) {\n          const recoveryResult = await globalRecoveryManager.recover(bladeError, operationId);\n\n          if (recoveryResult.success && recoveryResult.recovered) {\n            // \u6062\u590D\u6210\u529F\uFF0C\u91CD\u8BD5\u64CD\u4F5C\n            return await originalMethod.apply(this, args);\n          }\n        }\n\n        // \u6062\u590D\u5931\u8D25\uFF0C\u91CD\u65B0\u629B\u51FA\u9519\u8BEF\n        throw bladeError;\n      }\n    };\n\n    return descriptor;\n  };\n}\n", "/**\n * \u9519\u8BEF\u76D1\u63A7\u7BA1\u7406\u5668\n * \u63D0\u4F9B\u9519\u8BEF\u76D1\u63A7\u3001\u62A5\u544A\u6536\u96C6\u548C\u62A5\u8B66\u529F\u80FD\n */\n\nimport { BladeError } from './BladeError.js';\nimport type { ErrorMonitoringOptions, ErrorReport } from './types.js';\n\n/**\n * \u9519\u8BEF\u7EDF\u8BA1\u6570\u636E\n */\nexport interface ErrorStatistics {\n  totalErrors: number;\n  errorsByCategory: Record<string, number>;\n  errorsByModule: Record<string, number>;\n  errorsByCode: Record<string, number>;\n  retryableErrors: number;\n  unrecoverableErrors: number;\n  averageRecoveryTime: number;\n  lastErrorTime: number;\n}\n\n/**\n * \u9519\u8BEF\u76D1\u63A7\u914D\u7F6E\n */\nexport interface ErrorMonitoringConfig extends ErrorMonitoringOptions {\n  reportEndpoint?: string;\n  autoReport: boolean;\n  storeReports: boolean;\n  maxStoredReports: number;\n  enableConsole: boolean;\n  enableFile: boolean;\n  logFilePath?: string;\n}\n\n/**\n * \u9519\u8BEF\u76D1\u63A7\u7BA1\u7406\u5668\u7C7B\n */\nexport class ErrorMonitor {\n  private config: ErrorMonitoringConfig;\n  private errorCounts: Map<string, number> = new Map();\n  private errorReports: ErrorReport[] = [];\n  private statistics: ErrorStatistics;\n  private errorStream: AsyncIterator<BladeError> | null = null;\n\n  constructor(config: Partial<ErrorMonitoringConfig> = {}) {\n    this.config = {\n      enabled: true,\n      sampleRate: 1.0,\n      maxErrorsPerMinute: 100,\n      excludePatterns: [],\n      includePatterns: [],\n      autoReport: false,\n      storeReports: true,\n      maxStoredReports: 1000,\n      enableConsole: true,\n      enableFile: false,\n      ...config\n    };\n\n    this.statistics = this.initializeStatistics();\n    this.setupErrorCollection();\n  }\n\n  /**\n   * \u76D1\u63A7\u9519\u8BEF\n   */\n  async monitor(error: BladeError | Error): Promise<void> {\n    if (!this.config.enabled) {\n      return;\n    }\n\n    const bladeError = error instanceof BladeError \n      ? error \n      : BladeError.from(error);\n\n    // \u68C0\u67E5\u91C7\u6837\u7387\n    if (Math.random() > this.config.sampleRate) {\n      return;\n    }\n\n    // \u68C0\u67E5\u6392\u9664\u6A21\u5F0F\n    if (this.shouldExcludeError(bladeError)) {\n      return;\n    }\n\n    // \u68C0\u67E5\u9519\u8BEF\u9891\u7387\u9650\u5236\n    if (this.isErrorRateExceeded()) {\n      return;\n    }\n\n    // \u66F4\u65B0\u7EDF\u8BA1\u4FE1\u606F\n    this.updateStatistics(bladeError);\n\n    // \u521B\u5EFA\u9519\u8BEF\u62A5\u544A\n    const report = this.createErrorReport(bladeError);\n\n    // \u5B58\u50A8\u62A5\u544A\n    if (this.config.storeReports) {\n      this.storeReport(report);\n    }\n\n    // \u63A7\u5236\u53F0\u8F93\u51FA\n    if (this.config.enableConsole) {\n      this.logToConsole(bladeError, report);\n    }\n\n    // \u6587\u4EF6\u8F93\u51FA\n    if (this.config.enableFile && this.config.logFilePath) {\n      await this.logToFile(bladeError, report);\n    }\n\n    // \u81EA\u52A8\u4E0A\u62A5\n    if (this.config.autoReport && this.config.reportEndpoint) {\n      await this.reportToEndpoint(report);\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u9519\u8BEF\u6D41\n   */\n  createErrorStream(): AsyncIterable<BladeError> {\n    const errors: BladeError[] = [];\n    \n    return {\n      [Symbol.asyncIterator](): AsyncIterator<BladeError> {\n        return {\n          next: async (): Promise<IteratorResult<BladeError>> => {\n            if (errors.length === 0) {\n              return { value: undefined, done: true };\n            }\n            const error = errors.shift();\n            return { value: error!, done: false };\n          }\n        };\n      }\n    };\n  }\n\n  /**\n   * \u83B7\u53D6\u9519\u8BEF\u7EDF\u8BA1\n   */\n  getStatistics(): ErrorStatistics {\n    return { ...this.statistics };\n  }\n\n  /**\n   * \u83B7\u53D6\u9519\u8BEF\u62A5\u544A\n   */\n  getErrorReports(limit?: number): ErrorReport[] {\n    const reports = [...this.errorReports];\n    return limit ? reports.slice(-limit) : reports;\n  }\n\n  /**\n   * \u6E05\u7406\u65E7\u7684\u9519\u8BEF\u62A5\u544A\n   */\n  cleanup(): void {\n    if (this.errorReports.length > this.config.maxStoredReports) {\n      this.errorReports = this.errorReports.slice(-this.config.maxStoredReports);\n    }\n  }\n\n  /**\n   * \u8BBE\u7F6E\u62A5\u8B66\u89C4\u5219\n   */\n  setAlertRule(_config: {\n    condition: (stats: ErrorStatistics) => boolean;\n    action: (stats: ErrorStatistics) => void;\n    cooldown: number; // \u51B7\u5374\u65F6\u95F4\uFF08\u6BEB\u79D2\uFF09\n  }): void {\n    // \u8FD9\u91CC\u53EF\u4EE5\u5B9E\u73B0\u62A5\u8B66\u89C4\u5219\u8BBE\u7F6E\u903B\u8F91\n    console.warn('\u62A5\u8B66\u89C4\u5219\u8BBE\u7F6E\u529F\u80FD\u5F85\u5B9E\u73B0');\n  }\n\n  /**\n   * \u5BFC\u51FA\u9519\u8BEF\u6570\u636E\n   */\n  exportData(format: 'json' | 'csv' = 'json'): string {\n    if (format === 'json') {\n      return JSON.stringify({\n        statistics: this.statistics,\n        reports: this.errorReports,\n        timestamp: Date.now()\n      }, null, 2);\n    } else if (format === 'csv') {\n      // \u7B80\u5355\u7684CSV\u683C\u5F0F\n      const headers = ['timestamp', 'code', 'message', 'category', 'module'];\n      const rows = this.errorReports.map(report => [\n        report.timestamp,\n        report.error.code,\n        report.error.message,\n        report.error.category,\n        report.error.module\n      ]);\n      \n      return [headers, ...rows]\n        .map(row => row.map(cell => `\"${cell}\"`).join(','))\n        .join('\\n');\n    }\n    \n    throw new Error('\u4E0D\u652F\u6301\u7684\u5BFC\u51FA\u683C\u5F0F');\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u7EDF\u8BA1\u6570\u636E\n   */\n  private initializeStatistics(): ErrorStatistics {\n    return {\n      totalErrors: 0,\n      errorsByCategory: {},\n      errorsByModule: {},\n      errorsByCode: {},\n      retryableErrors: 0,\n      unrecoverableErrors: 0,\n      averageRecoveryTime: 0,\n      lastErrorTime: 0\n    };\n  }\n\n  /**\n   * \u8BBE\u7F6E\u9519\u8BEF\u6536\u96C6\n   */\n  private setupErrorCollection(): void {\n    // \u76D1\u542C\u5168\u5C40\u672A\u6355\u83B7\u7684\u5F02\u5E38\n    process.on('uncaughtException', async (error) => {\n      await this.monitor(error);\n    });\n\n    // \u76D1\u542C\u672A\u5904\u7406\u7684Promise\u62D2\u7EDD\n    process.on('unhandledRejection', async (reason) => {\n      const error = reason instanceof Error ? reason : new Error(String(reason));\n      await this.monitor(error);\n    });\n  }\n\n  /**\n   * \u68C0\u67E5\u662F\u5426\u5E94\u8BE5\u6392\u9664\u9519\u8BEF\n   */\n  private shouldExcludeError(error: BladeError): boolean {\n    // \u68C0\u67E5\u6392\u9664\u6A21\u5F0F\n    if (this.config.excludePatterns.length > 0) {\n      const errorMessage = error.message.toLowerCase();\n      const errorCode = error.code.toLowerCase();\n      \n      for (const pattern of this.config.excludePatterns) {\n        const lowerPattern = pattern.toLowerCase();\n        if (errorMessage.includes(lowerPattern) || errorCode.includes(lowerPattern)) {\n          return true;\n        }\n      }\n    }\n\n    // \u68C0\u67E5\u5305\u542B\u6A21\u5F0F\n    if (this.config.includePatterns.length > 0) {\n      const errorMessage = error.message.toLowerCase();\n      const errorCode = error.code.toLowerCase();\n      \n      for (const pattern of this.config.includePatterns) {\n        const lowerPattern = pattern.toLowerCase();\n        if (errorMessage.includes(lowerPattern) || errorCode.includes(lowerPattern)) {\n          return false;\n        }\n      }\n      return true; // \u4E0D\u5728\u5305\u542B\u6A21\u5F0F\u4E2D\uFF0C\u6392\u9664\n    }\n\n    return false;\n  }\n\n  /**\n   * \u68C0\u67E5\u9519\u8BEF\u9891\u7387\u662F\u5426\u8D85\u8FC7\u9650\u5236\n   */\n  private isErrorRateExceeded(): boolean {\n    const now = Date.now();\n    const oneMinuteAgo = now - 60000;\n    \n    // \u7EDF\u8BA1\u8FC7\u53BB\u4E00\u5206\u949F\u7684\u9519\u8BEF\u6570\u91CF\n    let recentErrors = 0;\n    for (const report of this.errorReports) {\n      if (report.timestamp > oneMinuteAgo) {\n        recentErrors++;\n      }\n    }\n    \n    return recentErrors >= this.config.maxErrorsPerMinute;\n  }\n\n  /**\n   * \u66F4\u65B0\u7EDF\u8BA1\u4FE1\u606F\n   */\n  private updateStatistics(error: BladeError): void {\n    this.statistics.totalErrors++;\n    this.statistics.lastErrorTime = Date.now();\n    \n    // \u6309\u7C7B\u522B\u7EDF\u8BA1\n    this.statistics.errorsByCategory[error.category] = \n      (this.statistics.errorsByCategory[error.category] || 0) + 1;\n    \n    // \u6309\u6A21\u5757\u7EDF\u8BA1\n    this.statistics.errorsByModule[error.module] = \n      (this.statistics.errorsByModule[error.module] || 0) + 1;\n    \n    // \u6309\u9519\u8BEF\u7801\u7EDF\u8BA1\n    this.statistics.errorsByCode[error.code] = \n      (this.statistics.errorsByCode[error.code] || 0) + 1;\n    \n    // \u53EF\u91CD\u8BD5\u9519\u8BEF\u7EDF\u8BA1\n    if (error.isRetryable()) {\n      this.statistics.retryableErrors++;\n    } else {\n      this.statistics.unrecoverableErrors++;\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u9519\u8BEF\u62A5\u544A\n   */\n  private createErrorReport(error: BladeError): ErrorReport {\n    return {\n      id: this.generateReportId(),\n      timestamp: Date.now(),\n      error,\n      userAgent: process.env.USER_AGENT || 'unknown',\n      os: process.platform,\n      version: process.env.npm_package_version || 'unknown',\n      sessionId: process.env.SESSION_ID || this.generateSessionId(),\n      traceId: error.context?.traceId || this.generateTraceId()\n    };\n  }\n\n  /**\n   * \u5B58\u50A8\u9519\u8BEF\u62A5\u544A\n   */\n  private storeReport(report: ErrorReport): void {\n    this.errorReports.push(report);\n    \n    // \u6E05\u7406\u65E7\u62A5\u544A\n    if (this.errorReports.length > this.config.maxStoredReports) {\n      this.errorReports.shift();\n    }\n  }\n\n  /**\n   * \u8F93\u51FA\u5230\u63A7\u5236\u53F0\n   */\n  private logToConsole(error: BladeError, report: ErrorReport): void {\n    const timestamp = new Date(report.timestamp).toISOString();\n    console.error(`[${timestamp}] ${error.toString()}`);\n    \n    if (error.context) {\n      console.error('\u4E0A\u4E0B\u6587\u4FE1\u606F:', JSON.stringify(error.context, null, 2));\n    }\n    \n    if (error.suggestions.length > 0) {\n      console.error('\u5EFA\u8BAE\u89E3\u51B3\u65B9\u6848:', error.suggestions);\n    }\n  }\n\n  /**\n   * \u8F93\u51FA\u5230\u6587\u4EF6\n   */\n  private async logToFile(error: BladeError, _report: ErrorReport): Promise<void> {\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0\u6587\u4EF6\u65E5\u5FD7\u8BB0\u5F55\n    // \u6682\u65F6\u7528 console.log \u6A21\u62DF\n    console.log(`[\u6587\u4EF6\u65E5\u5FD7] ${error.toString()}`);\n  }\n\n  /**\n   * \u4E0A\u62A5\u5230\u7AEF\u70B9\n   */\n  private async reportToEndpoint(report: ErrorReport): Promise<void> {\n    if (!this.config.reportEndpoint) {\n      return;\n    }\n\n    try {\n      const response = await fetch(this.config.reportEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(report),\n      });\n\n      if (!response.ok) {\n        console.warn(`\u9519\u8BEF\u4E0A\u62A5\u5931\u8D25: ${response.status} ${response.statusText}`);\n      }\n    } catch (uploadError) {\n      console.warn('\u9519\u8BEF\u4E0A\u62A5\u5931\u8D25:', uploadError);\n    }\n  }\n\n  /**\n   * \u751F\u6210\u62A5\u544AID\n   */\n  private generateReportId(): string {\n    return `report_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * \u751F\u6210\u4F1A\u8BDDID\n   */\n  private generateSessionId(): string {\n    return `session_${Math.random().toString(36).substr(2, 16)}`;\n  }\n\n  /**\n   * \u751F\u6210\u8DDF\u8E2AID\n   */\n  private generateTraceId(): string {\n    return `trace_${Date.now()}_${Math.random().toString(36).substr(2, 12)}`;\n  }\n}\n\n/**\n * \u5168\u5C40\u9519\u8BEF\u76D1\u63A7\u5B9E\u4F8B\n */\nexport const globalErrorMonitor = new ErrorMonitor();\n\n/**\n * \u9519\u8BEF\u76D1\u63A7\u88C5\u9970\u5668\n */\nexport function monitor(config: Partial<ErrorMonitoringConfig> = {}) {\n  const monitorInstance = new ErrorMonitor(config);\n  \n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    \n    descriptor.value = async function (...args: any[]) {\n      try {\n        return await originalMethod.apply(this, args);\n      } catch (error) {\n        const bladeError = error instanceof BladeError \n          ? error \n          : BladeError.from(error as Error);\n        \n        await monitorInstance.monitor(bladeError);\n        throw bladeError;\n      }\n    };\n    \n    return descriptor;\n  };\n}", "/**\n * \u9519\u8BEF\u5DE5\u5382\u7C7B\n * \u63D0\u4F9B\u6807\u51C6\u5316\u7684\u9519\u8BEF\u521B\u5EFA\u548C\u5305\u88C5\u529F\u80FD\n */\n\nimport {\n  AgentError,\n  BladeError,\n  ConfigError,\n  FileSystemError,\n  LLMError,\n  MCPError,\n  NetworkError,\n  SecurityError,\n  ToolsError,\n} from './BladeError.js';\nimport { ErrorCategory, ErrorCodeModule, ErrorSeverity } from './types.js';\n\n/**\n * \u9519\u8BEF\u521B\u5EFA\u914D\u7F6E\n */\nexport interface ErrorCreationConfig {\n  module?: ErrorCodeModule;\n  severity?: ErrorSeverity;\n  category?: ErrorCategory;\n  retryable?: boolean;\n  recoverable?: boolean;\n  context?: Record<string, any>;\n  suggestions?: string[];\n  cause?: any;\n}\n\n/**\n * \u9519\u8BEF\u5DE5\u5382\u7C7B\n */\nexport class ErrorFactory {\n  /**\n   * \u521B\u5EFA\u901A\u7528\u9519\u8BEF\n   */\n  static createError(message: string, config: ErrorCreationConfig = {}): BladeError {\n    const module = config.module || ErrorCodeModule.CORE;\n    return new BladeError(module, 'INTERNAL_ERROR', message, {\n      severity: config.severity || ErrorSeverity.ERROR,\n      retryable: config.retryable ?? false,\n      recoverable: config.recoverable ?? false,\n      context: config.context || {},\n      suggestions: config.suggestions || [],\n      cause: config.cause,\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u914D\u7F6E\u9519\u8BEF\n   */\n  static createConfigError(\n    errorCode: string,\n    message: string,\n    config: Omit<ErrorCreationConfig, 'module'> = {}\n  ): ConfigError {\n    return new ConfigError(errorCode, message, {\n      ...config,\n      severity: config.severity || ErrorSeverity.WARNING,\n    });\n  }\n\n  /**\n   * \u521B\u5EFALLM\u9519\u8BEF\n   */\n  static createLLMError(\n    errorCode: string,\n    message: string,\n    config: Omit<ErrorCreationConfig, 'module'> = {}\n  ): LLMError {\n    return new LLMError(errorCode, message, {\n      ...config,\n      severity: config.severity || ErrorSeverity.ERROR,\n      retryable: config.retryable ?? true,\n    });\n  }\n\n  /**\n   * \u521B\u5EFAMCP\u9519\u8BEF\n   */\n  static createMCPError(\n    errorCode: string,\n    message: string,\n    config: Omit<ErrorCreationConfig, 'module'> = {}\n  ): MCPError {\n    return new MCPError(errorCode, message, {\n      ...config,\n      severity: config.severity || ErrorSeverity.WARNING,\n      retryable: config.retryable ?? true,\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u4EE3\u7406\u9519\u8BEF\n   */\n  static createAgentError(\n    errorCode: string,\n    message: string,\n    config: Omit<ErrorCreationConfig, 'module'> = {}\n  ): AgentError {\n    return new AgentError(errorCode, message, {\n      ...config,\n      severity: config.severity || ErrorSeverity.ERROR,\n      retryable: config.retryable ?? false,\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u5DE5\u5177\u9519\u8BEF\n   */\n  static createToolsError(\n    errorCode: string,\n    message: string,\n    config: Omit<ErrorCreationConfig, 'module'> = {}\n  ): ToolsError {\n    return new ToolsError(errorCode, message, {\n      ...config,\n      severity: config.severity || ErrorSeverity.CRITICAL,\n      retryable: false,\n    });\n  }\n\n  /**\n   * \u4ECE\u539F\u751FError\u521B\u5EFABladeError\n   */\n  static fromNativeError(\n    error: Error,\n    defaultMessage: string = '\u672A\u77E5\u9519\u8BEF',\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    return BladeError.from(error, config.module, defaultMessage);\n  }\n\n  /**\n   * \u521B\u5EFAHTTP\u76F8\u5173\u9519\u8BEF\n   */\n  static createHttpError(\n    status: number,\n    url: string,\n    responseText?: string,\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    let errorCode: string = 'REQUEST_FAILED';\n    let message: string;\n    let suggestions: string[] = [];\n\n    switch (status) {\n      case 400:\n        errorCode = 'REQUEST_FAILED';\n        message = `HTTP 400 \u9519\u8BEF\u8BF7\u6C42: ${url}`;\n        suggestions = ['\u68C0\u67E5\u8BF7\u6C42\u53C2\u6570', '\u9A8C\u8BC1\u8BF7\u6C42\u6570\u636E\u683C\u5F0F'];\n        break;\n      case 401:\n        errorCode = 'REQUEST_FAILED';\n        message = `HTTP 401 \u672A\u6388\u6743: ${url}`;\n        suggestions = ['\u68C0\u67E5API\u5BC6\u94A5', '\u9A8C\u8BC1\u8EAB\u4EFD\u4FE1\u606F'];\n        break;\n      case 403:\n        errorCode = 'REQUEST_FAILED';\n        message = `HTTP 403 \u7981\u6B62\u8BBF\u95EE: ${url}`;\n        suggestions = ['\u68C0\u67E5\u8BBF\u95EE\u6743\u9650', '\u8054\u7CFB\u7BA1\u7406\u5458'];\n        break;\n      case 404:\n        errorCode = 'REQUEST_FAILED';\n        message = `HTTP 404 \u672A\u627E\u5230: ${url}`;\n        suggestions = ['\u68C0\u67E5URL\u662F\u5426\u6B63\u786E', '\u786E\u8BA4\u8D44\u6E90\u662F\u5426\u5B58\u5728'];\n        break;\n      case 429:\n        errorCode = 'REQUEST_FAILED';\n        message = `HTTP 429 \u8BF7\u6C42\u8FC7\u591A: ${url}`;\n        suggestions = ['\u51CF\u5C11\u8BF7\u6C42\u9891\u7387', '\u5B9E\u73B0\u8BF7\u6C42\u9650\u6D41'];\n        break;\n      case 500:\n        errorCode = 'REQUEST_FAILED';\n        message = `HTTP 500 \u670D\u52A1\u5668\u9519\u8BEF: ${url}`;\n        suggestions = ['\u7A0D\u540E\u91CD\u8BD5', '\u8054\u7CFB\u670D\u52A1\u63D0\u4F9B\u5546'];\n        break;\n      case 502:\n        errorCode = 'MCP_UNAVAILABLE';\n        message = `HTTP 502 \u7F51\u5173\u9519\u8BEF: ${url}`;\n        suggestions = ['\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5', '\u7A0D\u540E\u91CD\u8BD5'];\n        break;\n      case 503:\n        errorCode = 'MCP_UNAVAILABLE';\n        message = `HTTP 503 \u670D\u52A1\u4E0D\u53EF\u7528: ${url}`;\n        suggestions = ['\u7A0D\u540E\u91CD\u8BD5', '\u68C0\u67E5\u670D\u52A1\u72B6\u6001'];\n        break;\n      case 504:\n        errorCode = 'TIMEOUT_EXCEEDED';\n        message = `HTTP 504 \u7F51\u5173\u8D85\u65F6: ${url}`;\n        suggestions = ['\u589E\u52A0\u8D85\u65F6\u65F6\u95F4', '\u68C0\u67E5\u7F51\u7EDC\u5EF6\u8FDF'];\n        break;\n      default:\n        message = `HTTP ${status} \u9519\u8BEF: ${url}`;\n        suggestions = ['\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5', '\u7A0D\u540E\u91CD\u8BD5'];\n    }\n\n    return this.createMCPError(errorCode, message, {\n      ...config,\n      context: {\n        ...config.context,\n        status,\n        url,\n        responseText,\n      },\n      suggestions: [...(config.suggestions || []), ...suggestions],\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u8D85\u65F6\u9519\u8BEF\n   */\n  static createTimeoutError(\n    operation: string,\n    timeoutMs: number,\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    return this.createMCPError('TIMEOUT_EXCEEDED', `\u64CD\u4F5C \"${operation}\" \u8D85\u65F6`, {\n      ...config,\n      context: {\n        ...config.context,\n        operation,\n        timeout: timeoutMs,\n      },\n      suggestions: ['\u589E\u52A0\u8D85\u65F6\u65F6\u95F4\u914D\u7F6E', '\u68C0\u67E5\u7F51\u7EDC\u6027\u80FD', '\u4F18\u5316\u64CD\u4F5C\u903B\u8F91'],\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u9A8C\u8BC1\u9519\u8BEF\n   */\n  static createValidationError(\n    fieldName: string,\n    fieldValue: any,\n    expectedType: string,\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    return this.createConfigError('CONFIG_VALIDATION_FAILED', `\u5B57\u6BB5 \"${fieldName}\" \u9A8C\u8BC1\u5931\u8D25`, {\n      ...config,\n      severity: ErrorSeverity.WARNING,\n      context: {\n        ...config.context,\n        fieldName,\n        fieldValue,\n        expectedType,\n      },\n      suggestions: [\n        `\u68C0\u67E5\u5B57\u6BB5 \"${fieldName}\" \u7684\u7C7B\u578B`,\n        `\u63D0\u4F9B\u7B26\u5408 ${expectedType} \u7C7B\u578B\u7684\u503C`,\n        '\u67E5\u770B\u914D\u7F6E\u6587\u6863',\n      ],\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u672A\u627E\u5230\u9519\u8BEF\n   */\n  static createNotFoundError(\n    resource: string,\n    identifier: string,\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    let errorCode: string = 'INTERNAL_ERROR';\n    let module = ErrorCodeModule.CORE;\n\n    // \u6839\u636E\u8D44\u6E90\u7C7B\u578B\u9009\u62E9\u9002\u5F53\u7684\u9519\u8BEF\u7C7B\u578B\n    if (resource.toLowerCase().includes('file')) {\n      errorCode = 'FILE_NOT_FOUND';\n      module = ErrorCodeModule.TOOLS;\n    } else if (resource.toLowerCase().includes('config')) {\n      errorCode = 'CONFIG_NOT_FOUND';\n      module = ErrorCodeModule.CONFIG;\n    } else if (resource.toLowerCase().includes('tool')) {\n      errorCode = 'TOOL_NOT_FOUND';\n      module = ErrorCodeModule.TOOLS;\n    }\n\n    return new BladeError(module, errorCode, `${resource} \"${identifier}\" \u672A\u627E\u5230`, {\n      ...config,\n      context: {\n        ...config.context,\n        resource,\n        identifier,\n      },\n      suggestions: [`\u68C0\u67E5 ${resource} \u8DEF\u5F84\u662F\u5426\u6B63\u786E`, `\u786E\u8BA4 ${resource} \u662F\u5426\u5B58\u5728`, '\u68C0\u67E5\u6743\u9650\u8BBE\u7F6E'],\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u6743\u9650\u9519\u8BEF\n   */\n  static createPermissionError(\n    operation: string,\n    resource: string,\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    let errorCode: string = 'PERMISSION_DENIED';\n    let module = ErrorCodeModule.TOOLS;\n\n    // \u6839\u636E\u8D44\u6E90\u7C7B\u578B\u9009\u62E9\u9002\u5F53\u7684\u9519\u8BEF\u7C7B\u578B\n    if (resource.toLowerCase().includes('security')) {\n      errorCode = 'AUTHORIZATION_FAILED';\n      module = ErrorCodeModule.TOOLS;\n    } else if (resource.toLowerCase().includes('tool')) {\n      errorCode = 'TOOL_PERMISSION_DENIED';\n      module = ErrorCodeModule.TOOLS;\n    }\n\n    return new BladeError(module, errorCode, `\u6CA1\u6709\u6743\u9650\u6267\u884C \"${operation}\" \u64CD\u4F5C`, {\n      ...config,\n      severity: ErrorSeverity.WARNING,\n      context: {\n        ...config.context,\n        operation,\n        resource,\n      },\n      suggestions: [`\u68C0\u67E5\u5BF9 ${resource} \u7684\u8BBF\u95EE\u6743\u9650`, '\u8054\u7CFB\u7BA1\u7406\u5458\u83B7\u53D6\u6743\u9650', '\u4F7F\u7528\u9002\u5F53\u7684\u8EAB\u4EFD\u9A8C\u8BC1'],\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u5185\u5B58\u9519\u8BEF\n   */\n  static createMemoryError(\n    operation: string,\n    memoryInfo?: Record<string, any>,\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    return this.createError(`\u5185\u5B58\u4E0D\u8DB3: \"${operation}\"`, {\n      ...config,\n      module: ErrorCodeModule.CORE,\n      category: ErrorCategory.MEMORY,\n      severity: ErrorSeverity.ERROR,\n      context: {\n        ...config.context,\n        operation,\n        memoryInfo,\n      },\n      suggestions: ['\u91CA\u653E\u4E0D\u5FC5\u8981\u7684\u5185\u5B58', '\u589E\u52A0\u7CFB\u7EDF\u5185\u5B58', '\u4F18\u5316\u5185\u5B58\u4F7F\u7528', '\u68C0\u67E5\u5185\u5B58\u6CC4\u6F0F'],\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u521D\u59CB\u5316\u9519\u8BEF\n   */\n  static createInitializationError(\n    component: string,\n    cause?: Error,\n    config: ErrorCreationConfig = {}\n  ): BladeError {\n    return new BladeError(\n      ErrorCodeModule.CORE,\n      'INITIALIZATION_FAILED',\n      `\u7EC4\u4EF6 \"${component}\" \u521D\u59CB\u5316\u5931\u8D25`,\n      {\n        ...config,\n        severity: ErrorSeverity.CRITICAL,\n        context: {\n          ...config.context,\n          component,\n        },\n        cause: cause instanceof BladeError ? cause : cause ? BladeError.from(cause) : undefined,\n        suggestions: ['\u68C0\u67E5\u7EC4\u4EF6\u914D\u7F6E', '\u9A8C\u8BC1\u4F9D\u8D56\u5173\u7CFB', '\u67E5\u770B\u65E5\u5FD7\u83B7\u53D6\u8BE6\u7EC6\u4FE1\u606F'],\n      }\n    );\n  }\n\n  /**\n   * \u521B\u5EFA\u6587\u4EF6\u7CFB\u7EDF\u9519\u8BEF\n   */\n  static createFileSystemError(\n    errorCode: string,\n    message: string,\n    config: ErrorCreationConfig = {}\n  ): FileSystemError {\n    return new FileSystemError(errorCode, message, {\n      severity: config.severity || ErrorSeverity.ERROR,\n      retryable: config.retryable ?? true,\n      recoverable: config.recoverable ?? true,\n      context: config.context || {},\n      suggestions: config.suggestions || [\n        '\u68C0\u67E5\u6587\u4EF6\u8DEF\u5F84\u662F\u5426\u6B63\u786E',\n        '\u9A8C\u8BC1\u6587\u4EF6\u6743\u9650',\n        '\u786E\u8BA4\u78C1\u76D8\u7A7A\u95F4\u5145\u8DB3',\n      ],\n      cause: config.cause\n        ? config.cause instanceof BladeError\n          ? config.cause\n          : BladeError.from(config.cause)\n        : undefined,\n      ...config,\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u7F51\u7EDC\u9519\u8BEF\n   */\n  static createNetworkError(\n    errorCode: string,\n    message: string,\n    config: ErrorCreationConfig = {}\n  ): NetworkError {\n    return new NetworkError(errorCode, message, {\n      severity: config.severity || ErrorSeverity.ERROR,\n      retryable: config.retryable ?? true,\n      recoverable: config.recoverable ?? true,\n      context: config.context || {},\n      suggestions: config.suggestions || ['\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5', '\u9A8C\u8BC1URL\u662F\u5426\u6B63\u786E', '\u7A0D\u540E\u91CD\u8BD5'],\n      cause: config.cause\n        ? config.cause instanceof BladeError\n          ? config.cause\n          : BladeError.from(config.cause)\n        : undefined,\n      ...config,\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u5B89\u5168\u9519\u8BEF\n   */\n  static createSecurityError(\n    errorCode: string,\n    message: string,\n    config: ErrorCreationConfig = {}\n  ): SecurityError {\n    return new SecurityError(errorCode, message, {\n      severity: config.severity || ErrorSeverity.CRITICAL,\n      retryable: config.retryable ?? false,\n      recoverable: config.recoverable ?? false,\n      context: config.context || {},\n      suggestions: config.suggestions || ['\u68C0\u67E5\u8BA4\u8BC1\u4FE1\u606F', '\u9A8C\u8BC1\u6743\u9650\u8BBE\u7F6E', '\u8054\u7CFB\u7BA1\u7406\u5458'],\n      cause: config.cause\n        ? config.cause instanceof BladeError\n          ? config.cause\n          : BladeError.from(config.cause)\n        : undefined,\n      ...config,\n    });\n  }\n}\n\n/**\n * \u6279\u91CF\u9519\u8BEF\u521B\u5EFA\u5DE5\u5177\n */\nexport class BatchErrorFactory {\n  /**\n   * \u6279\u91CF\u9A8C\u8BC1\u914D\u7F6E\n   */\n  static validateConfig(\n    config: Record<string, any>,\n    schema: Record<string, { type: string; required: boolean }>\n  ): BladeError[] {\n    const errors: BladeError[] = [];\n\n    for (const [field, fieldSchema] of Object.entries(schema)) {\n      const value = config[field];\n\n      // \u68C0\u67E5\u5FC5\u9700\u5B57\u6BB5\n      if (fieldSchema.required && (value === undefined || value === null)) {\n        errors.push(\n          ErrorFactory.createValidationError(field, value, fieldSchema.type, {\n            severity: ErrorSeverity.ERROR,\n            suggestions: [`\u63D0\u4F9B\u5FC5\u9700\u7684\u5B57\u6BB5 \"${field}\"`],\n          })\n        );\n        continue;\n      }\n\n      // \u68C0\u67E5\u5B57\u6BB5\u7C7B\u578B\n      if (value !== undefined && value !== null) {\n        const actualType = Array.isArray(value) ? 'array' : typeof value;\n        if (actualType !== fieldSchema.type) {\n          errors.push(\n            ErrorFactory.createValidationError(field, value, fieldSchema.type, {\n              severity: ErrorSeverity.WARNING,\n              suggestions: [`\u5B57\u6BB5 \"${field}\" \u5E94\u8BE5\u662F ${fieldSchema.type} \u7C7B\u578B`],\n            })\n          );\n        }\n      }\n    }\n\n    return errors;\n  }\n\n  /**\n   * \u6279\u91CF\u68C0\u67E5\u6743\u9650\n   */\n  static checkPermissions(\n    permissions: Array<{ operation: string; resource: string; granted: boolean }>\n  ): BladeError[] {\n    const errors: BladeError[] = [];\n\n    for (const permission of permissions) {\n      if (!permission.granted) {\n        errors.push(ErrorFactory.createPermissionError(permission.operation, permission.resource));\n      }\n    }\n\n    return errors;\n  }\n}\n", "/**\n * \u9519\u8BEF\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DE5\u5177\n * \u63D0\u4F9B\u9519\u8BEF\u7684 JSON \u5E8F\u5217\u5316\u3001\u5B58\u50A8\u548C\u4F20\u8F93\u529F\u80FD\n */\n\nimport { BladeError } from './BladeError.js';\nimport type { ErrorDetails, ErrorReport, ErrorCodeModule, ErrorSeverity, ErrorCategory } from './types.js';\n\n/**\n * \u5E8F\u5217\u5316\u9519\u8BEF\u8BE6\u60C5\u63A5\u53E3\n */\nexport interface SerializedError {\n  name: string;\n  message: string;\n  code: string;\n  module: string;\n  severity: string;\n  category: string;\n  context: Record<string, any>;\n  timestamp: number;\n  retryable: boolean;\n  recoverable: boolean;\n  suggestions: string[];\n  stack?: string;\n  cause?: SerializedError;\n  relatedErrors?: SerializedError[];\n}\n\n/**\n * \u9519\u8BEF\u5E8F\u5217\u5316\u914D\u7F6E\n */\nexport interface ErrorSerializationConfig {\n  includeStack?: boolean;\n  includeContext?: boolean;\n  includeCause?: boolean;\n  includeRelatedErrors?: boolean;\n  maxContextDepth?: number;\n  stripSensitiveData?: boolean;\n  sensitiveFields?: string[];\n}\n\n/**\n * \u9519\u8BEF\u5E8F\u5217\u5316\u5668\u7C7B\n */\nexport class ErrorSerializer {\n  private config: ErrorSerializationConfig;\n\n  constructor(config: ErrorSerializationConfig = {}) {\n    this.config = {\n      includeStack: true,\n      includeContext: true,\n      includeCause: true,\n      includeRelatedErrors: true,\n      maxContextDepth: 10,\n      stripSensitiveData: true,\n      sensitiveFields: ['password', 'token', 'apiKey', 'secret', 'creditCard'],\n      ...config\n    };\n  }\n\n  /**\n   * \u5E8F\u5217\u5316\u5355\u4E2A\u9519\u8BEF\n   */\n  serialize(error: BladeError): SerializedError {\n    let serialized: SerializedError = {\n      name: error.name,\n      message: error.message,\n      code: error.code,\n      module: error.module,\n      severity: error.severity,\n      category: error.category,\n      context: this.config.includeContext ? this.sanitizeContext(error.context) : {},\n      timestamp: error.timestamp,\n      retryable: error.retryable,\n      recoverable: error.recoverable,\n      suggestions: error.suggestions\n    };\n\n    // \u5305\u542B\u5806\u6808\u4FE1\u606F\n    if (this.config.includeStack && error.stack) {\n      serialized.stack = error.stack;\n    }\n\n    // \u5305\u542B\u539F\u59CB\u9519\u8BEF\n    if (this.config.includeCause && error.cause) {\n      serialized.cause = this.serialize(error.cause);\n    }\n\n    // \u5305\u542B\u76F8\u5173\u9519\u8BEF\n    if (this.config.includeRelatedErrors && error.relatedErrors.length > 0) {\n      serialized.relatedErrors = error.relatedErrors.map(e => this.serialize(e));\n    }\n\n    return serialized;\n  }\n\n  /**\n   * \u5E8F\u5217\u5316\u9519\u8BEF\u6570\u7EC4\n   */\n  serializeArray(errors: BladeError[]): SerializedError[] {\n    return errors.map(error => this.serialize(error));\n  }\n\n  /**\n   * \u5E8F\u5217\u5316\u9519\u8BEF\u62A5\u544A\n   */\n  serializeReport(report: ErrorReport): any {\n    return {\n      ...report,\n      error: this.serialize(report.error as any)\n    };\n  }\n\n  /**\n   * \u53CD\u5E8F\u5217\u5316\u9519\u8BEF\n   */\n  deserialize(serialized: SerializedError): BladeError {\n    // \u91CD\u65B0\u521B\u5EFA BladeError \u5B9E\u4F8B\n    const error = new BladeError(\n      serialized.module as ErrorCodeModule,\n      serialized.code,\n      serialized.message,\n      {\n        severity: serialized.severity as ErrorSeverity,\n        category: serialized.category as ErrorCategory,\n        context: serialized.context,\n        timestamp: serialized.timestamp,\n        retryable: serialized.retryable,\n        recoverable: serialized.recoverable,\n        suggestions: serialized.suggestions,\n        stack: serialized.stack\n      }\n    );\n\n    // \u6062\u590D\u76F8\u5173\u9519\u8BEF\n    if (serialized.relatedErrors) {\n      (error as any).relatedErrors = serialized.relatedErrors.map(e => this.deserialize(e));\n    }\n\n    return error;\n  }\n\n  /**\n   * \u53CD\u5E8F\u5217\u5316\u9519\u8BEF\u6570\u7EC4\n   */\n  deserializeArray(serialized: SerializedError[]): BladeError[] {\n    return serialized.map(error => this.deserialize(error));\n  }\n\n  /**\n   * \u5C06\u9519\u8BEF\u8F6C\u6362\u4E3A JSON \u5B57\u7B26\u4E32\n   */\n  toJson(error: BladeError, indent?: number): string {\n    const serialized = this.serialize(error);\n    return JSON.stringify(serialized, null, indent);\n  }\n\n  /**\n   * \u4ECE JSON \u5B57\u7B26\u4E32\u89E3\u6790\u9519\u8BEF\n   */\n  fromJson(jsonString: string): BladeError {\n    const serialized = JSON.parse(jsonString) as SerializedError;\n    return this.deserialize(serialized);\n  }\n\n  /**\n   * \u5C06\u9519\u8BEF\u8F6C\u6362\u4E3A URL \u5B89\u5168\u7684\u5B57\u7B26\u4E32\n   */\n  toSafeString(error: BladeError): string {\n    const serialized = this.serialize(error);\n    const jsonString = JSON.stringify(serialized);\n    return Buffer.from(jsonString).toString('base64');\n  }\n\n  /**\n   * \u4ECE URL \u5B89\u5168\u7684\u5B57\u7B26\u4E32\u89E3\u6790\u9519\u8BEF\n   */\n  fromSafeString(safeString: string): BladeError {\n    const jsonString = Buffer.from(safeString, 'base64').toString();\n    return this.fromJson(jsonString);\n  }\n\n  /**\n   * \u6E05\u7406\u654F\u611F\u6570\u636E\n   */\n  private sanitizeContext(context: Record<string, any>): Record<string, any> {\n    if (!this.config.stripSensitiveData) {\n      return context;\n    }\n\n    const sanitized: Record<string, any> = {};\n    const sensitiveFields = this.config.sensitiveFields || [];\n    \n    for (const [key, value] of Object.entries(context)) {\n      if (this.isSensitiveField(key, sensitiveFields)) {\n        sanitized[key] = '[REDACTED]';\n      } else if (typeof value === 'object' && value !== null) {\n        sanitized[key] = this.sanitizeObject(value, 0);\n      } else {\n        sanitized[key] = value;\n      }\n    }\n\n    return sanitized;\n  }\n\n  /**\n   * \u9012\u5F52\u6E05\u7406\u5BF9\u8C61\u4E2D\u7684\u654F\u611F\u6570\u636E\n   */\n  private sanitizeObject(obj: any, depth: number): any {\n    if (depth >= (this.config.maxContextDepth || 10)) {\n      return '[MAX_DEPTH_REACHED]';\n    }\n\n    if (Array.isArray(obj)) {\n      return obj.map(item => \n        typeof item === 'object' && item !== null \n          ? this.sanitizeObject(item, depth + 1) \n          : item\n      );\n    }\n\n    if (typeof obj === 'object' && obj !== null) {\n      const sanitized: any = {};\n      const sensitiveFields = this.config.sensitiveFields || [];\n      \n      for (const [key, value] of Object.entries(obj)) {\n        if (this.isSensitiveField(key, sensitiveFields)) {\n          sanitized[key] = '[REDACTED]';\n        } else if (typeof value === 'object' && value !== null) {\n          sanitized[key] = this.sanitizeObject(value, depth + 1);\n        } else {\n          sanitized[key] = value;\n        }\n      }\n      \n      return sanitized;\n    }\n\n    return obj;\n  }\n\n  /**\n   * \u68C0\u67E5\u5B57\u6BB5\u662F\u5426\u4E3A\u654F\u611F\u5B57\u6BB5\n   */\n  private isSensitiveField(fieldName: string, sensitiveFields: string[]): boolean {\n    const normalizedName = fieldName.toLowerCase();\n    return sensitiveFields.some(field => \n      normalizedName.includes(field.toLowerCase())\n    );\n  }\n}\n\n/**\n * \u9519\u8BEF\u5B58\u50A8\u9002\u914D\u5668\u63A5\u53E3\n */\nexport interface ErrorStorageAdapter {\n  save(errorId: string, serializedError: SerializedError): Promise<void>;\n  load(errorId: string): Promise<SerializedError | null>;\n  delete(errorId: string): Promise<void>;\n  list(): Promise<string[]>;\n  clear(): Promise<void>;\n}\n\n/**\n * \u5185\u5B58\u5B58\u50A8\u9002\u914D\u5668\n */\nexport class MemoryErrorStorage implements ErrorStorageAdapter {\n  private storage: Map<string, SerializedError> = new Map();\n\n  async save(errorId: string, serializedError: SerializedError): Promise<void> {\n    this.storage.set(errorId, serializedError);\n  }\n\n  async load(errorId: string): Promise<SerializedError | null> {\n    return this.storage.get(errorId) || null;\n  }\n\n  async delete(errorId: string): Promise<void> {\n    this.storage.delete(errorId);\n  }\n\n  async list(): Promise<string[]> {\n    return Array.from(this.storage.keys());\n  }\n\n  async clear(): Promise<void> {\n    this.storage.clear();\n  }\n}\n\n/**\n * \u9519\u8BEF\u6301\u4E45\u5316\u7BA1\u7406\u5668\n */\nexport class ErrorPersistenceManager {\n  private serializer: ErrorSerializer;\n  private storage: ErrorStorageAdapter;\n  private maxSize: number;\n\n  constructor(\n    storage: ErrorStorageAdapter,\n    serializerConfig?: ErrorSerializationConfig,\n    options?: { maxSize?: number }\n  ) {\n    this.serializer = new ErrorSerializer(serializerConfig);\n    this.storage = storage;\n    this.maxSize = options?.maxSize || 1000;\n  }\n\n  /**\n   * \u4FDD\u5B58\u9519\u8BEF\n   */\n  async saveError(error: BladeError, customId?: string): Promise<string> {\n    const errorId = customId || this.generateErrorId(error);\n    const serializedError = this.serializer.serialize(error);\n\n    // \u68C0\u67E5\u5B58\u50A8\u5927\u5C0F\u9650\u5236\n    await this.enforceSizeLimit();\n\n    await this.storage.save(errorId, serializedError);\n    return errorId;\n  }\n\n  /**\n   * \u52A0\u8F7D\u9519\u8BEF\n   */\n  async loadError(errorId: string): Promise<BladeError | null> {\n    const serialized = await this.storage.load(errorId);\n    if (!serialized) {\n      return null;\n    }\n\n    return this.serializer.deserialize(serialized);\n  }\n\n  /**\n   * \u5220\u9664\u9519\u8BEF\n   */\n  async deleteError(errorId: string): Promise<void> {\n    await this.storage.delete(errorId);\n  }\n\n  /**\n   * \u5217\u51FA\u6240\u6709\u9519\u8BEFID\n   */\n  async listErrors(): Promise<string[]> {\n    return this.storage.list();\n  }\n\n  /**\n   * \u6279\u91CF\u52A0\u8F7D\u9519\u8BEF\n   */\n  async loadErrors(errorIds: string[]): Promise<BladeError[]> {\n    const errors: BladeError[] = [];\n    \n    for (const errorId of errorIds) {\n      const error = await this.loadError(errorId);\n      if (error) {\n        errors.push(error);\n      }\n    }\n\n    return errors;\n  }\n\n  /**\n   * \u6E05\u7A7A\u5B58\u50A8\n   */\n  async clear(): Promise<void> {\n    await this.storage.clear();\n  }\n\n  /**\n   * \u5BFC\u51FA\u9519\u8BEF\u6570\u636E\n   */\n  async export(format: 'json' | 'csv' = 'json'): Promise<string> {\n    const errorIds = await this.listErrors();\n    const errors = await this.loadErrors(errorIds);\n\n    if (format === 'json') {\n      const serialized = errors.map(e => this.serializer.serialize(e));\n      return JSON.stringify(serialized, null, 2);\n    } else if (format === 'csv') {\n      const headers = [\n        'timestamp', 'code', 'message', 'module', 'severity', \n        'category', 'retryable', 'recoverable'\n      ];\n      const rows = errors.map(error => [\n        error.timestamp,\n        error.code,\n        `\"${error.message.replace(/\"/g, '\"\"')}\"`,\n        error.module,\n        error.severity,\n        error.category,\n        error.retryable,\n        error.recoverable\n      ]);\n\n      return [headers, ...rows]\n        .map(row => row.join(','))\n        .join('\\n');\n    }\n\n    throw new Error('\u4E0D\u652F\u6301\u7684\u5BFC\u51FA\u683C\u5F0F');\n  }\n\n  /**\n   * \u751F\u6210\u9519\u8BEFID\n   */\n  private generateErrorId(error: BladeError): string {\n    return `${error.code}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * \u5F3A\u5236\u6267\u884C\u5B58\u50A8\u5927\u5C0F\u9650\u5236\n   */\n  private async enforceSizeLimit(): Promise<void> {\n    const errorIds = await this.listErrors();\n    \n    if (errorIds.length >= this.maxSize) {\n      // \u5220\u9664\u6700\u65E7\u7684\u9519\u8BEF\n      const overflow = errorIds.length - this.maxSize + 1;\n      const idsToDelete = errorIds.slice(0, overflow);\n      \n      for (const id of idsToDelete) {\n        await this.deleteError(id);\n      }\n    }\n  }\n}\n\n/**\n * \u5168\u5C40\u9519\u8BEF\u5E8F\u5217\u5316\u5668\u5B9E\u4F8B\n */\nexport const globalErrorSerializer = new ErrorSerializer();\n\n/**\n * \u5168\u5C40\u9519\u8BEF\u6301\u4E45\u5316\u7BA1\u7406\u5668\u5B9E\u4F8B\uFF08\u4F7F\u7528\u5185\u5B58\u5B58\u50A8\uFF09\n */\nexport const globalErrorPersistence = new ErrorPersistenceManager(\n  new MemoryErrorStorage()\n);", "/**\n * \u9519\u8BEF\u8FB9\u754C\u548C\u8C03\u8BD5\u5DE5\u5177\n * \u63D0\u4F9B\u9519\u8BEF\u8FB9\u754C\u7EC4\u4EF6\u3001\u8C03\u8BD5\u529F\u80FD\u548C\u9519\u8BEF\u8FFD\u8E2A\n */\n\nimport { BladeError } from './BladeError.js';\nimport { ErrorPersistenceManager } from './ErrorSerializer.js';\nimport { ErrorCodeModule } from './types.js';\n\n\n/**\n * \u9519\u8BEF\u8FB9\u754C\u914D\u7F6E\n */\nexport interface ErrorBoundaryConfig {\n  enabled: boolean;\n  catchUnhandledErrors: boolean;\n  catchUnhandledRejections: boolean;\n  maxErrors: number;\n  errorLogger?: (error: BladeError) => void;\n  recoveryCallback?: (error: BladeError) => void;\n  fallbackHandler?: (error: BladeError) => any;\n}\n\n/**\n * \u9519\u8BEF\u8FB9\u754C\u72B6\u6001\n */\nexport interface ErrorBoundaryState {\n  hasError: boolean;\n  errors: BladeError[];\n  lastError: BladeError | null;\n  errorCount: number;\n  startTime: number;\n}\n\n/**\n * \u9519\u8BEF\u8FFD\u8E2A\u4FE1\u606F\n */\nexport interface ErrorTrace {\n  id: string;\n  timestamp: number;\n  error: BladeError;\n  stack?: string;\n  context?: Record<string, any>;\n  executionTime?: number;\n  memoryUsage?: any;\n}\n\n/**\n * \u8C03\u8BD5\u5DE5\u5177\u914D\u7F6E\n */\nexport interface DebugToolsConfig {\n  enabled: boolean;\n  captureStackTraces: boolean;\n  captureContext: boolean;\n  captureMemoryUsage: boolean;\n  captureExecutionTime: boolean;\n  maxTraces: number;\n  logLevel: 'debug' | 'info' | 'warn' | 'error';\n}\n\n/**\n * \u9519\u8BEF\u8FB9\u754C\u7C7B\n */\nexport class ErrorBoundary {\n  private config: ErrorBoundaryConfig;\n  private state: ErrorBoundaryState;\n  private persistence: ErrorPersistenceManager;\n\n  constructor(config: Partial<ErrorBoundaryConfig> = {}) {\n    this.config = {\n      enabled: true,\n      catchUnhandledErrors: true,\n      catchUnhandledRejections: true,\n      maxErrors: 100,\n      ...config\n    };\n\n    this.state = {\n      hasError: false,\n      errors: [],\n      lastError: null,\n      errorCount: 0,\n      startTime: Date.now()\n    };\n\n    this.persistence = new ErrorPersistenceManager(\n      new (class MemoryStorage {\n        private storage = new Map<string, any>();\n        \n        async save(id: string, data: any) { this.storage.set(id, data); }\n        async load(id: string) { return this.storage.get(id) || null; }\n        async delete(id: string) { this.storage.delete(id); }\n        async list() { return Array.from(this.storage.keys()); }\n        async clear() { this.storage.clear(); }\n      })()\n    );\n\n    this.setupGlobalErrorHandlers();\n  }\n\n  /**\n   * \u5305\u88C5\u51FD\u6570\uFF0C\u5728\u9519\u8BEF\u8FB9\u754C\u4E2D\u6267\u884C\n   */\n  async wrap<T>(fn: () => Promise<T>, context?: Record<string, any>): Promise<T> {\n    if (!this.config.enabled) {\n      return fn();\n    }\n\n    try {\n      return await fn();\n    } catch (error) {\n      const bladeError = error instanceof BladeError \n        ? error \n        : BladeError.from(error as Error);\n      \n      await this.handleError(bladeError, context);\n      \n      if (this.config.fallbackHandler) {\n        return this.config.fallbackHandler(bladeError);\n      }\n      \n      throw bladeError;\n    }\n  }\n\n  /**\n   * \u540C\u6B65\u5305\u88C5\u51FD\u6570\n   */\n  wrapSync<T>(fn: () => T, context?: Record<string, any>): T {\n    if (!this.config.enabled) {\n      return fn();\n    }\n\n    try {\n      return fn();\n    } catch (error) {\n      const bladeError = error instanceof BladeError \n        ? error \n        : BladeError.from(error as Error);\n      \n      this.handleSyncError(bladeError, context);\n      \n      if (this.config.fallbackHandler) {\n        return this.config.fallbackHandler(bladeError);\n      }\n      \n      throw bladeError;\n    }\n  }\n\n  /**\n   * \u5904\u7406\u9519\u8BEF\n   */\n  async handleError(error: BladeError, context?: Record<string, any>): Promise<void> {\n    // \u6DFB\u52A0\u4E0A\u4E0B\u6587\n    if (context) {\n      (error as any).context = { ...error.context, ...context };\n    }\n\n    // \u66F4\u65B0\u72B6\u6001\n    this.state.hasError = true;\n    this.state.lastError = error;\n    this.state.errors.push(error);\n    this.state.errorCount++;\n\n    // \u9650\u5236\u9519\u8BEF\u6570\u91CF\n    if (this.state.errors.length > this.config.maxErrors) {\n      this.state.errors.shift();\n    }\n\n    // \u6301\u4E45\u5316\u9519\u8BEF\n    await this.persistence.saveError(error);\n\n    // \u8C03\u7528\u9519\u8BEF\u56DE\u8C03\n    if (this.config.recoveryCallback) {\n      try {\n        await this.config.recoveryCallback(error);\n      } catch (callbackError) {\n        console.error('\u9519\u8BEF\u6062\u590D\u56DE\u8C03\u5931\u8D25:', callbackError);\n      }\n    }\n\n    // \u8BB0\u5F55\u9519\u8BEF\n    if (this.config.errorLogger) {\n      this.config.errorLogger(error);\n    } else {\n      console.error('[ErrorBoundary]', error.toString());\n    }\n  }\n\n  /**\n   * \u5904\u7406\u540C\u6B65\u9519\u8BEF\n   */\n  private handleSyncError(error: BladeError, context?: Record<string, any>): void {\n    // \u7ACB\u5373\u6DFB\u52A0\u4E0A\u4E0B\u6587\n    if (context) {\n      (error as any).context = { ...error.context, ...context };\n    }\n\n    // \u66F4\u65B0\u72B6\u6001\n    this.state.hasError = true;\n    this.state.lastError = error;\n    this.state.errors.push(error);\n    this.state.errorCount++;\n\n    // \u5F02\u6B65\u8BB0\u5F55\u9519\u8BEF\n    setImmediate(() => {\n      this.persistence.saveError(error).catch(err => {\n        console.error('\u9519\u8BEF\u6301\u4E45\u5316\u5931\u8D25:', err);\n      });\n    });\n\n    // \u8C03\u7528\u9519\u8BEF\u56DE\u8C03\n    if (this.config.recoveryCallback) {\n      try {\n        this.config.recoveryCallback(error);\n      } catch (callbackError) {\n        console.error('\u9519\u8BEF\u6062\u590D\u56DE\u8C03\u5931\u8D25:', callbackError);\n      }\n    }\n\n    // \u8BB0\u5F55\u9519\u8BEF\n    if (this.config.errorLogger) {\n      this.config.errorLogger(error);\n    } else {\n      console.error('[ErrorBoundary]', error.toString());\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u9519\u8BEF\u8FB9\u754C\u72B6\u6001\n   */\n  getState(): ErrorBoundaryState {\n    return { ...this.state };\n  }\n\n  /**\n   * \u83B7\u53D6\u9519\u8BEF\u5386\u53F2\n   */\n  async getErrorHistory(limit?: number): Promise<BladeError[]> {\n    const errorIds = await this.persistence.listErrors();\n    let errors = await this.persistence.loadErrors(errorIds);\n    \n    // \u6309\u65F6\u95F4\u6233\u5012\u5E8F\u6392\u5217\n    errors = errors.sort((a, b) => b.timestamp - a.timestamp);\n    \n    return limit ? errors.slice(0, limit) : errors;\n  }\n\n  /**\n   * \u6E05\u9664\u9519\u8BEF\u5386\u53F2\n   */\n  async clearErrorHistory(): Promise<void> {\n    await this.persistence.clear();\n    this.state = {\n      hasError: false,\n      errors: [],\n      lastError: null,\n      errorCount: 0,\n      startTime: Date.now()\n    };\n  }\n\n  /**\n   * \u91CD\u7F6E\u9519\u8BEF\u8FB9\u754C\n   */\n  reset(): void {\n    this.state = {\n      hasError: false,\n      errors: [],\n      lastError: null,\n      errorCount: 0,\n      startTime: Date.now()\n    };\n  }\n\n  /**\n   * \u8BBE\u7F6E\u5168\u5C40\u9519\u8BEF\u5904\u7406\u5668\n   */\n  private setupGlobalErrorHandlers(): void {\n    if (this.config.catchUnhandledErrors) {\n      process.on('uncaughtException', async (error) => {\n        const bladeError = error instanceof Error \n          ? BladeError.from(error)\n          : new BladeError(ErrorCodeModule.CORE, 'INTERNAL_ERROR', String(error));\n        \n        await this.handleError(bladeError, {\n          source: 'uncaughtException',\n          processInfo: {\n            pid: process.pid,\n            uptime: process.uptime(),\n            memoryUsage: process.memoryUsage()\n          }\n        });\n      });\n    }\n\n    if (this.config.catchUnhandledRejections) {\n      process.on('unhandledRejection', async (reason) => {\n        const error = reason instanceof Error \n          ? reason \n          : new Error(String(reason));\n        \n        const bladeError = BladeError.from(error as Error, ErrorCodeModule.CORE);\n        \n        await this.handleError(bladeError, {\n          source: 'unhandledRejection',\n          processInfo: {\n            pid: process.pid,\n            uptime: process.uptime(),\n            memoryUsage: process.memoryUsage()\n          }\n        });\n      });\n    }\n  }\n}\n\n/**\n * \u9519\u8BEF\u8C03\u8BD5\u5DE5\u5177\u7C7B\n */\nexport class ErrorDebugTools {\n  private config: DebugToolsConfig;\n  private traces: Map<string, ErrorTrace> = new Map();\n\n  constructor(config: Partial<DebugToolsConfig> = {}) {\n    this.config = {\n      enabled: false,\n      captureStackTraces: true,\n      captureContext: true,\n      captureMemoryUsage: true,\n      captureExecutionTime: true,\n      maxTraces: 100,\n      logLevel: 'debug',\n      ...config\n    };\n  }\n\n  /**\n   * \u5F00\u59CB\u8FFD\u8E2A\n   */\n  startTrace(operationId: string, context?: Record<string, any>): void {\n    if (!this.config.enabled) {\n      return;\n    }\n\n    const trace: ErrorTrace = {\n      id: this.generateTraceId(),\n      timestamp: Date.now(),\n      error: new BladeError(ErrorCodeModule.CORE, '0004', '\u8FFD\u8E2A\u5F00\u59CB', {\n        category: 'DEBUG' as any,\n        severity: 'DEBUG' as any,\n        context\n      })\n    };\n\n    if (this.config.captureMemoryUsage) {\n      trace.memoryUsage = process.memoryUsage();\n    }\n\n    this.traces.set(operationId, trace);\n    this.logTrace('\u5F00\u59CB\u8FFD\u8E2A', trace);\n  }\n\n  /**\n   * \u7ED3\u675F\u8FFD\u8E2A\n   */\n  endTrace(operationId: string, error?: Error | BladeError): void {\n    if (!this.config.enabled) {\n      return;\n    }\n\n    const trace = this.traces.get(operationId);\n    if (!trace) {\n      return;\n    }\n\n    // \u66F4\u65B0\u8FFD\u8E2A\u4FE1\u606F\n    if (error) {\n      trace.error = error instanceof BladeError \n        ? error \n        : BladeError.from(error as Error);\n    }\n\n    if (this.config.captureExecutionTime) {\n      trace.executionTime = Date.now() - trace.timestamp;\n    }\n\n    if (this.config.captureStackTraces) {\n      trace.stack = new Error().stack;\n    }\n\n    if (this.config.captureMemoryUsage) {\n      trace.memoryUsage = process.memoryUsage();\n    }\n\n    this.logTrace('\u7ED3\u675F\u8FFD\u8E2A', trace);\n    \n    // \u6E05\u7406\u8FFD\u8E2A\n    this.traces.delete(operationId);\n  }\n\n  /**\n   * \u6355\u83B7\u5F53\u524D\u72B6\u6001\n   */\n  captureState(operationId: string, additionalContext?: Record<string, any>): void {\n    if (!this.config.enabled) {\n      return;\n    }\n\n    const trace = this.traces.get(operationId);\n    if (!trace) {\n      return;\n    }\n\n    const state = {\n      timestamp: Date.now(),\n      memoryUsage: this.config.captureMemoryUsage ? process.memoryUsage() : undefined,\n      context: additionalContext,\n      stack: this.config.captureStackTraces ? new Error().stack : undefined\n    };\n\n    if (!trace.context) {\n      trace.context = {};\n    }\n    \n    trace.context = { ...trace.context, ...state };\n    this.logTrace('\u72B6\u6001\u6355\u83B7', trace);\n  }\n\n  /**\n   * \u83B7\u53D6\u8FFD\u8E2A\u4FE1\u606F\n   */\n  getTrace(operationId: string): ErrorTrace | undefined {\n    return this.traces.get(operationId);\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u8FFD\u8E2A\n   */\n  getAllTraces(): ErrorTrace[] {\n    return Array.from(this.traces.values());\n  }\n\n  /**\n   * \u6E05\u9664\u6240\u6709\u8FFD\u8E2A\n   */\n  clearTraces(): void {\n    this.traces.clear();\n  }\n\n  /**\n   * \u751F\u6210\u8C03\u8BD5\u62A5\u544A\n   */\n  generateDebugReport(): string {\n    const traces = Array.from(this.traces.values());\n    const timestamp = new Date().toISOString();\n    \n    let report = `# \u9519\u8BEF\u8C03\u8BD5\u62A5\u544A\\n`;\n    report += `\u751F\u6210\u65F6\u95F4: ${timestamp}\\n`;\n    report += `\u8FFD\u8E2A\u6570\u91CF: ${traces.length}\\n\\n`;\n\n    for (const trace of traces) {\n      report += `## \u8FFD\u8E2A ID: ${trace.id}\\n`;\n      report += `- \u5F00\u59CB\u65F6\u95F4: ${new Date(trace.timestamp).toISOString()}\\n`;\n      report += `- \u6267\u884C\u65F6\u95F4: ${trace.executionTime || 'N/A'}ms\\n`;\n      report += `- \u9519\u8BEF: ${trace.error.message}\\n`;\n      \n      if (trace.memoryUsage) {\n        report += `- \u5185\u5B58\u4F7F\u7528: ${Math.round(trace.memoryUsage.heapUsed / 1024 / 1024)}MB\\n`;\n      }\n      \n      if (trace.context) {\n        report += `- \u4E0A\u4E0B\u6587: ${JSON.stringify(trace.context, null, 2)}\\n`;\n      }\n      \n      if (trace.stack) {\n        report += `- \u5806\u6808\u8DDF\u8E2A:\\n\\`\\`\\`\\n${trace.stack}\\n\\`\\`\\`\\n`;\n      }\n      \n      report += '\\n';\n    }\n\n    return report;\n  }\n\n  /**\n   * \u542F\u7528\u8C03\u8BD5\u6A21\u5F0F\n   */\n  enable(): void {\n    this.config.enabled = true;\n  }\n\n  /**\n   * \u7981\u7528\u8C03\u8BD5\u6A21\u5F0F\n   */\n  disable(): void {\n    this.config.enabled = false;\n  }\n\n  /**\n   * \u8BB0\u5F55\u8FFD\u8E2A\u4FE1\u606F\n   */\n  private logTrace(message: string, trace: ErrorTrace): void {\n    if (!this.config.enabled) {\n      return;\n    }\n\n    const levelMap = {\n      debug: 0,\n      info: 1,\n      warn: 2,\n      error: 3\n    };\n\n    const currentLevel = levelMap[this.config.logLevel];\n    const messageLevel = trace.error.severity === 'CRITICAL' || trace.error.severity === 'ERROR' ? 3 : 0;\n\n    if (messageLevel >= currentLevel) {\n      console.log(`[DebugTools] ${message}:`, {\n        traceId: trace.id,\n        operation: trace.error.message,\n        timestamp: trace.timestamp,\n        executionTime: trace.executionTime\n      });\n    }\n  }\n\n  /**\n   * \u751F\u6210\u8FFD\u8E2AID\n   */\n  private generateTraceId(): string {\n    return `trace_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n\n/**\n * \u5168\u5C40\u9519\u8BEF\u8FB9\u754C\u5B9E\u4F8B\n */\nexport const globalErrorBoundary = new ErrorBoundary();\n\n/**\n * \u5168\u5C40\u8C03\u8BD5\u5DE5\u5177\u5B9E\u4F8B\n */\nexport const globalDebugTools = new ErrorDebugTools();\n\n/**\n * \u9519\u8BEF\u8FB9\u754C\u88C5\u9970\u5668\n */\nexport function withErrorBoundary(config: Partial<ErrorBoundaryConfig> = {}) {\n  const boundary = new ErrorBoundary(config);\n  \n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    \n    descriptor.value = async function (...args: any[]) {\n      const context = {\n        className: target.constructor.name,\n        methodName: propertyKey,\n        arguments: config.enabled ? args : undefined\n      };\n      \n      return boundary.wrap(() => originalMethod.apply(this, args), context);\n    };\n    \n    return descriptor;\n  };\n}\n\n/**\n * \u8C03\u8BD5\u8FFD\u8E2A\u88C5\u9970\u5668\n */\nexport function withDebugTrace(operationId?: string) {\n  const debugTools = new ErrorDebugTools();\n  \n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    \n    descriptor.value = async function (...args: any[]) {\n      const opId = operationId || `${target.constructor.name}.${propertyKey}`;\n      \n      try {\n        debugTools.startTrace(opId, { arguments: args });\n        const result = await originalMethod.apply(this, args);\n        debugTools.endTrace(opId);\n        return result;\n      } catch (error) {\n        debugTools.endTrace(opId, error as Error | BladeError);\n        throw error;\n      }\n    };\n    \n    return descriptor;\n  };\n}", "/**\n * Blade \u6781\u7B80\u914D\u7F6E\n * \u5E73\u94FA\u5F0F\u4E00\u4F53\u5316\u9ED8\u8BA4\u914D\u7F6E\n */\n\nimport type { BladeConfig } from './types/index.js';\n\nexport const DEFAULT_CONFIG: BladeConfig = {\n  // \u8BA4\u8BC1\u914D\u7F6E\n  apiKey: '',\n  baseUrl: 'https://apis.iflow.cn/v1',\n  modelName: 'Qwen3-Coder',\n  \n  // \u641C\u7D22\u914D\u7F6E\n  searchApiKey: '',\n  theme: 'GitHub',\n  sandbox: 'docker',\n  \n  // UI \u914D\u7F6E\n  hideTips: false,\n  hideBanner: false,\n  \n  // \u4F7F\u7528\u914D\u7F6E\n  maxSessionTurns: 10,\n  \n  // \u5DE5\u5177\u914D\u7F6E\n  toolDiscoveryCommand: 'bin/get_tools',\n  toolCallCommand: 'bin/call_tool',\n  \n  // \u9065\u6D4B\u914D\u7F6E\n  telemetryEnabled: true,\n  telemetryTarget: 'local',\n  otlpEndpoint: 'http://localhost:4317',\n  logPrompts: false,\n  usageStatisticsEnabled: true,\n  \n  // \u8C03\u8BD5\u914D\u7F6E\n  debug: false,\n};\n\n/**\n * \u7B80\u5316\u73AF\u5883\u53D8\u91CF\u6620\u5C04\n */\nexport const ENV_MAPPING = {\n  BLADE_API_KEY: 'apiKey',\n  BLADE_BASE_URL: 'baseUrl',\n  BLADE_MODEL: 'modelName',\n  BLADE_SEARCH_API_KEY: 'searchApiKey',\n  BLADE_THEME: 'theme',\n  BLADE_SANDBOX: 'sandbox',\n  BLADE_MAX_TURNS: 'maxSessionTurns',\n  BLADE_DEBUG: 'debug',\n};\n\n/**\n * \u5B8C\u5168\u7FFB\u7FFB\u91CD\u5199\u7684\u9ED8\u8BA4\u63D0\u4F9B\u5546\n */\nexport const getProviderConfig = () => DEFAULT_CONFIG;\nexport const isProviderSupported = () => true;\nexport const validateApiKey = (key: string) => key || process.env.BLADE_API_KEY || '';\nexport const loadConfigFromEnv = () => ({\n  apiKey: process.env.BLADE_API_KEY || '',\n  baseUrl: process.env.BLADE_BASE_URL || 'https://apis.iflow.cn/v1',\n  modelName: process.env.BLADE_MODEL || 'Qwen3-Coder',\n});", "/**\n * Blade \u914D\u7F6E\u7BA1\u7406\u5668 (\u7B80\u5316\u7248\u672C)\n * \u63D0\u4F9B\u57FA\u7840\u7684\u914D\u7F6E\u7BA1\u7406\u529F\u80FD\n */\n\nimport { ConfigError, ErrorFactory, globalErrorMonitor } from '../error/index.js';\nimport type { BladeConfig } from './types/index.js';\nimport { DEFAULT_CONFIG, ENV_MAPPING } from './defaults.js';\n\nexport class ConfigManager {\n  private config: BladeConfig;\n  private subscribers: Array<(config: BladeConfig) => void> = [];\n\n  constructor() {\n    this.config = { ...DEFAULT_CONFIG };\n    this.loadFromEnvironment();\n  }\n\n  private loadFromEnvironment(): void {\n    try {\n      for (const [envKey, configKey] of Object.entries(ENV_MAPPING)) {\n        const envValue = process.env[envKey];\n        if (envValue) {\n          (this.config as any)[configKey] = this.parseEnvValue(envValue);\n        }\n      }\n    } catch (error) {\n      const bladeError =\n        error instanceof Error\n          ? ErrorFactory.fromNativeError(error, '\u73AF\u5883\u53D8\u91CF\u52A0\u8F7D\u5931\u8D25')\n          : new ConfigError('CONFIG_LOAD_FAILED', '\u73AF\u5883\u53D8\u91CF\u52A0\u8F7D\u5931\u8D25');\n\n      globalErrorMonitor.monitor(bladeError);\n      console.warn('\u73AF\u5883\u53D8\u91CF\u52A0\u8F7D\u5931\u8D25\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E:', error);\n    }\n  }\n\n  private parseEnvValue(value: string): any {\n    // \u5C1D\u8BD5\u89E3\u6790\u5E03\u5C14\u503C\n    if (value.toLowerCase() === 'true') return true;\n    if (value.toLowerCase() === 'false') return false;\n\n    // \u5C1D\u8BD5\u89E3\u6790\u6570\u5B57\n    const numValue = Number(value);\n    if (!isNaN(numValue)) return numValue;\n\n    // \u8FD4\u56DE\u5B57\u7B26\u4E32\n    return value;\n  }\n\n  public getConfig(): BladeConfig {\n    return { ...this.config };\n  }\n\n  public updateConfig(updates: Partial<BladeConfig>): void {\n    try {\n      this.config = { ...this.config, ...updates };\n      this.notifySubscribers();\n    } catch (error) {\n      const bladeError =\n        error instanceof Error\n          ? ErrorFactory.fromNativeError(error, '\u914D\u7F6E\u66F4\u65B0\u5931\u8D25')\n          : new ConfigError('CONFIG_LOAD_FAILED', '\u914D\u7F6E\u66F4\u65B0\u5931\u8D25');\n\n      globalErrorMonitor.monitor(bladeError);\n      throw bladeError;\n    }\n  }\n\n  public async get(key: keyof BladeConfig): Promise<any> {\n    return this.config[key];\n  }\n\n  public async set(key: keyof BladeConfig, value: any): Promise<void> {\n    try {\n      (this.config as any)[key] = value;\n      this.notifySubscribers();\n    } catch (error) {\n      const bladeError =\n        error instanceof Error\n          ? ErrorFactory.fromNativeError(error, '\u914D\u7F6E\u8BBE\u7F6E\u5931\u8D25')\n          : new ConfigError('CONFIG_LOAD_FAILED', '\u914D\u7F6E\u8BBE\u7F6E\u5931\u8D25');\n\n      globalErrorMonitor.monitor(bladeError);\n      throw bladeError;\n    }\n  }\n\n  public async reload(): Promise<BladeConfig> {\n    try {\n      this.config = { ...DEFAULT_CONFIG };\n      this.loadFromEnvironment();\n      this.notifySubscribers();\n      return this.getConfig();\n    } catch (error) {\n      const bladeError =\n        error instanceof Error\n          ? ErrorFactory.fromNativeError(error, '\u914D\u7F6E\u91CD\u8F7D\u5931\u8D25')\n          : new ConfigError('CONFIG_LOAD_FAILED', '\u914D\u7F6E\u91CD\u8F7D\u5931\u8D25');\n\n      globalErrorMonitor.monitor(bladeError);\n      throw bladeError;\n    }\n  }\n\n  public enableHotReload(): void {\n    // \u7B80\u5316\u7248\u672C\u6682\u4E0D\u652F\u6301\u70ED\u91CD\u8F7D\n    console.warn('\u70ED\u91CD\u8F7D\u529F\u80FD\u5728\u7B80\u5316\u7248\u672C\u4E2D\u4E0D\u53EF\u7528');\n  }\n\n  public disableHotReload(): void {\n    // \u7B80\u5316\u7248\u672C\u6682\u4E0D\u652F\u6301\u70ED\u91CD\u8F7D\n  }\n\n  public subscribe(callback: (config: BladeConfig) => void): () => void {\n    this.subscribers.push(callback);\n    return () => {\n      const index = this.subscribers.indexOf(callback);\n      if (index > -1) {\n        this.subscribers.splice(index, 1);\n      }\n    };\n  }\n\n  private notifySubscribers(): void {\n    const config = this.getConfig();\n    this.subscribers.forEach(callback => {\n      try {\n        callback(config);\n      } catch (error) {\n        console.error('\u914D\u7F6E\u8BA2\u9605\u56DE\u8C03\u6267\u884C\u5931\u8D25:', error);\n      }\n    });\n  }\n\n  private validateConfig(config: Partial<BladeConfig>): any[] {\n    const errors: any[] = [];\n\n    // \u57FA\u7840\u9A8C\u8BC1\n    if (config.apiKey !== undefined && typeof config.apiKey !== 'string') {\n      errors.push({ path: 'apiKey', message: 'API Key \u5FC5\u987B\u662F\u5B57\u7B26\u4E32' });\n    }\n\n    if (config.baseUrl !== undefined && typeof config.baseUrl !== 'string') {\n      errors.push({ path: 'baseUrl', message: 'Base URL \u5FC5\u987B\u662F\u5B57\u7B26\u4E32' });\n    }\n\n    if (config.modelName !== undefined && typeof config.modelName !== 'string') {\n      errors.push({ path: 'modelName', message: 'Model Name \u5FC5\u987B\u662F\u5B57\u7B26\u4E32' });\n    }\n\n    return errors;\n  }\n\n  private validateConfigValue(key: keyof BladeConfig, value: any): any[] {\n    const errors: any[] = [];\n\n    switch (key) {\n      case 'apiKey':\n      case 'baseUrl':\n      case 'modelName':\n      case 'searchApiKey':\n        if (value !== undefined && typeof value !== 'string') {\n          errors.push({ path: key, message: `${key} \u5FC5\u987B\u662F\u5B57\u7B26\u4E32` });\n        }\n        break;\n      case 'maxSessionTurns':\n        if (value !== undefined && (typeof value !== 'number' || value < 1)) {\n          errors.push({ path: key, message: `${key} \u5FC5\u987B\u662F\u5927\u4E8E0\u7684\u6570\u5B57` });\n        }\n        break;\n      case 'debug':\n      case 'hideTips':\n      case 'hideBanner':\n      case 'usageStatisticsEnabled':\n        if (value !== undefined && typeof value !== 'boolean') {\n          errors.push({ path: key, message: `${key} \u5FC5\u987B\u662F\u5E03\u5C14\u503C` });\n        }\n        break;\n    }\n\n    return errors;\n  }\n}\n", "/**\n * \u5E73\u94FA\u914D\u7F6ELLM\u7BA1\u7406\u5668\n * \u76F4\u63A5\u6620\u5C04\u5230\u6781\u7B80\u4E09\u8981\u7D20\u914D\u7F6E\n */\n\nimport type { BladeConfig } from '../config/types/index.js';\nimport {\n  ErrorFactory,\n  LLMError,\n  NetworkError,\n  globalRetryManager\n} from '../error/index.js';\n\nexport interface LLMMessage {\n  role: 'system' | 'user' | 'assistant';\n  content: string;\n}\n\nexport interface LLMRequest {\n  messages: LLMMessage[];\n  apiKey: string;\n  baseUrl: string;\n  modelName: string;\n  temperature?: number;\n  maxTokens?: number;\n  stream?: boolean;\n  timeout?: number;\n}\n\nexport interface LLMResponse {\n  content: string;\n  usage?: {\n    promptTokens: number;\n    completionTokens: number;\n    totalTokens: number;\n  };\n  model?: string;\n}\n\n/**\n * \u5E73\u94FA\u914D\u7F6ELLM\u7BA1\u7406\u5668  \n * \u6838\u5FC3\u804C\u8D23\uFF1A\u7528\u5E73\u94FA\u4E09\u8981\u7D20(apiKey, baseUrl, modelName)\u76F4\u63A5\u9A71\u52A8\u6A21\u578B\n */\nexport class LLMManager {\n  private config: Partial<LLMRequest> = {};\n\n  constructor(config: Pick<BladeConfig, 'apiKey' | 'baseUrl' | 'modelName'>) {\n    this.config = {\n      apiKey: config.apiKey || '',\n      baseUrl: config.baseUrl || 'https://apis.iflow.cn/v1',\n      modelName: config.modelName || 'Qwen3-Coder',\n    };\n  }\n\n  /**\n   * \u8BBE\u7F6E\u914D\u7F6E\n   */\n  configure(config: Partial<LLMRequest>) {\n    Object.assign(this.config, config);\n  }\n\n  /**\n   * \u57FA\u7840\u8C03\u7528\n   */\n  async send(request: Partial<LLMRequest>): Promise<LLMResponse> {\n    const config = { ...this.config, ...request };\n    \n    // \u9A8C\u8BC1\u5FC5\u8981\u914D\u7F6E\n    if (!config.apiKey) {\n      throw ErrorFactory.createLLMError('API_KEY_MISSING', 'API\u5BC6\u94A5\u672A\u914D\u7F6E');\n    }\n    if (!config.baseUrl) {\n      throw ErrorFactory.createLLMError('BASE_URL_MISSING', 'Base URL\u672A\u914D\u7F6E');\n    }\n    if (!config.modelName) {\n      throw ErrorFactory.createLLMError('MODEL_NAME_MISSING', '\u6A21\u578B\u540D\u79F0\u672A\u914D\u7F6E');\n    }\n    if (!config.messages) {\n      throw ErrorFactory.createLLMError('REQUEST_FAILED', '\u6D88\u606F\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A');\n    }\n\n    // \u6784\u9020\u8BF7\u6C42\n    const payload = {\n      model: config.modelName,\n      messages: config.messages,\n      temperature: config.temperature || 0.7,\n      max_tokens: config.maxTokens || 2048,\n      stream: config.stream || false,\n    };\n\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${config.apiKey}`,\n    };\n\n    // \u4F7F\u7528\u91CD\u8BD5\u7BA1\u7406\u5668\u6267\u884CAPI\u8C03\u7528\n    return globalRetryManager.execute(async () => {\n      try {\n        // \u901A\u7528API\u8C03\u7528\u5B9E\u73B0\n        const response = await fetch(config.baseUrl!, {\n          method: 'POST',\n          headers,\n          body: JSON.stringify(payload),\n          signal: AbortSignal.timeout(config.timeout || 30000),\n        });\n\n        if (!response.ok) {\n          throw ErrorFactory.createHttpError(\n            response.status,\n            config.baseUrl!,\n            response.statusText\n          );\n        }\n\n        const data = await response.json();\n        \n        if (!data.choices || !data.choices[0] || !data.choices[0].message) {\n          throw ErrorFactory.createLLMError('RESPONSE_PARSE_ERROR', '\u54CD\u5E94\u683C\u5F0F\u9519\u8BEF');\n        }\n        \n        return {\n          content: data.choices[0].message.content || '',\n          usage: data.usage,\n          model: data.model,\n        };\n      } catch (error) {\n        if (error instanceof LLMError || error instanceof NetworkError) {\n          throw error;\n        }\n        \n        if (error instanceof Error && error.name === 'AbortError') {\n          throw ErrorFactory.createTimeoutError('LLM API\u8C03\u7528', config.timeout || 30000);\n        }\n        \n        throw ErrorFactory.fromNativeError(error as Error, 'LLM\u8C03\u7528\u5931\u8D25');\n      }\n    }, 'LLM_API_CALL');\n  }\n\n  /**\n   * \u5FEB\u901F\u5BF9\u8BDD\n   */\n  async chat(message: string): Promise<string> {\n    return await this.send({ messages: [{ role: 'user', content: message }] }).then(r => r.content);\n  }\n\n  /**\n   * \u7CFB\u7EDF\u5BF9\u8BDD\n   */\n  async chatWithSystem(systemPrompt: string, userMessage: string): Promise<string> {\n    return await this.send({ \n      messages: [\n        { role: 'system', content: systemPrompt },\n        { role: 'user', content: userMessage }\n      ]\n    }).then(r => r.content);\n  }\n\n  /**\n   * \u591A\u8F6E\u5BF9\u8BDD\n   */\n  async conversation(messages: LLMMessage[]): Promise<string> {\n    return await this.send({ messages }).then(r => r.content);\n  }\n}", "/**\n * \u5E73\u94FA\u914D\u7F6EAgent\u5165\u53E3\n * \u76F4\u63A5\u4F7F\u7528\u4E09\u8981\u7D20\u914D\u7F6E\u9A71\u52A8LLM\u8C03\u7528\n */\n\nimport { ConfigManager } from '../config/ConfigManager.js';\nimport { LLMManager, type LLMMessage } from '../llm/LLMManager.js';\nimport type { BladeConfig } from '../config/types/index.js';\n\n/**\n * Agent \u4E3B\u7C7B - \u6781\u7B80\u667A\u80FD\u4EE3\u7406\u5165\u53E3\n * \u4F7F\u7528\u5E73\u94FA\u914D\u7F6E\u4E09\u8981\u7D20(apiKey, baseUrl, modelName)\u9A71\u52A8\u6240\u6709AI\u80FD\u529B\n */\nexport class Agent {\n  private configManager: ConfigManager;\n  private llmManager: LLMManager;\n\n  constructor(config?: Partial<BladeConfig>) {\n    // \u521D\u59CB\u5316\u914D\u7F6E\u7BA1\u7406\u5668\n    this.configManager = new ConfigManager();\n    \n    // \u5408\u5E76\u4F20\u5165\u914D\u7F6E\n    if (config) {\n      this.configManager.updateConfig(config);\n    }\n\n    // \u83B7\u53D6\u914D\u7F6E\u5E76\u6784\u5EFALLM\u7BA1\u7406\u5668\n    const bladeConfig = this.configManager.getConfig();\n    this.llmManager = new LLMManager({\n      apiKey: bladeConfig.apiKey,\n      baseUrl: bladeConfig.baseUrl,\n      modelName: bladeConfig.modelName,\n    });\n  }\n\n  /**\n   * \u57FA\u7840\u804A\u5929\n   */\n  public async chat(message: string): Promise<string> {\n    return await this.llmManager.chat(message);\n  }\n\n  /**\n   * \u7CFB\u7EDF\u63D0\u793A\u8BCD\u804A\u5929\n   */\n  public async chatWithSystem(systemPrompt: string, userMessage: string): Promise<string> {\n    return await this.llmManager.chatWithSystem(systemPrompt, userMessage);\n  }\n\n  /**\n   * \u591A\u8F6E\u5BF9\u8BDD\n   */\n  public async conversation(messages: LLMMessage[]): Promise<string> {\n    return await this.llmManager.conversation(messages);\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u914D\u7F6E\n   */\n  public getConfig(): BladeConfig {\n    return this.configManager.getConfig();\n  }\n\n  /**\n   * \u66F4\u65B0\u914D\u7F6E\n   */\n  public updateConfig(config: Partial<BladeConfig>): void {\n    this.configManager.updateConfig(config);\n    \n    // \u540C\u6B65\u66F4\u65B0LLM\u7BA1\u7406\u5668\u914D\u7F6E\n    this.llmManager.configure({\n      apiKey: config.apiKey,\n      baseUrl: config.baseUrl,\n      modelName: config.modelName,\n    });\n  }\n}", "import * as crypto from 'crypto';\nimport { ContextCompressor } from './processors/ContextCompressor.js';\nimport { ContextFilter } from './processors/ContextFilter.js';\nimport { CacheStore } from './storage/CacheStore.js';\nimport { MemoryStore } from './storage/MemoryStore.js';\nimport { PersistentStore } from './storage/PersistentStore.js';\nimport {\n  CompressedContext,\n  ContextData,\n  ContextManagerOptions,\n  ContextMessage,\n  ContextFilter as FilterOptions,\n  SystemContext,\n  ToolCall,\n  WorkspaceContext,\n} from './types.js';\n\n/**\n * \u4E0A\u4E0B\u6587\u7BA1\u7406\u5668 - \u7EDF\u4E00\u7BA1\u7406\u6240\u6709\u4E0A\u4E0B\u6587\u76F8\u5173\u64CD\u4F5C\n */\nexport class ContextManager {\n  private readonly memory: MemoryStore;\n  private readonly persistent: PersistentStore;\n  private readonly cache: CacheStore;\n  private readonly compressor: ContextCompressor;\n  private readonly filter: ContextFilter;\n  private readonly options: ContextManagerOptions;\n\n  private currentSessionId: string | null = null;\n  private initialized = false;\n\n  constructor(options: Partial<ContextManagerOptions> = {}) {\n    this.options = {\n      storage: {\n        maxMemorySize: 1000,\n        persistentPath: './blade-context',\n        cacheSize: 100,\n        compressionEnabled: true,\n        ...options.storage,\n      },\n      defaultFilter: {\n        maxTokens: 4000,\n        maxMessages: 50,\n        timeWindow: 24 * 60 * 60 * 1000,\n        ...options.defaultFilter,\n      },\n      compressionThreshold: options.compressionThreshold || 6000,\n      enableVectorSearch: options.enableVectorSearch || false,\n    };\n\n    // \u521D\u59CB\u5316\u5B58\u50A8\u5C42\n    this.memory = new MemoryStore(this.options.storage.maxMemorySize);\n    this.persistent = new PersistentStore(this.options.storage.persistentPath, 100);\n    this.cache = new CacheStore(\n      this.options.storage.cacheSize,\n      5 * 60 * 1000 // 5\u5206\u949F\u9ED8\u8BA4TTL\n    );\n\n    // \u521D\u59CB\u5316\u5904\u7406\u5668\n    this.compressor = new ContextCompressor();\n    this.filter = new ContextFilter(this.options.defaultFilter);\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u4E0A\u4E0B\u6587\u7BA1\u7406\u5668\n   */\n  async initialize(): Promise<void> {\n    if (this.initialized) return;\n\n    try {\n      await this.persistent.initialize();\n\n      // \u68C0\u67E5\u5B58\u50A8\u5065\u5EB7\u72B6\u6001\n      const health = await this.persistent.checkStorageHealth();\n      if (!health.isAvailable) {\n        console.warn('\u8B66\u544A\uFF1A\u6301\u4E45\u5316\u5B58\u50A8\u4E0D\u53EF\u7528\uFF0C\u5C06\u4EC5\u4F7F\u7528\u5185\u5B58\u5B58\u50A8');\n      }\n\n      this.initialized = true;\n      console.log('\u4E0A\u4E0B\u6587\u7BA1\u7406\u5668\u521D\u59CB\u5316\u5B8C\u6210');\n    } catch (error) {\n      console.error('\u4E0A\u4E0B\u6587\u7BA1\u7406\u5668\u521D\u59CB\u5316\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u65B0\u4F1A\u8BDD\n   */\n  async createSession(\n    userId?: string,\n    preferences: Record<string, any> = {},\n    configuration: Record<string, any> = {}\n  ): Promise<string> {\n    // \u4F18\u5148\u4F7F\u7528\u914D\u7F6E\u4E2D\u7684sessionId\uFF0C\u5426\u5219\u751F\u6210\u65B0\u7684\n    const sessionId = configuration.sessionId || this.generateSessionId();\n    const now = Date.now();\n\n    // \u521B\u5EFA\u521D\u59CB\u4E0A\u4E0B\u6587\u6570\u636E\n    const contextData: ContextData = {\n      layers: {\n        system: await this.createSystemContext(),\n        session: {\n          sessionId,\n          userId,\n          preferences,\n          configuration,\n          startTime: now,\n        },\n        conversation: {\n          messages: [],\n          topics: [],\n          lastActivity: now,\n        },\n        tool: {\n          recentCalls: [],\n          toolStates: {},\n          dependencies: {},\n        },\n        workspace: await this.createWorkspaceContext(),\n      },\n      metadata: {\n        totalTokens: 0,\n        priority: 1,\n        lastUpdated: now,\n      },\n    };\n\n    // \u5B58\u50A8\u5230\u5185\u5B58\u548C\u6301\u4E45\u5316\u5B58\u50A8\n    this.memory.setContext(contextData);\n    await this.persistent.saveContext(sessionId, contextData);\n\n    this.currentSessionId = sessionId;\n\n    console.log(`\u65B0\u4F1A\u8BDD\u5DF2\u521B\u5EFA: ${sessionId}`);\n    return sessionId;\n  }\n\n  /**\n   * \u52A0\u8F7D\u73B0\u6709\u4F1A\u8BDD\n   */\n  async loadSession(sessionId: string): Promise<boolean> {\n    try {\n      // \u5148\u5C1D\u8BD5\u4ECE\u5185\u5B58\u52A0\u8F7D\n      let contextData = this.memory.getContext();\n\n      if (!contextData || contextData.layers.session.sessionId !== sessionId) {\n        // \u4ECE\u6301\u4E45\u5316\u5B58\u50A8\u52A0\u8F7D\n        const [session, conversation] = await Promise.all([\n          this.persistent.loadSession(sessionId),\n          this.persistent.loadConversation(sessionId),\n        ]);\n\n        if (!session || !conversation) {\n          return false;\n        }\n\n        // \u91CD\u5EFA\u5B8C\u6574\u7684\u4E0A\u4E0B\u6587\u6570\u636E\n        contextData = {\n          layers: {\n            system: await this.createSystemContext(),\n            session,\n            conversation,\n            tool: {\n              recentCalls: [],\n              toolStates: {},\n              dependencies: {},\n            },\n            workspace: await this.createWorkspaceContext(),\n          },\n          metadata: {\n            totalTokens: 0,\n            priority: 1,\n            lastUpdated: Date.now(),\n          },\n        };\n\n        this.memory.setContext(contextData);\n      }\n\n      this.currentSessionId = sessionId;\n      console.log(`\u4F1A\u8BDD\u5DF2\u52A0\u8F7D: ${sessionId}`);\n      return true;\n    } catch (error) {\n      console.error('\u52A0\u8F7D\u4F1A\u8BDD\u5931\u8D25:', error);\n      return false;\n    }\n  }\n\n  /**\n   * \u6DFB\u52A0\u6D88\u606F\u5230\u5F53\u524D\u4F1A\u8BDD\n   */\n  async addMessage(\n    role: ContextMessage['role'],\n    content: string,\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    if (!this.currentSessionId) {\n      throw new Error('\u6CA1\u6709\u6D3B\u52A8\u4F1A\u8BDD');\n    }\n\n    const message: ContextMessage = {\n      id: this.generateMessageId(),\n      role,\n      content,\n      timestamp: Date.now(),\n      metadata,\n    };\n\n    this.memory.addMessage(message);\n\n    // \u5982\u679C\u9700\u8981\u538B\u7F29\uFF0C\u6267\u884C\u538B\u7F29\n    const contextData = this.memory.getContext();\n    if (contextData && this.shouldCompress(contextData)) {\n      await this.compressCurrentContext();\n    }\n\n    // \u5F02\u6B65\u4FDD\u5B58\u5230\u6301\u4E45\u5316\u5B58\u50A8\n    this.saveCurrentSessionAsync();\n  }\n\n  /**\n   * \u6DFB\u52A0\u5DE5\u5177\u8C03\u7528\u8BB0\u5F55\n   */\n  async addToolCall(toolCall: ToolCall): Promise<void> {\n    if (!this.currentSessionId) {\n      throw new Error('\u6CA1\u6709\u6D3B\u52A8\u4F1A\u8BDD');\n    }\n\n    this.memory.addToolCall(toolCall);\n\n    // \u7F13\u5B58\u6210\u529F\u7684\u5DE5\u5177\u8C03\u7528\u7ED3\u679C\n    if (toolCall.status === 'success' && toolCall.output) {\n      this.cache.cacheToolResult(toolCall.name, toolCall.input, toolCall.output);\n    }\n\n    // \u5F02\u6B65\u4FDD\u5B58\n    this.saveCurrentSessionAsync();\n  }\n\n  /**\n   * \u66F4\u65B0\u5DE5\u5177\u72B6\u6001\n   */\n  updateToolState(toolName: string, state: any): void {\n    if (!this.currentSessionId) {\n      throw new Error('\u6CA1\u6709\u6D3B\u52A8\u4F1A\u8BDD');\n    }\n\n    this.memory.updateToolState(toolName, state);\n  }\n\n  /**\n   * \u66F4\u65B0\u5DE5\u4F5C\u7A7A\u95F4\u4FE1\u606F\n   */\n  updateWorkspace(updates: Partial<WorkspaceContext>): void {\n    if (!this.currentSessionId) {\n      throw new Error('\u6CA1\u6709\u6D3B\u52A8\u4F1A\u8BDD');\n    }\n\n    this.memory.updateWorkspace(updates);\n  }\n\n  /**\n   * \u83B7\u53D6\u683C\u5F0F\u5316\u7684\u4E0A\u4E0B\u6587\u7528\u4E8E Prompt \u6784\u5EFA\n   */\n  async getFormattedContext(filterOptions?: FilterOptions): Promise<{\n    context: ContextData;\n    compressed?: CompressedContext;\n    tokenCount: number;\n  }> {\n    const contextData = this.memory.getContext();\n    if (!contextData) {\n      throw new Error('\u6CA1\u6709\u53EF\u7528\u7684\u4E0A\u4E0B\u6587\u6570\u636E');\n    }\n\n    // \u5E94\u7528\u8FC7\u6EE4\u5668\n    const filteredContext = this.filter.filter(contextData, filterOptions);\n\n    // \u68C0\u67E5\u662F\u5426\u9700\u8981\u538B\u7F29\n    const shouldCompress = this.shouldCompress(filteredContext);\n    let compressed: CompressedContext | undefined;\n\n    if (shouldCompress) {\n      // \u5C1D\u8BD5\u4ECE\u7F13\u5B58\u83B7\u53D6\u538B\u7F29\u7ED3\u679C\n      const contextHash = this.hashContext(filteredContext);\n      compressed = this.cache.getCompressedContext(contextHash);\n\n      if (!compressed) {\n        compressed = await this.compressor.compress(filteredContext);\n        this.cache.cacheCompressedContext(contextHash, compressed);\n      }\n    }\n\n    return {\n      context: filteredContext,\n      compressed,\n      tokenCount: compressed ? compressed.tokenCount : filteredContext.metadata.totalTokens,\n    };\n  }\n\n  /**\n   * \u641C\u7D22\u5386\u53F2\u4F1A\u8BDD\n   */\n  async searchSessions(\n    query: string,\n    limit: number = 10\n  ): Promise<\n    Array<{\n      sessionId: string;\n      summary: string;\n      lastActivity: number;\n      relevanceScore: number;\n    }>\n  > {\n    const sessions = await this.persistent.listSessions();\n    const results: Array<{\n      sessionId: string;\n      summary: string;\n      lastActivity: number;\n      relevanceScore: number;\n    }> = [];\n\n    for (const sessionId of sessions) {\n      const summary = await this.persistent.getSessionSummary(sessionId);\n      if (summary) {\n        const relevanceScore = this.calculateRelevance(query, summary.topics);\n        if (relevanceScore > 0) {\n          results.push({\n            sessionId,\n            summary: `${summary.messageCount}\u6761\u6D88\u606F\uFF0C\u4E3B\u9898\uFF1A${summary.topics.join('\u3001')}`,\n            lastActivity: summary.lastActivity,\n            relevanceScore,\n          });\n        }\n      }\n    }\n\n    return results.sort((a, b) => b.relevanceScore - a.relevanceScore).slice(0, limit);\n  }\n\n  /**\n   * \u83B7\u53D6\u7F13\u5B58\u7684\u5DE5\u5177\u8C03\u7528\u7ED3\u679C\n   */\n  getCachedToolResult(toolName: string, input: any): any {\n    return this.cache.getToolResult(toolName, input);\n  }\n\n  /**\n   * \u83B7\u53D6\u7BA1\u7406\u5668\u7EDF\u8BA1\u4FE1\u606F\n   */\n  async getStats(): Promise<{\n    currentSession: string | null;\n    memory: any;\n    cache: any;\n    storage: any;\n  }> {\n    const [memoryInfo, cacheStats, storageStats] = await Promise.all([\n      Promise.resolve(this.memory.getMemoryInfo()),\n      Promise.resolve(this.cache.getStats()),\n      this.persistent.getStorageStats(),\n    ]);\n\n    return {\n      currentSession: this.currentSessionId,\n      memory: memoryInfo,\n      cache: cacheStats,\n      storage: storageStats,\n    };\n  }\n\n  /**\n   * \u6E05\u7406\u8D44\u6E90\n   */\n  async cleanup(): Promise<void> {\n    if (this.currentSessionId) {\n      await this.saveCurrentSession();\n    }\n\n    this.memory.clear();\n    this.cache.clear();\n    await this.persistent.cleanupOldSessions();\n\n    this.currentSessionId = null;\n    console.log('\u4E0A\u4E0B\u6587\u7BA1\u7406\u5668\u8D44\u6E90\u6E05\u7406\u5B8C\u6210');\n  }\n\n  // \u79C1\u6709\u65B9\u6CD5\n\n  private generateSessionId(): string {\n    return `session_${Date.now()}_${crypto.randomBytes(4).toString('hex')}`;\n  }\n\n  private generateMessageId(): string {\n    return `msg_${Date.now()}_${crypto.randomBytes(3).toString('hex')}`;\n  }\n\n  private async createSystemContext(): Promise<SystemContext> {\n    return {\n      role: 'AI\u52A9\u624B',\n      capabilities: ['\u5BF9\u8BDD', '\u5DE5\u5177\u8C03\u7528', '\u4EE3\u7801\u751F\u6210', '\u6587\u6863\u5206\u6790'],\n      tools: ['\u6587\u4EF6\u64CD\u4F5C', 'Git\u64CD\u4F5C', '\u4EE3\u7801\u5206\u6790'],\n      version: '1.0.0',\n    };\n  }\n\n  private async createWorkspaceContext(): Promise<WorkspaceContext> {\n    try {\n      const cwd = process.cwd();\n      return {\n        projectPath: cwd,\n        currentFiles: [],\n        recentFiles: [],\n        environment: {\n          nodeVersion: process.version,\n          platform: process.platform,\n          cwd,\n        },\n      };\n    } catch (error) {\n      return {\n        currentFiles: [],\n        recentFiles: [],\n        environment: {},\n      };\n    }\n  }\n\n  private shouldCompress(contextData: ContextData): boolean {\n    return contextData.metadata.totalTokens > this.options.compressionThreshold;\n  }\n\n  private async compressCurrentContext(): Promise<void> {\n    const contextData = this.memory.getContext();\n    if (!contextData) return;\n\n    const compressed = await this.compressor.compress(contextData);\n\n    // \u66F4\u65B0\u5BF9\u8BDD\u6458\u8981\n    contextData.layers.conversation.summary = compressed.summary;\n\n    this.memory.setContext(contextData);\n  }\n\n  private async saveCurrentSession(): Promise<void> {\n    if (!this.currentSessionId) return;\n\n    const contextData = this.memory.getContext();\n    if (contextData) {\n      await this.persistent.saveContext(this.currentSessionId, contextData);\n    }\n  }\n\n  private saveCurrentSessionAsync(): void {\n    // \u5F02\u6B65\u4FDD\u5B58\uFF0C\u4E0D\u963B\u585E\u4E3B\u6D41\u7A0B\n    this.saveCurrentSession().catch(error => {\n      console.warn('\u5F02\u6B65\u4FDD\u5B58\u4F1A\u8BDD\u5931\u8D25:', error);\n    });\n  }\n\n  private hashContext(contextData: ContextData): string {\n    const content = JSON.stringify({\n      messageCount: contextData.layers.conversation.messages.length,\n      lastMessage:\n        contextData.layers.conversation.messages[\n          contextData.layers.conversation.messages.length - 1\n        ]?.id,\n      toolCallCount: contextData.layers.tool.recentCalls.length,\n    });\n\n    return crypto.createHash('md5').update(content).digest('hex');\n  }\n\n  private calculateRelevance(query: string, topics: string[]): number {\n    const queryLower = query.toLowerCase();\n    let score = 0;\n\n    for (const topic of topics) {\n      if (queryLower.includes(topic.toLowerCase()) || topic.toLowerCase().includes(queryLower)) {\n        score += 1;\n      }\n    }\n\n    return score;\n  }\n}\n", "import * as fs from 'fs/promises';\nimport * as path from 'path';\nimport { ContextData, ConversationContext, SessionContext } from '../types.js';\n\n/**\n * \u6301\u4E45\u5316\u5B58\u50A8\u5B9E\u73B0 - \u7528\u4E8E\u8DE8\u4F1A\u8BDD\u7684\u6570\u636E\u6301\u4E45\u5316\n */\nexport class PersistentStore {\n  private readonly storagePath: string;\n  private readonly maxSessions: number;\n\n  constructor(storagePath: string = './blade-context', maxSessions: number = 100) {\n    this.storagePath = storagePath;\n    this.maxSessions = maxSessions;\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u5B58\u50A8\u76EE\u5F55\n   */\n  async initialize(): Promise<void> {\n    try {\n      await fs.mkdir(this.storagePath, { recursive: true });\n      await fs.mkdir(path.join(this.storagePath, 'sessions'), { recursive: true });\n      await fs.mkdir(path.join(this.storagePath, 'conversations'), { recursive: true });\n    } catch (error) {\n      console.warn('\u8B66\u544A\uFF1A\u65E0\u6CD5\u521B\u5EFA\u6301\u4E45\u5316\u5B58\u50A8\u76EE\u5F55:', error);\n    }\n  }\n\n  /**\n   * \u4FDD\u5B58\u4F1A\u8BDD\u4E0A\u4E0B\u6587\n   */\n  async saveSession(sessionId: string, sessionContext: SessionContext): Promise<void> {\n    try {\n      const sessionPath = path.join(this.storagePath, 'sessions', `${sessionId}.json`);\n      const data = {\n        ...sessionContext,\n        lastSaved: Date.now(),\n      };\n      await fs.writeFile(sessionPath, JSON.stringify(data, null, 2), 'utf-8');\n    } catch (error) {\n      console.warn(`\u8B66\u544A\uFF1A\u65E0\u6CD5\u4FDD\u5B58\u4F1A\u8BDD ${sessionId}:`, error);\n    }\n  }\n\n  /**\n   * \u52A0\u8F7D\u4F1A\u8BDD\u4E0A\u4E0B\u6587\n   */\n  async loadSession(sessionId: string): Promise<SessionContext | null> {\n    try {\n      const sessionPath = path.join(this.storagePath, 'sessions', `${sessionId}.json`);\n      const data = await fs.readFile(sessionPath, 'utf-8');\n      return JSON.parse(data) as SessionContext;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * \u4FDD\u5B58\u5BF9\u8BDD\u4E0A\u4E0B\u6587\n   */\n  async saveConversation(sessionId: string, conversation: ConversationContext): Promise<void> {\n    try {\n      const conversationPath = path.join(this.storagePath, 'conversations', `${sessionId}.json`);\n      const data = {\n        ...conversation,\n        lastSaved: Date.now(),\n      };\n      await fs.writeFile(conversationPath, JSON.stringify(data, null, 2), 'utf-8');\n    } catch (error) {\n      console.warn(`\u8B66\u544A\uFF1A\u65E0\u6CD5\u4FDD\u5B58\u5BF9\u8BDD ${sessionId}:`, error);\n    }\n  }\n\n  /**\n   * \u52A0\u8F7D\u5BF9\u8BDD\u4E0A\u4E0B\u6587\n   */\n  async loadConversation(sessionId: string): Promise<ConversationContext | null> {\n    try {\n      const conversationPath = path.join(this.storagePath, 'conversations', `${sessionId}.json`);\n      const data = await fs.readFile(conversationPath, 'utf-8');\n      return JSON.parse(data) as ConversationContext;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * \u4FDD\u5B58\u5B8C\u6574\u4E0A\u4E0B\u6587\u6570\u636E\n   */\n  async saveContext(sessionId: string, contextData: ContextData): Promise<void> {\n    await Promise.all([\n      this.saveSession(sessionId, contextData.layers.session),\n      this.saveConversation(sessionId, contextData.layers.conversation),\n    ]);\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u4F1A\u8BDD\u5217\u8868\n   */\n  async listSessions(): Promise<string[]> {\n    try {\n      const sessionsDir = path.join(this.storagePath, 'sessions');\n      const files = await fs.readdir(sessionsDir);\n      return files\n        .filter(file => file.endsWith('.json'))\n        .map(file => file.replace('.json', ''))\n        .sort();\n    } catch (error) {\n      return [];\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u4F1A\u8BDD\u6458\u8981\u4FE1\u606F\n   */\n  async getSessionSummary(sessionId: string): Promise<{\n    sessionId: string;\n    lastActivity: number;\n    messageCount: number;\n    topics: string[];\n  } | null> {\n    try {\n      const [session, conversation] = await Promise.all([\n        this.loadSession(sessionId),\n        this.loadConversation(sessionId),\n      ]);\n\n      if (!session || !conversation) {\n        return null;\n      }\n\n      return {\n        sessionId,\n        lastActivity: conversation.lastActivity,\n        messageCount: conversation.messages.length,\n        topics: conversation.topics || [],\n      };\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * \u5220\u9664\u4F1A\u8BDD\u6570\u636E\n   */\n  async deleteSession(sessionId: string): Promise<void> {\n    try {\n      const sessionPath = path.join(this.storagePath, 'sessions', `${sessionId}.json`);\n      const conversationPath = path.join(this.storagePath, 'conversations', `${sessionId}.json`);\n\n      await Promise.all([\n        fs.unlink(sessionPath).catch(() => {}),\n        fs.unlink(conversationPath).catch(() => {}),\n      ]);\n    } catch (error) {\n      console.warn(`\u8B66\u544A\uFF1A\u65E0\u6CD5\u5220\u9664\u4F1A\u8BDD ${sessionId}:`, error);\n    }\n  }\n\n  /**\n   * \u6E05\u7406\u65E7\u4F1A\u8BDD\uFF08\u4FDD\u6301\u6700\u8FD1\u7684N\u4E2A\u4F1A\u8BDD\uFF09\n   */\n  async cleanupOldSessions(): Promise<void> {\n    try {\n      const sessions = await this.listSessions();\n      if (sessions.length <= this.maxSessions) {\n        return;\n      }\n\n      // \u83B7\u53D6\u6240\u6709\u4F1A\u8BDD\u7684\u6458\u8981\u4FE1\u606F\u5E76\u6309\u65F6\u95F4\u6392\u5E8F\n      const sessionSummaries = await Promise.all(\n        sessions.map(sessionId => this.getSessionSummary(sessionId))\n      );\n\n      const validSummaries = sessionSummaries\n        .filter((summary): summary is NonNullable<typeof summary> => summary !== null)\n        .sort((a, b) => b.lastActivity - a.lastActivity);\n\n      // \u5220\u9664\u6700\u65E7\u7684\u4F1A\u8BDD\n      const sessionsToDelete = validSummaries\n        .slice(this.maxSessions)\n        .map(summary => summary.sessionId);\n\n      await Promise.all(sessionsToDelete.map(sessionId => this.deleteSession(sessionId)));\n\n      if (sessionsToDelete.length > 0) {\n        console.log(`\u6E05\u7406\u4E86 ${sessionsToDelete.length} \u4E2A\u65E7\u4F1A\u8BDD`);\n      }\n    } catch (error) {\n      console.warn('\u8B66\u544A\uFF1A\u6E05\u7406\u65E7\u4F1A\u8BDD\u65F6\u51FA\u9519:', error);\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u5B58\u50A8\u7EDF\u8BA1\u4FE1\u606F\n   */\n  async getStorageStats(): Promise<{\n    totalSessions: number;\n    totalSize: number; // \u5B57\u8282\n    oldestSession: string | null;\n    newestSession: string | null;\n  }> {\n    try {\n      const sessions = await this.listSessions();\n\n      if (sessions.length === 0) {\n        return {\n          totalSessions: 0,\n          totalSize: 0,\n          oldestSession: null,\n          newestSession: null,\n        };\n      }\n\n      // \u8BA1\u7B97\u603B\u5927\u5C0F\n      let totalSize = 0;\n      for (const sessionId of sessions) {\n        try {\n          const sessionPath = path.join(this.storagePath, 'sessions', `${sessionId}.json`);\n          const conversationPath = path.join(\n            this.storagePath,\n            'conversations',\n            `${sessionId}.json`\n          );\n\n          const [sessionStat, conversationStat] = await Promise.all([\n            fs.stat(sessionPath).catch(() => ({ size: 0 })),\n            fs.stat(conversationPath).catch(() => ({ size: 0 })),\n          ]);\n\n          totalSize += sessionStat.size + conversationStat.size;\n        } catch (error) {\n          // \u5FFD\u7565\u5355\u4E2A\u6587\u4EF6\u7684\u9519\u8BEF\n        }\n      }\n\n      // \u83B7\u53D6\u6700\u65B0\u548C\u6700\u65E7\u7684\u4F1A\u8BDD\n      const sessionSummaries = await Promise.all(\n        sessions.map(sessionId => this.getSessionSummary(sessionId))\n      );\n\n      const validSummaries = sessionSummaries\n        .filter((summary): summary is NonNullable<typeof summary> => summary !== null)\n        .sort((a, b) => a.lastActivity - b.lastActivity);\n\n      return {\n        totalSessions: sessions.length,\n        totalSize,\n        oldestSession: validSummaries[0]?.sessionId || null,\n        newestSession: validSummaries[validSummaries.length - 1]?.sessionId || null,\n      };\n    } catch (error) {\n      console.warn('\u8B66\u544A\uFF1A\u83B7\u53D6\u5B58\u50A8\u7EDF\u8BA1\u4FE1\u606F\u65F6\u51FA\u9519:', error);\n      return {\n        totalSessions: 0,\n        totalSize: 0,\n        oldestSession: null,\n        newestSession: null,\n      };\n    }\n  }\n\n  /**\n   * \u68C0\u67E5\u5B58\u50A8\u76EE\u5F55\u662F\u5426\u53EF\u7528\n   */\n  async checkStorageHealth(): Promise<{\n    isAvailable: boolean;\n    canRead: boolean;\n    canWrite: boolean;\n    error?: string;\n  }> {\n    try {\n      // \u68C0\u67E5\u76EE\u5F55\u662F\u5426\u5B58\u5728\u548C\u53EF\u8BBF\u95EE\n      await fs.access(this.storagePath);\n\n      // \u6D4B\u8BD5\u5199\u5165\u6743\u9650\n      const testFile = path.join(this.storagePath, '.test');\n      await fs.writeFile(testFile, 'test');\n      await fs.unlink(testFile);\n\n      return {\n        isAvailable: true,\n        canRead: true,\n        canWrite: true,\n      };\n    } catch (error) {\n      return {\n        isAvailable: false,\n        canRead: false,\n        canWrite: false,\n        error: error instanceof Error ? error.message : String(error),\n      };\n    }\n  }\n}\n", "import { EventEmitter } from 'events';\nimport {\n  ToolManager,\n  createToolManager,\n  type ToolCallRequest,\n  type ToolCallResponse,\n  type ToolDefinition,\n  type ToolManagerConfig,\n} from '../tools/index.js';\nimport { BaseComponent } from './BaseComponent.js';\n\n/**\n * \u5DE5\u5177\u7EC4\u4EF6\u914D\u7F6E\n */\nexport interface ToolComponentConfig extends ToolManagerConfig {\n  /** \u662F\u5426\u5305\u542B\u5185\u7F6E\u5DE5\u5177 */\n  includeBuiltinTools?: boolean;\n  /** \u8981\u6392\u9664\u7684\u5DE5\u5177\u540D\u79F0 */\n  excludeTools?: string[];\n  /** \u8981\u5305\u542B\u7684\u5DE5\u5177\u5206\u7C7B */\n  includeCategories?: string[];\n}\n\n/**\n * \u5DE5\u5177\u7EC4\u4EF6 - \u4E3A Agent \u63D0\u4F9B\u5DE5\u5177\u7BA1\u7406\u548C\u8C03\u7528\u80FD\u529B\n */\nexport class ToolComponent extends BaseComponent {\n  private toolManager?: ToolManager;\n  private config: ToolComponentConfig;\n  private eventEmitter: EventEmitter;\n  private isInitialized = false;\n\n  constructor(id = 'tools', config: ToolComponentConfig = {}) {\n    super(id);\n    this.config = {\n      debug: false,\n      includeBuiltinTools: true,\n      ...config,\n    };\n    this.eventEmitter = new EventEmitter();\n  }\n\n  public async init(): Promise<void> {\n    if (this.isInitialized) {\n      return;\n    }\n\n    try {\n      this.log('\u521D\u59CB\u5316\u5DE5\u5177\u7EC4\u4EF6...');\n\n      // \u521B\u5EFA\u5DE5\u5177\u7BA1\u7406\u5668\n      this.toolManager = await createToolManager(this.config, this.config.includeBuiltinTools);\n\n      // \u5E94\u7528\u8FC7\u6EE4\u5668\n      this.applyFilters();\n\n      // \u8BBE\u7F6E\u4E8B\u4EF6\u76D1\u542C\n      this.setupEventListeners();\n\n      this.isInitialized = true;\n      this.log('\u5DE5\u5177\u7EC4\u4EF6\u521D\u59CB\u5316\u5B8C\u6210', {\n        totalTools: this.toolManager.getTools().length,\n        stats: this.toolManager.getStats(),\n      });\n    } catch (error) {\n      this.error('\u5DE5\u5177\u7EC4\u4EF6\u521D\u59CB\u5316\u5931\u8D25', error);\n      throw error;\n    }\n  }\n\n  public async destroy(): Promise<void> {\n    if (!this.isInitialized) {\n      return;\n    }\n\n    try {\n      this.log('\u9500\u6BC1\u5DE5\u5177\u7EC4\u4EF6...');\n\n      if (this.toolManager) {\n        this.toolManager.removeAllListeners();\n      }\n\n      this.eventEmitter.removeAllListeners();\n      this.isInitialized = false;\n      this.log('\u5DE5\u5177\u7EC4\u4EF6\u5DF2\u9500\u6BC1');\n    } catch (error) {\n      this.error('\u5DE5\u5177\u7EC4\u4EF6\u9500\u6BC1\u5931\u8D25', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u5DE5\u5177\u7BA1\u7406\u5668\n   */\n  public getToolManager(): ToolManager {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n    return this.toolManager;\n  }\n\n  /**\n   * \u6CE8\u518C\u5DE5\u5177\n   */\n  public async registerTool(tool: ToolDefinition): Promise<void> {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n\n    await this.toolManager.registerTool(tool);\n    this.log(`\u5DE5\u5177 \"${tool.name}\" \u5DF2\u6CE8\u518C`);\n  }\n\n  /**\n   * \u8C03\u7528\u5DE5\u5177\n   */\n  public async callTool(request: ToolCallRequest): Promise<ToolCallResponse> {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n\n    const startTime = Date.now();\n\n    try {\n      const response = await this.toolManager.callTool(request);\n      const duration = Date.now() - startTime;\n\n      this.log(`\u5DE5\u5177\u8C03\u7528\u5B8C\u6210: ${request.toolName}`, {\n        success: response.result.success,\n        duration,\n      });\n\n      return response;\n    } catch (error) {\n      this.error(`\u5DE5\u5177\u8C03\u7528\u5931\u8D25: ${request.toolName}`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u5DE5\u5177\n   */\n  public getTools(): ToolDefinition[] {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n    return this.toolManager.getTools();\n  }\n\n  /**\n   * \u6309\u5206\u7C7B\u83B7\u53D6\u5DE5\u5177\n   */\n  public getToolsByCategory(): Record<string, ToolDefinition[]> {\n    const tools = this.getTools();\n    const categories: Record<string, ToolDefinition[]> = {};\n\n    for (const tool of tools) {\n      const category = tool.category || 'other';\n      if (!categories[category]) {\n        categories[category] = [];\n      }\n      categories[category].push(tool);\n    }\n\n    return categories;\n  }\n\n  /**\n   * \u641C\u7D22\u5DE5\u5177\n   */\n  public searchTools(query: string): ToolDefinition[] {\n    const tools = this.getTools();\n    const lowerQuery = query.toLowerCase();\n\n    return tools.filter(\n      tool =>\n        tool.name.toLowerCase().includes(lowerQuery) ||\n        tool.description.toLowerCase().includes(lowerQuery) ||\n        (tool.tags && tool.tags.some(tag => tag.toLowerCase().includes(lowerQuery)))\n    );\n  }\n\n  /**\n   * \u83B7\u53D6\u5DE5\u5177\u4FE1\u606F\n   */\n  public getToolInfo(toolName: string): ToolDefinition | undefined {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n    return this.toolManager.getTool(toolName);\n  }\n\n  /**\n   * \u542F\u7528/\u7981\u7528\u5DE5\u5177\n   */\n  public setToolEnabled(toolName: string, enabled: boolean): void {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n    this.toolManager.setToolEnabled(toolName, enabled);\n  }\n\n  /**\n   * \u83B7\u53D6\u5DE5\u5177\u7EDF\u8BA1\u4FE1\u606F\n   */\n  public getStats(): Record<string, any> {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n    return this.toolManager.getStats();\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u5386\u53F2\n   */\n  public getExecutionHistory(limit?: number) {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n    return this.toolManager.getExecutionHistory(limit);\n  }\n\n  /**\n   * \u6E05\u7A7A\u6267\u884C\u5386\u53F2\n   */\n  public clearHistory(): void {\n    if (!this.toolManager) {\n      throw new Error('\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316');\n    }\n    this.toolManager.clearHistory();\n  }\n\n  /**\n   * \u6DFB\u52A0\u4E8B\u4EF6\u76D1\u542C\u5668\n   */\n  public on(event: string, listener: (...args: any[]) => void): void {\n    this.eventEmitter.on(event, listener);\n  }\n\n  /**\n   * \u79FB\u9664\u4E8B\u4EF6\u76D1\u542C\u5668\n   */\n  public off(event: string, listener: (...args: any[]) => void): void {\n    this.eventEmitter.off(event, listener);\n  }\n\n  /**\n   * \u53D1\u9001\u4E8B\u4EF6\n   */\n  public emit(event: string, ...args: any[]): boolean {\n    return this.eventEmitter.emit(event, ...args);\n  }\n\n  /**\n   * \u5E94\u7528\u8FC7\u6EE4\u5668\n   */\n  private applyFilters(): void {\n    if (!this.toolManager) {\n      return;\n    }\n\n    const { excludeTools, includeCategories } = this.config;\n\n    // \u6392\u9664\u6307\u5B9A\u5DE5\u5177\n    if (excludeTools && excludeTools.length > 0) {\n      for (const toolName of excludeTools) {\n        if (this.toolManager.hasTool(toolName)) {\n          this.toolManager.unregisterTool(toolName);\n          this.log(`\u5DF2\u6392\u9664\u5DE5\u5177: ${toolName}`);\n        }\n      }\n    }\n\n    // \u4EC5\u5305\u542B\u6307\u5B9A\u5206\u7C7B\n    if (includeCategories && includeCategories.length > 0) {\n      const tools = this.toolManager.getTools();\n      for (const tool of tools) {\n        if (!includeCategories.includes(tool.category || 'other')) {\n          this.toolManager.unregisterTool(tool.name);\n          this.log(`\u5DF2\u6392\u9664\u5206\u7C7B \"${tool.category}\" \u7684\u5DE5\u5177: ${tool.name}`);\n        }\n      }\n    }\n  }\n\n  /**\n   * \u8BBE\u7F6E\u4E8B\u4EF6\u76D1\u542C\n   */\n  private setupEventListeners(): void {\n    if (!this.toolManager) {\n      return;\n    }\n\n    this.toolManager.on('toolRegistered', event => {\n      this.emit('toolRegistered', event);\n    });\n\n    this.toolManager.on('toolUnregistered', event => {\n      this.emit('toolUnregistered', event);\n    });\n\n    this.toolManager.on('toolCallStarted', event => {\n      this.emit('toolCallStarted', event);\n    });\n\n    this.toolManager.on('toolCallCompleted', event => {\n      this.emit('toolCallCompleted', event);\n    });\n\n    this.toolManager.on('toolCallFailed', event => {\n      this.emit('toolCallFailed', event);\n    });\n\n    this.toolManager.on('toolStateChanged', event => {\n      this.emit('toolStateChanged', event);\n    });\n  }\n\n  /**\n   * \u751F\u6210\u5DE5\u5177\u6587\u6863\n   */\n  public generateToolDocs(): string {\n    const tools = this.getTools();\n    const categories = this.getToolsByCategory();\n\n    let docs = '# \u5DE5\u5177\u6587\u6863\\n\\n';\n    docs += `\u603B\u8BA1 ${tools.length} \u4E2A\u5DE5\u5177\\n\\n`;\n\n    for (const [category, categoryTools] of Object.entries(categories)) {\n      docs += `## ${category.toUpperCase()} (${categoryTools.length})\\n\\n`;\n\n      for (const tool of categoryTools) {\n        docs += `### ${tool.name}\\n`;\n        docs += `${tool.description}\\n\\n`;\n\n        if (tool.version) {\n          docs += `**\u7248\u672C:** ${tool.version}\\n`;\n        }\n\n        if (tool.tags && tool.tags.length > 0) {\n          docs += `**\u6807\u7B7E:** ${tool.tags.join(', ')}\\n`;\n        }\n\n        docs += '\\n**\u53C2\u6570:**\\n';\n        docs += '```\\n';\n\n        for (const [paramName, paramSchema] of Object.entries(tool.parameters)) {\n          const required = tool.required?.includes(paramName) ? ' (\u5FC5\u9700)' : '';\n          const defaultValue =\n            paramSchema.default !== undefined ? ` (\u9ED8\u8BA4: ${paramSchema.default})` : '';\n\n          docs += `${paramName}: ${paramSchema.type}${required}${defaultValue}\\n`;\n          if (paramSchema.description) {\n            docs += `  ${paramSchema.description}\\n`;\n          }\n        }\n\n        docs += '```\\n\\n';\n        docs += '---\\n\\n';\n      }\n    }\n\n    return docs;\n  }\n\n  /**\n   * \u8BB0\u5F55\u65E5\u5FD7\n   */\n  private log(message: string, data?: any): void {\n    if (this.config.debug) {\n      console.log(`[ToolComponent] ${message}`, data || '');\n    }\n  }\n\n  /**\n   * \u8BB0\u5F55\u9519\u8BEF\n   */\n  private error(message: string, error?: any): void {\n    console.error(`[ToolComponent] ${message}`, error || '');\n  }\n}\n", "import { randomUUID } from 'crypto';\nimport { EventEmitter } from 'events';\nimport {\n  ToolExecutionError,\n  ToolRegistrationError,\n  type ToolCallRequest,\n  type ToolCallResponse,\n  type ToolDefinition,\n  type ToolExecutionContext,\n  type ToolExecutionHistory,\n  type ToolExecutionResult,\n  type ToolManagerConfig,\n  type ToolRegistrationOptions,\n} from './types.js';\nimport { ToolValidator } from './validator.js';\n\n/**\n * \u5DE5\u5177\u7BA1\u7406\u5668 - \u8D1F\u8D23\u5DE5\u5177\u7684\u6CE8\u518C\u3001\u7BA1\u7406\u548C\u8C03\u7528\n */\nexport class ToolManager extends EventEmitter {\n  private tools = new Map<string, ToolDefinition>();\n  private toolStates = new Map<string, { enabled: boolean; permissions: string[] }>();\n  private executionHistory: ToolExecutionHistory[] = [];\n  private runningExecutions = new Map<string, Promise<ToolExecutionResult>>();\n  private config: Required<ToolManagerConfig>;\n\n  constructor(config: ToolManagerConfig = {}) {\n    super();\n\n    this.config = {\n      debug: false,\n      maxConcurrency: 10,\n      executionTimeout: 30000, // 30\u79D2\n      logHistory: true,\n      maxHistorySize: 1000,\n      ...config,\n    };\n\n    this.log('\u5DE5\u5177\u7BA1\u7406\u5668\u5DF2\u521D\u59CB\u5316', { config: this.config });\n  }\n\n  /**\n   * \u6CE8\u518C\u5DE5\u5177\n   */\n  public async registerTool(\n    tool: ToolDefinition,\n    options: ToolRegistrationOptions = {}\n  ): Promise<void> {\n    try {\n      // \u9A8C\u8BC1\u5DE5\u5177\u5B9A\u4E49\n      this.validateToolDefinition(tool);\n\n      // \u68C0\u67E5\u662F\u5426\u5DF2\u5B58\u5728\n      if (this.tools.has(tool.name) && !options.override) {\n        throw new ToolRegistrationError(\n          `\u5DE5\u5177 \"${tool.name}\" \u5DF2\u5B58\u5728\uFF0C\u4F7F\u7528 override: true \u5F3A\u5236\u8986\u76D6`,\n          tool.name\n        );\n      }\n\n      // \u6CE8\u518C\u5DE5\u5177\n      this.tools.set(tool.name, tool);\n      this.toolStates.set(tool.name, {\n        enabled: options.enabled ?? true,\n        permissions: options.permissions ?? [],\n      });\n\n      this.log(`\u5DE5\u5177 \"${tool.name}\" \u6CE8\u518C\u6210\u529F`, {\n        version: tool.version,\n        category: tool.category,\n        enabled: options.enabled ?? true,\n      });\n\n      this.emit('toolRegistered', {\n        toolName: tool.name,\n        tool,\n        options,\n      });\n    } catch (error) {\n      this.log(`\u5DE5\u5177 \"${tool.name}\" \u6CE8\u518C\u5931\u8D25`, { error: (error as Error).message });\n      throw error;\n    }\n  }\n\n  /**\n   * \u6CE8\u9500\u5DE5\u5177\n   */\n  public unregisterTool(toolName: string): boolean {\n    const existed = this.tools.has(toolName);\n\n    if (existed) {\n      this.tools.delete(toolName);\n      this.toolStates.delete(toolName);\n\n      this.log(`\u5DE5\u5177 \"${toolName}\" \u5DF2\u6CE8\u9500`);\n      this.emit('toolUnregistered', { toolName });\n    }\n\n    return existed;\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u5DF2\u6CE8\u518C\u7684\u5DE5\u5177\n   */\n  public getTools(): ToolDefinition[] {\n    return Array.from(this.tools.values());\n  }\n\n  /**\n   * \u83B7\u53D6\u7279\u5B9A\u5DE5\u5177\n   */\n  public getTool(toolName: string): ToolDefinition | undefined {\n    return this.tools.get(toolName);\n  }\n\n  /**\n   * \u68C0\u67E5\u5DE5\u5177\u662F\u5426\u5B58\u5728\n   */\n  public hasTool(toolName: string): boolean {\n    return this.tools.has(toolName);\n  }\n\n  /**\n   * \u542F\u7528/\u7981\u7528\u5DE5\u5177\n   */\n  public setToolEnabled(toolName: string, enabled: boolean): void {\n    const state = this.toolStates.get(toolName);\n    if (!state) {\n      throw new ToolRegistrationError(`\u5DE5\u5177 \"${toolName}\" \u4E0D\u5B58\u5728`, toolName);\n    }\n\n    state.enabled = enabled;\n    this.log(`\u5DE5\u5177 \"${toolName}\" ${enabled ? '\u5DF2\u542F\u7528' : '\u5DF2\u7981\u7528'}`);\n\n    this.emit('toolStateChanged', { toolName, enabled });\n  }\n\n  /**\n   * \u68C0\u67E5\u5DE5\u5177\u662F\u5426\u542F\u7528\n   */\n  public isToolEnabled(toolName: string): boolean {\n    const state = this.toolStates.get(toolName);\n    return state?.enabled ?? false;\n  }\n\n  /**\n   * \u8C03\u7528\u5DE5\u5177\n   */\n  public async callTool(request: ToolCallRequest): Promise<ToolCallResponse> {\n    const requestId = randomUUID();\n    const startTime = Date.now();\n\n    try {\n      // \u68C0\u67E5\u5E76\u53D1\u9650\u5236\n      if (this.runningExecutions.size >= this.config.maxConcurrency) {\n        throw new ToolExecutionError('\u8FBE\u5230\u6700\u5927\u5E76\u53D1\u6267\u884C\u9650\u5236', request.toolName);\n      }\n\n      // \u83B7\u53D6\u5DE5\u5177\n      const tool = this.tools.get(request.toolName);\n      if (!tool) {\n        throw new ToolExecutionError(`\u5DE5\u5177 \"${request.toolName}\" \u4E0D\u5B58\u5728`, request.toolName);\n      }\n\n      // \u68C0\u67E5\u5DE5\u5177\u72B6\u6001\n      if (!this.isToolEnabled(request.toolName)) {\n        throw new ToolExecutionError(`\u5DE5\u5177 \"${request.toolName}\" \u5DF2\u7981\u7528`, request.toolName);\n      }\n\n      // \u751F\u6210\u6267\u884C\u4E0A\u4E0B\u6587\n      const context: ToolExecutionContext = {\n        executionId: requestId,\n        timestamp: startTime,\n        ...request.context,\n      };\n\n      // \u9A8C\u8BC1\u548C\u5904\u7406\u53C2\u6570\n      let processedParams = ToolValidator.applyDefaults(request.parameters, tool.parameters);\n\n      processedParams = ToolValidator.sanitizeParameters(processedParams, tool.parameters);\n\n      ToolValidator.validateParameters(processedParams, tool.parameters, tool.required);\n\n      this.log(`\u5F00\u59CB\u6267\u884C\u5DE5\u5177 \"${request.toolName}\"`, {\n        requestId,\n        parameters: processedParams,\n      });\n\n      this.emit('toolCallStarted', {\n        requestId,\n        toolName: request.toolName,\n        parameters: processedParams,\n        context,\n      });\n\n      // \u6267\u884C\u5DE5\u5177\n      const executionPromise = this.executeToolWithTimeout(tool, processedParams);\n\n      this.runningExecutions.set(requestId, executionPromise);\n\n      const result = await executionPromise;\n\n      // \u8BB0\u5F55\u6267\u884C\u65F6\u95F4\n      result.duration = Date.now() - startTime;\n\n      this.log(`\u5DE5\u5177 \"${request.toolName}\" \u6267\u884C\u5B8C\u6210`, {\n        requestId,\n        duration: result.duration,\n        success: result.success,\n      });\n\n      // \u6784\u5EFA\u54CD\u5E94\n      const response: ToolCallResponse = {\n        requestId,\n        toolName: request.toolName,\n        result,\n        context,\n      };\n\n      // \u8BB0\u5F55\u5386\u53F2\n      if (this.config.logHistory) {\n        this.addToHistory({\n          executionId: requestId,\n          toolName: request.toolName,\n          parameters: processedParams,\n          result,\n          context,\n          createdAt: new Date(),\n        });\n      }\n\n      this.emit('toolCallCompleted', response);\n\n      return response;\n    } catch (error) {\n      const result: ToolExecutionResult = {\n        success: false,\n        error: (error as Error).message,\n        duration: Date.now() - startTime,\n      };\n\n      const response: ToolCallResponse = {\n        requestId,\n        toolName: request.toolName,\n        result,\n        context: {\n          executionId: requestId,\n          timestamp: startTime,\n          ...request.context,\n        },\n      };\n\n      this.log(`\u5DE5\u5177 \"${request.toolName}\" \u6267\u884C\u5931\u8D25`, {\n        requestId,\n        error: (error as Error).message,\n      });\n\n      this.emit('toolCallFailed', { ...response, error });\n\n      return response;\n    } finally {\n      this.runningExecutions.delete(requestId);\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u5386\u53F2\n   */\n  public getExecutionHistory(limit?: number): ToolExecutionHistory[] {\n    const history = [...this.executionHistory];\n    return limit ? history.slice(-limit) : history;\n  }\n\n  /**\n   * \u6E05\u7A7A\u6267\u884C\u5386\u53F2\n   */\n  public clearHistory(): void {\n    this.executionHistory = [];\n    this.log('\u6267\u884C\u5386\u53F2\u5DF2\u6E05\u7A7A');\n  }\n\n  /**\n   * \u83B7\u53D6\u5DE5\u5177\u7EDF\u8BA1\u4FE1\u606F\n   */\n  public getStats(): Record<string, any> {\n    const stats = {\n      totalTools: this.tools.size,\n      enabledTools: 0,\n      runningExecutions: this.runningExecutions.size,\n      totalExecutions: this.executionHistory.length,\n      successfulExecutions: 0,\n      failedExecutions: 0,\n    };\n\n    // \u7EDF\u8BA1\u542F\u7528\u7684\u5DE5\u5177\n    for (const state of this.toolStates.values()) {\n      if (state.enabled) {\n        stats.enabledTools++;\n      }\n    }\n\n    // \u7EDF\u8BA1\u6267\u884C\u7ED3\u679C\n    for (const history of this.executionHistory) {\n      if (history.result.success) {\n        stats.successfulExecutions++;\n      } else {\n        stats.failedExecutions++;\n      }\n    }\n\n    return stats;\n  }\n\n  /**\n   * \u9A8C\u8BC1\u5DE5\u5177\u5B9A\u4E49\n   */\n  private validateToolDefinition(tool: ToolDefinition): void {\n    if (!tool.name || typeof tool.name !== 'string') {\n      throw new ToolRegistrationError('\u5DE5\u5177\u540D\u79F0\u5FC5\u987B\u662F\u975E\u7A7A\u5B57\u7B26\u4E32');\n    }\n\n    if (!tool.description || typeof tool.description !== 'string') {\n      throw new ToolRegistrationError('\u5DE5\u5177\u63CF\u8FF0\u5FC5\u987B\u662F\u975E\u7A7A\u5B57\u7B26\u4E32');\n    }\n\n    if (!tool.parameters || typeof tool.parameters !== 'object') {\n      throw new ToolRegistrationError('\u5DE5\u5177\u53C2\u6570\u5B9A\u4E49\u5FC5\u987B\u662F\u5BF9\u8C61');\n    }\n\n    if (typeof tool.execute !== 'function') {\n      throw new ToolRegistrationError('\u5DE5\u5177\u6267\u884C\u51FD\u6570\u5FC5\u987B\u662F\u51FD\u6570');\n    }\n  }\n\n  /**\n   * \u6267\u884C\u5DE5\u5177\u5E76\u8BBE\u7F6E\u8D85\u65F6\n   */\n  private async executeToolWithTimeout(\n    tool: ToolDefinition,\n    parameters: Record<string, any>\n  ): Promise<ToolExecutionResult> {\n    const startTime = Date.now();\n\n    return new Promise((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        reject(\n          new ToolExecutionError(`\u5DE5\u5177\u6267\u884C\u8D85\u65F6 (${this.config.executionTimeout}ms)`, tool.name)\n        );\n      }, this.config.executionTimeout);\n\n      Promise.resolve(tool.execute(parameters))\n        .then(result => {\n          clearTimeout(timeoutId);\n          const duration = Date.now() - startTime;\n\n          // \u5982\u679C\u5DE5\u5177\u8FD4\u56DE\u7684\u5DF2\u7ECF\u662F ToolExecutionResult \u683C\u5F0F\uFF0C\u76F4\u63A5\u4F7F\u7528\n          if (result && typeof result === 'object' && 'success' in result) {\n            resolve({\n              ...result,\n              duration: result.duration || duration,\n            });\n          } else {\n            // \u5426\u5219\u5305\u88C5\u6210\u6807\u51C6\u683C\u5F0F\n            resolve({\n              success: true,\n              data: result,\n              duration,\n            });\n          }\n        })\n        .catch(error => {\n          clearTimeout(timeoutId);\n          reject(new ToolExecutionError(`\u5DE5\u5177\u6267\u884C\u9519\u8BEF: ${error.message}`, tool.name, error));\n        });\n    });\n  }\n\n  /**\n   * \u6DFB\u52A0\u5230\u5386\u53F2\u8BB0\u5F55\n   */\n  private addToHistory(history: ToolExecutionHistory): void {\n    this.executionHistory.push(history);\n\n    // \u9650\u5236\u5386\u53F2\u8BB0\u5F55\u5927\u5C0F\n    if (this.executionHistory.length > this.config.maxHistorySize) {\n      this.executionHistory = this.executionHistory.slice(-this.config.maxHistorySize);\n    }\n  }\n\n  /**\n   * \u65E5\u5FD7\u8BB0\u5F55\n   */\n  private log(message: string, data?: any): void {\n    if (this.config.debug) {\n      console.log(`[ToolManager] ${message}`, data || '');\n    }\n  }\n}\n", "import { promises as fs } from 'fs';\nimport { basename, dirname, extname, join, resolve } from 'path';\nimport { ErrorFactory, FileSystemError, globalErrorMonitor } from '../../error/index.js';\nimport {\n  CommandPreCheckResult,\n  ConfirmableToolBase,\n  ConfirmationOptions,\n  RiskLevel,\n} from '../base/ConfirmableToolBase.js';\nimport type { ToolDefinition } from '../types.js';\n\n/**\n * \u6587\u4EF6\u8BFB\u53D6\u5DE5\u5177\n */\nconst fileReadTool: ToolDefinition = {\n  name: 'file_read',\n  description: '\u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9',\n  version: '1.0.0',\n  category: 'filesystem',\n  tags: ['file', 'read', 'content'],\n  parameters: {\n    path: {\n      type: 'string',\n      description: '\u6587\u4EF6\u8DEF\u5F84',\n      required: true,\n    },\n    encoding: {\n      type: 'string',\n      description: '\u6587\u4EF6\u7F16\u7801',\n      enum: ['utf8', 'base64', 'hex'],\n      default: 'utf8',\n    },\n    maxSize: {\n      type: 'number',\n      description: '\u6700\u5927\u6587\u4EF6\u5927\u5C0F\uFF08\u5B57\u8282\uFF09',\n      default: 1024 * 1024, // 1MB\n    },\n  },\n  required: ['path'],\n  async execute(params) {\n    const { path, encoding, maxSize } = params;\n\n    try {\n      const resolvedPath = resolve(path);\n\n      // \u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\n      const stats = await fs.stat(resolvedPath);\n\n      if (!stats.isFile()) {\n        return {\n          success: false,\n          error: '\u6307\u5B9A\u8DEF\u5F84\u4E0D\u662F\u6587\u4EF6',\n        };\n      }\n\n      // \u68C0\u67E5\u6587\u4EF6\u5927\u5C0F\n      if (stats.size > maxSize) {\n        return {\n          success: false,\n          error: `\u6587\u4EF6\u592A\u5927 (${stats.size} \u5B57\u8282)\uFF0C\u8D85\u8FC7\u9650\u5236 (${maxSize} \u5B57\u8282)`,\n        };\n      }\n\n      const content = await fs.readFile(resolvedPath, encoding as BufferEncoding);\n\n      return {\n        success: true,\n        data: {\n          path: resolvedPath,\n          content,\n          encoding,\n          size: stats.size,\n          modified: stats.mtime,\n          created: stats.birthtime,\n        },\n      };\n    } catch (error: any) {\n      const fileSystemError = ErrorFactory.createFileSystemError(\n        'FILE_READ_FAILED',\n        `\u6587\u4EF6\u8BFB\u53D6\u5931\u8D25: ${error.message}`,\n        {\n          context: { path, encoding },\n          retryable: true,\n          suggestions: ['\u68C0\u67E5\u6587\u4EF6\u8DEF\u5F84\u662F\u5426\u6B63\u786E', '\u786E\u8BA4\u6587\u4EF6\u6743\u9650\u8BBE\u7F6E', '\u786E\u8BA4\u6587\u4EF6\u672A\u88AB\u5176\u4ED6\u7A0B\u5E8F\u5360\u7528'],\n        }\n      );\n\n      globalErrorMonitor.monitor(fileSystemError);\n\n      return {\n        success: false,\n        error: fileSystemError.message,\n      };\n    }\n  },\n};\n\n/**\n * \u6587\u4EF6\u5199\u5165\u5DE5\u5177 (\u57FA\u4E8E ConfirmableToolBase)\n * \u5199\u5165\u6587\u4EF6\u5185\u5BB9\uFF0C\u5E26\u7528\u6237\u786E\u8BA4\u529F\u80FD\n */\nclass FileWriteTool extends ConfirmableToolBase {\n  readonly name = 'file_write';\n  readonly description = '\u5199\u5165\u6587\u4EF6\u5185\u5BB9\uFF08\u9700\u8981\u7528\u6237\u786E\u8BA4\uFF09';\n  readonly category = 'filesystem';\n  readonly tags = ['file', 'write', 'create'];\n\n  readonly parameters = {\n    path: {\n      type: 'string' as const,\n      required: true,\n      description: '\u6587\u4EF6\u8DEF\u5F84',\n    },\n    content: {\n      type: 'string' as const,\n      required: true,\n      description: '\u6587\u4EF6\u5185\u5BB9',\n    },\n    encoding: {\n      type: 'string' as const,\n      required: false,\n      description: '\u6587\u4EF6\u7F16\u7801',\n      default: 'utf8',\n    },\n    createDirectories: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u662F\u5426\u521B\u5EFA\u76EE\u5F55\u7ED3\u6784',\n      default: true,\n    },\n    overwrite: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u662F\u5426\u8986\u76D6\u5DF2\u5B58\u5728\u7684\u6587\u4EF6',\n      default: false,\n    },\n    skipConfirmation: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u8DF3\u8FC7\u7528\u6237\u786E\u8BA4\u76F4\u63A5\u6267\u884C',\n      default: false,\n    },\n    riskLevel: {\n      type: 'string' as const,\n      required: false,\n      description: '\u98CE\u9669\u7EA7\u522B\uFF1Asafe, moderate, high, critical',\n      default: 'moderate',\n    },\n  };\n\n  readonly required = ['path', 'content'];\n\n  /**\n   * \u9884\u5904\u7406\u53C2\u6570\n   */\n  protected async preprocessParameters(params: Record<string, any>): Promise<Record<string, any>> {\n    const { path, content } = params;\n\n    // \u9A8C\u8BC1\u8DEF\u5F84\u5B89\u5168\u6027\n    if (path.includes('..') || path.startsWith('/') || path.includes('\\\\')) {\n      // \u5141\u8BB8\u76F8\u5BF9\u8DEF\u5F84\u4F46\u9700\u8981\u786E\u8BA4\n      if (path.includes('..')) {\n        throw ErrorFactory.createValidationError('path', path, '\u4E0D\u80FD\u5305\u542B\u76F8\u5BF9\u8DEF\u5F84\u64CD\u4F5C\u7B26', {\n          suggestions: ['\u4F7F\u7528\u76F8\u5BF9\u8DEF\u5F84\u800C\u4E0D\u662F\u7EDD\u5BF9\u8DEF\u5F84'],\n          retryable: false,\n        });\n      }\n    }\n\n    // \u9A8C\u8BC1\u5185\u5BB9\u957F\u5EA6\n    if (content.length > 10 * 1024 * 1024) {\n      // 10MB\n      throw ErrorFactory.createFileSystemError('FILE_TOO_LARGE', '\u6587\u4EF6\u5185\u5BB9\u8FC7\u5927\uFF08\u8D85\u8FC710MB\uFF09', {\n        context: { contentLength: content.length, maxSize: 10 * 1024 * 1024 },\n        suggestions: ['\u51CF\u5C11\u5185\u5BB9\u5927\u5C0F', '\u5206\u6279\u5904\u7406\u5927\u6587\u4EF6'],\n        retryable: false,\n      });\n    }\n\n    return params;\n  }\n\n  /**\n   * \u6784\u5EFA\u547D\u4EE4\u63CF\u8FF0\uFF08\u975E\u5B9E\u9645\u547D\u4EE4\uFF09\n   */\n  protected async buildCommand(params: Record<string, any>): Promise<string> {\n    const { path, content, encoding, overwrite } = params;\n\n    return `\u5199\u5165\u6587\u4EF6: ${path} (${content.length}\u5B57\u7B26, ${encoding}\u7F16\u7801${overwrite ? ', \u8986\u76D6\u6A21\u5F0F' : ''})`;\n  }\n\n  /**\n   * \u83B7\u53D6\u786E\u8BA4\u9009\u9879\n   */\n  protected getConfirmationOptions(params: Record<string, any>): ConfirmationOptions {\n    const baseOptions = super.getConfirmationOptions(params);\n\n    let riskLevel = RiskLevel.MODERATE;\n    let confirmMessage = '';\n\n    if (params.overwrite) {\n      riskLevel = RiskLevel.HIGH;\n      confirmMessage = `\u26A0\uFE0F  \u5C06\u8986\u76D6\u6587\u4EF6 \"${params.path}\"\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F`;\n    } else {\n      riskLevel = RiskLevel.MODERATE;\n      confirmMessage = `\u5199\u5165\u6587\u4EF6 \"${params.path}\"\uFF1F`;\n    }\n\n    return {\n      ...baseOptions,\n      riskLevel,\n      confirmMessage,\n    };\n  }\n\n  /**\n   * \u9884\u68C0\u67E5\u547D\u4EE4\n   */\n  protected async preCheckCommand(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _command: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _workingDirectory: string,\n    params: Record<string, any>\n  ): Promise<CommandPreCheckResult> {\n    try {\n      const resolvedPath = resolve(params.path);\n\n      // \u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5DF2\u5B58\u5728\n      try {\n        await fs.access(resolvedPath);\n        if (!params.overwrite) {\n          return {\n            valid: false,\n            message: `\u6587\u4EF6 \"${params.path}\" \u5DF2\u5B58\u5728`,\n            suggestions: [\n              {\n                command: `\u5199\u5165\u6587\u4EF6: ${params.path} (\u8986\u76D6\u6A21\u5F0F)`,\n                description: '\u8986\u76D6\u5DF2\u5B58\u5728\u7684\u6587\u4EF6',\n                riskLevel: RiskLevel.HIGH,\n              },\n            ],\n          };\n        }\n      } catch {\n        // \u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u53EF\u4EE5\u7EE7\u7EED\n      }\n\n      // \u68C0\u67E5\u76EE\u5F55\u662F\u5426\u5B58\u5728\n      const dir = dirname(resolvedPath);\n      try {\n        await fs.access(dir);\n      } catch {\n        if (!params.createDirectories) {\n          return {\n            valid: false,\n            message: `\u76EE\u5F55 \"${dir}\" \u4E0D\u5B58\u5728`,\n            suggestions: [\n              {\n                command: `\u5199\u5165\u6587\u4EF6: ${params.path} (\u521B\u5EFA\u76EE\u5F55)`,\n                description: '\u81EA\u52A8\u521B\u5EFA\u76EE\u5F55\u7ED3\u6784',\n                riskLevel: RiskLevel.MODERATE,\n              },\n            ],\n          };\n        }\n      }\n\n      return { valid: true };\n    } catch (error: any) {\n      return {\n        valid: false,\n        message: `\u6587\u4EF6\u9884\u68C0\u67E5\u5931\u8D25: ${error.message}`,\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u63CF\u8FF0\n   */\n  protected getExecutionDescription(params: Record<string, any>): string {\n    const { path, content, encoding, overwrite, createDirectories } = params;\n\n    let description = `\u5199\u5165\u6587\u4EF6: ${path} (${content.length}\u5B57\u7B26, ${encoding}\u7F16\u7801)`;\n\n    if (overwrite) {\n      description += ' - \u8986\u76D6\u6A21\u5F0F';\n    }\n\n    if (createDirectories) {\n      description += ' - \u81EA\u52A8\u521B\u5EFA\u76EE\u5F55';\n    }\n\n    return description;\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u9884\u89C8\n   */\n  protected async getExecutionPreview(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _command: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _workingDirectory: string,\n    params: Record<string, any>\n  ): Promise<string> {\n    const { path, content } = params;\n    const resolvedPath = resolve(path);\n\n    let preview = `\u6587\u4EF6\u8DEF\u5F84: ${resolvedPath}\\n`;\n    preview += `\u5185\u5BB9\u957F\u5EA6: ${content.length} \u5B57\u7B26\\n`;\n\n    if (content.length <= 200) {\n      preview += `\u5185\u5BB9\u9884\u89C8:\\n${content}`;\n    } else {\n      preview += `\u5185\u5BB9\u9884\u89C8:\\n${content.substring(0, 200)}...(\u5DF2\u622A\u65AD)`;\n    }\n\n    return preview;\n  }\n\n  /**\n   * \u6267\u884C\u6587\u4EF6\u5199\u5165\n   */\n  protected async executeCommand(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _command: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _workingDirectory: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _options: ConfirmationOptions,\n    params: Record<string, any>\n  ) {\n    const { path, content, encoding, createDirectories } = params;\n\n    try {\n      const resolvedPath = resolve(path);\n\n      // \u521B\u5EFA\u76EE\u5F55\u7ED3\u6784\n      if (createDirectories) {\n        const dir = dirname(resolvedPath);\n        try {\n          await fs.mkdir(dir, { recursive: true });\n        } catch (error: any) {\n          const mkdirError = ErrorFactory.createFileSystemError(\n            'DISK_FULL',\n            `\u521B\u5EFA\u76EE\u5F55\u5931\u8D25: ${error.message}`,\n            {\n              context: { directory: dir },\n              retryable: false,\n              suggestions: ['\u68C0\u67E5\u78C1\u76D8\u7A7A\u95F4', '\u786E\u8BA4\u76EE\u5F55\u6743\u9650'],\n            }\n          );\n\n          globalErrorMonitor.monitor(mkdirError);\n          throw mkdirError;\n        }\n      }\n\n      await fs.writeFile(resolvedPath, content, encoding as BufferEncoding);\n\n      // \u83B7\u53D6\u6587\u4EF6\u4FE1\u606F\n      const stats = await fs.stat(resolvedPath);\n\n      return {\n        success: true,\n        data: {\n          path: resolvedPath,\n          size: stats.size,\n          encoding,\n          created: stats.birthtime,\n          modified: stats.mtime,\n        },\n      };\n    } catch (error: any) {\n      if (error instanceof FileSystemError) {\n        throw error;\n      }\n\n      const fileSystemError = ErrorFactory.createFileSystemError(\n        'FILE_WRITE_FAILED',\n        `\u6587\u4EF6\u5199\u5165\u5931\u8D25: ${error.message}`,\n        {\n          context: { path, encoding },\n          retryable: true,\n          suggestions: ['\u68C0\u67E5\u78C1\u76D8\u7A7A\u95F4', '\u786E\u8BA4\u6587\u4EF6\u6743\u9650', '\u786E\u8BA4\u76EE\u5F55\u662F\u5426\u5B58\u5728'],\n        }\n      );\n\n      globalErrorMonitor.monitor(fileSystemError);\n\n      return {\n        success: false,\n        error: fileSystemError.message,\n      };\n    }\n  }\n}\n\n// \u521B\u5EFA file_write \u5DE5\u5177\u5B9E\u4F8B\nconst fileWriteTool = new FileWriteTool();\n\n/**\n * \u76EE\u5F55\u5217\u8868\u5DE5\u5177\n */\nconst directoryListTool: ToolDefinition = {\n  name: 'directory_list',\n  description: '\u5217\u51FA\u76EE\u5F55\u5185\u5BB9',\n  version: '1.0.0',\n  category: 'filesystem',\n  tags: ['directory', 'list', 'files'],\n  parameters: {\n    path: {\n      type: 'string',\n      description: '\u76EE\u5F55\u8DEF\u5F84',\n      default: '.',\n    },\n    recursive: {\n      type: 'boolean',\n      description: '\u662F\u5426\u9012\u5F52\u5217\u51FA\u5B50\u76EE\u5F55',\n      default: false,\n    },\n    includeHidden: {\n      type: 'boolean',\n      description: '\u662F\u5426\u5305\u542B\u9690\u85CF\u6587\u4EF6',\n      default: false,\n    },\n    fileTypes: {\n      type: 'array',\n      description: '\u6587\u4EF6\u7C7B\u578B\u8FC7\u6EE4',\n      items: {\n        type: 'string',\n      },\n    },\n  },\n  async execute(params) {\n    const { path, recursive, includeHidden, fileTypes } = params;\n\n    try {\n      const resolvedPath = resolve(path);\n\n      // \u68C0\u67E5\u8DEF\u5F84\u662F\u5426\u5B58\u5728\u4E14\u4E3A\u76EE\u5F55\n      const stats = await fs.stat(resolvedPath);\n      if (!stats.isDirectory()) {\n        return {\n          success: false,\n          error: '\u6307\u5B9A\u8DEF\u5F84\u4E0D\u662F\u76EE\u5F55',\n        };\n      }\n\n      const files: any[] = [];\n\n      async function listDirectory(dirPath: string, depth = 0): Promise<void> {\n        try {\n          const items = await fs.readdir(dirPath);\n\n          for (const item of items) {\n            // \u8DF3\u8FC7\u9690\u85CF\u6587\u4EF6\n            if (!includeHidden && item.startsWith('.')) {\n              continue;\n            }\n\n            const itemPath = join(dirPath, item);\n            const itemStats = await fs.stat(itemPath);\n            const relativePath = itemPath.replace(resolvedPath, '').replace(/^[/\\\\]/, '');\n\n            const fileInfo = {\n              name: item,\n              path: itemPath,\n              relativePath: relativePath || item,\n              type: itemStats.isDirectory() ? 'directory' : 'file',\n              size: itemStats.size,\n              modified: itemStats.mtime,\n              created: itemStats.birthtime,\n              extension: itemStats.isFile() ? extname(item) : null,\n              depth,\n            };\n\n            // \u6587\u4EF6\u7C7B\u578B\u8FC7\u6EE4\n            if (fileTypes && fileTypes.length > 0 && itemStats.isFile()) {\n              const ext = extname(item).toLowerCase();\n              if (!fileTypes.includes(ext)) {\n                continue;\n              }\n            }\n\n            files.push(fileInfo);\n\n            // \u9012\u5F52\u5904\u7406\u5B50\u76EE\u5F55\n            if (recursive && itemStats.isDirectory()) {\n              await listDirectory(itemPath, depth + 1);\n            }\n          }\n        } catch (error: any) {\n          const listError = ErrorFactory.createFileSystemError(\n            'PERMISSION_DENIED',\n            `\u8BFB\u53D6\u76EE\u5F55\u5931\u8D25: ${dirPath}`,\n            {\n              cause: error,\n              retryable: false,\n              suggestions: ['\u68C0\u67E5\u76EE\u5F55\u6743\u9650', '\u786E\u8BA4\u76EE\u5F55\u662F\u5426\u5B58\u5728'],\n            }\n          );\n\n          globalErrorMonitor.monitor(listError);\n          throw listError;\n        }\n      }\n\n      await listDirectory(resolvedPath);\n\n      // \u7EDF\u8BA1\u4FE1\u606F\n      const stats_summary = {\n        total: files.length,\n        files: files.filter(f => f.type === 'file').length,\n        directories: files.filter(f => f.type === 'directory').length,\n        totalSize: files.filter(f => f.type === 'file').reduce((sum, f) => sum + f.size, 0),\n      };\n\n      return {\n        success: true,\n        data: {\n          path: resolvedPath,\n          files,\n          stats: stats_summary,\n          options: {\n            recursive,\n            includeHidden,\n            fileTypes,\n          },\n        },\n      };\n    } catch (error: any) {\n      if (error instanceof FileSystemError) {\n        throw error;\n      }\n\n      const directoryError = ErrorFactory.createFileSystemError(\n        'DIRECTORY_LIST_FAILED',\n        `\u76EE\u5F55\u5217\u8868\u5931\u8D25: ${path}`,\n        {\n          cause: error,\n          retryable: true,\n          suggestions: ['\u68C0\u67E5\u8DEF\u5F84\u662F\u5426\u6B63\u786E', '\u786E\u8BA4\u76EE\u5F55\u6743\u9650\u8BBE\u7F6E', '\u786E\u8BA4\u76EE\u5F55\u672A\u88AB\u5176\u4ED6\u7A0B\u5E8F\u5360\u7528'],\n        }\n      );\n\n      globalErrorMonitor.monitor(directoryError);\n\n      return {\n        success: false,\n        error: directoryError.message,\n      };\n    }\n  },\n};\n\n/**\n * \u6587\u4EF6\u4FE1\u606F\u5DE5\u5177\n */\nconst fileInfoTool: ToolDefinition = {\n  name: 'file_info',\n  description: '\u83B7\u53D6\u6587\u4EF6\u6216\u76EE\u5F55\u8BE6\u7EC6\u4FE1\u606F',\n  version: '1.0.0',\n  category: 'filesystem',\n  tags: ['file', 'info', 'stats'],\n  parameters: {\n    path: {\n      type: 'string',\n      description: '\u6587\u4EF6\u6216\u76EE\u5F55\u8DEF\u5F84',\n      required: true,\n    },\n  },\n  required: ['path'],\n  async execute(params) {\n    const { path } = params;\n\n    try {\n      const resolvedPath = resolve(path);\n      const stats = await fs.stat(resolvedPath);\n\n      const info = {\n        path: resolvedPath,\n        name: basename(resolvedPath),\n        directory: dirname(resolvedPath),\n        extension: stats.isFile() ? extname(resolvedPath) : null,\n        type: stats.isFile() ? 'file' : stats.isDirectory() ? 'directory' : 'other',\n        size: stats.size,\n        sizeFormatted: formatFileSize(stats.size),\n        permissions: {\n          readable: true, // Node.js doesn't provide easy access to detailed permissions\n          writable: true,\n          executable: stats.isFile() && (stats.mode & parseInt('111', 8)) !== 0,\n        },\n        timestamps: {\n          created: stats.birthtime,\n          modified: stats.mtime,\n          accessed: stats.atime,\n          changed: stats.ctime,\n        },\n        isFile: stats.isFile(),\n        isDirectory: stats.isDirectory(),\n        isSymbolicLink: stats.isSymbolicLink(),\n        mode: stats.mode.toString(8),\n        uid: stats.uid,\n        gid: stats.gid,\n      };\n\n      return {\n        success: true,\n        data: info,\n      };\n    } catch (error: any) {\n      const fileInfoError = ErrorFactory.createFileSystemError(\n        'FILE_NOT_FOUND',\n        `\u83B7\u53D6\u6587\u4EF6\u4FE1\u606F\u5931\u8D25: ${path}`,\n        {\n          cause: error,\n          retryable: false,\n          suggestions: [\n            '\u68C0\u67E5\u6587\u4EF6\u8DEF\u5F84\u662F\u5426\u6B63\u786E',\n            '\u786E\u8BA4\u6587\u4EF6\u662F\u5426\u5B58\u5728',\n            '\u786E\u8BA4\u6587\u4EF6\u6743\u9650\u8BBE\u7F6E'\n          ]\n        }\n      );\n      \n      globalErrorMonitor.monitor(fileInfoError);\n      \n      return {\n        success: false,\n        error: fileInfoError.message,\n      };\n    }\n  },\n};\n\n/**\n * \u683C\u5F0F\u5316\u6587\u4EF6\u5927\u5C0F\n */\nfunction formatFileSize(bytes: number): string {\n  const units = ['B', 'KB', 'MB', 'GB', 'TB'];\n  let size = bytes;\n  let unitIndex = 0;\n\n  while (size >= 1024 && unitIndex < units.length - 1) {\n    size /= 1024;\n    unitIndex++;\n  }\n\n  return `${size.toFixed(2)} ${units[unitIndex]}`;\n}\n\n/**\n * \u5BFC\u51FA\u6240\u6709\u6587\u4EF6\u7CFB\u7EDF\u5DE5\u5177\n */\nexport const fileSystemTools: ToolDefinition[] = [\n  fileReadTool,\n  fileWriteTool,\n  directoryListTool,\n  fileInfoTool,\n];\n", "import chalk from 'chalk';\nimport { exec } from 'child_process';\nimport inquirer from 'inquirer';\nimport { promisify } from 'util';\nimport type { ToolDefinition, ToolExecutionResult } from '../types.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * \u98CE\u9669\u7EA7\u522B\u679A\u4E3E\n */\nexport enum RiskLevel {\n  SAFE = 'safe',\n  MODERATE = 'moderate',\n  HIGH = 'high',\n  CRITICAL = 'critical',\n}\n\n/**\n * \u547D\u4EE4\u9884\u68C0\u67E5\u7ED3\u679C\n */\nexport interface CommandPreCheckResult {\n  valid: boolean;\n  message?: string;\n  suggestions?: Array<{\n    command: string;\n    description: string;\n    riskLevel?: RiskLevel;\n  }>;\n}\n\n/**\n * \u786E\u8BA4\u9009\u9879\n */\nexport interface ConfirmationOptions {\n  /** \u662F\u5426\u8DF3\u8FC7\u786E\u8BA4 */\n  skipConfirmation?: boolean;\n  /** \u81EA\u5B9A\u4E49\u786E\u8BA4\u6D88\u606F */\n  confirmMessage?: string;\n  /** \u98CE\u9669\u7EA7\u522B */\n  riskLevel?: RiskLevel;\n  /** \u662F\u5426\u663E\u793A\u547D\u4EE4\u9884\u89C8 */\n  showPreview?: boolean;\n  /** \u8D85\u65F6\u65F6\u95F4\uFF08\u6BEB\u79D2\uFF09 */\n  timeout?: number;\n}\n\n/**\n * \u547D\u4EE4\u6267\u884C\u7ED3\u679C\n */\nexport interface CommandExecutionResult extends ToolExecutionResult {\n  command?: string;\n  stdout?: string;\n  stderr?: string;\n  exitCode?: number;\n  workingDirectory?: string;\n  cancelled?: boolean;\n}\n\n/**\n * \u53EF\u786E\u8BA4\u5DE5\u5177\u7684\u62BD\u8C61\u57FA\u7C7B\n * \u4E3A\u9700\u8981\u7528\u6237\u786E\u8BA4\u7684\u547D\u4EE4\u884C\u5DE5\u5177\u63D0\u4F9B\u7EDF\u4E00\u7684\u786E\u8BA4\u673A\u5236\n */\nexport abstract class ConfirmableToolBase implements ToolDefinition {\n  /** \u5DE5\u5177\u540D\u79F0 */\n  abstract readonly name: string;\n  /** \u5DE5\u5177\u63CF\u8FF0 */\n  abstract readonly description: string;\n  /** \u5DE5\u5177\u7248\u672C */\n  readonly version?: string = '1.0.0';\n  /** \u5DE5\u5177\u4F5C\u8005 */\n  readonly author?: string = 'Agent CLI';\n  /** \u5DE5\u5177\u5206\u7C7B */\n  readonly category?: string;\n  /** \u5DE5\u5177\u6807\u7B7E */\n  readonly tags?: string[];\n  /** \u53C2\u6570\u6A21\u5F0F\u5B9A\u4E49 */\n  abstract readonly parameters: Record<string, any>;\n  /** \u5FC5\u9700\u53C2\u6570\u5217\u8868 */\n  readonly required?: string[];\n\n  /**\n   * \u5DE5\u5177\u6267\u884C\u5165\u53E3\n   */\n  async execute(params: Record<string, any>): Promise<CommandExecutionResult> {\n    try {\n      // \u9884\u5904\u7406\u53C2\u6570\n      const processedParams = await this.preprocessParameters(params);\n\n      // \u6784\u5EFA\u547D\u4EE4\n      const command = await this.buildCommand(processedParams);\n\n      // \u83B7\u53D6\u786E\u8BA4\u9009\u9879\n      const confirmationOptions = this.getConfirmationOptions(processedParams);\n\n      // \u83B7\u53D6\u5DE5\u4F5C\u76EE\u5F55\n      const workingDirectory = this.getWorkingDirectory(processedParams);\n\n      // \u9884\u68C0\u67E5\u547D\u4EE4\n      const preCheckResult = await this.preCheckCommand(command, workingDirectory, processedParams);\n\n      if (!preCheckResult.valid) {\n        return await this.handlePreCheckFailure(\n          preCheckResult,\n          workingDirectory,\n          confirmationOptions\n        );\n      }\n\n      // \u5982\u679C\u9700\u8981\u786E\u8BA4\uFF0C\u8FDB\u884C\u7528\u6237\u786E\u8BA4\n      if (!confirmationOptions.skipConfirmation) {\n        const confirmed = await this.confirmExecution(\n          command,\n          workingDirectory,\n          confirmationOptions,\n          processedParams\n        );\n\n        if (!confirmed) {\n          return {\n            success: false,\n            error: '\u7528\u6237\u53D6\u6D88\u6267\u884C',\n            cancelled: true,\n          };\n        }\n      }\n\n      // \u6267\u884C\u547D\u4EE4\n      return await this.executeCommand(\n        command,\n        workingDirectory,\n        confirmationOptions,\n        processedParams\n      );\n    } catch (error: any) {\n      return {\n        success: false,\n        error: `\u5DE5\u5177\u6267\u884C\u5931\u8D25: ${error.message}`,\n      };\n    }\n  }\n\n  /**\n   * \u9884\u5904\u7406\u53C2\u6570 - \u5B50\u7C7B\u53EF\u91CD\u5199\u8FDB\u884C\u53C2\u6570\u9A8C\u8BC1\u548C\u8F6C\u6362\n   */\n  protected async preprocessParameters(params: Record<string, any>): Promise<Record<string, any>> {\n    return params;\n  }\n\n  /**\n   * \u6784\u5EFA\u8981\u6267\u884C\u7684\u547D\u4EE4 - \u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\n   */\n  protected abstract buildCommand(params: Record<string, any>): Promise<string>;\n\n  /**\n   * \u83B7\u53D6\u786E\u8BA4\u9009\u9879 - \u5B50\u7C7B\u53EF\u91CD\u5199\u81EA\u5B9A\u4E49\u786E\u8BA4\u884C\u4E3A\n   */\n  protected getConfirmationOptions(params: Record<string, any>): ConfirmationOptions {\n    return {\n      skipConfirmation: params.skipConfirmation || false,\n      riskLevel: params.riskLevel || RiskLevel.MODERATE,\n      showPreview: params.showPreview !== false,\n      timeout: params.timeout || 30000,\n    };\n  }\n\n  /**\n   * \u83B7\u53D6\u5DE5\u4F5C\u76EE\u5F55 - \u5B50\u7C7B\u53EF\u91CD\u5199\n   */\n  protected getWorkingDirectory(params: Record<string, any>): string {\n    return params.workingDirectory || params.path || process.cwd();\n  }\n\n  /**\n   * \u9884\u68C0\u67E5\u547D\u4EE4 - \u5B50\u7C7B\u53EF\u91CD\u5199\u8FDB\u884C\u7279\u5B9A\u7684\u547D\u4EE4\u68C0\u67E5\n   */\n  protected async preCheckCommand(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _command: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _workingDirectory: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _params: Record<string, any>\n  ): Promise<CommandPreCheckResult> {\n    return { valid: true };\n  }\n\n  /**\n   * \u5904\u7406\u9884\u68C0\u67E5\u5931\u8D25 - \u63D0\u4F9B\u5EFA\u8BAE\u9009\u9879\n   */\n  protected async handlePreCheckFailure(\n    preCheckResult: CommandPreCheckResult,\n    workingDirectory: string,\n    confirmationOptions: ConfirmationOptions\n  ): Promise<CommandExecutionResult> {\n    console.log(chalk.yellow(`\u26A0\uFE0F  \u9884\u68C0\u67E5\u53D1\u73B0\u95EE\u9898: ${preCheckResult.message}`));\n\n    if (preCheckResult.suggestions && preCheckResult.suggestions.length > 0) {\n      console.log(chalk.blue('\\n\uD83D\uDCA1 \u5EFA\u8BAE\u7684\u66FF\u4EE3\u65B9\u6848:'));\n\n      const choices = preCheckResult.suggestions.map((suggestion, index) => ({\n        name: `${chalk.cyan(suggestion.command)} ${chalk.gray(`- ${suggestion.description}`)}`,\n        value: index,\n        short: suggestion.command,\n      }));\n\n      choices.push({ name: chalk.gray('\u53D6\u6D88\u6267\u884C'), value: -1, short: '\u53D6\u6D88' });\n\n      const { selectedIndex } = await inquirer.prompt([\n        {\n          type: 'list',\n          name: 'selectedIndex',\n          message: '\u8BF7\u9009\u62E9\u8981\u6267\u884C\u7684\u547D\u4EE4:',\n          choices,\n          pageSize: 10,\n        },\n      ]);\n\n      if (selectedIndex === -1) {\n        return {\n          success: false,\n          error: '\u7528\u6237\u53D6\u6D88\u6267\u884C',\n          cancelled: true,\n        };\n      }\n\n      const selectedSuggestion = preCheckResult.suggestions[selectedIndex];\n      return await this.executeCommand(\n        selectedSuggestion.command,\n        workingDirectory,\n        {\n          ...confirmationOptions,\n          riskLevel: selectedSuggestion.riskLevel || confirmationOptions.riskLevel,\n        },\n        {}\n      );\n    }\n\n    return {\n      success: false,\n      error: preCheckResult.message || '\u9884\u68C0\u67E5\u5931\u8D25',\n    };\n  }\n\n  /**\n   * \u7528\u6237\u786E\u8BA4\u6267\u884C\n   */\n  protected async confirmExecution(\n    command: string,\n    workingDirectory: string,\n    options: ConfirmationOptions,\n    params: Record<string, any>\n  ): Promise<boolean> {\n    // \u663E\u793A\u547D\u4EE4\u4FE1\u606F\n    console.log(chalk.blue('\\n\uD83D\uDCCB \u5EFA\u8BAE\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4:'));\n    console.log(chalk.cyan(`  ${command}`));\n\n    // \u663E\u793A\u989D\u5916\u4FE1\u606F\n    const description = this.getExecutionDescription(params);\n    if (description) {\n      console.log(chalk.gray(`  \u8BF4\u660E: ${description}`));\n    }\n\n    console.log(chalk.gray(`  \u5DE5\u4F5C\u76EE\u5F55: ${workingDirectory}`));\n    console.log(chalk.gray(`  \u98CE\u9669\u7EA7\u522B: ${this.getRiskLevelDisplay(options.riskLevel!)}`));\n\n    // \u663E\u793A\u9884\u89C8\u4FE1\u606F\n    if (options.showPreview) {\n      const previewInfo = await this.getExecutionPreview(command, workingDirectory, params);\n      if (previewInfo) {\n        console.log(chalk.blue('\\n\uD83D\uDD0D \u6267\u884C\u9884\u89C8:'));\n        console.log(chalk.gray(previewInfo));\n      }\n    }\n\n    // \u7528\u6237\u786E\u8BA4\n    const { confirm } = await inquirer.prompt([\n      {\n        type: 'confirm',\n        name: 'confirm',\n        message: options.confirmMessage || '\u662F\u5426\u6267\u884C\u6B64\u547D\u4EE4\uFF1F',\n        default: false,\n      },\n    ]);\n\n    return confirm;\n  }\n\n  /**\n   * \u6267\u884C\u547D\u4EE4\n   */\n  protected async executeCommand(\n    command: string,\n    workingDirectory: string,\n    options: ConfirmationOptions,\n    params: Record<string, any>\n  ): Promise<CommandExecutionResult> {\n    console.log(chalk.blue('\\n\u26A1 \u6B63\u5728\u6267\u884C\u547D\u4EE4...'));\n    const startTime = Date.now();\n\n    try {\n      const result = await execAsync(command, {\n        cwd: workingDirectory,\n        timeout: options.timeout,\n      });\n\n      const duration = Date.now() - startTime;\n\n      console.log(chalk.green(`\u2705 \u547D\u4EE4\u6267\u884C\u6210\u529F (${duration}ms)`));\n\n      if (result.stdout) {\n        console.log('\\n\uD83D\uDCE4 \u8F93\u51FA:');\n        console.log(result.stdout);\n      }\n\n      // \u540E\u5904\u7406\u7ED3\u679C\n      const processedResult = await this.postProcessResult(result, params);\n\n      return {\n        success: true,\n        command,\n        stdout: result.stdout,\n        stderr: result.stderr,\n        workingDirectory,\n        duration,\n        data: processedResult,\n      };\n    } catch (error: any) {\n      console.log(chalk.red(`\u274C \u547D\u4EE4\u6267\u884C\u5931\u8D25: ${error.message}`));\n\n      if (error.stdout) {\n        console.log('\\n\uD83D\uDCE4 \u6807\u51C6\u8F93\u51FA:');\n        console.log(error.stdout);\n      }\n\n      if (error.stderr) {\n        console.log('\\n\uD83D\uDEA8 \u9519\u8BEF\u8F93\u51FA:');\n        console.log(error.stderr);\n      }\n\n      return {\n        success: false,\n        error: error.message,\n        command,\n        stdout: error.stdout || '',\n        stderr: error.stderr || '',\n        exitCode: error.code,\n        workingDirectory,\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u63CF\u8FF0 - \u5B50\u7C7B\u53EF\u91CD\u5199\u63D0\u4F9B\u66F4\u8BE6\u7EC6\u7684\u8BF4\u660E\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected getExecutionDescription(_params: Record<string, any>): string | undefined {\n    return undefined;\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u9884\u89C8 - \u5B50\u7C7B\u53EF\u91CD\u5199\u63D0\u4F9B\u6267\u884C\u524D\u7684\u9884\u89C8\u4FE1\u606F\n   */\n  protected async getExecutionPreview(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _command: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _workingDirectory: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _params: Record<string, any>\n  ): Promise<string | undefined> {\n    return undefined;\n  }\n\n  /**\n   * \u540E\u5904\u7406\u7ED3\u679C - \u5B50\u7C7B\u53EF\u91CD\u5199\u5BF9\u6267\u884C\u7ED3\u679C\u8FDB\u884C\u989D\u5916\u5904\u7406\n   */\n  protected async postProcessResult(\n    result: { stdout: string; stderr: string },\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _params: Record<string, any>\n  ): Promise<any> {\n    return result;\n  }\n\n  /**\n   * \u83B7\u53D6\u98CE\u9669\u7EA7\u522B\u663E\u793A\n   */\n  protected getRiskLevelDisplay(level: RiskLevel): string {\n    switch (level) {\n      case RiskLevel.SAFE:\n        return chalk.green('\u5B89\u5168');\n      case RiskLevel.MODERATE:\n        return chalk.yellow('\u4E2D\u7B49');\n      case RiskLevel.HIGH:\n        return chalk.red('\u9AD8\u98CE\u9669');\n      case RiskLevel.CRITICAL:\n        return chalk.redBright.bold('\u6781\u9AD8\u98CE\u9669');\n      default:\n        return chalk.gray('\u672A\u77E5');\n    }\n  }\n}\n", "import { exec } from 'child_process';\nimport { promisify } from 'util';\nimport {\n  CommandPreCheckResult,\n  ConfirmableToolBase,\n  ConfirmationOptions,\n  RiskLevel,\n} from '../../base/ConfirmableToolBase.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * Git Add \u5DE5\u5177 (\u57FA\u4E8E ConfirmableToolBase)\n * \u6DFB\u52A0\u6587\u4EF6\u5230\u6682\u5B58\u533A\uFF0C\u5E26\u7528\u6237\u786E\u8BA4\u529F\u80FD\n */\nclass GitAddTool extends ConfirmableToolBase {\n  readonly name = 'git_add';\n  readonly description = '\u6DFB\u52A0\u6587\u4EF6\u5230Git\u6682\u5B58\u533A\uFF08\u9700\u8981\u7528\u6237\u786E\u8BA4\uFF09';\n  readonly category = 'git';\n  readonly tags = ['git', 'add', 'stage', 'index'];\n\n  readonly parameters = {\n    path: {\n      type: 'string' as const,\n      required: false,\n      description: '\u4ED3\u5E93\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55',\n      default: '.',\n    },\n    files: {\n      type: 'string' as const,\n      required: false,\n      description: '\u8981\u6DFB\u52A0\u7684\u6587\u4EF6\u8DEF\u5F84\uFF0C\u652F\u6301\u901A\u914D\u7B26\uFF0C\u7528\u7A7A\u683C\u5206\u9694\u591A\u4E2A\u6587\u4EF6',\n      default: '',\n    },\n    all: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u6DFB\u52A0\u6240\u6709\u4FEE\u6539\u7684\u6587\u4EF6',\n      default: false,\n    },\n    update: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u53EA\u6DFB\u52A0\u5DF2\u8DDF\u8E2A\u7684\u6587\u4EF6',\n      default: false,\n    },\n    dryRun: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u5E72\u8FD0\u884C\uFF0C\u53EA\u663E\u793A\u5C06\u8981\u6DFB\u52A0\u7684\u6587\u4EF6',\n      default: false,\n    },\n    skipConfirmation: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u8DF3\u8FC7\u7528\u6237\u786E\u8BA4\u76F4\u63A5\u6267\u884C',\n      default: false,\n    },\n    riskLevel: {\n      type: 'string' as const,\n      required: false,\n      description: '\u98CE\u9669\u7EA7\u522B\uFF1Asafe, moderate, high, critical',\n      default: 'safe',\n    },\n  };\n\n  /**\n   * \u9884\u5904\u7406\u53C2\u6570\n   */\n  protected async preprocessParameters(params: Record<string, any>): Promise<Record<string, any>> {\n    const { files } = params;\n\n    // \u9A8C\u8BC1\u6587\u4EF6\u8DEF\u5F84\u5B89\u5168\u6027\n    if (files) {\n      const fileList = files.split(/\\s+/).filter((f: string) => f.trim());\n      for (const file of fileList) {\n        if (file.includes('..') || file.startsWith('/')) {\n          throw new Error(`\u4E0D\u5B89\u5168\u7684\u6587\u4EF6\u8DEF\u5F84: ${file}`);\n        }\n      }\n\n      if (fileList.length === 0) {\n        throw new Error('\u6CA1\u6709\u6307\u5B9A\u6709\u6548\u7684\u6587\u4EF6\u8DEF\u5F84');\n      }\n    }\n\n    return params;\n  }\n\n  /**\n   * \u6784\u5EFA Git add \u547D\u4EE4\n   */\n  protected async buildCommand(params: Record<string, any>): Promise<string> {\n    const { files, all, update, dryRun } = params;\n\n    let command = 'git add';\n\n    // \u6DFB\u52A0\u9009\u9879\n    if (dryRun) {\n      command += ' --dry-run';\n    }\n\n    if (all) {\n      command += ' -A';\n    } else if (update) {\n      command += ' -u';\n    } else if (files) {\n      const fileList = files.split(/\\s+/).filter((f: string) => f.trim());\n      command += ` ${fileList.join(' ')}`;\n    } else {\n      // \u9ED8\u8BA4\u6DFB\u52A0\u5F53\u524D\u76EE\u5F55\u4E0B\u6240\u6709\u6587\u4EF6\n      command += ' .';\n    }\n\n    return command;\n  }\n\n  /**\n   * \u83B7\u53D6\u786E\u8BA4\u9009\u9879\n   */\n  protected getConfirmationOptions(params: Record<string, any>): ConfirmationOptions {\n    const baseOptions = super.getConfirmationOptions(params);\n\n    // Git add \u64CD\u4F5C\u901A\u5E38\u6BD4\u8F83\u5B89\u5168\n    return {\n      ...baseOptions,\n      riskLevel: RiskLevel.SAFE,\n      confirmMessage: params.dryRun ? '\u6267\u884C\u5E72\u8FD0\u884C\u9884\u89C8\u8981\u6DFB\u52A0\u7684\u6587\u4EF6\uFF1F' : '\u662F\u5426\u6DFB\u52A0\u8FD9\u4E9B\u6587\u4EF6\u5230\u6682\u5B58\u533A\uFF1F',\n    };\n  }\n\n  /**\n   * \u9884\u68C0\u67E5\u547D\u4EE4\n   */\n  protected async preCheckCommand(\n    command: string,\n    workingDirectory: string,\n    _params: Record<string, any>\n  ): Promise<CommandPreCheckResult> {\n    try {\n      // \u68C0\u67E5\u662F\u5426\u5728 Git \u4ED3\u5E93\u4E2D\n      await execAsync('git rev-parse --git-dir', { cwd: workingDirectory });\n\n      return { valid: true };\n    } catch (error: any) {\n      if (error.message.includes('not a git repository')) {\n        return {\n          valid: false,\n          message: '\u5F53\u524D\u76EE\u5F55\u4E0D\u662F Git \u4ED3\u5E93',\n          suggestions: [\n            {\n              command: 'git init',\n              description: '\u521D\u59CB\u5316 Git \u4ED3\u5E93',\n              riskLevel: RiskLevel.SAFE,\n            },\n          ],\n        };\n      }\n\n      return {\n        valid: false,\n        message: `Git \u9884\u68C0\u67E5\u5931\u8D25: ${error.message}`,\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u63CF\u8FF0\n   */\n  protected getExecutionDescription(params: Record<string, any>): string {\n    const { files, all, update, dryRun } = params;\n\n    let description = '';\n\n    if (dryRun) {\n      description += '\u9884\u89C8\u8981\u6DFB\u52A0\u7684\u6587\u4EF6';\n    } else if (all) {\n      description += '\u6DFB\u52A0\u6240\u6709\u4FEE\u6539\u7684\u6587\u4EF6';\n    } else if (update) {\n      description += '\u6DFB\u52A0\u6240\u6709\u5DF2\u8DDF\u8E2A\u7684\u6587\u4EF6';\n    } else if (files) {\n      description += `\u6DFB\u52A0\u6307\u5B9A\u6587\u4EF6: ${files}`;\n    } else {\n      description += '\u6DFB\u52A0\u5F53\u524D\u76EE\u5F55\u4E0B\u6240\u6709\u6587\u4EF6';\n    }\n\n    return description;\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u9884\u89C8\n   */\n  protected async getExecutionPreview(\n    command: string,\n    workingDirectory: string,\n    _params: Record<string, any>\n  ): Promise<string> {\n    try {\n      // \u663E\u793A\u5F53\u524D\u672A\u6682\u5B58\u7684\u6587\u4EF6\n      const { stdout: statusOutput } = await execAsync('git status --porcelain', {\n        cwd: workingDirectory,\n        timeout: 5000,\n      });\n\n      if (!statusOutput.trim()) {\n        return '\u6CA1\u6709\u9700\u8981\u6DFB\u52A0\u7684\u6587\u4EF6';\n      }\n\n      let preview = '\u5F85\u6DFB\u52A0\u7684\u6587\u4EF6:\\n';\n      const lines = statusOutput.split('\\n').filter(line => line.trim());\n\n      for (const line of lines) {\n        const status = line.substring(0, 2);\n        const file = line.substring(3);\n\n        // \u53EA\u663E\u793A\u672A\u6682\u5B58\u7684\u6587\u4EF6\n        if (status[1] !== ' ') {\n          let statusText = '';\n          if (status[1] === 'M') statusText = '\u4FEE\u6539';\n          else if (status.includes('?')) statusText = '\u65B0\u6587\u4EF6';\n          else if (status[1] === 'D') statusText = '\u5220\u9664';\n          else statusText = '\u5176\u4ED6';\n\n          preview += `  ${statusText}: ${file}\\n`;\n        }\n      }\n\n      return preview || '\u6CA1\u6709\u672A\u6682\u5B58\u7684\u6587\u4EF6\u9700\u8981\u6DFB\u52A0';\n    } catch (error) {\n      return '\u65E0\u6CD5\u83B7\u53D6\u9884\u89C8\u4FE1\u606F';\n    }\n  }\n\n  /**\n   * \u540E\u5904\u7406\u7ED3\u679C\n   */\n  protected async postProcessResult(\n    result: { stdout: string; stderr: string },\n    params: Record<string, any>\n  ): Promise<any> {\n    const output = result.stdout.trim();\n\n    if (params.dryRun) {\n      // \u89E3\u6790\u5E72\u8FD0\u884C\u7ED3\u679C\n      const lines = output.split('\\n').filter(line => line.trim());\n      const wouldAdd = lines.map(line => line.replace(/^add\\s+/, ''));\n\n      return {\n        type: 'dry-run',\n        wouldAdd,\n        fileCount: wouldAdd.length,\n        message: `\u5C06\u8981\u6DFB\u52A0 ${wouldAdd.length} \u4E2A\u6587\u4EF6\u5230\u6682\u5B58\u533A`,\n        rawOutput: output,\n      };\n    }\n\n    // \u5B9E\u9645\u6DFB\u52A0\u64CD\u4F5C - \u83B7\u53D6\u5F53\u524D\u6682\u5B58\u533A\u72B6\u6001\n    try {\n      const { stdout: statusOutput } = await execAsync('git status --porcelain', {\n        cwd: params.path || '.',\n        timeout: 5000,\n      });\n\n      const statusLines = statusOutput.split('\\n').filter(line => line.trim());\n      const stagedFiles = statusLines\n        .filter(line => line[0] !== ' ' && line[0] !== '?')\n        .map(line => line.substring(3));\n\n      return {\n        type: 'add',\n        stagedFiles,\n        stagedCount: stagedFiles.length,\n        message: output || `\u6210\u529F\u6DFB\u52A0\u6587\u4EF6\u5230\u6682\u5B58\u533A`,\n        rawOutput: output,\n      };\n    } catch (statusError) {\n      return {\n        type: 'add',\n        message: output || '\u6587\u4EF6\u5DF2\u6DFB\u52A0\u5230\u6682\u5B58\u533A',\n        rawOutput: output,\n      };\n    }\n  }\n}\n\n// \u5BFC\u51FA\u5DE5\u5177\u5B9E\u4F8B\nexport const gitAdd = new GitAddTool();\n", "import { exec } from 'child_process';\nimport { promisify } from 'util';\nimport {\n  CommandPreCheckResult,\n  ConfirmableToolBase,\n  ConfirmationOptions,\n  RiskLevel,\n} from '../../base/ConfirmableToolBase.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * Git Branch \u5DE5\u5177 (\u57FA\u4E8E ConfirmableToolBase)\n * \u7BA1\u7406Git\u5206\u652F\uFF0C\u5E26\u7528\u6237\u786E\u8BA4\u529F\u80FD\n */\nclass GitBranchTool extends ConfirmableToolBase {\n  readonly name = 'git_branch';\n  readonly description = '\u7BA1\u7406Git\u5206\u652F\uFF08\u9700\u8981\u7528\u6237\u786E\u8BA4\uFF09';\n  readonly category = 'git';\n  readonly tags = ['git', 'branch', 'checkout', 'switch'];\n\n  readonly parameters = {\n    path: {\n      type: 'string' as const,\n      required: false,\n      description: '\u4ED3\u5E93\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55',\n      default: '.',\n    },\n    action: {\n      type: 'string' as const,\n      required: false,\n      description: '\u64CD\u4F5C\u7C7B\u578B: list(\u5217\u51FA), create(\u521B\u5EFA), delete(\u5220\u9664), switch(\u5207\u6362)',\n      default: 'list',\n    },\n    branchName: {\n      type: 'string' as const,\n      required: false,\n      description: '\u5206\u652F\u540D\u79F0',\n      default: '',\n    },\n    remote: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u5305\u542B\u8FDC\u7A0B\u5206\u652F',\n      default: false,\n    },\n    all: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u663E\u793A\u6240\u6709\u5206\u652F\uFF08\u672C\u5730\u548C\u8FDC\u7A0B\uFF09',\n      default: false,\n    },\n    createFrom: {\n      type: 'string' as const,\n      required: false,\n      description: '\u4ECE\u6307\u5B9A\u5206\u652F\u521B\u5EFA\u65B0\u5206\u652F',\n      default: '',\n    },\n    skipConfirmation: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u8DF3\u8FC7\u7528\u6237\u786E\u8BA4\u76F4\u63A5\u6267\u884C',\n      default: false,\n    },\n    riskLevel: {\n      type: 'string' as const,\n      required: false,\n      description: '\u98CE\u9669\u7EA7\u522B\uFF1Asafe, moderate, high, critical',\n      default: 'moderate',\n    },\n  };\n\n  /**\n   * \u9884\u5904\u7406\u53C2\u6570\n   */\n  protected async preprocessParameters(params: Record<string, any>): Promise<Record<string, any>> {\n    const { action, branchName } = params;\n\n    // \u9A8C\u8BC1\u64CD\u4F5C\u7C7B\u578B\n    const validActions = ['list', 'create', 'delete', 'switch', 'checkout'];\n    if (!validActions.includes(action.toLowerCase())) {\n      throw new Error(`\u4E0D\u652F\u6301\u7684\u64CD\u4F5C: ${action}`);\n    }\n\n    // \u9A8C\u8BC1\u5206\u652F\u540D\u79F0\n    if (['create', 'delete', 'switch', 'checkout'].includes(action.toLowerCase()) && !branchName) {\n      throw new Error(`${action}\u64CD\u4F5C\u9700\u8981\u6307\u5B9A\u5206\u652F\u540D\u79F0`);\n    }\n\n    return params;\n  }\n\n  /**\n   * \u6784\u5EFA Git branch \u547D\u4EE4\n   */\n  protected async buildCommand(params: Record<string, any>): Promise<string> {\n    const { action, branchName, remote, all, createFrom } = params;\n\n    let command = '';\n\n    switch (action.toLowerCase()) {\n      case 'list':\n        command = 'git branch';\n        if (all) {\n          command += ' -a';\n        } else if (remote) {\n          command += ' -r';\n        }\n        break;\n\n      case 'create':\n        command = `git branch ${branchName}`;\n        if (createFrom) {\n          command += ` ${createFrom}`;\n        }\n        break;\n\n      case 'delete':\n        command = `git branch -d ${branchName}`;\n        break;\n\n      case 'switch':\n      case 'checkout':\n        command = `git checkout ${branchName}`;\n        break;\n\n      default:\n        throw new Error(`\u4E0D\u652F\u6301\u7684\u64CD\u4F5C: ${action}`);\n    }\n\n    return command;\n  }\n\n  /**\n   * \u83B7\u53D6\u786E\u8BA4\u9009\u9879 - \u6839\u636E\u64CD\u4F5C\u7C7B\u578B\u8BBE\u7F6E\u4E0D\u540C\u7684\u98CE\u9669\u7EA7\u522B\n   */\n  protected getConfirmationOptions(params: Record<string, any>): ConfirmationOptions {\n    const baseOptions = super.getConfirmationOptions(params);\n\n    let riskLevel = RiskLevel.SAFE;\n    let skipConfirmation = false;\n    let confirmMessage = '';\n\n    switch (params.action.toLowerCase()) {\n      case 'list':\n        // \u5217\u51FA\u5206\u652F\u662F\u53EA\u8BFB\u64CD\u4F5C\uFF0C\u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\n        riskLevel = RiskLevel.SAFE;\n        skipConfirmation = true;\n        confirmMessage = '\u67E5\u770B\u5206\u652F\u5217\u8868\uFF1F';\n        break;\n\n      case 'create':\n        riskLevel = RiskLevel.SAFE;\n        confirmMessage = `\u521B\u5EFA\u65B0\u5206\u652F \"${params.branchName}\"\uFF1F`;\n        break;\n\n      case 'switch':\n      case 'checkout':\n        riskLevel = RiskLevel.MODERATE;\n        confirmMessage = `\u5207\u6362\u5230\u5206\u652F \"${params.branchName}\"\uFF1F`;\n        break;\n\n      case 'delete':\n        riskLevel = RiskLevel.HIGH;\n        confirmMessage = `\u26A0\uFE0F  \u5220\u9664\u5206\u652F \"${params.branchName}\"\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\uFF01`;\n        break;\n\n      default:\n        riskLevel = RiskLevel.MODERATE;\n        confirmMessage = '\u6267\u884CGit\u5206\u652F\u64CD\u4F5C\uFF1F';\n    }\n\n    return {\n      ...baseOptions,\n      riskLevel,\n      skipConfirmation: skipConfirmation || baseOptions.skipConfirmation,\n      confirmMessage,\n    };\n  }\n\n  /**\n   * \u9884\u68C0\u67E5\u547D\u4EE4\n   */\n  protected async preCheckCommand(\n    _command: string,\n    workingDirectory: string,\n    params: Record<string, any>\n  ): Promise<CommandPreCheckResult> {\n    try {\n      // \u68C0\u67E5\u662F\u5426\u5728 Git \u4ED3\u5E93\u4E2D\n      await execAsync('git rev-parse --git-dir', { cwd: workingDirectory });\n\n      // \u5BF9\u4E8E\u5207\u6362\u5206\u652F\u64CD\u4F5C\uFF0C\u68C0\u67E5\u5206\u652F\u662F\u5426\u5B58\u5728\n      if (['switch', 'checkout'].includes(params.action.toLowerCase())) {\n        try {\n          const { stdout } = await execAsync('git branch -a', { cwd: workingDirectory });\n          const branches = stdout.split('\\n').map(line => line.trim().replace(/^\\*?\\s*/, ''));\n          const branchExists = branches.some(\n            branch => branch === params.branchName || branch.includes(`/${params.branchName}`)\n          );\n\n          if (!branchExists) {\n            return {\n              valid: false,\n              message: `\u5206\u652F \"${params.branchName}\" \u4E0D\u5B58\u5728`,\n              suggestions: [\n                {\n                  command: await this.buildCommand({ ...params, action: 'create' }),\n                  description: `\u521B\u5EFA\u65B0\u5206\u652F \"${params.branchName}\"`,\n                  riskLevel: RiskLevel.SAFE,\n                },\n              ],\n            };\n          }\n        } catch (error) {\n          // \u5FFD\u7565\u5206\u652F\u68C0\u67E5\u9519\u8BEF\uFF0C\u8BA9Git\u547D\u4EE4\u81EA\u5DF1\u5904\u7406\n        }\n      }\n\n      return { valid: true };\n    } catch (error: any) {\n      if (error.message.includes('not a git repository')) {\n        return {\n          valid: false,\n          message: '\u5F53\u524D\u76EE\u5F55\u4E0D\u662F Git \u4ED3\u5E93',\n          suggestions: [\n            {\n              command: 'git init',\n              description: '\u521D\u59CB\u5316 Git \u4ED3\u5E93',\n              riskLevel: RiskLevel.SAFE,\n            },\n          ],\n        };\n      }\n\n      return {\n        valid: false,\n        message: `Git \u9884\u68C0\u67E5\u5931\u8D25: ${error.message}`,\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u63CF\u8FF0\n   */\n  protected getExecutionDescription(params: Record<string, any>): string {\n    const { action, branchName, createFrom } = params;\n\n    switch (action.toLowerCase()) {\n      case 'list':\n        return '\u67E5\u770BGit\u5206\u652F\u5217\u8868';\n      case 'create':\n        return `\u521B\u5EFA\u65B0\u5206\u652F: ${branchName}${createFrom ? ` (\u4ECE ${createFrom})` : ''}`;\n      case 'delete':\n        return `\u5220\u9664\u5206\u652F: ${branchName}`;\n      case 'switch':\n      case 'checkout':\n        return `\u5207\u6362\u5230\u5206\u652F: ${branchName}`;\n      default:\n        return `Git\u5206\u652F\u64CD\u4F5C: ${action}`;\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u9884\u89C8\n   */\n  protected async getExecutionPreview(\n    _command: string,\n    workingDirectory: string,\n    params: Record<string, any>\n  ): Promise<string> {\n    if (params.action.toLowerCase() === 'list') {\n      return '\u5C06\u663E\u793A\u5206\u652F\u5217\u8868';\n    }\n\n    try {\n      // \u663E\u793A\u5F53\u524D\u5206\u652F\u72B6\u6001\n      const { stdout } = await execAsync('git branch', { cwd: workingDirectory });\n      const currentBranch = stdout\n        .split('\\n')\n        .find(line => line.startsWith('*'))\n        ?.trim()\n        .substring(2);\n\n      let preview = `\u5F53\u524D\u5206\u652F: ${currentBranch || '\u672A\u77E5'}\\n`;\n\n      switch (params.action.toLowerCase()) {\n        case 'create':\n          preview += `\u5C06\u521B\u5EFA\u65B0\u5206\u652F: ${params.branchName}`;\n          break;\n        case 'delete':\n          preview += `\u26A0\uFE0F  \u5C06\u5220\u9664\u5206\u652F: ${params.branchName}`;\n          break;\n        case 'switch':\n        case 'checkout':\n          preview += `\u5C06\u5207\u6362\u5230\u5206\u652F: ${params.branchName}`;\n          break;\n      }\n\n      return preview;\n    } catch (error) {\n      return '\u65E0\u6CD5\u83B7\u53D6\u9884\u89C8\u4FE1\u606F';\n    }\n  }\n\n  /**\n   * \u540E\u5904\u7406\u7ED3\u679C\n   */\n  protected async postProcessResult(\n    result: { stdout: string; stderr: string },\n    params: Record<string, any>\n  ): Promise<any> {\n    const output = result.stdout.trim();\n\n    if (params.action === 'list') {\n      // \u89E3\u6790\u5206\u652F\u5217\u8868\n      const lines = output.split('\\n').filter(line => line.trim());\n      const branches = lines.map(line => {\n        const trimmed = line.trim();\n        const isCurrent = trimmed.startsWith('*');\n        const isRemote = trimmed.includes('remotes/');\n\n        let name = trimmed.replace(/^\\*?\\s*/, '');\n        if (isRemote) {\n          name = name.replace('remotes/', '');\n        }\n\n        return {\n          name,\n          isCurrent,\n          isRemote,\n          fullName: trimmed.replace(/^\\*?\\s*/, ''),\n        };\n      });\n\n      return {\n        type: 'list',\n        branches,\n        currentBranch: branches.find(b => b.isCurrent)?.name || '',\n        totalBranches: branches.length,\n        localBranches: branches.filter(b => !b.isRemote).length,\n        remoteBranches: branches.filter(b => b.isRemote).length,\n        rawOutput: output,\n      };\n    } else {\n      // \u5176\u4ED6\u64CD\u4F5C\u7684\u7ED3\u679C\n      const processedResult: any = {\n        type: params.action,\n        message: output || result.stderr,\n        rawOutput: output,\n      };\n\n      if (params.action === 'create') {\n        processedResult.createdBranch = params.branchName;\n      } else if (params.action === 'delete') {\n        processedResult.deletedBranch = params.branchName;\n      } else if (params.action === 'switch' || params.action === 'checkout') {\n        processedResult.switchedTo = params.branchName;\n      }\n\n      return processedResult;\n    }\n  }\n}\n\n// \u5BFC\u51FA\u5DE5\u5177\u5B9E\u4F8B\nexport const gitBranch = new GitBranchTool();\n", "import { exec } from 'child_process';\nimport { promisify } from 'util';\nimport {\n  CommandPreCheckResult,\n  ConfirmableToolBase,\n  ConfirmationOptions,\n  RiskLevel,\n} from '../../base/ConfirmableToolBase.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * Git Diff \u5DE5\u5177 (\u57FA\u4E8E ConfirmableToolBase)\n * \u67E5\u770BGit\u6587\u4EF6\u5DEE\u5F02\n */\nclass GitDiffTool extends ConfirmableToolBase {\n  readonly name = 'git_diff';\n  readonly description = '\u67E5\u770BGit\u6587\u4EF6\u5DEE\u5F02';\n  readonly category = 'git';\n  readonly tags = ['git', 'diff', 'changes', 'comparison'];\n\n  readonly parameters = {\n    path: {\n      type: 'string' as const,\n      required: false,\n      description: '\u4ED3\u5E93\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55',\n      default: '.',\n    },\n    file: {\n      type: 'string' as const,\n      required: false,\n      description: '\u6307\u5B9A\u6587\u4EF6\u8DEF\u5F84',\n      default: '',\n    },\n    staged: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u67E5\u770B\u6682\u5B58\u533A\u7684\u5DEE\u5F02',\n      default: false,\n    },\n    cached: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u67E5\u770B\u5DF2\u6682\u5B58\u6587\u4EF6\u7684\u5DEE\u5F02\uFF08\u540Cstaged\uFF09',\n      default: false,\n    },\n    nameOnly: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u53EA\u663E\u793A\u6587\u4EF6\u540D',\n      default: false,\n    },\n    stat: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u663E\u793A\u7EDF\u8BA1\u4FE1\u606F',\n      default: false,\n    },\n    commit1: {\n      type: 'string' as const,\n      required: false,\n      description: '\u7B2C\u4E00\u4E2A\u63D0\u4EA4hash/\u5206\u652F\u540D',\n      default: '',\n    },\n    commit2: {\n      type: 'string' as const,\n      required: false,\n      description: '\u7B2C\u4E8C\u4E2A\u63D0\u4EA4hash/\u5206\u652F\u540D',\n      default: '',\n    },\n    skipConfirmation: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u8DF3\u8FC7\u7528\u6237\u786E\u8BA4\u76F4\u63A5\u6267\u884C',\n      default: true, // \u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\uFF0C\u56E0\u4E3A\u662F\u53EA\u8BFB\u64CD\u4F5C\n    },\n  };\n\n  /**\n   * \u6784\u5EFA Git diff \u547D\u4EE4\n   */\n  protected async buildCommand(params: Record<string, any>): Promise<string> {\n    const { file, staged, cached, nameOnly, stat, commit1, commit2 } = params;\n\n    let command = 'git diff';\n\n    // \u6DFB\u52A0\u5DEE\u5F02\u7C7B\u578B\u9009\u9879\n    if (staged || cached) {\n      command += ' --staged';\n    }\n\n    // \u6DFB\u52A0\u8F93\u51FA\u683C\u5F0F\u9009\u9879\n    if (nameOnly) {\n      command += ' --name-only';\n    } else if (stat) {\n      command += ' --stat';\n    }\n\n    // \u6DFB\u52A0\u63D0\u4EA4\u6BD4\u8F83\n    if (commit1 && commit2) {\n      command += ` ${commit1}..${commit2}`;\n    } else if (commit1) {\n      command += ` ${commit1}`;\n    }\n\n    // \u6DFB\u52A0\u6587\u4EF6\u8DEF\u5F84\n    if (file) {\n      command += ` -- ${file}`;\n    }\n\n    return command;\n  }\n\n  /**\n   * \u83B7\u53D6\u786E\u8BA4\u9009\u9879 - \u53EA\u8BFB\u64CD\u4F5C\u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected getConfirmationOptions(params: Record<string, any>): ConfirmationOptions {\n    return {\n      skipConfirmation: true, // \u53EA\u8BFB\u64CD\u4F5C\uFF0C\u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\n      riskLevel: RiskLevel.SAFE,\n      showPreview: false,\n      timeout: 15000,\n    };\n  }\n\n  /**\n   * \u9884\u68C0\u67E5\u547D\u4EE4\n   */\n  protected async preCheckCommand(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _command: string,\n    workingDirectory: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _params: Record<string, any>\n  ): Promise<CommandPreCheckResult> {\n    try {\n      // \u68C0\u67E5\u662F\u5426\u5728 Git \u4ED3\u5E93\u4E2D\n      await execAsync('git rev-parse --git-dir', { cwd: workingDirectory });\n\n      return { valid: true };\n    } catch (error: any) {\n      if (error.message.includes('not a git repository')) {\n        return {\n          valid: false,\n          message: '\u5F53\u524D\u76EE\u5F55\u4E0D\u662F Git \u4ED3\u5E93',\n          suggestions: [\n            {\n              command: 'git init',\n              description: '\u521D\u59CB\u5316 Git \u4ED3\u5E93',\n              riskLevel: RiskLevel.SAFE,\n            },\n          ],\n        };\n      }\n\n      return {\n        valid: false,\n        message: `Git \u9884\u68C0\u67E5\u5931\u8D25: ${error.message}`,\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u63CF\u8FF0\n   */\n  protected getExecutionDescription(params: Record<string, any>): string {\n    const { file, staged, cached, commit1, commit2 } = params;\n\n    let description = '\u67E5\u770BGit\u5DEE\u5F02';\n\n    if (file) {\n      description += ` - \u6587\u4EF6: ${file}`;\n    }\n\n    if (staged || cached) {\n      description += ' (\u6682\u5B58\u533A)';\n    }\n\n    if (commit1 && commit2) {\n      description += ` (${commit1}..${commit2})`;\n    } else if (commit1) {\n      description += ` (\u4E0E ${commit1} \u6BD4\u8F83)`;\n    }\n\n    return description;\n  }\n\n  /**\n   * \u540E\u5904\u7406\u7ED3\u679C\n   */\n  protected async postProcessResult(\n    result: { stdout: string; stderr: string },\n    params: Record<string, any>\n  ): Promise<any> {\n    const output = result.stdout.trim();\n\n    const processedResult: any = {\n      rawOutput: output,\n    };\n\n    if (output) {\n      if (params.nameOnly) {\n        // \u89E3\u6790\u6587\u4EF6\u540D\u5217\u8868\n        processedResult.files = output.split('\\n').filter(line => line.trim());\n        processedResult.fileCount = processedResult.files.length;\n        processedResult.type = 'nameOnly';\n      } else if (params.stat) {\n        // \u89E3\u6790\u7EDF\u8BA1\u4FE1\u606F\n        const lines = output.split('\\n');\n        const files = [];\n        let insertions = 0;\n        let deletions = 0;\n\n        for (const line of lines) {\n          if (line.includes('|')) {\n            const parts = line.trim().split('|');\n            if (parts.length >= 2) {\n              const filename = parts[0].trim();\n              const changes = parts[1].trim();\n              files.push({ filename, changes });\n            }\n          } else if (line.includes('insertion') || line.includes('deletion')) {\n            const insertionMatch = line.match(/(\\d+) insertion/);\n            if (insertionMatch) insertions = parseInt(insertionMatch[1]);\n            const deletionMatch = line.match(/(\\d+) deletion/);\n            if (deletionMatch) deletions = parseInt(deletionMatch[1]);\n          }\n        }\n\n        processedResult.type = 'stat';\n        processedResult.files = files;\n        processedResult.summary = {\n          fileCount: files.length,\n          insertions,\n          deletions,\n          totalChanges: insertions + deletions,\n        };\n      } else {\n        // \u6807\u51C6diff\u683C\u5F0F\n        processedResult.type = 'diff';\n        processedResult.diff = output;\n\n        // \u7B80\u5355\u7EDF\u8BA1\n        const lines = output.split('\\n');\n        const addedLines = lines.filter(line => line.startsWith('+')).length;\n        const deletedLines = lines.filter(line => line.startsWith('-')).length;\n        const modifiedFiles = new Set();\n\n        lines.forEach(line => {\n          if (line.startsWith('diff --git')) {\n            const match = line.match(/diff --git a\\/(.+) b\\/(.+)/);\n            if (match) {\n              modifiedFiles.add(match[1]);\n            }\n          }\n        });\n\n        processedResult.summary = {\n          modifiedFiles: Array.from(modifiedFiles),\n          fileCount: modifiedFiles.size,\n          addedLines,\n          deletedLines,\n        };\n      }\n\n      processedResult.hasChanges = true;\n    } else {\n      processedResult.type = 'empty';\n      processedResult.message = '\u6CA1\u6709\u53D1\u73B0\u5DEE\u5F02';\n      processedResult.hasChanges = false;\n    }\n\n    return processedResult;\n  }\n}\n\n// \u5BFC\u51FA\u5DE5\u5177\u5B9E\u4F8B\nexport const gitDiff = new GitDiffTool();\n", "import { exec } from 'child_process';\nimport { promisify } from 'util';\nimport {\n  CommandPreCheckResult,\n  ConfirmableToolBase,\n  ConfirmationOptions,\n  RiskLevel,\n} from '../../base/ConfirmableToolBase.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * Git Log \u5DE5\u5177 (\u57FA\u4E8E ConfirmableToolBase)\n * \u67E5\u770BGit\u63D0\u4EA4\u5386\u53F2\n */\nclass GitLogTool extends ConfirmableToolBase {\n  readonly name = 'git_log';\n  readonly description = '\u67E5\u770BGit\u63D0\u4EA4\u5386\u53F2';\n  readonly category = 'git';\n  readonly tags = ['git', 'log', 'history', 'commits'];\n\n  readonly parameters = {\n    path: {\n      type: 'string' as const,\n      required: false,\n      description: '\u4ED3\u5E93\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55',\n      default: '.',\n    },\n    limit: {\n      type: 'number' as const,\n      required: false,\n      description: '\u663E\u793A\u7684\u63D0\u4EA4\u6570\u91CF\u9650\u5236',\n      default: 10,\n    },\n    oneline: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u6BCF\u4E2A\u63D0\u4EA4\u663E\u793A\u4E00\u884C',\n      default: false,\n    },\n    graph: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u663E\u793A\u5206\u652F\u56FE\u5F62',\n      default: false,\n    },\n    author: {\n      type: 'string' as const,\n      required: false,\n      description: '\u6309\u4F5C\u8005\u8FC7\u6EE4\u63D0\u4EA4',\n      default: '',\n    },\n    since: {\n      type: 'string' as const,\n      required: false,\n      description: '\u663E\u793A\u6307\u5B9A\u65E5\u671F\u4E4B\u540E\u7684\u63D0\u4EA4 (\u5982: \"2023-01-01\", \"1 week ago\")',\n      default: '',\n    },\n    until: {\n      type: 'string' as const,\n      required: false,\n      description: '\u663E\u793A\u6307\u5B9A\u65E5\u671F\u4E4B\u524D\u7684\u63D0\u4EA4',\n      default: '',\n    },\n    skipConfirmation: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u8DF3\u8FC7\u7528\u6237\u786E\u8BA4\u76F4\u63A5\u6267\u884C',\n      default: true, // \u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\uFF0C\u56E0\u4E3A\u662F\u53EA\u8BFB\u64CD\u4F5C\n    },\n  };\n\n  /**\n   * \u6784\u5EFA Git log \u547D\u4EE4\n   */\n  protected async buildCommand(params: Record<string, any>): Promise<string> {\n    const { limit, oneline, graph, author, since, until } = params;\n\n    let command = 'git log';\n\n    // \u6DFB\u52A0\u9650\u5236\n    if (limit > 0) {\n      command += ` -${limit}`;\n    }\n\n    // \u6DFB\u52A0\u683C\u5F0F\u9009\u9879\n    if (oneline) {\n      command += ' --oneline';\n    } else {\n      command += ' --pretty=format:\"%h|%an|%ae|%ad|%s\" --date=iso';\n    }\n\n    // \u6DFB\u52A0\u56FE\u5F62\u663E\u793A\n    if (graph) {\n      command += ' --graph';\n    }\n\n    // \u6DFB\u52A0\u4F5C\u8005\u8FC7\u6EE4\n    if (author) {\n      command += ` --author=\"${author}\"`;\n    }\n\n    // \u6DFB\u52A0\u65E5\u671F\u8FC7\u6EE4\n    if (since) {\n      command += ` --since=\"${since}\"`;\n    }\n\n    if (until) {\n      command += ` --until=\"${until}\"`;\n    }\n\n    return command;\n  }\n\n  /**\n   * \u83B7\u53D6\u786E\u8BA4\u9009\u9879 - \u53EA\u8BFB\u64CD\u4F5C\u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected getConfirmationOptions(params: Record<string, any>): ConfirmationOptions {\n    return {\n      skipConfirmation: true, // \u53EA\u8BFB\u64CD\u4F5C\uFF0C\u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\n      riskLevel: RiskLevel.SAFE,\n      showPreview: false,\n      timeout: 15000,\n    };\n  }\n\n  /**\n   * \u9884\u68C0\u67E5\u547D\u4EE4\n   */\n  protected async preCheckCommand(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _command: string,\n    workingDirectory: string,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _params: Record<string, any>\n  ): Promise<CommandPreCheckResult> {\n    try {\n      // \u68C0\u67E5\u662F\u5426\u5728 Git \u4ED3\u5E93\u4E2D\n      await execAsync('git rev-parse --git-dir', { cwd: workingDirectory });\n\n      return { valid: true };\n    } catch (error: any) {\n      if (error.message.includes('not a git repository')) {\n        return {\n          valid: false,\n          message: '\u5F53\u524D\u76EE\u5F55\u4E0D\u662F Git \u4ED3\u5E93',\n          suggestions: [\n            {\n              command: 'git init',\n              description: '\u521D\u59CB\u5316 Git \u4ED3\u5E93',\n              riskLevel: RiskLevel.SAFE,\n            },\n          ],\n        };\n      }\n\n      return {\n        valid: false,\n        message: `Git \u9884\u68C0\u67E5\u5931\u8D25: ${error.message}`,\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u63CF\u8FF0\n   */\n  protected getExecutionDescription(params: Record<string, any>): string {\n    const { limit, author, since, until, oneline, graph } = params;\n\n    let description = `\u67E5\u770BGit\u63D0\u4EA4\u5386\u53F2 (\u6700\u591A${limit}\u6761)`;\n\n    if (author) {\n      description += ` - \u4F5C\u8005: ${author}`;\n    }\n\n    if (since) {\n      description += ` - \u4ECE: ${since}`;\n    }\n\n    if (until) {\n      description += ` - \u5230: ${until}`;\n    }\n\n    if (oneline) {\n      description += ' (\u7B80\u6D01\u6A21\u5F0F)';\n    }\n\n    if (graph) {\n      description += ' (\u56FE\u5F62\u6A21\u5F0F)';\n    }\n\n    return description;\n  }\n\n  /**\n   * \u540E\u5904\u7406\u7ED3\u679C\n   */\n  protected async postProcessResult(\n    result: { stdout: string; stderr: string },\n    params: Record<string, any>\n  ): Promise<any> {\n    const output = result.stdout.trim();\n\n    const processedResult: any = {\n      rawOutput: output,\n    };\n\n    if (output) {\n      const lines = output.split('\\n');\n\n      if (params.oneline) {\n        // \u89E3\u6790 oneline \u683C\u5F0F\n        processedResult.type = 'oneline';\n        processedResult.commits = lines.map(line => {\n          const spaceIndex = line.indexOf(' ');\n          return {\n            hash: line.substring(0, spaceIndex),\n            message: line.substring(spaceIndex + 1),\n          };\n        });\n      } else if (!params.graph) {\n        // \u89E3\u6790\u81EA\u5B9A\u4E49\u683C\u5F0F (\u4E0D\u5E26graph)\n        processedResult.type = 'detailed';\n        processedResult.commits = lines.map(line => {\n          const parts = line.split('|');\n          return {\n            hash: parts[0],\n            author: parts[1],\n            email: parts[2],\n            date: parts[3],\n            message: parts[4],\n          };\n        });\n      } else {\n        // \u5E26graph\u7684\u683C\u5F0F\u4FDD\u6301\u539F\u6837\n        processedResult.type = 'graph';\n        processedResult.output = output;\n      }\n\n      processedResult.totalCommits = lines.length;\n    } else {\n      processedResult.type = 'empty';\n      processedResult.commits = [];\n      processedResult.totalCommits = 0;\n      processedResult.message = '\u6CA1\u6709\u627E\u5230\u63D0\u4EA4\u8BB0\u5F55';\n    }\n\n    return processedResult;\n  }\n}\n\n// \u5BFC\u51FA\u5DE5\u5177\u5B9E\u4F8B\nexport const gitLog = new GitLogTool();\n", "import { exec } from 'child_process';\nimport { promisify } from 'util';\nimport { ConfirmableToolBase, RiskLevel } from '../../base/ConfirmableToolBase.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * Git Smart Commit \u5DE5\u5177\n * \u4F7F\u7528LLM\u667A\u80FD\u5206\u6790\u53D8\u66F4\u5185\u5BB9\u5E76\u751F\u6210\u63D0\u4EA4\u4FE1\u606F\n */\nexport class GitSmartCommitTool extends ConfirmableToolBase {\n  readonly name = 'git_smart_commit';\n  readonly description = '\u667A\u80FD\u5206\u6790Git\u53D8\u66F4\u5185\u5BB9\uFF0C\u4F7F\u7528LLM\u751F\u6210\u5408\u9002\u7684\u63D0\u4EA4\u4FE1\u606F\u5E76\u6267\u884C\u63D0\u4EA4';\n  readonly category = 'git';\n  readonly version = '1.0.0';\n  readonly author = 'Agent CLI';\n  readonly tags = ['git', 'commit', 'smart', 'llm', 'auto'];\n\n  readonly parameters = {\n    path: {\n      type: 'string' as const,\n      required: false,\n      description: '\u4ED3\u5E93\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55',\n      default: '.',\n    },\n    autoAdd: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u662F\u5426\u81EA\u52A8\u6DFB\u52A0\u6240\u6709\u4FEE\u6539\u7684\u6587\u4EF6\u5230\u6682\u5B58\u533A',\n      default: true,\n    },\n    dryRun: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u5E72\u8FD0\u884C\uFF0C\u53EA\u5206\u6790\u5E76\u751F\u6210\u63D0\u4EA4\u4FE1\u606F\uFF0C\u4E0D\u5B9E\u9645\u63D0\u4EA4',\n      default: false,\n    },\n    llmAnalysis: {\n      type: 'string' as const,\n      required: false,\n      description: 'LLM\u5206\u6790\u7684\u53D8\u66F4\u5185\u5BB9\uFF08\u7531Agent\u81EA\u52A8\u586B\u5145\uFF09',\n      default: '',\n    },\n    skipConfirmation: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u8DF3\u8FC7\u7528\u6237\u786E\u8BA4\uFF08\u4EC5\u5728\u81EA\u52A8\u5316\u573A\u666F\u4E0B\u4F7F\u7528\uFF09',\n      default: false,\n    },\n  };\n\n  protected async buildCommand(params: Record<string, any>): Promise<string> {\n    const { llmAnalysis } = params;\n\n    if (!llmAnalysis) {\n      throw new Error('\u7F3A\u5C11LLM\u5206\u6790\u7ED3\u679C\uFF0C\u65E0\u6CD5\u751F\u6210\u63D0\u4EA4\u4FE1\u606F');\n    }\n\n    // \u8FD4\u56DE\u6700\u7EC8\u7684commit\u547D\u4EE4\n    const commitMessage = llmAnalysis.trim();\n    return `git commit -m \"${commitMessage.replace(/\"/g, '\\\\\"')}\"`;\n  }\n\n  /**\n   * \u751F\u6210 Git \u53D8\u66F4\u5206\u6790\u63D0\u793A\n   */\n  private async generateGitAnalysisPrompt(workingDirectory: string): Promise<string> {\n    try {\n      // \u83B7\u53D6 Git \u72B6\u6001\n      const { stdout: statusOutput } = await execAsync('git status --porcelain', {\n        cwd: workingDirectory,\n      });\n\n      // \u83B7\u53D6\u6587\u4EF6\u5DEE\u5F02\n      let diffOutput = '';\n      try {\n        const { stdout: diff } = await execAsync('git diff --cached HEAD', {\n          cwd: workingDirectory,\n        });\n        diffOutput = diff;\n\n        // \u5982\u679C\u6682\u5B58\u533A\u6CA1\u6709\u5185\u5BB9\uFF0C\u83B7\u53D6\u5DE5\u4F5C\u76EE\u5F55\u7684\u5DEE\u5F02\n        if (!diffOutput.trim()) {\n          const { stdout: workingDiff } = await execAsync('git diff HEAD', {\n            cwd: workingDirectory,\n          });\n          diffOutput = workingDiff;\n        }\n      } catch {\n        // \u5982\u679C\u83B7\u53D6\u5DEE\u5F02\u5931\u8D25\uFF0C\u4F7F\u7528\u72B6\u6001\u4FE1\u606F\n        diffOutput = '\u65E0\u6CD5\u83B7\u53D6\u8BE6\u7EC6\u5DEE\u5F02\u4FE1\u606F';\n      }\n\n      // \u83B7\u53D6\u53D8\u66F4\u6587\u4EF6\u5217\u8868\n      const changedFiles = statusOutput\n        .split('\\n')\n        .filter(line => line.trim())\n        .map(line => {\n          const status = line.substring(0, 2);\n          const fileName = line.substring(3);\n          return { status: status.trim(), fileName };\n        });\n\n      // \u6784\u9020\u5206\u6790\u63D0\u793A\n      const prompt = `\u8BF7\u5206\u6790\u4EE5\u4E0B Git \u53D8\u66F4\u5185\u5BB9\uFF0C\u751F\u6210\u4E00\u4E2A\u7B80\u6D01\u3001\u7B26\u5408 Conventional Commits \u89C4\u8303\u7684\u63D0\u4EA4\u4FE1\u606F\u3002\n\n\u53D8\u66F4\u6587\u4EF6:\n${changedFiles.map(f => `  ${f.status} ${f.fileName}`).join('\\n')}\n\n\u4EE3\u7801\u5DEE\u5F02:\n${diffOutput.length > 2000 ? diffOutput.substring(0, 2000) + '\\n...(\u5DEE\u5F02\u5185\u5BB9\u5DF2\u622A\u53D6)' : diffOutput}\n\n\u8BF7\u751F\u6210\u4E00\u4E2A\u7B26\u5408\u4EE5\u4E0B\u89C4\u8303\u7684\u63D0\u4EA4\u4FE1\u606F\uFF1A\n- \u683C\u5F0F\uFF1A<type>(<scope>): <description>\n- type\uFF1Afeat/fix/docs/style/refactor/test/chore \u7B49\n- scope\uFF1A\u53EF\u9009\uFF0C\u5F71\u54CD\u7684\u6A21\u5757\u6216\u529F\u80FD\n- description\uFF1A\u7B80\u6D01\u63CF\u8FF0\u53D8\u66F4\u5185\u5BB9\n\n\u8981\u6C42\uFF1A\n1. \u53EA\u8FD4\u56DE\u63D0\u4EA4\u4FE1\u606F\uFF0C\u4E0D\u8981\u5176\u4ED6\u8BF4\u660E\u6587\u5B57\n2. \u63D0\u4EA4\u4FE1\u606F\u5E94\u8BE5\u7B80\u6D01\u660E\u4E86\uFF0C\u4E0D\u8D85\u8FC7 80 \u4E2A\u5B57\u7B26\n3. \u7528\u4E2D\u6587\u63CF\u8FF0\uFF0C\u9664\u975E\u662F\u82F1\u6587\u9879\u76EE\n4. \u5982\u679C\u6709\u591A\u4E2A\u4E0D\u76F8\u5173\u7684\u53D8\u66F4\uFF0C\u9009\u62E9\u6700\u4E3B\u8981\u7684\u53D8\u66F4\u4F5C\u4E3A\u63D0\u4EA4\u4FE1\u606F\u4E3B\u9898\n\n\u63D0\u4EA4\u4FE1\u606F\uFF1A`;\n\n      return prompt;\n    } catch (error) {\n      return `\u8BF7\u4E3A\u4EE5\u4E0B Git \u53D8\u66F4\u751F\u6210\u5408\u9002\u7684\u63D0\u4EA4\u4FE1\u606F\u3002\u7531\u4E8E\u65E0\u6CD5\u83B7\u53D6\u8BE6\u7EC6\u7684\u53D8\u66F4\u4FE1\u606F\uFF08${(error as Error).message}\uFF09\uFF0C\u8BF7\u751F\u6210\u4E00\u4E2A\u901A\u7528\u7684\u63D0\u4EA4\u4FE1\u606F\u3002\u8981\u6C42\u4F7F\u7528 Conventional Commits \u683C\u5F0F\uFF1A<type>: <description>`;\n    }\n  }\n\n  protected getConfirmationOptions(params: Record<string, any>) {\n    const { dryRun, autoAdd } = params;\n\n    return {\n      skipConfirmation: params.skipConfirmation || dryRun,\n      riskLevel: autoAdd ? RiskLevel.MODERATE : RiskLevel.SAFE,\n      confirmMessage: dryRun ? '\u662F\u5426\u9884\u89C8\u63D0\u4EA4\u4FE1\u606F\uFF1F' : '\u662F\u5426\u6267\u884C\u667A\u80FD\u63D0\u4EA4\uFF1F',\n      showPreview: true,\n    };\n  }\n\n  protected async preCheckCommand(\n    command: string,\n    workingDirectory: string,\n    params: Record<string, any>\n  ) {\n    const { autoAdd, llmAnalysis } = params;\n\n    try {\n      // 1. \u68C0\u67E5\u662F\u5426\u662FGit\u4ED3\u5E93\n      await execAsync('git rev-parse --git-dir', { cwd: workingDirectory });\n    } catch {\n      return {\n        valid: false,\n        message: '\u5F53\u524D\u76EE\u5F55\u4E0D\u662FGit\u4ED3\u5E93',\n        suggestions: [\n          {\n            command: 'git init',\n            description: '\u521D\u59CB\u5316Git\u4ED3\u5E93',\n            riskLevel: RiskLevel.MODERATE,\n          },\n        ],\n      };\n    }\n\n    // 2. \u68C0\u67E5\u662F\u5426\u6709\u53D8\u66F4\n    const { stdout: statusOutput } = await execAsync('git status --porcelain', {\n      cwd: workingDirectory,\n    });\n\n    if (!statusOutput.trim() && !autoAdd) {\n      return {\n        valid: false,\n        message: '\u6CA1\u6709\u53D8\u66F4\u9700\u8981\u63D0\u4EA4',\n        suggestions: [\n          {\n            command: 'git status',\n            description: '\u67E5\u770B\u4ED3\u5E93\u72B6\u6001',\n            riskLevel: RiskLevel.SAFE,\n          },\n        ],\n      };\n    }\n\n    // 3. \u5982\u679C\u6709LLM\u5206\u6790\u7ED3\u679C\uFF0C\u8FDB\u884C\u989D\u5916\u9A8C\u8BC1\n    if (llmAnalysis) {\n      // \u5DF2\u6709\u5206\u6790\u7ED3\u679C\uFF0C\u53EF\u4EE5\u7EE7\u7EED\n      return { valid: true };\n    }\n\n    // \u6CA1\u6709LLM\u5206\u6790\u7ED3\u679C\u65F6\uFF0C\u4E5F\u5141\u8BB8\u901A\u8FC7\uFF0C\u56E0\u4E3AbuildCommand\u4F1A\u5904\u7406\u8FD9\u79CD\u60C5\u51B5\n    return { valid: true };\n  }\n\n  protected getExecutionDescription(params: Record<string, any>): string {\n    const { autoAdd, dryRun, llmAnalysis } = params;\n\n    if (dryRun) {\n      return `\u9884\u89C8\u6A21\u5F0F - \u751F\u6210\u63D0\u4EA4\u4FE1\u606F: \"${llmAnalysis}\"`;\n    }\n\n    return autoAdd ? `\u81EA\u52A8\u6DFB\u52A0\u6587\u4EF6\u5E76\u63D0\u4EA4: \"${llmAnalysis}\"` : `\u63D0\u4EA4\u6682\u5B58\u533A\u53D8\u66F4: \"${llmAnalysis}\"`;\n  }\n\n  protected async getExecutionPreview(\n    command: string,\n    workingDirectory: string,\n    params: Record<string, any>\n  ): Promise<string> {\n    const { autoAdd } = params;\n\n    try {\n      // \u5982\u679C\u9700\u8981\u81EA\u52A8\u6DFB\u52A0\uFF0C\u5148\u6267\u884C git add\n      if (autoAdd) {\n        const { stdout: statusOutput } = await execAsync('git status --porcelain', {\n          cwd: workingDirectory,\n        });\n\n        if (statusOutput.trim()) {\n          await execAsync('git add -A', { cwd: workingDirectory });\n        }\n      }\n\n      // \u83B7\u53D6\u6682\u5B58\u533A\u6587\u4EF6\u5217\u8868\n      const { stdout: diffNameOnly } = await execAsync('git diff --cached --name-only', {\n        cwd: workingDirectory,\n      });\n\n      const { stdout: diffStat } = await execAsync('git diff --cached --stat', {\n        cwd: workingDirectory,\n      });\n\n      const changedFiles = diffNameOnly\n        .trim()\n        .split('\\n')\n        .filter(f => f.trim());\n\n      if (changedFiles.length === 0) {\n        return '\u6682\u5B58\u533A\u6CA1\u6709\u53D8\u66F4\u6587\u4EF6';\n      }\n\n      return `\u5C06\u8981\u63D0\u4EA4\u7684\u6587\u4EF6:\\n${changedFiles.map(f => `  - ${f}`).join('\\n')}\\n\\n\u53D8\u66F4\u7EDF\u8BA1:\\n${diffStat}`;\n    } catch (error) {\n      return `\u9884\u89C8\u4FE1\u606F\u83B7\u53D6\u5931\u8D25: ${(error as Error).message}`;\n    }\n  }\n\n  /**\n   * \u91CD\u5199\u6267\u884C\u65B9\u6CD5\uFF0C\u5904\u7406\u7279\u6B8A\u7684 need_llm_analysis \u9519\u8BEF\n   */\n  async execute(params: Record<string, any>): Promise<any> {\n    const { llmAnalysis, path = '.' } = params;\n\n    // \u5982\u679C\u6CA1\u6709LLM\u5206\u6790\u7ED3\u679C\uFF0C\u8FD4\u56DE\u9700\u8981\u5206\u6790\u7684\u4FE1\u53F7\n    if (!llmAnalysis) {\n      try {\n        const analysisPrompt = await this.generateGitAnalysisPrompt(path);\n        return {\n          success: false,\n          error: 'need_llm_analysis',\n          data: {\n            needsLLMAnalysis: true,\n            analysisPrompt,\n          },\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: `\u751F\u6210\u5206\u6790\u63D0\u793A\u5931\u8D25: ${(error as Error).message}`,\n        };\n      }\n    }\n\n    // \u6709LLM\u5206\u6790\u7ED3\u679C\uFF0C\u7EE7\u7EED\u6267\u884C\u6B63\u5E38\u6D41\u7A0B\n    try {\n      const result = await super.execute(params);\n      return result;\n    } catch (error: any) {\n      return {\n        success: false,\n        error: `Git smart commit failed: ${(error as Error).message}`,\n      };\n    }\n  }\n\n  protected async executeCommand(\n    command: string,\n    workingDirectory: string,\n    options: any,\n    params: Record<string, any>\n  ) {\n    const { autoAdd, dryRun, llmAnalysis } = params;\n\n    try {\n      // \u5982\u679C\u9700\u8981\u81EA\u52A8\u6DFB\u52A0\u6587\u4EF6\n      if (autoAdd && !dryRun) {\n        const { stdout: statusOutput } = await execAsync('git status --porcelain', {\n          cwd: workingDirectory,\n        });\n\n        if (statusOutput.trim()) {\n          await execAsync('git add -A', { cwd: workingDirectory });\n          console.log('\uD83D\uDCE6 \u5DF2\u81EA\u52A8\u6DFB\u52A0\u6240\u6709\u53D8\u66F4\u6587\u4EF6\u5230\u6682\u5B58\u533A');\n        }\n      }\n\n      // \u83B7\u53D6\u53D8\u66F4\u4FE1\u606F\u7528\u4E8E\u8FD4\u56DE\n      const { stdout: diffNameOnly } = await execAsync('git diff --cached --name-only', {\n        cwd: workingDirectory,\n      });\n\n      const { stdout: diffStat } = await execAsync('git diff --cached --stat', {\n        cwd: workingDirectory,\n      });\n\n      const changedFiles = diffNameOnly\n        .trim()\n        .split('\\n')\n        .filter(f => f.trim());\n\n      // \u5982\u679C\u662F\u5E72\u8FD0\u884C\u6A21\u5F0F\n      if (dryRun) {\n        return {\n          success: true,\n          command,\n          workingDirectory,\n          data: {\n            commitMessage: llmAnalysis,\n            changedFiles,\n            diffStat: diffStat.trim(),\n            previewMode: true,\n            wouldCommit: true,\n          },\n        };\n      }\n\n      // \u68C0\u67E5\u6682\u5B58\u533A\u662F\u5426\u6709\u53D8\u66F4\n      if (changedFiles.length === 0) {\n        return {\n          success: false,\n          error: '\u6682\u5B58\u533A\u6CA1\u6709\u53D8\u66F4\uFF0C\u8BF7\u5148\u4F7F\u7528git add\u6DFB\u52A0\u6587\u4EF6',\n        };\n      }\n\n      // \u6267\u884C\u5B9E\u9645\u7684commit\u547D\u4EE4\n      const result = await super.executeCommand(command, workingDirectory, options, params);\n\n      if (result.success) {\n        // \u89E3\u6790\u63D0\u4EA4\u7ED3\u679C\n        const output = result.stdout || '';\n        const lines = output.split('\\n');\n\n        let commitHash = '';\n        let commitSummary = '';\n\n        for (const line of lines) {\n          if (line.includes('[') && line.includes(']')) {\n            const match = line.match(/\\[([^\\]]+)\\]\\s*(.+)/);\n            if (match) {\n              commitHash = match[1];\n              commitSummary = match[2];\n            }\n          }\n        }\n\n        // \u63D0\u53D6\u6587\u4EF6\u7EDF\u8BA1\n        let filesChanged = 0;\n        let insertions = 0;\n        let deletions = 0;\n\n        const statsLine = lines.find(\n          line => line.includes('file') && (line.includes('insertion') || line.includes('deletion'))\n        );\n\n        if (statsLine) {\n          const fileMatch = statsLine.match(/(\\d+)\\s+file/);\n          if (fileMatch) filesChanged = parseInt(fileMatch[1]);\n\n          const insertMatch = statsLine.match(/(\\d+)\\s+insertion/);\n          if (insertMatch) insertions = parseInt(insertMatch[1]);\n\n          const deleteMatch = statsLine.match(/(\\d+)\\s+deletion/);\n          if (deleteMatch) deletions = parseInt(deleteMatch[1]);\n        }\n\n        result.data = {\n          commitMessage: llmAnalysis,\n          commitHash,\n          commitSummary,\n          changedFiles,\n          statistics: {\n            filesChanged,\n            insertions,\n            deletions,\n          },\n          smartGenerated: true,\n          rawOutput: output,\n        };\n      }\n\n      return result;\n    } catch (error) {\n      return {\n        success: false,\n        error: `Git smart commit failed: ${(error as Error).message}`,\n        command,\n        workingDirectory,\n      };\n    }\n  }\n}\n\n// \u5BFC\u51FA\u5DE5\u5177\u5B9E\u4F8B\nexport const gitSmartCommit = new GitSmartCommitTool();\n", "import { exec } from 'child_process';\nimport { promisify } from 'util';\nimport {\n  CommandPreCheckResult,\n  ConfirmableToolBase,\n  ConfirmationOptions,\n  RiskLevel,\n} from '../../base/ConfirmableToolBase.js';\nimport {\n  ErrorFactory,\n  globalErrorMonitor\n} from '../../../error/index.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * Git Status \u5DE5\u5177 (\u57FA\u4E8E ConfirmableToolBase)\n * \u67E5\u770BGit\u4ED3\u5E93\u7684\u5F53\u524D\u72B6\u6001\n */\nclass GitStatusTool extends ConfirmableToolBase {\n  readonly name = 'git_status';\n  readonly description = '\u67E5\u770BGit\u4ED3\u5E93\u7684\u5F53\u524D\u72B6\u6001';\n  readonly category = 'git';\n  readonly tags = ['git', 'status', 'repository'];\n\n  readonly parameters = {\n    path: {\n      type: 'string' as const,\n      required: false,\n      description: '\u4ED3\u5E93\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55',\n      default: '.',\n    },\n    porcelain: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u4F7F\u7528\u673A\u5668\u53EF\u8BFB\u7684\u683C\u5F0F',\n      default: false,\n    },\n    short: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u663E\u793A\u7B80\u77ED\u683C\u5F0F',\n      default: false,\n    },\n    skipConfirmation: {\n      type: 'boolean' as const,\n      required: false,\n      description: '\u8DF3\u8FC7\u7528\u6237\u786E\u8BA4\u76F4\u63A5\u6267\u884C',\n      default: true, // \u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\uFF0C\u56E0\u4E3A\u662F\u53EA\u8BFB\u64CD\u4F5C\n    },\n  };\n\n  /**\n   * \u6784\u5EFA Git status \u547D\u4EE4\n   */\n  protected async buildCommand(params: Record<string, any>): Promise<string> {\n    const { porcelain, short } = params;\n\n    let command = 'git status';\n\n    if (porcelain) {\n      command += ' --porcelain';\n    } else if (short) {\n      command += ' --short';\n    }\n\n    return command;\n  }\n\n  /**\n   * \u83B7\u53D6\u786E\u8BA4\u9009\u9879 - \u53EA\u8BFB\u64CD\u4F5C\u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\n   */\n  protected getConfirmationOptions(params: Record<string, any>): ConfirmationOptions {\n    return {\n      skipConfirmation: true, // \u53EA\u8BFB\u64CD\u4F5C\uFF0C\u9ED8\u8BA4\u8DF3\u8FC7\u786E\u8BA4\n      riskLevel: RiskLevel.SAFE,\n      showPreview: false,\n      timeout: 10000,\n    };\n  }\n\n  /**\n   * \u9884\u68C0\u67E5\u547D\u4EE4\n   */\n  protected async preCheckCommand(\n    _command: string,\n    workingDirectory: string,\n    _params: Record<string, any>\n  ): Promise<CommandPreCheckResult> {\n    try {\n      // \u68C0\u67E5\u662F\u5426\u5728 Git \u4ED3\u5E93\u4E2D\n      await execAsync('git rev-parse --git-dir', { cwd: workingDirectory });\n\n      return { valid: true };\n    } catch (error: any) {\n      if (error.message.includes('not a git repository')) {\n        return {\n          valid: false,\n          message: '\u5F53\u524D\u76EE\u5F55\u4E0D\u662F Git \u4ED3\u5E93',\n          suggestions: [\n            {\n              command: 'git init',\n              description: '\u521D\u59CB\u5316 Git \u4ED3\u5E93',\n              riskLevel: RiskLevel.SAFE,\n            },\n          ],\n        };\n      }\n\n      const gitError = ErrorFactory.createNotFoundError(\n        'Git\u4ED3\u5E93',\n        workingDirectory,\n        {\n          context: { workingDirectory, error: error.message },\n          retryable: false,\n          suggestions: [\n            '\u68C0\u67E5\u5F53\u524D\u76EE\u5F55\u662F\u5426\u4E3AGit\u4ED3\u5E93',\n            '\u8FD0\u884Cgit init\u521D\u59CB\u5316\u4ED3\u5E93',\n            '\u786E\u8BA4Git\u5DF2\u6B63\u786E\u5B89\u88C5'\n          ]\n        }\n      );\n      \n      globalErrorMonitor.monitor(gitError);\n      \n      return {\n        valid: false,\n        message: `Git \u9884\u68C0\u67E5\u5931\u8D25: ${error.message}`,\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6267\u884C\u63CF\u8FF0\n   */\n  protected getExecutionDescription(params: Record<string, any>): string {\n    const { porcelain, short } = params;\n\n    if (porcelain) {\n      return '\u83B7\u53D6Git\u72B6\u6001\uFF08\u673A\u5668\u53EF\u8BFB\u683C\u5F0F\uFF09';\n    } else if (short) {\n      return '\u83B7\u53D6Git\u72B6\u6001\uFF08\u7B80\u77ED\u683C\u5F0F\uFF09';\n    } else {\n      return '\u83B7\u53D6Git\u72B6\u6001\uFF08\u6807\u51C6\u683C\u5F0F\uFF09';\n    }\n  }\n\n  /**\n   * \u540E\u5904\u7406\u7ED3\u679C\n   */\n  protected async postProcessResult(\n    result: { stdout: string; stderr: string },\n    params: Record<string, any>\n  ): Promise<any> {\n    const output = result.stdout.trim();\n    const lines = output.split('\\n').filter(line => line.trim());\n\n    const processedResult: any = {\n      rawOutput: output,\n    };\n\n    if (params.porcelain || params.short) {\n      // \u89E3\u6790\u7B80\u77ED\u683C\u5F0F\n      const files = lines.map(line => {\n        const status = line.substring(0, 2);\n        const filename = line.substring(3);\n        return {\n          status,\n          filename,\n          staged: status[0] !== ' ' && status[0] !== '?',\n          modified: status[1] !== ' ',\n          untracked: status === '??',\n        };\n      });\n\n      processedResult.files = files;\n      processedResult.summary = {\n        total: files.length,\n        staged: files.filter(f => f.staged).length,\n        modified: files.filter(f => f.modified).length,\n        untracked: files.filter(f => f.untracked).length,\n      };\n    } else {\n      // \u6807\u51C6\u683C\u5F0F\u8F93\u51FA\n      processedResult.output = output;\n\n      // \u7B80\u5355\u89E3\u6790\u72B6\u6001\u4FE1\u606F\n      const hasChanges =\n        output.includes('Changes to be committed') ||\n        output.includes('Changes not staged') ||\n        output.includes('Untracked files');\n\n      processedResult.hasChanges = hasChanges;\n      processedResult.isClean = output.includes('nothing to commit, working tree clean');\n    }\n\n    return processedResult;\n  }\n}\n\n// \u5BFC\u51FA\u5DE5\u5177\u5B9E\u4F8B\nexport const gitStatus = new GitStatusTool();\n", "import { promises as fs } from 'fs';\nimport { extname, resolve } from 'path';\nimport type { ToolDefinition } from '../../types.js';\n\n/**\n * \u667A\u80FD\u4EE3\u7801\u5BA1\u67E5\u5DE5\u5177\n * \u4F7F\u7528LLM\u5206\u6790\u4EE3\u7801\u8D28\u91CF\u3001\u6027\u80FD\u3001\u5B89\u5168\u6027\u7B49\u65B9\u9762\n */\nexport const smartCodeReview: ToolDefinition = {\n  name: 'smart_code_review',\n  description: '\u667A\u80FD\u5206\u6790\u4EE3\u7801\u8D28\u91CF\uFF0C\u4F7F\u7528LLM\u63D0\u4F9B\u8BE6\u7EC6\u7684\u5BA1\u67E5\u62A5\u544A\u548C\u6539\u8FDB\u5EFA\u8BAE',\n  category: 'smart',\n  version: '1.0.0',\n  author: 'Agent CLI',\n  tags: ['smart', 'code', 'review', 'llm', 'analysis'],\n\n  parameters: {\n    path: {\n      type: 'string',\n      required: true,\n      description: '\u8981\u5BA1\u67E5\u7684\u4EE3\u7801\u6587\u4EF6\u8DEF\u5F84',\n    },\n    language: {\n      type: 'string',\n      required: false,\n      description: '\u7F16\u7A0B\u8BED\u8A00\uFF08\u81EA\u52A8\u68C0\u6D4B\u6216\u624B\u52A8\u6307\u5B9A\uFF09',\n      default: 'auto',\n    },\n    reviewType: {\n      type: 'string',\n      required: false,\n      description: '\u5BA1\u67E5\u7C7B\u578B',\n      enum: ['full', 'security', 'performance', 'style', 'maintainability'],\n      default: 'full',\n    },\n    maxFileSize: {\n      type: 'number',\n      required: false,\n      description: '\u6700\u5927\u6587\u4EF6\u5927\u5C0F\uFF08\u5B57\u8282\uFF09',\n      default: 100 * 1024, // 100KB\n    },\n    llmAnalysis: {\n      type: 'string',\n      required: false,\n      description: 'LLM\u5206\u6790\u7ED3\u679C\uFF08\u7531Agent\u81EA\u52A8\u586B\u5145\uFF09',\n      default: '',\n    },\n  },\n\n  async execute(parameters) {\n    const {\n      path,\n      language = 'auto',\n      reviewType = 'full',\n      maxFileSize = 100 * 1024,\n      llmAnalysis = '',\n    } = parameters;\n\n    try {\n      // 1. \u8BFB\u53D6\u4EE3\u7801\u6587\u4EF6\n      const resolvedPath = resolve(path);\n\n      // \u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\n      const stats = await fs.stat(resolvedPath);\n      if (!stats.isFile()) {\n        throw new Error('\u6307\u5B9A\u8DEF\u5F84\u4E0D\u662F\u6587\u4EF6');\n      }\n\n      // \u68C0\u67E5\u6587\u4EF6\u5927\u5C0F\n      if (stats.size > maxFileSize) {\n        throw new Error(`\u6587\u4EF6\u592A\u5927 (${stats.size} \u5B57\u8282)\uFF0C\u8D85\u8FC7\u9650\u5236 (${maxFileSize} \u5B57\u8282)`);\n      }\n\n      // \u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\n      const content = await fs.readFile(resolvedPath, 'utf8');\n\n      // 2. \u81EA\u52A8\u68C0\u6D4B\u7F16\u7A0B\u8BED\u8A00\n      const detectedLanguage = language === 'auto' ? detectLanguage(resolvedPath) : language;\n\n      // 3. \u5206\u6790\u4EE3\u7801\u57FA\u672C\u4FE1\u606F\n      const codeStats = analyzeCodeStats(content);\n\n      // 4. \u6784\u9020LLM\u5206\u6790\u63D0\u793A\n      const analysisPrompt = buildAnalysisPrompt(content, detectedLanguage, reviewType, codeStats);\n\n      // 5. \u5982\u679C\u6CA1\u6709LLM\u5206\u6790\u7ED3\u679C\uFF0C\u8FD4\u56DE\u9700\u8981\u5206\u6790\u7684\u4FE1\u53F7\n      if (!llmAnalysis) {\n        return {\n          success: false,\n          error: 'need_llm_analysis',\n          data: {\n            needsLLMAnalysis: true,\n            analysisPrompt,\n            fileInfo: {\n              path: resolvedPath,\n              language: detectedLanguage,\n              size: stats.size,\n              lines: codeStats.totalLines,\n              reviewType,\n            },\n          },\n        };\n      }\n\n      // 6. \u89E3\u6790LLM\u5206\u6790\u7ED3\u679C\n      const reviewReport = parseLLMAnalysis(llmAnalysis);\n\n      // 7. \u751F\u6210\u6700\u7EC8\u62A5\u544A\n      const finalReport = {\n        fileInfo: {\n          path: resolvedPath,\n          language: detectedLanguage,\n          size: stats.size,\n          modified: stats.mtime,\n          reviewType,\n          reviewedAt: new Date().toISOString(),\n        },\n        codeStats,\n        analysis: reviewReport,\n        smartGenerated: true,\n      };\n\n      return {\n        success: true,\n        data: finalReport,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Smart code review failed: ${(error as Error).message}`,\n        data: null,\n      };\n    }\n  },\n};\n\n/**\n * \u68C0\u6D4B\u7F16\u7A0B\u8BED\u8A00\n */\nfunction detectLanguage(filePath: string): string {\n  const ext = extname(filePath).toLowerCase();\n  const languageMap: Record<string, string> = {\n    '.js': 'javascript',\n    '.mjs': 'javascript',\n    '.jsx': 'javascript',\n    '.ts': 'typescript',\n    '.tsx': 'typescript',\n    '.py': 'python',\n    '.java': 'java',\n    '.c': 'c',\n    '.cpp': 'cpp',\n    '.cc': 'cpp',\n    '.cxx': 'cpp',\n    '.h': 'c',\n    '.hpp': 'cpp',\n    '.cs': 'csharp',\n    '.go': 'go',\n    '.rs': 'rust',\n    '.php': 'php',\n    '.rb': 'ruby',\n    '.swift': 'swift',\n    '.kt': 'kotlin',\n    '.scala': 'scala',\n    '.dart': 'dart',\n    '.sh': 'bash',\n    '.sql': 'sql',\n    '.html': 'html',\n    '.css': 'css',\n    '.json': 'json',\n    '.yaml': 'yaml',\n    '.yml': 'yaml',\n    '.xml': 'xml',\n  };\n\n  return languageMap[ext] || 'unknown';\n}\n\n/**\n * \u5206\u6790\u4EE3\u7801\u7EDF\u8BA1\u4FE1\u606F\n */\nfunction analyzeCodeStats(content: string) {\n  const lines = content.split('\\n');\n  const totalLines = lines.length;\n\n  let codeLines = 0;\n  let commentLines = 0;\n  let blankLines = 0;\n\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed) {\n      blankLines++;\n    } else if (\n      trimmed.startsWith('//') ||\n      trimmed.startsWith('/*') ||\n      trimmed.startsWith('#') ||\n      trimmed.startsWith('<!--')\n    ) {\n      commentLines++;\n    } else {\n      codeLines++;\n    }\n  }\n\n  return {\n    totalLines,\n    codeLines,\n    commentLines,\n    blankLines,\n    commentRatio: commentLines / totalLines,\n    avgLineLength: content.length / totalLines,\n  };\n}\n\n/**\n * \u6784\u9020LLM\u5206\u6790\u63D0\u793A\n */\nfunction buildAnalysisPrompt(\n  content: string,\n  language: string,\n  reviewType: string,\n  stats: any\n): string {\n  const reviewFocus = getReviewFocus(reviewType);\n\n  // \u5982\u679C\u6587\u4EF6\u592A\u957F\uFF0C\u622A\u53D6\u524D\u9762\u90E8\u5206\n  const truncatedContent =\n    content.length > 3000\n      ? content.substring(0, 3000) + '\\n... (\u4EE3\u7801\u5DF2\u622A\u53D6\uFF0C\u5171' + stats.totalLines + '\u884C)'\n      : content;\n\n  return `\u8BF7\u5BF9\u4EE5\u4E0B${language}\u4EE3\u7801\u8FDB\u884C\u4E13\u4E1A\u7684\u4EE3\u7801\u5BA1\u67E5\uFF0C\u91CD\u70B9\u5173\u6CE8${reviewFocus}\u3002\n\n\u4EE3\u7801\u7EDF\u8BA1\u4FE1\u606F:\n- \u603B\u884C\u6570: ${stats.totalLines}\n- \u4EE3\u7801\u884C\u6570: ${stats.codeLines}\n- \u6CE8\u91CA\u884C\u6570: ${stats.commentLines}\n- \u6CE8\u91CA\u7387: ${(stats.commentRatio * 100).toFixed(1)}%\n\n\u4EE3\u7801\u5185\u5BB9:\n\\`\\`\\`${language}\n${truncatedContent}\n\\`\\`\\`\n\n\u8BF7\u4ECE\u4EE5\u4E0B\u65B9\u9762\u8FDB\u884C\u5206\u6790\u5E76\u63D0\u4F9BJSON\u683C\u5F0F\u7684\u62A5\u544A\uFF1A\n\n{\n  \"overallScore\": \u8BC4\u5206(1-10),\n  \"summary\": \"\u603B\u4F53\u8BC4\u4EF7\u548C\u4E3B\u8981\u95EE\u9898\u6982\u8FF0\",\n  \"issues\": [\n    {\n      \"type\": \"\u95EE\u9898\u7C7B\u578B(security/performance/style/maintainability/bug)\",\n      \"severity\": \"\u4E25\u91CD\u7EA7\u522B(high/medium/low)\",\n      \"description\": \"\u95EE\u9898\u63CF\u8FF0\",\n      \"suggestion\": \"\u6539\u8FDB\u5EFA\u8BAE\",\n      \"lineRange\": \"\u76F8\u5173\u884C\u6570\u8303\u56F4(\u5982\u679C\u9002\u7528)\"\n    }\n  ],\n  \"strengths\": [\"\u4EE3\u7801\u4F18\u70B9\u5217\u8868\"],\n  \"recommendations\": [\"\u5177\u4F53\u6539\u8FDB\u5EFA\u8BAE\u5217\u8868\"],\n  \"securityConcerns\": [\"\u5B89\u5168\u95EE\u9898\u5217\u8868\"],\n  \"performanceNotes\": [\"\u6027\u80FD\u76F8\u5173\u5EFA\u8BAE\"],\n  \"maintainabilityScore\": \u53EF\u7EF4\u62A4\u6027\u8BC4\u5206(1-10)\n}\n\n\u8BF7\u786E\u4FDD\u5206\u6790\u8BE6\u7EC6\u3001\u51C6\u786E\uFF0C\u5E76\u63D0\u4F9B\u53EF\u64CD\u4F5C\u7684\u6539\u8FDB\u5EFA\u8BAE\u3002`;\n}\n\n/**\n * \u83B7\u53D6\u5BA1\u67E5\u91CD\u70B9\n */\nfunction getReviewFocus(reviewType: string): string {\n  const focusMap: Record<string, string> = {\n    full: '\u4EE3\u7801\u8D28\u91CF\u3001\u6027\u80FD\u3001\u5B89\u5168\u6027\u548C\u53EF\u7EF4\u62A4\u6027',\n    security: '\u5B89\u5168\u6F0F\u6D1E\u548C\u6F5C\u5728\u98CE\u9669',\n    performance: '\u6027\u80FD\u4F18\u5316\u548C\u6267\u884C\u6548\u7387',\n    style: '\u4EE3\u7801\u98CE\u683C\u548C\u89C4\u8303\u6027',\n    maintainability: '\u53EF\u7EF4\u62A4\u6027\u548C\u4EE3\u7801\u7ED3\u6784',\n  };\n\n  return focusMap[reviewType] || '\u4EE3\u7801\u8D28\u91CF';\n}\n\n/**\n * \u89E3\u6790LLM\u5206\u6790\u7ED3\u679C\n */\nfunction parseLLMAnalysis(llmAnalysis: string) {\n  try {\n    // \u6E05\u7406\u53EF\u80FD\u7684markdown\u683C\u5F0F\n    const cleanAnalysis = llmAnalysis.replace(/```json\\n?|\\n?```/g, '').trim();\n\n    const parsed = JSON.parse(cleanAnalysis);\n\n    // \u9A8C\u8BC1\u5FC5\u8981\u5B57\u6BB5\n    return {\n      overallScore: parsed.overallScore || 0,\n      summary: parsed.summary || '\u5206\u6790\u7ED3\u679C\u89E3\u6790\u5931\u8D25',\n      issues: parsed.issues || [],\n      strengths: parsed.strengths || [],\n      recommendations: parsed.recommendations || [],\n      securityConcerns: parsed.securityConcerns || [],\n      performanceNotes: parsed.performanceNotes || [],\n      maintainabilityScore: parsed.maintainabilityScore || 0,\n    };\n  } catch (error) {\n    // \u5982\u679CJSON\u89E3\u6790\u5931\u8D25\uFF0C\u8FD4\u56DE\u539F\u59CB\u6587\u672C\u5206\u6790\n    return {\n      overallScore: 0,\n      summary: '\u5206\u6790\u7ED3\u679C\u683C\u5F0F\u9519\u8BEF\uFF0C\u4F46\u5305\u542B\u4EE5\u4E0B\u5185\u5BB9',\n      rawAnalysis: llmAnalysis,\n      issues: [],\n      strengths: [],\n      recommendations: [],\n      securityConcerns: [],\n      performanceNotes: [],\n      maintainabilityScore: 0,\n    };\n  }\n}\n", "import { promises as fs } from 'fs';\nimport { dirname, extname, resolve } from 'path';\nimport type { ToolDefinition } from '../../types.js';\n\n/**\n * \u667A\u80FD\u6587\u6863\u751F\u6210\u5DE5\u5177\n * \u5206\u6790\u4EE3\u7801\u6587\u4EF6\u5E76\u4F7F\u7528LLM\u751F\u6210\u76F8\u5E94\u7684\u6587\u6863\n */\nexport const smartDocGenerator: ToolDefinition = {\n  name: 'smart_doc_generator',\n  description: '\u667A\u80FD\u5206\u6790\u4EE3\u7801\u6587\u4EF6\uFF0C\u4F7F\u7528LLM\u751F\u6210API\u6587\u6863\u3001README\u6216\u6280\u672F\u8BF4\u660E',\n  category: 'smart',\n  version: '1.0.0',\n  author: 'Agent CLI',\n  tags: ['smart', 'documentation', 'api', 'readme', 'llm'],\n\n  parameters: {\n    sourcePath: {\n      type: 'string',\n      required: true,\n      description: '\u8981\u5206\u6790\u7684\u6E90\u4EE3\u7801\u6587\u4EF6\u6216\u76EE\u5F55\u8DEF\u5F84',\n    },\n    outputPath: {\n      type: 'string',\n      required: false,\n      description: '\u8F93\u51FA\u6587\u6863\u8DEF\u5F84\uFF08\u9ED8\u8BA4\u4E3A\u6E90\u6587\u4EF6\u540C\u7EA7\u76EE\u5F55\u4E0B\u7684README.md\uFF09',\n    },\n    docType: {\n      type: 'string',\n      required: false,\n      description: '\u6587\u6863\u7C7B\u578B',\n      enum: ['api', 'readme', 'guide', 'technical', 'auto'],\n      default: 'auto',\n    },\n    language: {\n      type: 'string',\n      required: false,\n      description: '\u7F16\u7A0B\u8BED\u8A00\uFF08\u81EA\u52A8\u68C0\u6D4B\u6216\u624B\u52A8\u6307\u5B9A\uFF09',\n      default: 'auto',\n    },\n    includeExamples: {\n      type: 'boolean',\n      required: false,\n      description: '\u662F\u5426\u5305\u542B\u4F7F\u7528\u793A\u4F8B',\n      default: true,\n    },\n    maxFileSize: {\n      type: 'number',\n      required: false,\n      description: '\u5355\u4E2A\u6587\u4EF6\u6700\u5927\u5927\u5C0F\uFF08\u5B57\u8282\uFF09',\n      default: 200 * 1024, // 200KB\n    },\n    overwrite: {\n      type: 'boolean',\n      required: false,\n      description: '\u662F\u5426\u8986\u76D6\u5DF2\u5B58\u5728\u7684\u6587\u6863\u6587\u4EF6',\n      default: false,\n    },\n    llmAnalysis: {\n      type: 'string',\n      required: false,\n      description: 'LLM\u5206\u6790\u7ED3\u679C\uFF08\u7531Agent\u81EA\u52A8\u586B\u5145\uFF09',\n      default: '',\n    },\n  },\n\n  async execute(parameters) {\n    const {\n      sourcePath,\n      outputPath,\n      docType = 'auto',\n      language = 'auto',\n      includeExamples = true,\n      maxFileSize = 200 * 1024,\n      overwrite = false,\n      llmAnalysis = '',\n    } = parameters;\n\n    try {\n      // 1. \u5206\u6790\u6E90\u8DEF\u5F84\n      const resolvedSourcePath = resolve(sourcePath);\n      const sourceStats = await fs.stat(resolvedSourcePath);\n\n      let codeFiles: Array<{ path: string; content: string; language: string }> = [];\n\n      if (sourceStats.isFile()) {\n        // \u5355\u4E2A\u6587\u4EF6\n        if (sourceStats.size > maxFileSize) {\n          throw new Error(`\u6587\u4EF6\u592A\u5927 (${sourceStats.size} \u5B57\u8282)\uFF0C\u8D85\u8FC7\u9650\u5236 (${maxFileSize} \u5B57\u8282)`);\n        }\n\n        const content = await fs.readFile(resolvedSourcePath, 'utf8');\n        const detectedLanguage =\n          language === 'auto' ? detectLanguage(resolvedSourcePath) : language;\n\n        codeFiles.push({\n          path: resolvedSourcePath,\n          content,\n          language: detectedLanguage,\n        });\n      } else if (sourceStats.isDirectory()) {\n        // \u76EE\u5F55 - \u626B\u63CF\u4EE3\u7801\u6587\u4EF6\n        codeFiles = await scanCodeFiles(resolvedSourcePath, maxFileSize);\n      } else {\n        throw new Error('\u6E90\u8DEF\u5F84\u5FC5\u987B\u662F\u6587\u4EF6\u6216\u76EE\u5F55');\n      }\n\n      if (codeFiles.length === 0) {\n        throw new Error('\u672A\u627E\u5230\u53EF\u5206\u6790\u7684\u4EE3\u7801\u6587\u4EF6');\n      }\n\n      // 2. \u5206\u6790\u4EE3\u7801\u7ED3\u6784\n      const codeAnalysis = analyzeCodeStructure(codeFiles);\n\n      // 3. \u786E\u5B9A\u6587\u6863\u7C7B\u578B\u548C\u8F93\u51FA\u8DEF\u5F84\n      const finalDocType = docType === 'auto' ? detectDocType(codeAnalysis) : docType;\n      const finalOutputPath = outputPath || generateOutputPath(resolvedSourcePath, finalDocType);\n\n      // 4. \u68C0\u67E5\u8F93\u51FA\u6587\u4EF6\u662F\u5426\u5B58\u5728\n      if (!overwrite) {\n        try {\n          await fs.access(finalOutputPath);\n          throw new Error(`\u8F93\u51FA\u6587\u4EF6\u5DF2\u5B58\u5728: ${finalOutputPath}\uFF0C\u4F7F\u7528 overwrite: true \u5F3A\u5236\u8986\u76D6`);\n        } catch (error: any) {\n          if (error.code !== 'ENOENT') {\n            throw error;\n          }\n        }\n      }\n\n      // 5. \u6784\u9020LLM\u5206\u6790\u63D0\u793A\n      const analysisPrompt = buildDocumentationPrompt(codeAnalysis, finalDocType, includeExamples);\n\n      // 6. \u5982\u679C\u6CA1\u6709LLM\u5206\u6790\u7ED3\u679C\uFF0C\u8FD4\u56DE\u9700\u8981\u5206\u6790\u7684\u4FE1\u53F7\n      if (!llmAnalysis) {\n        return {\n          success: false,\n          error: 'need_llm_analysis',\n          data: {\n            needsLLMAnalysis: true,\n            analysisPrompt,\n            sourceInfo: {\n              sourcePath: resolvedSourcePath,\n              outputPath: finalOutputPath,\n              docType: finalDocType,\n              fileCount: codeFiles.length,\n              primaryLanguage: codeAnalysis.primaryLanguage,\n            },\n          },\n        };\n      }\n\n      // 7. \u5904\u7406LLM\u751F\u6210\u7684\u6587\u6863\u5185\u5BB9\n      const documentContent = processLLMDocumentation(llmAnalysis, finalDocType);\n\n      // 8. \u521B\u5EFA\u8F93\u51FA\u76EE\u5F55\u5E76\u5199\u5165\u6587\u6863\n      await fs.mkdir(dirname(finalOutputPath), { recursive: true });\n      await fs.writeFile(finalOutputPath, documentContent, 'utf8');\n\n      // 9. \u83B7\u53D6\u751F\u6210\u7684\u6587\u4EF6\u4FE1\u606F\n      const outputStats = await fs.stat(finalOutputPath);\n\n      const result = {\n        sourceInfo: {\n          path: resolvedSourcePath,\n          type: sourceStats.isFile() ? 'file' : 'directory',\n          fileCount: codeFiles.length,\n          primaryLanguage: codeAnalysis.primaryLanguage,\n        },\n        documentInfo: {\n          path: finalOutputPath,\n          type: finalDocType,\n          size: outputStats.size,\n          createdAt: outputStats.birthtime,\n          includesExamples: includeExamples,\n        },\n        analysis: codeAnalysis,\n        smartGenerated: true,\n      };\n\n      return {\n        success: true,\n        data: result,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Smart doc generation failed: ${(error as Error).message}`,\n        data: null,\n      };\n    }\n  },\n};\n\n/**\n * \u68C0\u6D4B\u7F16\u7A0B\u8BED\u8A00\n */\nfunction detectLanguage(filePath: string): string {\n  const ext = extname(filePath).toLowerCase();\n  const languageMap: Record<string, string> = {\n    '.js': 'javascript',\n    '.mjs': 'javascript',\n    '.jsx': 'javascript',\n    '.ts': 'typescript',\n    '.tsx': 'typescript',\n    '.py': 'python',\n    '.java': 'java',\n    '.go': 'go',\n    '.rs': 'rust',\n    '.php': 'php',\n    '.rb': 'ruby',\n    '.swift': 'swift',\n    '.kt': 'kotlin',\n    '.cs': 'csharp',\n    '.cpp': 'cpp',\n    '.c': 'c',\n    '.h': 'c',\n  };\n\n  return languageMap[ext] || 'unknown';\n}\n\n/**\n * \u626B\u63CF\u76EE\u5F55\u4E2D\u7684\u4EE3\u7801\u6587\u4EF6\n */\nasync function scanCodeFiles(dirPath: string, maxFileSize: number) {\n  const codeFiles: Array<{ path: string; content: string; language: string }> = [];\n  const codeExtensions = [\n    '.js',\n    '.mjs',\n    '.jsx',\n    '.ts',\n    '.tsx',\n    '.py',\n    '.java',\n    '.go',\n    '.rs',\n    '.php',\n    '.rb',\n  ];\n\n  async function scanDirectory(currentPath: string, depth = 0): Promise<void> {\n    if (depth > 3) return; // \u9650\u5236\u9012\u5F52\u6DF1\u5EA6\n\n    const items = await fs.readdir(currentPath);\n\n    for (const item of items) {\n      if (item.startsWith('.')) continue; // \u8DF3\u8FC7\u9690\u85CF\u6587\u4EF6\n\n      const itemPath = resolve(currentPath, item);\n      const itemStats = await fs.stat(itemPath);\n\n      if (itemStats.isDirectory()) {\n        // \u8DF3\u8FC7\u5E38\u89C1\u7684\u975E\u6E90\u7801\u76EE\u5F55\n        if (['node_modules', 'dist', 'build', '.git', '__pycache__'].includes(item)) {\n          continue;\n        }\n        await scanDirectory(itemPath, depth + 1);\n      } else if (itemStats.isFile()) {\n        const ext = extname(item).toLowerCase();\n        if (codeExtensions.includes(ext) && itemStats.size <= maxFileSize) {\n          try {\n            const content = await fs.readFile(itemPath, 'utf8');\n            const language = detectLanguage(itemPath);\n            codeFiles.push({ path: itemPath, content, language });\n\n            // \u9650\u5236\u6587\u4EF6\u6570\u91CF\n            if (codeFiles.length >= 20) break;\n          } catch (error) {\n            // \u5FFD\u7565\u8BFB\u53D6\u5931\u8D25\u7684\u6587\u4EF6\n          }\n        }\n      }\n    }\n  }\n\n  await scanDirectory(dirPath);\n  return codeFiles;\n}\n\n/**\n * \u5206\u6790\u4EE3\u7801\u7ED3\u6784\n */\nfunction analyzeCodeStructure(\n  codeFiles: Array<{ path: string; content: string; language: string }>\n) {\n  const languages = new Map<string, number>();\n  const functions: string[] = [];\n  const classes: string[] = [];\n  const exports: string[] = [];\n  const imports: string[] = [];\n\n  let totalLines = 0;\n  let totalSize = 0;\n\n  for (const file of codeFiles) {\n    const { content, language } = file;\n    totalLines += content.split('\\n').length;\n    totalSize += content.length;\n\n    // \u7EDF\u8BA1\u8BED\u8A00\u4F7F\u7528\n    languages.set(language, (languages.get(language) || 0) + 1);\n\n    // \u63D0\u53D6\u51FD\u6570\u3001\u7C7B\u7B49\u7ED3\u6784\u4FE1\u606F\n    extractCodeStructures(content, language, { functions, classes, exports, imports });\n  }\n\n  // \u786E\u5B9A\u4E3B\u8981\u7F16\u7A0B\u8BED\u8A00\n  const primaryLanguage =\n    Array.from(languages.entries()).sort((a, b) => b[1] - a[1])[0]?.[0] || 'unknown';\n\n  return {\n    fileCount: codeFiles.length,\n    primaryLanguage,\n    languages: Object.fromEntries(languages),\n    totalLines,\n    totalSize,\n    structures: {\n      functions: Array.from(new Set(functions)).slice(0, 20),\n      classes: Array.from(new Set(classes)).slice(0, 10),\n      exports: Array.from(new Set(exports)).slice(0, 15),\n      imports: Array.from(new Set(imports)).slice(0, 15),\n    },\n  };\n}\n\n/**\n * \u63D0\u53D6\u4EE3\u7801\u7ED3\u6784\u4FE1\u606F\n */\nfunction extractCodeStructures(\n  content: string,\n  language: string,\n  structures: { functions: string[]; classes: string[]; exports: string[]; imports: string[] }\n) {\n  const lines = content.split('\\n');\n\n  for (const line of lines) {\n    const trimmed = line.trim();\n\n    if (language === 'javascript' || language === 'typescript') {\n      // \u51FD\u6570\n      if (trimmed.match(/^(export\\s+)?(async\\s+)?function\\s+(\\w+)/)) {\n        const match = trimmed.match(/function\\s+(\\w+)/);\n        if (match) structures.functions.push(match[1]);\n      }\n\n      // \u7BAD\u5934\u51FD\u6570\n      if (trimmed.match(/^(export\\s+)?const\\s+(\\w+)\\s*=\\s*.*=>/)) {\n        const match = trimmed.match(/const\\s+(\\w+)/);\n        if (match) structures.functions.push(match[1]);\n      }\n\n      // \u7C7B\n      if (trimmed.match(/^(export\\s+)?class\\s+(\\w+)/)) {\n        const match = trimmed.match(/class\\s+(\\w+)/);\n        if (match) structures.classes.push(match[1]);\n      }\n\n      // \u5BFC\u51FA\n      if (trimmed.startsWith('export')) {\n        structures.exports.push(trimmed);\n      }\n\n      // \u5BFC\u5165\n      if (trimmed.startsWith('import')) {\n        structures.imports.push(trimmed);\n      }\n    }\n\n    // \u53EF\u4EE5\u6DFB\u52A0\u5176\u4ED6\u8BED\u8A00\u7684\u6A21\u5F0F\u5339\u914D\n  }\n}\n\n/**\n * \u68C0\u6D4B\u6587\u6863\u7C7B\u578B\n */\nfunction detectDocType(analysis: any): string {\n  const { structures, primaryLanguage } = analysis;\n\n  // \u5982\u679C\u6709\u5F88\u591A\u5BFC\u51FA\u7684\u51FD\u6570/\u7C7B\uFF0C\u53EF\u80FD\u662F\u5E93\u6216API\n  if (structures.exports.length > 5 || structures.functions.length > 10) {\n    return 'api';\n  }\n\n  // \u5982\u679C\u662Fweb\u76F8\u5173\uFF0C\u53EF\u80FD\u9700\u8981\u7528\u6237\u6307\u5357\n  if (primaryLanguage === 'javascript' || primaryLanguage === 'typescript') {\n    return 'guide';\n  }\n\n  // \u9ED8\u8BA4\u751F\u6210README\n  return 'readme';\n}\n\n/**\n * \u751F\u6210\u8F93\u51FA\u8DEF\u5F84\n */\nfunction generateOutputPath(sourcePath: string, docType: string): string {\n  const sourceDir = dirname(sourcePath);\n\n  const fileNames: Record<string, string> = {\n    api: 'API.md',\n    readme: 'README.md',\n    guide: 'GUIDE.md',\n    technical: 'TECHNICAL.md',\n  };\n\n  const fileName = fileNames[docType] || 'README.md';\n  return resolve(sourceDir, fileName);\n}\n\n/**\n * \u6784\u9020\u6587\u6863\u751F\u6210\u63D0\u793A\n */\nfunction buildDocumentationPrompt(\n  analysis: any,\n  docType: string,\n  includeExamples: boolean\n): string {\n  const { primaryLanguage, structures, fileCount, totalLines } = analysis;\n\n  const exampleNote = includeExamples ? '\u5E76\u5305\u542B\u5B9E\u9645\u7684\u4F7F\u7528\u793A\u4F8B' : '';\n\n  return `\u8BF7\u4E3A\u4EE5\u4E0B${primaryLanguage}\u9879\u76EE\u751F\u6210${getDocTypeDescription(docType)}\u6587\u6863${exampleNote}\u3002\n\n\u9879\u76EE\u5206\u6790\u4FE1\u606F:\n- \u4E3B\u8981\u8BED\u8A00: ${primaryLanguage}\n- \u6587\u4EF6\u6570\u91CF: ${fileCount}\n- \u603B\u4EE3\u7801\u884C\u6570: ${totalLines}\n- \u4E3B\u8981\u51FD\u6570: ${structures.functions.slice(0, 10).join(', ')}\n- \u4E3B\u8981\u7C7B: ${structures.classes.slice(0, 5).join(', ')}\n- \u5173\u952E\u5BFC\u51FA: ${structures.exports.slice(0, 5).join('; ')}\n\n\u8BF7\u751F\u6210\u4E00\u4E2A\u4E13\u4E1A\u3001\u8BE6\u7EC6\u4E14\u7ED3\u6784\u5316\u7684${getDocTypeDescription(docType)}\u6587\u6863\uFF0C\u5305\u542B\u4EE5\u4E0B\u90E8\u5206\uFF1A\n\n1. **\u9879\u76EE\u6982\u8FF0** - \u7B80\u660E\u627C\u8981\u5730\u63CF\u8FF0\u9879\u76EE\u529F\u80FD\u548C\u7528\u9014\n2. **\u5B89\u88C5\u8BF4\u660E** - \u5982\u4F55\u5B89\u88C5\u548C\u914D\u7F6E\u9879\u76EE\n3. **\u5FEB\u901F\u5F00\u59CB** - \u57FA\u672C\u4F7F\u7528\u65B9\u6CD5\u548C\u5165\u95E8\u793A\u4F8B\n4. **API\u6587\u6863** - \u4E3B\u8981\u51FD\u6570\u3001\u7C7B\u548C\u65B9\u6CD5\u7684\u8BE6\u7EC6\u8BF4\u660E\uFF08\u5982\u679C\u9002\u7528\uFF09\n5. **\u4F7F\u7528\u793A\u4F8B** - \u5B9E\u9645\u7684\u4EE3\u7801\u793A\u4F8B\u5C55\u793A\u5982\u4F55\u4F7F\u7528${includeExamples ? '\uFF08\u5FC5\u987B\u5305\u542B\uFF09' : ''}\n6. **\u914D\u7F6E\u9009\u9879** - \u91CD\u8981\u7684\u914D\u7F6E\u53C2\u6570\u548C\u9009\u9879\n7. **\u6545\u969C\u6392\u9664** - \u5E38\u89C1\u95EE\u9898\u548C\u89E3\u51B3\u65B9\u6848\n8. **\u8D21\u732E\u6307\u5357** - \u5982\u4F55\u53C2\u4E0E\u9879\u76EE\u5F00\u53D1\uFF08\u5982\u679C\u9002\u7528\uFF09\n\n\u8981\u6C42\uFF1A\n- \u4F7F\u7528Markdown\u683C\u5F0F\n- \u4EE3\u7801\u793A\u4F8B\u8981\u5B8C\u6574\u4E14\u53EF\u8FD0\u884C\n- \u8BED\u8A00\u7B80\u6D01\u6E05\u6670\uFF0C\u9002\u5408\u6280\u672F\u6587\u6863\n- \u7ED3\u6784\u5C42\u6B21\u5206\u660E\uFF0C\u4FBF\u4E8E\u9605\u8BFB\n- \u6839\u636E\u5B9E\u9645\u7684\u4EE3\u7801\u7ED3\u6784\u6765\u751F\u6210\u5185\u5BB9\uFF0C\u4E0D\u8981\u865A\u6784\u4E0D\u5B58\u5728\u7684\u529F\u80FD\n\n\u8BF7\u76F4\u63A5\u8FD4\u56DE\u5B8C\u6574\u7684Markdown\u6587\u6863\u5185\u5BB9\u3002`;\n}\n\n/**\n * \u83B7\u53D6\u6587\u6863\u7C7B\u578B\u63CF\u8FF0\n */\nfunction getDocTypeDescription(docType: string): string {\n  const descriptions: Record<string, string> = {\n    api: 'API\u53C2\u8003',\n    readme: 'README',\n    guide: '\u7528\u6237\u6307\u5357',\n    technical: '\u6280\u672F\u6587\u6863',\n  };\n\n  return descriptions[docType] || 'README';\n}\n\n/**\n * \u5904\u7406LLM\u751F\u6210\u7684\u6587\u6863\u5185\u5BB9\n */\nfunction processLLMDocumentation(llmAnalysis: string, docType: string): string {\n  let content = llmAnalysis.trim();\n\n  // \u79FB\u9664\u53EF\u80FD\u7684markdown\u4EE3\u7801\u5757\u5305\u88C5\n  content = content.replace(/^```markdown\\n?|\\n?```$/g, '');\n  content = content.replace(/^```\\n?|\\n?```$/g, '');\n\n  // \u786E\u4FDD\u6709\u6807\u9898\n  if (!content.startsWith('#')) {\n    const title = getDocTypeDescription(docType);\n    content = `# ${title}\\n\\n${content}`;\n  }\n\n  // \u6DFB\u52A0\u751F\u6210\u4FE1\u606F\n  const timestamp = new Date().toISOString().split('T')[0];\n  content += `\\n\\n---\\n\\n*\u6B64\u6587\u6863\u7531 Agent CLI \u667A\u80FD\u751F\u6210\uFF0C\u751F\u6210\u65F6\u95F4\uFF1A${timestamp}*\\n`;\n\n  return content;\n}\n", "import { EventEmitter } from 'events';\nimport { McpClient as MCPClient, McpResource, McpTool } from '../mcp/index.js';\nimport { BaseComponent } from './BaseComponent.js';\n\n/**\n * MCP \u4F1A\u8BDD\u63A5\u53E3\n */\nexport interface MCPSession {\n  id: string;\n  serverId: string;\n  serverName: string;\n  status: 'connecting' | 'connected' | 'disconnected' | 'error';\n  connectedAt?: number;\n  disconnectedAt?: number;\n  error?: string;\n}\n\n/**\n * MCP \u7EC4\u4EF6\u914D\u7F6E\n */\nexport interface MCPComponentConfig {\n  enabled?: boolean;\n  servers?: string[]; // \u670D\u52A1\u5668\u540D\u79F0\u5217\u8868\n  autoConnect?: boolean;\n  debug?: boolean;\n}\n\n/**\n * MCP \u8D44\u6E90\u4FE1\u606F\n */\nexport interface MCPResourceInfo extends McpResource {\n  serverId: string;\n  serverName: string;\n}\n\n/**\n * MCP \u5DE5\u5177\u4FE1\u606F\n */\nexport interface MCPToolInfo extends McpTool {\n  serverId: string;\n  serverName: string;\n}\n\n/**\n * MCP \u7EC4\u4EF6 - \u7BA1\u7406 MCP \u8FDE\u63A5\u548C\u8D44\u6E90\n */\nexport class MCPComponent extends BaseComponent {\n  private client?: MCPClient;\n  private sessions: Map<string, MCPSession> = new Map();\n  private resources: Map<string, MCPResourceInfo[]> = new Map();\n  private tools: Map<string, MCPToolInfo[]> = new Map();\n  private config: MCPComponentConfig;\n  private eventEmitter: EventEmitter;\n\n  constructor(id: string, config: MCPComponentConfig = {}) {\n    super(id);\n    this.config = {\n      enabled: true,\n      autoConnect: true,\n      debug: false,\n      ...config,\n    };\n    this.eventEmitter = new EventEmitter();\n  }\n\n  /**\n   * \u6DFB\u52A0\u4E8B\u4EF6\u76D1\u542C\u5668\n   */\n  on(event: string, listener: (...args: any[]) => void): this {\n    this.eventEmitter.on(event, listener);\n    return this;\n  }\n\n  /**\n   * \u79FB\u9664\u4E8B\u4EF6\u76D1\u542C\u5668\n   */\n  off(event: string, listener: (...args: any[]) => void): this {\n    this.eventEmitter.off(event, listener);\n    return this;\n  }\n\n  /**\n   * \u53D1\u5C04\u4E8B\u4EF6\n   */\n  private emit(event: string, ...args: any[]): boolean {\n    return this.eventEmitter.emit(event, ...args);\n  }\n\n  /**\n   * \u521D\u59CB\u5316 MCP \u7EC4\u4EF6\n   */\n  async init(): Promise<void> {\n    if (!this.config.enabled) {\n      this.log('MCP \u7EC4\u4EF6\u5DF2\u7981\u7528');\n      return;\n    }\n\n    try {\n      // \u521D\u59CB\u5316 MCP \u5BA2\u6237\u7AEF\n      this.client = new MCPClient({} as any); // \u4E34\u65F6\u4F7F\u7528\u7A7A\u914D\u7F6E\n      await this.client.initialize();\n      \n      // \u81EA\u52A8\u8FDE\u63A5\u5230\u914D\u7F6E\u7684\u670D\u52A1\u5668\n      if (this.config.autoConnect && this.config.servers) {\n        await this.connectToServers(this.config.servers);\n      }\n      \n      this.log('MCP \u7EC4\u4EF6\u521D\u59CB\u5316\u5B8C\u6210');\n    } catch (error) {\n      this.log(`MCP \u7EC4\u4EF6\u521D\u59CB\u5316\u5931\u8D25: ${error}`);\n      this.emit('error', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \u9500\u6BC1\u7EC4\u4EF6\n   */\n  async destroy(): Promise<void> {\n    if (this.client) {\n      await this.client.destroy();\n    }\n    this.sessions.clear();\n    this.resources.clear();\n    this.tools.clear();\n    this.eventEmitter.removeAllListeners();\n  }\n\n  /**\n   * \u8FDE\u63A5\u5230\u591A\u4E2A\u670D\u52A1\u5668\n   */\n  async connectToServers(serverNames: string[]): Promise<void> {\n    for (const serverName of serverNames) {\n      try {\n        await this.connectToServer(serverName);\n      } catch (error) {\n        this.emit('error', { serverName, error });\n      }\n    }\n  }\n\n  /**\n   * \u8FDE\u63A5\u5230\u5355\u4E2A\u670D\u52A1\u5668\n   */\n  async connectToServer(serverId: string): Promise<MCPSession> {\n    if (!this.client) {\n      throw new Error('MCP \u5BA2\u6237\u7AEF\u672A\u521D\u59CB\u5316');\n    }\n\n    await this.client.connectToServer(serverId);\n    \n    const session: MCPSession = {\n      id: serverId,\n      serverId,\n      serverName: serverId,\n      status: 'connected',\n      connectedAt: Date.now()\n    };\n    \n    this.sessions.set(serverId, session);\n    \n    // \u52A0\u8F7D\u670D\u52A1\u5668\u8D44\u6E90\u548C\u5DE5\u5177\n    await this.loadServerResources(serverId);\n    await this.loadServerTools(serverId);\n    \n    return session;\n  }\n\n  /**\n   * \u65AD\u5F00\u670D\u52A1\u5668\u8FDE\u63A5\n   */\n  async disconnectFromServer(serverName: string): Promise<void> {\n    if (this.client) {\n      await this.client.disconnectFromServer(serverName);\n      this.sessions.delete(serverName);\n    }\n  }\n\n  /**\n   * \u52A0\u8F7D\u670D\u52A1\u5668\u8D44\u6E90\n   */\n  async loadServerResources(serverId: string): Promise<void> {\n    if (!this.client) return;\n\n    try {\n      const resources = await this.client.listResources(serverId);\n      const session = this.sessions.get(serverId);\n\n      if (session) {\n        const resourcesWithServer = resources.map(resource => ({\n          ...resource,\n          serverId,\n          serverName: session.serverName,\n        }));\n\n        this.resources.set(serverId, resourcesWithServer);\n        this.log(`\u52A0\u8F7D\u4E86 ${resources.length} \u4E2A\u8D44\u6E90\u4ECE ${session.serverName}`);\n      }\n    } catch (error) {\n      this.log(`\u52A0\u8F7D\u670D\u52A1\u5668\u8D44\u6E90\u5931\u8D25: ${error}`);\n    }\n  }\n\n  /**\n   * \u52A0\u8F7D\u670D\u52A1\u5668\u5DE5\u5177\n   */\n  async loadServerTools(serverId: string): Promise<void> {\n    if (!this.client) return;\n\n    try {\n      const tools = await this.client.listTools(serverId);\n      const session = this.sessions.get(serverId);\n\n      if (session) {\n        const toolsWithServer = tools.map(tool => ({\n          ...tool,\n          serverId,\n          serverName: session.serverName,\n        }));\n\n        this.tools.set(serverId, toolsWithServer);\n        this.log(`\u52A0\u8F7D\u4E86 ${tools.length} \u4E2A\u5DE5\u5177\u4ECE ${session.serverName}`);\n      }\n    } catch (error) {\n      this.log(`\u52A0\u8F7D\u670D\u52A1\u5668\u5DE5\u5177\u5931\u8D25: ${error}`);\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u53EF\u7528\u8D44\u6E90\n   */\n  getAllResources(): MCPResourceInfo[] {\n    const allResources: MCPResourceInfo[] = [];\n    for (const resources of this.resources.values()) {\n      allResources.push(...resources);\n    }\n    return allResources;\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u53EF\u7528\u5DE5\u5177\n   */\n  getAllTools(): MCPToolInfo[] {\n    const allTools: MCPToolInfo[] = [];\n    for (const tools of this.tools.values()) {\n      allTools.push(...tools);\n    }\n    return allTools;\n  }\n\n  /**\n   * \u8BFB\u53D6\u8D44\u6E90\u5185\u5BB9\n   */\n  async readResource(uri: string): Promise<string | null> {\n    if (!this.client) {\n      return null;\n    }\n\n    // \u67E5\u627E\u5305\u542B\u8BE5\u8D44\u6E90\u7684\u670D\u52A1\u5668\n    for (const [serverId, resources] of this.resources.entries()) {\n      const resource = resources.find(r => r.uri === uri);\n      if (resource) {\n        try {\n          const content = await this.client.readResource(serverId, uri);\n          return content;\n        } catch (error) {\n          this.emit('error', { serverId, uri, error });\n          return null;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * \u8C03\u7528\u5DE5\u5177\n   */\n  async callTool(toolName: string, args: Record<string, any>): Promise<any> {\n    if (!this.client) {\n      throw new Error('MCP \u5BA2\u6237\u7AEF\u672A\u521D\u59CB\u5316');\n    }\n\n    // \u67E5\u627E\u5305\u542B\u8BE5\u5DE5\u5177\u7684\u670D\u52A1\u5668\n    for (const [serverId, tools] of this.tools.entries()) {\n      const tool = tools.find(t => t.name === toolName);\n      if (tool) {\n        try {\n          return await this.client.callTool(serverId, toolName, args);\n        } catch (error) {\n          this.emit('error', { serverId, toolName, args, error });\n          throw error;\n        }\n      }\n    }\n\n    throw new Error(`\u5DE5\u5177\u672A\u627E\u5230: ${toolName}`);\n  }\n\n  /**\n   * \u641C\u7D22\u8D44\u6E90\n   */\n  searchResources(query: string): MCPResourceInfo[] {\n    const allResources = this.getAllResources();\n    return allResources.filter(\n      resource =>\n        resource.name.toLowerCase().includes(query.toLowerCase()) ||\n        resource.description?.toLowerCase().includes(query.toLowerCase()) ||\n        resource.uri.toLowerCase().includes(query.toLowerCase())\n    );\n  }\n\n  /**\n   * \u641C\u7D22\u5DE5\u5177\n   */\n  searchTools(query: string): MCPToolInfo[] {\n    const allTools = this.getAllTools();\n    return allTools.filter(tool => \n      tool.name.toLowerCase().includes(query.toLowerCase()) ||\n      (tool.description && tool.description.toLowerCase().includes(query.toLowerCase()))\n    );\n  }\n\n  /**\n   * \u83B7\u53D6\u8FDE\u63A5\u72B6\u6001\n   */\n  getConnectionStatus(): Array<{\n    serverName: string;\n    connected: boolean;\n    resourceCount: number;\n    toolCount: number;\n  }> {\n    return Array.from(this.sessions.values()).map(session => ({\n      serverName: session.serverName,\n      connected: session.status === 'connected',\n      resourceCount: this.resources.get(session.id)?.length || 0,\n      toolCount: this.tools.get(session.id)?.length || 0,\n    }));\n  }\n\n  /**\n   * \u6839\u636E ID \u83B7\u53D6\u4F1A\u8BDD\n   */\n  private getSessionById(sessionId: string): MCPSession | undefined {\n    return this.sessions.get(sessionId);\n  }\n\n  /**\n   * \u65E5\u5FD7\u8BB0\u5F55\n   */\n  private log(message: string): void {\n    if (this.config.debug) {\n      console.log(`[MCPComponent] ${message}`);\n    }\n  }\n}\n", "import { Server } from '@modelcontextprotocol/sdk/server/index.js';\nimport {\n  CallToolRequestSchema,\n  ListResourcesRequestSchema,\n  ReadResourceRequestSchema,\n  ListToolsRequestSchema,\n  ListPromptsRequestSchema,\n  GetPromptRequestSchema\n} from '@modelcontextprotocol/sdk/types.js';\nimport type { BladeConfig } from '../../config/types/index.js';\nimport type { McpServer as McpServerConfig } from '../types/mcp.js';\n\nexport class McpServer {\n  private server: Server | null = null;\n  private config: BladeConfig;\n  private serverConfig: McpServerConfig;\n  private isRunning = false;\n\n  constructor(config: BladeConfig, serverConfig: McpServerConfig) {\n    this.config = config;\n    this.serverConfig = serverConfig;\n  }\n\n  public async initialize(): Promise<void> {\n    // \u521D\u59CB\u5316MCP\u670D\u52A1\u5668\n    this.server = new Server(\n      {\n        name: this.serverConfig.name,\n        version: this.config.version || '1.0.0',\n      },\n      {\n        capabilities: {\n          tools: {},\n          resources: {},\n          prompts: {},\n        },\n      }\n    );\n\n    // \u6CE8\u518C\u5904\u7406\u7A0B\u5E8F\n    this.registerHandlers();\n\n    console.log(`MCP\u670D\u52A1\u5668\u521D\u59CB\u5316\u5B8C\u6210: ${this.serverConfig.name}`);\n  }\n\n  private registerHandlers(): void {\n    if (!this.server) return;\n\n    // \u6CE8\u518C\u5DE5\u5177\u8C03\u7528\u5904\u7406\u7A0B\u5E8F\n    this.server.setRequestHandler(CallToolRequestSchema, async (request) => {\n      try {\n        const result = await this.handleToolCall(request.params);\n        return { result };\n      } catch (error) {\n        return { error: { code: -32000, message: (error as Error).message } };\n      }\n    });\n\n    // \u6CE8\u518C\u8D44\u6E90\u5217\u8868\u5904\u7406\u7A0B\u5E8F\n    this.server.setRequestHandler(ListResourcesRequestSchema, async () => {\n      try {\n        const resources = await this.handleListResources();\n        return { resources };\n      } catch (error) {\n        return { error: { code: -32000, message: (error as Error).message } };\n      }\n    });\n\n    // \u6CE8\u518C\u8D44\u6E90\u8BFB\u53D6\u5904\u7406\u7A0B\u5E8F\n    this.server.setRequestHandler(ReadResourceRequestSchema, async (request) => {\n      try {\n        const contents = await this.handleReadResource(request.params.uri);\n        return { contents };\n      } catch (error) {\n        return { error: { code: -32000, message: (error as Error).message } };\n      }\n    });\n\n    // \u6CE8\u518C\u5DE5\u5177\u5217\u8868\u5904\u7406\u7A0B\u5E8F\n    this.server.setRequestHandler(ListToolsRequestSchema, async () => {\n      try {\n        const tools = await this.handleListTools();\n        return { tools };\n      } catch (error) {\n        return { error: { code: -32000, message: (error as Error).message } };\n      }\n    });\n\n    // \u6CE8\u518C\u63D0\u793A\u5217\u8868\u5904\u7406\u7A0B\u5E8F\n    this.server.setRequestHandler(ListPromptsRequestSchema, async () => {\n      try {\n        const prompts = await this.handleListPrompts();\n        return { prompts };\n      } catch (error) {\n        return { error: { code: -32000, message: (error as Error).message } };\n      }\n    });\n\n    // \u6CE8\u518C\u63D0\u793A\u83B7\u53D6\u5904\u7406\u7A0B\u5E8F\n    this.server.setRequestHandler(GetPromptRequestSchema, async (request) => {\n      try {\n        const prompt = await this.handleGetPrompt(request.params.name);\n        return { prompt };\n      } catch (error) {\n        return { error: { code: -32000, message: (error as Error).message } };\n      }\n    });\n  }\n\n  private async handleToolCall(params: any): Promise<any> {\n    console.log(`\u8C03\u7528\u5DE5\u5177: ${params.name}`, params.arguments);\n\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0\u5177\u4F53\u7684\u5DE5\u5177\u8C03\u7528\u903B\u8F91\n    // \u6682\u65F6\u8FD4\u56DE\u6A21\u62DF\u7ED3\u679C\n    return {\n      content: `\u5DE5\u5177 ${params.name} \u6267\u884C\u7ED3\u679C`,\n      isError: false,\n    };\n  }\n\n  private async handleListResources(): Promise<any[]> {\n    console.log('\u5217\u51FA\u8D44\u6E90');\n\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0\u8D44\u6E90\u5217\u8868\u903B\u8F91\n    // \u6682\u65F6\u8FD4\u56DE\u7A7A\u6570\u7EC4\n    return [];\n  }\n\n  private async handleReadResource(uri: string): Promise<Array<{ text: string }>> {\n    console.log(`\u8BFB\u53D6\u8D44\u6E90: ${uri}`);\n\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0\u8D44\u6E90\u8BFB\u53D6\u903B\u8F91\n    // \u6682\u65F6\u8FD4\u56DE\u6A21\u62DF\u5185\u5BB9\n    return [{ text: `\u8D44\u6E90\u5185\u5BB9: ${uri}` }];\n  }\n\n  private async handleListTools(): Promise<any[]> {\n    console.log('\u5217\u51FA\u5DE5\u5177');\n\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0\u5DE5\u5177\u5217\u8868\u903B\u8F91\n    // \u6682\u65F6\u8FD4\u56DE\u6A21\u62DF\u5DE5\u5177\u5217\u8868\n    return [\n      {\n        name: 'echo',\n        description: '\u56DE\u663E\u8F93\u5165\u7684\u6587\u672C',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            text: { type: 'string' },\n          },\n          required: ['text'],\n        },\n      },\n    ];\n  }\n\n  private async handleListPrompts(): Promise<any[]> {\n    console.log('\u5217\u51FA\u63D0\u793A');\n\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0\u63D0\u793A\u5217\u8868\u903B\u8F91\n    // \u6682\u65F6\u8FD4\u56DE\u7A7A\u6570\u7EC4\n    return [];\n  }\n\n  private async handleGetPrompt(name: string): Promise<any> {\n    console.log(`\u83B7\u53D6\u63D0\u793A: ${name}`);\n\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0\u63D0\u793A\u83B7\u53D6\u903B\u8F91\n    // \u6682\u65F6\u629B\u51FA\u9519\u8BEF\n    throw new Error(`\u63D0\u793A\u672A\u627E\u5230: ${name}`);\n  }\n\n  public async start(): Promise<void> {\n    if (this.isRunning) {\n      console.log(`MCP\u670D\u52A1\u5668\u5DF2\u5728\u8FD0\u884C: ${this.serverConfig.name}`);\n      return;\n    }\n\n    if (!this.server) {\n      await this.initialize();\n    }\n\n    try {\n      // \u542F\u52A8\u670D\u52A1\u5668\n      switch (this.serverConfig.transport) {\n        case 'stdio':\n          await this.startStdioServer();\n          break;\n        case 'sse':\n          await this.startSseServer();\n          break;\n        case 'websocket':\n          await this.startWebSocketServer();\n          break;\n        default:\n          throw new Error(`\u4E0D\u652F\u6301\u7684\u4F20\u8F93\u7C7B\u578B: ${this.serverConfig.transport}`);\n      }\n\n      this.isRunning = true;\n      console.log(`MCP\u670D\u52A1\u5668\u5DF2\u542F\u52A8: ${this.serverConfig.name}`);\n    } catch (error) {\n      console.error(`\u542F\u52A8MCP\u670D\u52A1\u5668\u5931\u8D25: ${this.serverConfig.name}`, error);\n      throw error;\n    }\n  }\n\n  private async startStdioServer(): Promise<void> {\n    if (!this.server) {\n      throw new Error('\u670D\u52A1\u5668\u672A\u521D\u59CB\u5316');\n    }\n\n    // \u542F\u52A8stdio\u670D\u52A1\u5668\n    // MCP Server\u901A\u8FC7stdio\u8FDE\u63A5\uFF0C\u4E0D\u9700\u8981\u663E\u5F0F\u8C03\u7528listen\n    console.log('STDIO\u670D\u52A1\u5668\u5DF2\u542F\u52A8');\n  }\n\n  private async startSseServer(): Promise<void> {\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0SSE\u670D\u52A1\u5668\u542F\u52A8\u903B\u8F91\n    console.log('SSE\u670D\u52A1\u5668\u542F\u52A8 (\u6A21\u62DF)');\n  }\n\n  private async startWebSocketServer(): Promise<void> {\n    // \u8FD9\u91CC\u5E94\u8BE5\u5B9E\u73B0WebSocket\u670D\u52A1\u5668\u542F\u52A8\u903B\u8F91\n    console.log('WebSocket\u670D\u52A1\u5668\u542F\u52A8 (\u6A21\u62DF)');\n  }\n\n  public async stop(): Promise<void> {\n    if (!this.isRunning) {\n      console.log(`MCP\u670D\u52A1\u5668\u672A\u8FD0\u884C: ${this.serverConfig.name}`);\n      return;\n    }\n\n    try {\n      if (this.server) {\n        this.server.close();\n      }\n\n      this.isRunning = false;\n      console.log(`MCP\u670D\u52A1\u5668\u5DF2\u505C\u6B62: ${this.serverConfig.name}`);\n    } catch (error) {\n      console.error(`\u505C\u6B62MCP\u670D\u52A1\u5668\u5931\u8D25: ${this.serverConfig.name}`, error);\n      throw error;\n    }\n  }\n\n  public isServerRunning(): boolean {\n    return this.isRunning;\n  }\n\n  public getServerConfig(): McpServerConfig {\n    return { ...this.serverConfig };\n  }\n\n  public async getServerInfo(): Promise<any> {\n    return {\n      name: this.serverConfig.name,\n      version: this.config.version,\n      transport: this.serverConfig.transport,\n      status: this.isRunning ? 'running' : 'stopped',\n      capabilities: this.serverConfig.capabilities,\n    };\n  }\n\n  public async healthCheck(): Promise<ServerHealth> {\n    return {\n      status: this.isRunning ? 'healthy' : 'unhealthy',\n      timestamp: Date.now(),\n      checks: [\n        {\n          name: 'server_running',\n          status: this.isRunning ? 'pass' : 'fail',\n          message: this.isRunning ? '\u670D\u52A1\u5668\u6B63\u5728\u8FD0\u884C' : '\u670D\u52A1\u5668\u672A\u8FD0\u884C',\n        },\n      ],\n    };\n  }\n\n  public async destroy(): Promise<void> {\n    if (this.isRunning) {\n      await this.stop();\n    }\n\n    if (this.server) {\n      this.server.close();\n      this.server = null;\n    }\n\n    console.log(`MCP\u670D\u52A1\u5668\u5DF2\u9500\u6BC1: ${this.serverConfig.name}`);\n  }\n}\n\n// \u670D\u52A1\u5668\u7EC4\u7BA1\u7406\u5668\nexport class McpServerGroup {\n  private servers: Map<string, McpServer> = new Map();\n  private config: BladeConfig;\n\n  constructor(config: BladeConfig) {\n    this.config = config;\n  }\n\n  public async addServer(server: McpServer): Promise<void> {\n    const serverConfig = server.getServerConfig();\n    if (this.servers.has(serverConfig.id)) {\n      console.warn(`\u670D\u52A1\u5668\u5DF2\u5B58\u5728\uFF0C\u5C06\u88AB\u8986\u76D6: ${serverConfig.id}`);\n    }\n\n    this.servers.set(serverConfig.id, server);\n    console.log(`\u6DFB\u52A0\u670D\u52A1\u5668\u5230\u7EC4: ${serverConfig.name}`);\n  }\n\n  public async removeServer(serverId: string): Promise<void> {\n    const server = this.servers.get(serverId);\n    if (!server) {\n      throw new Error(`\u670D\u52A1\u5668\u672A\u627E\u5230: ${serverId}`);\n    }\n\n    await server.destroy();\n    this.servers.delete(serverId);\n    console.log(`\u4ECE\u7EC4\u4E2D\u79FB\u9664\u670D\u52A1\u5668: ${serverId}`);\n  }\n\n  public async startAll(): Promise<void> {\n    const results = await Promise.allSettled(\n      Array.from(this.servers.values()).map(server => server.start())\n    );\n\n    const failed = results.filter(result => result.status === 'rejected');\n    if (failed.length > 0) {\n      console.error(`\u542F\u52A8 ${failed.length} \u4E2A\u670D\u52A1\u5668\u5931\u8D25`);\n    }\n  }\n\n  public async stopAll(): Promise<void> {\n    const results = await Promise.allSettled(\n      Array.from(this.servers.values()).map(server => server.stop())\n    );\n\n    const failed = results.filter(result => result.status === 'rejected');\n    if (failed.length > 0) {\n      console.error(`\u505C\u6B62 ${failed.length} \u4E2A\u670D\u52A1\u5668\u5931\u8D25`);\n    }\n  }\n\n  public getServers(): McpServer[] {\n    return Array.from(this.servers.values());\n  }\n\n  public getServer(serverId: string): McpServer | undefined {\n    return this.servers.get(serverId);\n  }\n\n  public async healthCheckAll(): Promise<ServerGroupHealth> {\n    const serverHealths = await Promise.all(\n      Array.from(this.servers.entries()).map(async ([id, server]) => {\n        const health = await server.healthCheck();\n        return { serverId: id, health };\n      })\n    );\n\n    const unhealthyServers = serverHealths.filter(({ health }) => health.status === 'unhealthy');\n\n    return {\n      status: unhealthyServers.length === 0 ? 'healthy' : 'degraded',\n      timestamp: Date.now(),\n      servers: serverHealths,\n      summary: {\n        total: serverHealths.length,\n        healthy: serverHealths.length - unhealthyServers.length,\n        unhealthy: unhealthyServers.length,\n      },\n    };\n  }\n}\n\n// \u7C7B\u578B\u5B9A\u4E49\nexport interface ServerHealth {\n  status: 'healthy' | 'unhealthy';\n  timestamp: number;\n  checks: Array<{\n    name: string;\n    status: 'pass' | 'fail';\n    message: string;\n  }>;\n}\n\nexport interface ServerGroupHealth {\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  timestamp: number;\n  servers: Array<{ serverId: string; health: ServerHealth }>;\n  summary: {\n    total: number;\n    healthy: number;\n    unhealthy: number;\n  };\n}\n", "import { promises as fs } from 'fs';\nimport path from 'path';\nimport os from 'os';\nimport type { BladeConfig } from '../../config/types/index.js';\nimport type { McpServer, McpConfig } from '../types/mcp.js';\n\nexport class McpConfigManager {\n  private config: BladeConfig;\n  private configPath: string;\n\n  constructor(config: BladeConfig) {\n    this.config = config;\n    this.configPath = this.getDefaultConfigPath();\n  }\n\n  private getDefaultConfigPath(): string {\n    const homeDir = os.homedir();\n    return path.join(homeDir, '.blade', 'mcp-config.json');\n  }\n\n  public async initialize(): Promise<void> {\n    // \u786E\u4FDD\u914D\u7F6E\u76EE\u5F55\u5B58\u5728\n    const configDir = path.dirname(this.configPath);\n    try {\n      await fs.mkdir(configDir, { recursive: true });\n    } catch (error) {\n      // \u5FFD\u7565\u76EE\u5F55\u5DF2\u5B58\u5728\u7684\u9519\u8BEF\n    }\n\n    console.log('MCP\u914D\u7F6E\u7BA1\u7406\u5668\u521D\u59CB\u5316\u5B8C\u6210');\n  }\n\n  public async loadConfig(): Promise<McpConfig> {\n    try {\n      // \u5C1D\u8BD5\u4ECE\u6587\u4EF6\u52A0\u8F7D\u914D\u7F6E\n      await fs.access(this.configPath);\n      const content = await fs.readFile(this.configPath, 'utf-8');\n      const fileConfig = JSON.parse(content);\n      \n      // \u5408\u5E76\u9ED8\u8BA4\u914D\u7F6E\u548C\u6587\u4EF6\u914D\u7F6E\n      return this.mergeConfig(this.getDefaultConfig(), fileConfig);\n    } catch (error) {\n      if ((error as any).code === 'ENOENT') {\n        // \u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u8FD4\u56DE\u9ED8\u8BA4\u914D\u7F6E\n        console.log('MCP\u914D\u7F6E\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E');\n        return this.getDefaultConfig();\n      }\n      \n      console.error('\u52A0\u8F7DMCP\u914D\u7F6E\u5931\u8D25:', error);\n      return this.getDefaultConfig();\n    }\n  }\n\n  public async saveConfig(config: McpConfig): Promise<void> {\n    try {\n      const content = JSON.stringify(config, null, 2);\n      await fs.writeFile(this.configPath, content, 'utf-8');\n      console.log(`MCP\u914D\u7F6E\u5DF2\u4FDD\u5B58: ${this.configPath}`);\n    } catch (error) {\n      console.error('\u4FDD\u5B58MCP\u914D\u7F6E\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  private getDefaultConfig(): McpConfig {\n    return {\n      enabled: true,\n      servers: [],\n      autoConnect: false,\n      timeout: 30000,\n      maxConnections: 10,\n      defaultTransport: 'stdio',\n      security: {\n        validateCertificates: true,\n        allowedOrigins: ['localhost'],\n        maxMessageSize: 1024 * 1024, // 1MB\n      },\n      logging: {\n        enabled: true,\n        level: 'info',\n        filePath: path.join(os.homedir(), '.blade', 'mcp.log'),\n      },\n      caching: {\n        enabled: true,\n        ttl: 300, // 5\u5206\u949F\n        maxSize: 1000,\n      },\n    };\n  }\n\n  private mergeConfig(defaultConfig: McpConfig, fileConfig: Partial<McpConfig>): McpConfig {\n    return {\n      ...defaultConfig,\n      ...fileConfig,\n      servers: this.mergeServers(defaultConfig.servers, fileConfig.servers || []),\n      security: {\n        ...defaultConfig.security,\n        ...(fileConfig.security || {}),\n      },\n      logging: {\n        ...defaultConfig.logging,\n        ...(fileConfig.logging || {}),\n      },\n      caching: {\n        ...defaultConfig.caching,\n        ...(fileConfig.caching || {}),\n      },\n    };\n  }\n\n  private mergeServers(\n    defaultServers: McpServer[],\n    fileServers: Partial<McpServer>[]\n  ): McpServer[] {\n    const mergedServers = [...defaultServers];\n    \n    for (const fileServer of fileServers) {\n      if (!fileServer.id) continue;\n      \n      const existingIndex = mergedServers.findIndex(s => s.id === fileServer.id);\n      if (existingIndex >= 0) {\n        // \u5408\u5E76\u73B0\u6709\u670D\u52A1\u5668\u914D\u7F6E\n        mergedServers[existingIndex] = {\n          ...mergedServers[existingIndex],\n          ...fileServer,\n        };\n      } else {\n        // \u6DFB\u52A0\u65B0\u670D\u52A1\u5668\n        mergedServers.push({\n          id: fileServer.id,\n          name: fileServer.name || fileServer.id,\n          endpoint: fileServer.endpoint || '',\n          transport: fileServer.transport || 'stdio',\n          enabled: fileServer.enabled !== false,\n          config: fileServer.config || {},\n          capabilities: fileServer.capabilities || [],\n          autoConnect: fileServer.autoConnect || false,\n        } as McpServer);\n      }\n    }\n    \n    return mergedServers;\n  }\n\n  public async addServer(server: Omit<McpServer, 'id'> & { id?: string }): Promise<string> {\n    const config = await this.loadConfig();\n    \n    // \u751F\u6210\u670D\u52A1\u5668ID\n    const serverId = server.id || this.generateServerId(server.name);\n    \n    // \u68C0\u67E5\u662F\u5426\u5DF2\u5B58\u5728\n    if (config.servers.some(s => s.id === serverId)) {\n      throw new Error(`MCP\u670D\u52A1\u5668\u5DF2\u5B58\u5728: ${serverId}`);\n    }\n    \n    // \u6DFB\u52A0\u670D\u52A1\u5668\n    config.servers.push({\n      id: serverId,\n      name: server.name,\n      endpoint: server.endpoint,\n      transport: server.transport,\n      enabled: server.enabled !== false,\n      config: server.config || {},\n      capabilities: server.capabilities || [],\n      autoConnect: server.autoConnect || false,\n    });\n    \n    // \u4FDD\u5B58\u914D\u7F6E\n    await this.saveConfig(config);\n    \n    console.log(`\u6DFB\u52A0MCP\u670D\u52A1\u5668: ${server.name} (${serverId})`);\n    \n    return serverId;\n  }\n\n  public async removeServer(serverId: string): Promise<void> {\n    const config = await this.loadConfig();\n    \n    // \u68C0\u67E5\u670D\u52A1\u5668\u662F\u5426\u5B58\u5728\n    const serverIndex = config.servers.findIndex(s => s.id === serverId);\n    if (serverIndex < 0) {\n      throw new Error(`MCP\u670D\u52A1\u5668\u672A\u627E\u5230: ${serverId}`);\n    }\n    \n    // \u79FB\u9664\u670D\u52A1\u5668\n    const removedServer = config.servers.splice(serverIndex, 1)[0];\n    \n    // \u4FDD\u5B58\u914D\u7F6E\n    await this.saveConfig(config);\n    \n    console.log(`\u79FB\u9664MCP\u670D\u52A1\u5668: ${removedServer.name} (${serverId})`);\n  }\n\n  public async updateServer(serverId: string, updates: Partial<McpServer>): Promise<void> {\n    const config = await this.loadConfig();\n    \n    // \u67E5\u627E\u670D\u52A1\u5668\n    const serverIndex = config.servers.findIndex(s => s.id === serverId);\n    if (serverIndex < 0) {\n      throw new Error(`MCP\u670D\u52A1\u5668\u672A\u627E\u5230: ${serverId}`);\n    }\n    \n    // \u66F4\u65B0\u670D\u52A1\u5668\n    config.servers[serverIndex] = {\n      ...config.servers[serverIndex],\n      ...updates,\n    };\n    \n    // \u4FDD\u5B58\u914D\u7F6E\n    await this.saveConfig(config);\n    \n    console.log(`\u66F4\u65B0MCP\u670D\u52A1\u5668: ${serverId}`);\n  }\n\n  public async getServer(serverId: string): Promise<McpServer | undefined> {\n    const config = await this.loadConfig();\n    return config.servers.find(s => s.id === serverId);\n  }\n\n  public async getAllServers(): Promise<McpServer[]> {\n    const config = await this.loadConfig();\n    return config.servers;\n  }\n\n  public async enableServer(serverId: string): Promise<void> {\n    await this.updateServer(serverId, { enabled: true });\n  }\n\n  public async disableServer(serverId: string): Promise<void> {\n    await this.updateServer(serverId, { enabled: false });\n  }\n\n  public async setAutoConnect(serverId: string, autoConnect: boolean): Promise<void> {\n    await this.updateServer(serverId, { autoConnect });\n  }\n\n  private generateServerId(name: string): string {\n    // \u57FA\u4E8E\u540D\u79F0\u751F\u6210\u552F\u4E00ID\n    const baseId = name\n      .toLowerCase()\n      .replace(/[^a-z0-9]/g, '-')\n      .replace(/-+/g, '-')\n      .replace(/^-|-$/g, '');\n    \n    // \u6DFB\u52A0\u65F6\u95F4\u6233\u786E\u4FDD\u552F\u4E00\u6027\n    return `${baseId}-${Date.now()}`;\n  }\n\n  public async backupConfig(backupPath: string): Promise<void> {\n    try {\n      await fs.copyFile(this.configPath, backupPath);\n      console.log(`MCP\u914D\u7F6E\u5907\u4EFD\u5DF2\u521B\u5EFA: ${backupPath}`);\n    } catch (error) {\n      if ((error as any).code === 'ENOENT') {\n        console.log('\u6CA1\u6709MCP\u914D\u7F6E\u9700\u8981\u5907\u4EFD');\n      } else {\n        console.error('MCP\u914D\u7F6E\u5907\u4EFD\u5931\u8D25:', error);\n        throw error;\n      }\n    }\n  }\n\n  public async restoreConfig(backupPath: string): Promise<void> {\n    try {\n      await fs.copyFile(backupPath, this.configPath);\n      console.log(`MCP\u914D\u7F6E\u5DF2\u4ECE\u5907\u4EFD\u6062\u590D: ${backupPath}`);\n    } catch (error) {\n      console.error('MCP\u914D\u7F6E\u6062\u590D\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  public async validateConfig(config: McpConfig): Promise<ConfigValidationResult> {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n    \n    // \u9A8C\u8BC1\u57FA\u672C\u914D\u7F6E\n    if (config.timeout && config.timeout < 1000) {\n      warnings.push('\u8D85\u65F6\u65F6\u95F4\u8FC7\u77ED\uFF0C\u5EFA\u8BAE\u81F3\u5C111000ms');\n    }\n    \n    if (config.maxConnections && config.maxConnections > 100) {\n      warnings.push('\u6700\u5927\u8FDE\u63A5\u6570\u8FC7\u5927\uFF0C\u53EF\u80FD\u5F71\u54CD\u6027\u80FD');\n    }\n    \n    // \u9A8C\u8BC1\u670D\u52A1\u5668\u914D\u7F6E\n    for (const server of config.servers) {\n      if (!server.endpoint) {\n        errors.push(`\u670D\u52A1\u5668 ${server.name} \u7F3A\u5C11\u7AEF\u70B9\u914D\u7F6E`);\n      }\n      \n      if (!['stdio', 'sse', 'websocket'].includes(server.transport)) {\n        errors.push(`\u670D\u52A1\u5668 ${server.name} \u4F7F\u7528\u4E0D\u652F\u6301\u7684\u4F20\u8F93\u7C7B\u578B: ${server.transport}`);\n      }\n    }\n    \n    return {\n      valid: errors.length === 0,\n      errors,\n      warnings,\n    };\n  }\n\n  public async migrateConfig(): Promise<void> {\n    // \u8FD9\u91CC\u53EF\u4EE5\u5B9E\u73B0\u914D\u7F6E\u8FC1\u79FB\u903B\u8F91\n    // \u6682\u65F6\u7559\u7A7A\n    console.log('\u68C0\u67E5MCP\u914D\u7F6E\u8FC1\u79FB...');\n  }\n}\n\n// \u7C7B\u578B\u5B9A\u4E49\ninterface ConfigValidationResult {\n  valid: boolean;\n  errors: string[];\n  warnings: string[];\n}", "import { randomBytes, createHash } from 'crypto';\nimport { URLSearchParams } from 'url';\nimport axios from 'axios';\nimport type { BladeConfig } from '../config/types/index.js';\n\nexport class OAuthProvider {\n  protected config: BladeConfig;\n  protected clientId: string;\n  protected clientSecret: string;\n  protected redirectUri: string;\n  protected tokenUrl: string;\n  protected authorizeUrl: string;\n  protected scopes: string[];\n\n  constructor(config: BladeConfig, options: OAuthOptions) {\n    this.config = config;\n    this.clientId = options.clientId;\n    this.clientSecret = options.clientSecret;\n    this.redirectUri = options.redirectUri;\n    this.tokenUrl = options.tokenUrl;\n    this.authorizeUrl = options.authorizeUrl;\n    this.scopes = options.scopes || [];\n  }\n\n  public async generateAuthorizationUrl(state?: string): Promise<string> {\n    if (!state) {\n      state = this.generateState();\n    }\n\n    const params = new URLSearchParams({\n      client_id: this.clientId,\n      redirect_uri: this.redirectUri,\n      response_type: 'code',\n      scope: this.scopes.join(' '),\n      state: state\n    });\n\n    return `${this.authorizeUrl}?${params.toString()}`;\n  }\n\n  public async exchangeCodeForToken(code: string, state?: string): Promise<OAuthToken> {\n    try {\n      const response = await axios.post(this.tokenUrl, {\n        client_id: this.clientId,\n        client_secret: this.clientSecret,\n        redirect_uri: this.redirectUri,\n        grant_type: 'authorization_code',\n        code: code,\n        state: state\n      }, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n\n      const tokenData = response.data;\n      \n      return {\n        accessToken: tokenData.access_token,\n        refreshToken: tokenData.refresh_token,\n        tokenType: tokenData.token_type,\n        expiresIn: tokenData.expires_in,\n        scope: tokenData.scope,\n        issuedAt: Math.floor(Date.now() / 1000)\n      };\n    } catch (error) {\n      console.error('\u4EE4\u724C\u4EA4\u6362\u5931\u8D25:', error);\n      throw new Error('\u4EE4\u724C\u4EA4\u6362\u5931\u8D25');\n    }\n  }\n\n  public async refreshAccessToken(refreshToken: string): Promise<OAuthToken> {\n    try {\n      const response = await axios.post(this.tokenUrl, {\n        client_id: this.clientId,\n        client_secret: this.clientSecret,\n        grant_type: 'refresh_token',\n        refresh_token: refreshToken\n      }, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n\n      const tokenData = response.data;\n      \n      return {\n        accessToken: tokenData.access_token,\n        refreshToken: tokenData.refresh_token || refreshToken,\n        tokenType: tokenData.token_type,\n        expiresIn: tokenData.expires_in,\n        scope: tokenData.scope,\n        issuedAt: Math.floor(Date.now() / 1000)\n      };\n    } catch (error) {\n      console.error('\u4EE4\u724C\u5237\u65B0\u5931\u8D25:', error);\n      throw new Error('\u4EE4\u724C\u5237\u65B0\u5931\u8D25');\n    }\n  }\n\n  protected generateState(): string {\n    return randomBytes(32).toString('hex');\n  }\n\n  protected generateCodeVerifier(): string {\n    return randomBytes(32).toString('hex');\n  }\n\n  protected generateCodeChallenge(verifier: string): string {\n    return createHash('sha256')\n      .update(verifier)\n      .digest('base64')\n      .replace(/\\+/g, '-')\n      .replace(/\\//g, '_')\n      .replace(/=/g, '');\n  }\n\n  public validateState(state: string, expectedState: string): boolean {\n    return state === expectedState;\n  }\n\n  public isTokenExpired(token: OAuthToken): boolean {\n    if (!token.expiresIn || !token.issuedAt) {\n      return false;\n    }\n    \n    const expirationTime = token.issuedAt + token.expiresIn;\n    const currentTime = Math.floor(Date.now() / 1000);\n    \n    // \u63D0\u524D5\u5206\u949F\u5237\u65B0\u4EE4\u724C\n    return currentTime >= (expirationTime - 300);\n  }\n\n  public getAuthorizationHeader(token: OAuthToken): string {\n    return `${token.tokenType} ${token.accessToken}`;\n  }\n}\n\nexport class GoogleOAuthProvider extends OAuthProvider {\n  constructor(config: BladeConfig) {\n    super(config, {\n      clientId: process.env.GOOGLE_CLIENT_ID || '',\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET || '',\n      redirectUri: 'http://localhost:3000/oauth/callback/google',\n      tokenUrl: 'https://oauth2.googleapis.com/token',\n      authorizeUrl: 'https://accounts.google.com/o/oauth2/v2/auth',\n      scopes: [\n        'openid',\n        'profile',\n        'email',\n        'https://www.googleapis.com/auth/userinfo.profile',\n        'https://www.googleapis.com/auth/userinfo.email'\n      ]\n    });\n  }\n\n  public async getUserInfo(accessToken: string): Promise<GoogleUserInfo> {\n    try {\n      const response = await axios.get('https://www.googleapis.com/oauth2/v2/userinfo', {\n        headers: {\n          'Authorization': `Bearer ${accessToken}`\n        }\n      });\n\n      const userData = response.data;\n      \n      return {\n        id: userData.id,\n        email: userData.email,\n        name: userData.name,\n        given_name: userData.given_name,\n        family_name: userData.family_name,\n        picture: userData.picture,\n        locale: userData.locale,\n        verified_email: userData.verified_email\n      };\n    } catch (error) {\n      console.error('\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25:', error);\n      throw new Error('\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25');\n    }\n  }\n}\n\nexport class GitHubOAuthProvider extends OAuthProvider {\n  constructor(config: BladeConfig) {\n    super(config, {\n      clientId: process.env.GITHUB_CLIENT_ID || '',\n      clientSecret: process.env.GITHUB_CLIENT_SECRET || '',\n      redirectUri: 'http://localhost:3000/oauth/callback/github',\n      tokenUrl: 'https://github.com/login/oauth/access_token',\n      authorizeUrl: 'https://github.com/login/oauth/authorize',\n      scopes: ['user', 'repo', 'gist']\n    });\n  }\n\n  public async getUserInfo(accessToken: string): Promise<GitHubUserInfo> {\n    try {\n      const response = await axios.get('https://api.github.com/user', {\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Accept': 'application/vnd.github.v3+json'\n        }\n      });\n\n      const userData = response.data;\n      \n      return {\n        id: userData.id,\n        login: userData.login,\n        name: userData.name,\n        email: userData.email,\n        avatar_url: userData.avatar_url,\n        url: userData.html_url,\n        company: userData.company,\n        blog: userData.blog,\n        location: userData.location,\n        bio: userData.bio,\n        public_repos: userData.public_repos,\n        public_gists: userData.public_gists,\n        followers: userData.followers,\n        following: userData.following,\n        created_at: userData.created_at,\n        updated_at: userData.updated_at\n      };\n    } catch (error) {\n      console.error('\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25:', error);\n      throw new Error('\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25');\n    }\n  }\n}\n\n// \u7C7B\u578B\u5B9A\u4E49\ninterface OAuthOptions {\n  clientId: string;\n  clientSecret: string;\n  redirectUri: string;\n  tokenUrl: string;\n  authorizeUrl: string;\n  scopes: string[];\n}\n\ninterface OAuthToken {\n  accessToken: string;\n  refreshToken?: string;\n  tokenType: string;\n  expiresIn?: number;\n  scope?: string;\n  issuedAt?: number;\n}\n\ninterface GoogleUserInfo {\n  id: string;\n  email: string;\n  name: string;\n  given_name: string;\n  family_name: string;\n  picture: string;\n  locale: string;\n  verified_email: boolean;\n}\n\ninterface GitHubUserInfo {\n  id: number;\n  login: string;\n  name: string;\n  email: string;\n  avatar_url: string;\n  url: string;\n  company: string;\n  blog: string;\n  location: string;\n  bio: string;\n  public_repos: number;\n  public_gists: number;\n  followers: number;\n  following: number;\n  created_at: string;\n  updated_at: string;\n}", "import { promises as fs } from 'fs';\nimport path from 'path';\nimport os from 'os';\nimport crypto from 'crypto';\n\nexport class OAuthTokenStorage {\n  private storagePath: string;\n  private encryptionKey: string;\n\n  constructor(options: TokenStorageOptions = {}) {\n    this.storagePath = options.storagePath || this.getDefaultStoragePath();\n    this.encryptionKey = options.encryptionKey || this.generateDefaultKey();\n  }\n\n  private getDefaultStoragePath(): string {\n    const homeDir = os.homedir();\n    return path.join(homeDir, '.blade', 'oauth-tokens.json');\n  }\n\n  private generateDefaultKey(): string {\n    // \u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u5E94\u8BE5\u4ECE\u5B89\u5168\u7684\u5730\u65B9\u83B7\u53D6\u5BC6\u94A5\n    return process.env.BLADE_OAUTH_ENCRYPTION_KEY || 'default-encryption-key-32-characters';\n  }\n\n  public async saveToken(provider: string, token: OAuthToken): Promise<void> {\n    try {\n      // \u786E\u4FDD\u5B58\u50A8\u76EE\u5F55\u5B58\u5728\n      const dir = path.dirname(this.storagePath);\n      try {\n        await fs.mkdir(dir, { recursive: true });\n      } catch (error: any) {\n        if (error.code !== 'EEXIST') {\n          throw error;\n        }\n      }\n\n      // \u52A0\u8F7D\u73B0\u6709\u4EE4\u724C\n      const tokens = await this.loadAllTokens();\n      \n      // \u52A0\u5BC6\u4EE4\u724C\n      const encryptedToken = this.encryptToken(token);\n      \n      // \u4FDD\u5B58\u4EE4\u724C\n      tokens[provider] = {\n        ...encryptedToken,\n        timestamp: Date.now()\n      };\n      \n      const content = JSON.stringify(tokens, null, 2);\n      await fs.writeFile(this.storagePath, content, 'utf-8');\n      \n      console.log(`\u4EE4\u724C\u5DF2\u4FDD\u5B58: ${provider}`);\n    } catch (error) {\n      console.error('\u4FDD\u5B58\u4EE4\u724C\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  public async getToken(provider: string): Promise<OAuthToken | null> {\n    try {\n      const tokens = await this.loadAllTokens();\n      const storedToken = tokens[provider];\n      \n      if (!storedToken) {\n        return null;\n      }\n      \n      // \u68C0\u67E5\u4EE4\u724C\u662F\u5426\u8FC7\u671F\n      if (this.isTokenExpired(storedToken)) {\n        console.log(`\u4EE4\u724C\u5DF2\u8FC7\u671F: ${provider}`);\n        return null;\n      }\n      \n      // \u89E3\u5BC6\u4EE4\u724C\n      return this.decryptToken(storedToken);\n    } catch (error) {\n      console.error('\u83B7\u53D6\u4EE4\u724C\u5931\u8D25:', error);\n      return null;\n    }\n  }\n\n  public async removeToken(provider: string): Promise<void> {\n    try {\n      const tokens = await this.loadAllTokens();\n      \n      if (tokens[provider]) {\n        delete tokens[provider];\n        const content = JSON.stringify(tokens, null, 2);\n        await fs.writeFile(this.storagePath, content, 'utf-8');\n        console.log(`\u4EE4\u724C\u5DF2\u5220\u9664: ${provider}`);\n      }\n    } catch (error) {\n      console.error('\u5220\u9664\u4EE4\u724C\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  public async clearAllTokens(): Promise<void> {\n    try {\n      await fs.unlink(this.storagePath);\n      console.log('\u6240\u6709\u4EE4\u724C\u5DF2\u6E05\u9664');\n    } catch (error: any) {\n      if (error.code !== 'ENOENT') {\n        console.error('\u6E05\u9664\u4EE4\u724C\u5931\u8D25:', error);\n        throw error;\n      }\n    }\n  }\n\n  public async listProviders(): Promise<string[]> {\n    try {\n      const tokens = await this.loadAllTokens();\n      return Object.keys(tokens);\n    } catch (error) {\n      console.error('\u5217\u51FA\u63D0\u4F9B\u8005\u5931\u8D25:', error);\n      return [];\n    }\n  }\n\n  public async getTokenInfo(provider: string): Promise<TokenInfo | null> {\n    try {\n      const tokens = await this.loadAllTokens();\n      const storedToken = tokens[provider];\n      \n      if (!storedToken) {\n        return null;\n      }\n      \n      return {\n        provider,\n        issuedAt: storedToken.issuedAt,\n        expiresAt: storedToken.issuedAt && storedToken.expiresIn \n          ? storedToken.issuedAt + storedToken.expiresIn \n          : undefined,\n        isExpired: this.isTokenExpired(storedToken),\n        scope: storedToken.scope,\n        tokenType: storedToken.tokenType\n      };\n    } catch (error) {\n      console.error('\u83B7\u53D6\u4EE4\u724C\u4FE1\u606F\u5931\u8D25:', error);\n      return null;\n    }\n  }\n\n  private async loadAllTokens(): Promise<Record<string, StoredToken>> {\n    try {\n      await fs.access(this.storagePath);\n      const content = await fs.readFile(this.storagePath, 'utf-8');\n      return JSON.parse(content);\n    } catch (error: any) {\n      if (error.code === 'ENOENT') {\n        return {};\n      }\n      throw error;\n    }\n  }\n\n  private encryptToken(token: OAuthToken): StoredToken {\n    try {\n      const algorithm = 'aes-256-cbc';\n      const key = crypto.createHash('sha256').update(this.encryptionKey).digest();\n      const iv = crypto.randomBytes(16);\n      \n      const cipher = crypto.createCipheriv(algorithm, key, iv);\n      \n      let encrypted = cipher.update(JSON.stringify(token), 'utf8', 'hex');\n      encrypted += cipher.final('hex');\n      \n      return {\n        accessToken: encrypted,\n        refreshToken: token.refreshToken \n          ? this.encryptString(token.refreshToken) \n          : undefined,\n        tokenType: token.tokenType,\n        expiresIn: token.expiresIn,\n        scope: token.scope,\n        issuedAt: token.issuedAt,\n        iv: iv.toString('hex'),\n        encrypted: true\n      };\n    } catch (error) {\n      console.error('\u52A0\u5BC6\u4EE4\u724C\u5931\u8D25\uFF0C\u4F7F\u7528\u660E\u6587\u5B58\u50A8:', error);\n      return {\n        ...token,\n        encrypted: false\n      };\n    }\n  }\n\n  private decryptToken(storedToken: StoredToken): OAuthToken {\n    if (!storedToken.encrypted) {\n      return storedToken as unknown as OAuthToken;\n    }\n    \n    try {\n      const algorithm = 'aes-256-cbc';\n      const key = crypto.createHash('sha256').update(this.encryptionKey).digest();\n      const iv = Buffer.from(storedToken.iv!, 'hex');\n      \n      const decipher = crypto.createDecipheriv(algorithm, key, iv);\n      \n      let decrypted = decipher.update(storedToken.accessToken!, 'hex', 'utf8');\n      decrypted += decipher.final('utf8');\n      \n      const token: OAuthToken = JSON.parse(decrypted);\n      \n      if (storedToken.refreshToken) {\n        token.refreshToken = this.decryptString(storedToken.refreshToken);\n      }\n      \n      return token;\n    } catch (error) {\n      console.error('\u89E3\u5BC6\u4EE4\u724C\u5931\u8D25:', error);\n      throw new Error('\u4EE4\u724C\u89E3\u5BC6\u5931\u8D25');\n    }\n  }\n\n  private encryptString(text: string): string {\n    try {\n      const algorithm = 'aes-256-cbc';\n      const key = crypto.createHash('sha256').update(this.encryptionKey).digest();\n      const iv = crypto.randomBytes(16);\n      \n      const cipher = crypto.createCipheriv(algorithm, key, iv);\n      \n      let encrypted = cipher.update(text, 'utf8', 'hex');\n      encrypted += cipher.final('hex');\n      \n      return `${encrypted}:${iv.toString('hex')}`;\n    } catch (error) {\n      console.error('\u5B57\u7B26\u4E32\u52A0\u5BC6\u5931\u8D25:', error);\n      return text;\n    }\n  }\n\n  private decryptString(encryptedText: string): string {\n    try {\n      const [encrypted, ivHex] = encryptedText.split(':');\n      const algorithm = 'aes-256-cbc';\n      const key = crypto.createHash('sha256').update(this.encryptionKey).digest();\n      const iv = Buffer.from(ivHex, 'hex');\n      \n      const decipher = crypto.createDecipheriv(algorithm, key, iv);\n      \n      let decrypted = decipher.update(encrypted, 'hex', 'utf8');\n      decrypted += decipher.final('utf8');\n      \n      return decrypted;\n    } catch (error) {\n      console.error('\u5B57\u7B26\u4E32\u89E3\u5BC6\u5931\u8D25:', error);\n      return encryptedText;\n    }\n  }\n\n  private isTokenExpired(storedToken: StoredToken): boolean {\n    if (!storedToken.expiresIn || !storedToken.issuedAt) {\n      return false;\n    }\n    \n    const expirationTime = storedToken.issuedAt + storedToken.expiresIn;\n    const currentTime = Math.floor(Date.now() / 1000);\n    \n    // \u63D0\u524D5\u5206\u949F\u5237\u65B0\u4EE4\u724C\n    return currentTime >= (expirationTime - 300);\n  }\n\n  public async cleanupExpiredTokens(): Promise<void> {\n    try {\n      const tokens = await this.loadAllTokens();\n      let modified = false;\n      \n      for (const [provider, storedToken] of Object.entries(tokens)) {\n        if (this.isTokenExpired(storedToken)) {\n          delete tokens[provider];\n          modified = true;\n          console.log(`\u5DF2\u6E05\u7406\u8FC7\u671F\u4EE4\u724C: ${provider}`);\n        }\n      }\n      \n      if (modified) {\n        const content = JSON.stringify(tokens, null, 2);\n        await fs.writeFile(this.storagePath, content, 'utf-8');\n      }\n    } catch (error) {\n      console.error('\u6E05\u7406\u8FC7\u671F\u4EE4\u724C\u5931\u8D25:', error);\n    }\n  }\n\n  public async backupTokens(backupPath: string): Promise<void> {\n    try {\n      await fs.copyFile(this.storagePath, backupPath);\n      console.log(`\u4EE4\u724C\u5907\u4EFD\u5DF2\u521B\u5EFA: ${backupPath}`);\n    } catch (error: any) {\n      if (error.code === 'ENOENT') {\n        console.log('\u6CA1\u6709\u4EE4\u724C\u9700\u8981\u5907\u4EFD');\n      } else {\n        console.error('\u4EE4\u724C\u5907\u4EFD\u5931\u8D25:', error);\n        throw error;\n      }\n    }\n  }\n\n  public async restoreTokens(backupPath: string): Promise<void> {\n    try {\n      await fs.copyFile(backupPath, this.storagePath);\n      console.log(`\u4EE4\u724C\u5DF2\u4ECE\u5907\u4EFD\u6062\u590D: ${backupPath}`);\n    } catch (error) {\n      console.error('\u4EE4\u724C\u6062\u590D\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n}\n\n// \u7C7B\u578B\u5B9A\u4E49\ninterface TokenStorageOptions {\n  storagePath?: string;\n  encryptionKey?: string;\n}\n\ninterface OAuthToken {\n  accessToken: string;\n  refreshToken?: string;\n  tokenType: string;\n  expiresIn?: number;\n  scope?: string;\n  issuedAt?: number;\n}\n\ninterface StoredToken extends Partial<OAuthToken> {\n  timestamp?: number;\n  encrypted?: boolean;\n  iv?: string;\n}\n\ninterface TokenInfo {\n  provider: string;\n  issuedAt?: number;\n  expiresAt?: number;\n  isExpired: boolean;\n  scope?: string;\n  tokenType?: string;\n}", "/**\n * \u914D\u7F6E\u670D\u52A1 - \u5BF9\u63A5 @blade/core \u914D\u7F6E\u7CFB\u7EDF\n * \u8D1F\u8D23\u8BFB\u53D6\u6240\u6709\u914D\u7F6E\u6587\u4EF6\u548C\u73AF\u5883\u53D8\u91CF\uFF0C\u7136\u540E\u8C03\u7528 core \u7684 createConfig \u51FD\u6570\n */\n\nimport fs from 'fs/promises';\nimport path from 'path';\nimport os from 'os';\nimport { createConfig, ConfigLayers, BladeUnifiedConfig } from '@blade-ai/core';\n\n// \u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84\u914D\u7F6E\nconst CONFIG_PATHS = {\n  global: {\n    userConfig: `${os.homedir()}/.blade/config.json`,\n    userConfigLegacy: `${os.homedir()}/.blade-config.json`,\n    trustedFolders: `${os.homedir()}/.blade/trusted-folders.json`,\n  },\n  project: {\n    bladeConfig: './.blade/settings.local.json',\n    packageJson: './package.json',\n    bladeConfigRoot: './.blade/config.json',\n  },\n  env: {\n    configFile: process.env.BLADE_CONFIG_FILE || '',\n  },\n};\n\n/**\n * \u914D\u7F6E\u670D\u52A1\u7C7B\n */\nexport class ConfigService {\n  private static instance: ConfigService;\n  private config: BladeUnifiedConfig | null = null;\n\n  private constructor() {}\n\n  public static getInstance(): ConfigService {\n    if (!ConfigService.instance) {\n      ConfigService.instance = new ConfigService();\n    }\n    return ConfigService.instance;\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u914D\u7F6E\u670D\u52A1\n   */\n  async initialize(): Promise<BladeUnifiedConfig> {\n    try {\n      // \u8BFB\u53D6\u6240\u6709\u914D\u7F6E\u5C42\u7684\u914D\u7F6E\n      const layers = await this.loadAllConfigLayers();\n      \n      // \u4F7F\u7528 core \u5305\u7684 createConfig \u51FD\u6570\u5408\u5E76\u914D\u7F6E\n      const result = createConfig(layers, {\n        validate: true,\n        throwOnError: false,\n      });\n\n      if (result.errors.length > 0) {\n        console.warn('\u914D\u7F6E\u9A8C\u8BC1\u8B66\u544A:', result.errors.join(', '));\n      }\n\n      this.config = result.config;\n      return this.config;\n\n    } catch (error) {\n      console.error('\u914D\u7F6E\u521D\u59CB\u5316\u5931\u8D25:', error);\n      \n      // \u8FD4\u56DE\u9ED8\u8BA4\u914D\u7F6E\n      const defaultResult = createConfig({}, { validate: false });\n      this.config = defaultResult.config;\n      return this.config;\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u914D\u7F6E\n   */\n  getConfig(): BladeUnifiedConfig {\n    if (!this.config) {\n      throw new Error('\u914D\u7F6E\u5C1A\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5148\u8C03\u7528 initialize() \u65B9\u6CD5');\n    }\n    return this.config;\n  }\n\n  /**\n   * \u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\n   */\n  async reload(): Promise<BladeUnifiedConfig> {\n    this.config = null;\n    return this.initialize();\n  }\n\n  /**\n   * \u52A0\u8F7D\u6240\u6709\u914D\u7F6E\u5C42\n   */\n  private async loadAllConfigLayers(): Promise<ConfigLayers> {\n    const layers: ConfigLayers = {};\n\n    try {\n      // \u52A0\u8F7D\u5168\u5C40\u914D\u7F6E\n      layers.global = await this.loadGlobalConfig();\n      \n      // \u52A0\u8F7D\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\n      layers.env = this.loadEnvConfig();\n      \n      // \u52A0\u8F7D\u7528\u6237\u914D\u7F6E\n      layers.user = await this.loadUserConfig();\n      \n      // \u52A0\u8F7D\u9879\u76EE\u914D\u7F6E\n      layers.project = await this.loadProjectConfig();\n\n    } catch (error) {\n      console.warn('\u914D\u7F6E\u52A0\u8F7D\u8FC7\u7A0B\u4E2D\u51FA\u73B0\u9519\u8BEF:', error);\n    }\n\n    return layers;\n  }\n\n  /**\n   * \u52A0\u8F7D\u5168\u5C40\u914D\u7F6E\n   */\n  private async loadGlobalConfig(): Promise<any> {\n    // \u5168\u5C40\u914D\u7F6E\u901A\u5E38\u662F\u786C\u7F16\u7801\u7684\u9ED8\u8BA4\u503C\n    return {\n      auth: {\n        apiKey: '',\n        baseUrl: 'https://apis.iflow.cn/v1',\n        modelName: 'Qwen3-Coder',\n        searchApiKey: '',\n      },\n      ui: {\n        theme: 'GitHub',\n        hideTips: false,\n        hideBanner: false,\n      },\n      security: {\n        sandbox: 'docker',\n        trustedFolders: [],\n        allowedOperations: ['read', 'write', 'execute'],\n      },\n      // \u5176\u4ED6\u9ED8\u8BA4\u914D\u7F6E...\n    };\n  }\n\n  /**\n   * \u52A0\u8F7D\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\n   */\n  private loadEnvConfig(): any {\n    const envConfig: any = {};\n\n    // \u4ECE\u73AF\u5883\u53D8\u91CF\u8BFB\u53D6\u914D\u7F6E\n    if (process.env.BLADE_API_KEY) {\n      envConfig.auth = { ...(envConfig.auth || {}), apiKey: process.env.BLADE_API_KEY };\n    }\n    if (process.env.BLADE_BASE_URL) {\n      envConfig.auth = { ...(envConfig.auth || {}), baseUrl: process.env.BLADE_BASE_URL };\n    }\n    if (process.env.BLADE_MODEL) {\n      envConfig.auth = { ...(envConfig.auth || {}), modelName: process.env.BLADE_MODEL };\n    }\n    if (process.env.BLADE_THEME) {\n      envConfig.ui = { ...(envConfig.ui || {}), theme: process.env.BLADE_THEME };\n    }\n\n    return envConfig;\n  }\n\n  /**\n   * \u52A0\u8F7D\u7528\u6237\u914D\u7F6E\n   */\n  private async loadUserConfig(): Promise<any> {\n    try {\n      const userConfigPath = CONFIG_PATHS.global.userConfig;\n      const configContent = await fs.readFile(userConfigPath, 'utf-8');\n      return JSON.parse(configContent);\n    } catch (error) {\n      // \u7528\u6237\u914D\u7F6E\u6587\u4EF6\u4E0D\u5B58\u5728\u6216\u683C\u5F0F\u9519\u8BEF\uFF0C\u8FD4\u56DE\u7A7A\u914D\u7F6E\n      return {};\n    }\n  }\n\n  /**\n   * \u52A0\u8F7D\u9879\u76EE\u914D\u7F6E\n   */\n  private async loadProjectConfig(): Promise<any> {\n    try {\n      const projectConfigPath = CONFIG_PATHS.project.bladeConfig;\n      const configContent = await fs.readFile(projectConfigPath, 'utf-8');\n      return JSON.parse(configContent);\n    } catch (error) {\n      // \u9879\u76EE\u914D\u7F6E\u6587\u4EF6\u4E0D\u5B58\u5728\u6216\u683C\u5F0F\u9519\u8BEF\uFF0C\u8FD4\u56DE\u7A7A\u914D\u7F6E\n      return {};\n    }\n  }\n\n  /**\n   * \u4FDD\u5B58\u7528\u6237\u914D\u7F6E\n   */\n  async saveUserConfig(config: any): Promise<void> {\n    try {\n      const userConfigPath = CONFIG_PATHS.global.userConfig;\n      const configDir = path.dirname(userConfigPath);\n      \n      // \u786E\u4FDD\u914D\u7F6E\u76EE\u5F55\u5B58\u5728\n      await fs.mkdir(configDir, { recursive: true });\n      \n      // \u4FDD\u5B58\u914D\u7F6E\n      await fs.writeFile(userConfigPath, JSON.stringify(config, null, 2), 'utf-8');\n      \n      // \u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\n      await this.reload();\n      \n    } catch (error) {\n      console.error('\u4FDD\u5B58\u7528\u6237\u914D\u7F6E\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \u66F4\u65B0\u914D\u7F6E\n   */\n  async updateConfig(updates: any): Promise<BladeUnifiedConfig> {\n    // \u8FD9\u91CC\u53EF\u4EE5\u5B9E\u73B0\u914D\u7F6E\u66F4\u65B0\u903B\u8F91\n    // \u76EE\u524D\u7B80\u5355\u5730\u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\n    return this.reload();\n  }\n}", "/**\n * \u547D\u4EE4\u7F16\u6392\u5668 - \u5BF9\u63A5 @blade/core \u670D\u52A1\n * \u4F5C\u4E3A\u7EAF\u7CB9\u7684\u6D41\u7A0B\u7F16\u6392\u5668\uFF0C\u8C03\u7528 core \u5305\u7684\u670D\u52A1\u6765\u5B8C\u6210\u4E1A\u52A1\u903B\u8F91\n */\n\nimport { Agent, LLMManager, ContextComponent, ToolComponent } from '@blade-ai/core';\nimport { ConfigService } from '../config/ConfigService.js';\n\nexport interface CommandResult {\n  success: boolean;\n  output?: string;\n  error?: string;\n  metadata?: Record<string, any>;\n}\n\nexport class CommandOrchestrator {\n  private static instance: CommandOrchestrator;\n  private agent: Agent | null = null;\n  private llmManager: LLMManager | null = null;\n  private contextComponent: ContextComponent | null = null;\n  private toolComponent: ToolComponent | null = null;\n  private configService: ConfigService;\n\n  private constructor() {\n    this.configService = ConfigService.getInstance();\n  }\n\n  public static getInstance(): CommandOrchestrator {\n    if (!CommandOrchestrator.instance) {\n      CommandOrchestrator.instance = new CommandOrchestrator();\n    }\n    return CommandOrchestrator.instance;\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u7F16\u6392\u5668\n   */\n  async initialize(): Promise<void> {\n    try {\n      const config = this.configService.getConfig();\n      \n      // \u521D\u59CB\u5316 core \u670D\u52A1\n      this.agent = new Agent({\n        llm: {\n          provider: config.auth.apiKey ? 'qwen' : 'volcengine',\n          apiKey: config.auth.apiKey,\n          baseUrl: config.auth.baseUrl,\n          modelName: config.auth.modelName,\n        },\n      });\n\n      await this.agent.init();\n      \n      // \u83B7\u53D6\u6838\u5FC3\u7EC4\u4EF6\n      this.llmManager = this.agent.getLLMManager();\n      this.contextComponent = this.agent.getContextComponent();\n      this.toolComponent = this.agent.getToolComponent();\n\n    } catch (error) {\n      console.error('\u547D\u4EE4\u7F16\u6392\u5668\u521D\u59CB\u5316\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * \u6267\u884C\u659C\u6760\u547D\u4EE4\n   */\n  async executeSlashCommand(command: string, args: string[] = []): Promise<CommandResult> {\n    try {\n      if (!this.agent) {\n        await this.initialize();\n      }\n\n      switch (command.toLowerCase()) {\n        case 'help':\n          return await this.executeHelpCommand();\n        case 'clear':\n          return await this.executeClearCommand();\n        case 'status':\n          return await this.executeStatusCommand();\n        case 'config':\n          return await this.executeConfigCommand(args);\n        case 'tools':\n          return await this.executeToolsCommand();\n        default:\n          return {\n            success: false,\n            error: `\u672A\u77E5\u547D\u4EE4: /${command}`,\n          };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: `\u6267\u884C\u547D\u4EE4\u5931\u8D25: ${error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF'}`,\n      };\n    }\n  }\n\n  /**\n   * \u6267\u884C\u81EA\u7136\u8BED\u8A00\u547D\u4EE4\n   */\n  async executeNaturalLanguage(input: string): Promise<CommandResult> {\n    try {\n      if (!this.agent) {\n        await this.initialize();\n      }\n\n      // \u4F7F\u7528 core \u7684 Agent \u5904\u7406\u81EA\u7136\u8BED\u8A00\u8F93\u5165\n      const response = await this.agent!.chat(input);\n      \n      return {\n        success: true,\n        output: response,\n        metadata: {\n          type: 'naturalLanguage',\n          timestamp: Date.now(),\n        },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `\u5904\u7406\u81EA\u7136\u8BED\u8A00\u5931\u8D25: ${error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF'}`,\n      };\n    }\n  }\n\n  /**\n   * \u5E2E\u52A9\u547D\u4EE4\n   */\n  private async executeHelpCommand(): Promise<CommandResult> {\n    const helpText = `\n\uD83D\uDE80 Blade AI \u52A9\u624B - \u53EF\u7528\u547D\u4EE4\n\n\uD83D\uDCCB \u659C\u6760\u547D\u4EE4:\n  /help     - \u663E\u793A\u5E2E\u52A9\u4FE1\u606F\n  /clear    - \u6E05\u9664\u4F1A\u8BDD\u5386\u53F2\n  /status   - \u663E\u793A\u7CFB\u7EDF\u72B6\u6001\n  /config   - \u914D\u7F6E\u7BA1\u7406\n  /tools    - \u67E5\u770B\u53EF\u7528\u5DE5\u5177\n\n\uD83D\uDCAC \u81EA\u7136\u8BED\u8A00:\n  \u76F4\u63A5\u8F93\u5165\u95EE\u9898\u6216\u6307\u4EE4\uFF0C\u4F8B\u5982:\n  \"\u5E2E\u6211\u5199\u4E00\u4E2A\u51FD\u6570\"\n  \"review \u8FD9\u4E2A\u6587\u4EF6\"\n  \"\u89E3\u91CA\u8FD9\u6BB5\u4EE3\u7801\"\n\n\uD83C\uDFAF \u793A\u4F8B:\n  /config get apiKey\n  \"\u5E2E\u6211\u4F18\u5316\u8FD9\u6BB5\u4EE3\u7801\"\n  \"review src/main.ts\"\n    `;\n\n    return {\n      success: true,\n      output: helpText,\n    };\n  }\n\n  /**\n   * \u6E05\u9664\u547D\u4EE4\n   */\n  private async executeClearCommand(): Promise<CommandResult> {\n    if (this.contextComponent) {\n      this.contextComponent.clear();\n    }\n    \n    return {\n      success: true,\n      output: '\u2705 \u4F1A\u8BDD\u5386\u53F2\u5DF2\u6E05\u9664',\n    };\n  }\n\n  /**\n   * \u72B6\u6001\u547D\u4EE4\n   */\n  private async executeStatusCommand(): Promise<CommandResult> {\n    const config = this.configService.getConfig();\n    const status = {\n      agent: this.agent ? '\u5DF2\u521D\u59CB\u5316' : '\u672A\u521D\u59CB\u5316',\n      llm: config.auth.modelName || '\u672A\u8BBE\u7F6E',\n      tools: this.toolComponent ? this.toolComponent.getToolCount() : 0,\n      context: this.contextComponent ? this.contextComponent.getMessageCount() : 0,\n    };\n\n    const statusText = `\n\uD83D\uDCCA \u7CFB\u7EDF\u72B6\u6001:\n  \uD83E\uDD16 Agent: ${status.agent}\n  \uD83E\uDDE0 LLM: ${status.llm}\n  \uD83D\uDEE0\uFE0F  \u5DE5\u5177: ${status.tools} \u4E2A\n  \uD83D\uDCAC \u4E0A\u4E0B\u6587: ${status.context} \u6761\u6D88\u606F\n    `;\n\n    return {\n      success: true,\n      output: statusText,\n    };\n  }\n\n  /**\n   * \u914D\u7F6E\u547D\u4EE4\n   */\n  private async executeConfigCommand(args: string[]): Promise<CommandResult> {\n    if (args.length === 0) {\n      return {\n        success: false,\n        error: '\u4F7F\u7528\u65B9\u6CD5: /config <get|set> <key> [value]',\n      };\n    }\n\n    const [action, key, value] = args;\n    \n    switch (action.toLowerCase()) {\n      case 'get':\n        return await this.handleConfigGet(key);\n      case 'set':\n        return await this.handleConfigSet(key, value);\n      default:\n        return {\n          success: false,\n          error: `\u672A\u77E5\u64CD\u4F5C: ${action}`,\n        };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u914D\u7F6E\n   */\n  private async handleConfigGet(key: string): Promise<CommandResult> {\n    const config = this.configService.getConfig();\n    const value = this.getNestedConfigValue(config, key);\n    \n    if (value === undefined) {\n      return {\n        success: false,\n        error: `\u914D\u7F6E\u9879\u4E0D\u5B58\u5728: ${key}`,\n      };\n    }\n\n    return {\n      success: true,\n      output: `${key} = ${JSON.stringify(value, null, 2)}`,\n    };\n  }\n\n  /**\n   * \u8BBE\u7F6E\u914D\u7F6E\n   */\n  private async handleConfigSet(key: string, value: string): Promise<CommandResult> {\n    try {\n      // \u8FD9\u91CC\u53EF\u4EE5\u5B9E\u73B0\u914D\u7F6E\u8BBE\u7F6E\u903B\u8F91\n      return {\n        success: false,\n        error: '\u914D\u7F6E\u8BBE\u7F6E\u529F\u80FD\u5C1A\u672A\u5B9E\u73B0',\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `\u8BBE\u7F6E\u914D\u7F6E\u5931\u8D25: ${error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF'}`,\n      };\n    }\n  }\n\n  /**\n   * \u5DE5\u5177\u547D\u4EE4\n   */\n  private async executeToolsCommand(): Promise<CommandResult> {\n    if (!this.toolComponent) {\n      return {\n        success: false,\n        error: '\u5DE5\u5177\u7EC4\u4EF6\u672A\u521D\u59CB\u5316',\n      };\n    }\n\n    const tools = this.toolComponent.listTools();\n    const toolList = tools.map(tool => \n      `  \u2022 ${tool.name} - ${tool.description}`\n    ).join('\\n');\n\n    return {\n      success: true,\n      output: `\uD83D\uDEE0\uFE0F \u53EF\u7528\u5DE5\u5177 (${tools.length} \u4E2A):\\n${toolList}`,\n    };\n  }\n\n  /**\n   * \u83B7\u53D6\u5D4C\u5957\u914D\u7F6E\u503C\n   */\n  private getNestedConfigValue(config: any, path: string): any {\n    return path.split('.').reduce((obj, key) => {\n      return obj && obj[key] !== undefined ? obj[key] : undefined;\n    }, config);\n  }\n\n  /**\n   * \u6E05\u7406\u8D44\u6E90\n   */\n  async cleanup(): Promise<void> {\n    if (this.agent) {\n      await this.agent.destroy();\n      this.agent = null;\n    }\n    this.llmManager = null;\n    this.contextComponent = null;\n    this.toolComponent = null;\n  }\n}", "import React, { ErrorInfo, ReactNode } from 'react';\nimport { Box, Text } from 'ink';\n\ninterface ErrorBoundaryProps {\n  children: ReactNode;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n}\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return {\n      hasError: true,\n      error,\n      errorInfo: null,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    this.setState({\n      error,\n      errorInfo,\n    });\n\n    // \u8BB0\u5F55\u9519\u8BEF\u5230\u63A7\u5236\u53F0\n    console.error('\u672A\u6355\u83B7\u7684\u9519\u8BEF:', error, errorInfo);\n  }\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      return (\n        <Box flexDirection=\"column\" padding={1} borderStyle=\"round\" borderColor=\"red\">\n          <Text color=\"red\">\uD83D\uDCA5 \u5E94\u7528\u53D1\u751F\u9519\u8BEF</Text>\n          <Text> </Text>\n          <Text color=\"red\">{this.state.error?.message}</Text>\n          <Text> </Text>\n          <Text color=\"gray\">\u9519\u8BEF\u8BE6\u60C5:</Text>\n          <Text color=\"gray\">{this.state.error?.stack}</Text>\n          <Text> </Text>\n          <Text color=\"yellow\">\u8BF7\u91CD\u542F\u5E94\u7528\u6216\u8054\u7CFB\u5F00\u53D1\u8005</Text>\n        </Box>\n      );\n    }\n\n    return this.props.children;\n  }\n}", "#!/usr/bin/env node\n\n/**\n * \u5E73\u94FA\u914D\u7F6ECLI\u547D\u4EE4\n * \u76F4\u63A5\u4F7F\u7528\u4E09\u8981\u7D20\u914D\u7F6E\u9A71\u52A8\u547D\u4EE4\n */\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport { Agent } from '@blade-ai/core';\n\n/**\n * \u6CE8\u518CAgent-LLM\u76F8\u5173\u547D\u4EE4\n */\nexport function agentLlmCommand(program: Command) {\n  const llmCmd = program\n    .command('chat')\n    .description('\uD83D\uDCAC \u667A\u80FD\u5BF9\u8BDD')\n    .argument('[message]', '\u5BF9\u8BDD\u5185\u5BB9')\n    .option('-k, --api-key <key>', 'API\u5BC6\u94A5')\n    .option('-u, --base-url <url>', 'API\u57FA\u7840URL')\n    .option('-m, --model <name>', '\u6A21\u578B\u540D\u79F0')\n    .option('-s, --system <prompt>', '\u7CFB\u7EDF\u63D0\u793A\u8BCD')\n    .option('-i, --interactive', '\u4EA4\u4E92\u5F0F\u5BF9\u8BDD')\n    .option('--theme <name>', '\u754C\u9762\u4E3B\u9898 (default|dark|dracula|nord|tokyo-night|github|monokai|ayu-dark|solarized-light|solarized-dark|gruvbox|one-dark|catppuccin|rose-pine|kanagawa)')\n    .action(async (message, options) => {\n      await handleChat(message, options);\n    });\n\n  // \u522B\u540D\n  llmCmd.alias('c');\n}\n\n/**\n * \u5904\u7406\u804A\u5929\u547D\u4EE4\n */\nasync function handleChat(\n  message: string | undefined,\n  options: {\n    apiKey?: string;\n    baseUrl?: string;\n    model?: string;\n    system?: string;\n    interactive?: boolean;\n    theme?: string;\n  }\n): Promise<void> {\n  try {\n    // \u6784\u5EFA\u914D\u7F6E\n    const configUpdates: any = {};\n    if (options.apiKey) configUpdates.apiKey = options.apiKey;\n    if (options.baseUrl) configUpdates.baseUrl = options.baseUrl;\n    if (options.model) configUpdates.modelName = options.model;\n\n    // \u521B\u5EFAAgent\u5B9E\u4F8B\n    const agent = new Agent(configUpdates);\n\n    // \u8BBE\u7F6E\u4E3B\u9898\n    if (options.theme) {\n      const { themeManager } = await import('../ui/themes/index.js');\n      themeManager.setTheme(options.theme);\n    }\n\n    // \u4EA4\u4E92\u5F0F\u6A21\u5F0F\n    if (options.interactive || !message) {\n      await interactiveChat(agent, options.system);\n      return;\n    }\n\n    // \u5355\u6B21\u5BF9\u8BDD\n    if (options.system) {\n      const response = await agent.chatWithSystem(options.system, message);\n      console.log(response);\n    } else {\n      const response = await agent.chat(message);\n      console.log(response);\n    }\n  } catch (error) {\n    console.error(chalk.red(`\u274C \u8C03\u7528\u5931\u8D25: ${(error as Error).message}`));\n    process.exit(1);\n  }\n}\n\n/**\n * \u4EA4\u4E92\u5F0F\u804A\u5929\n */\nasync function interactiveChat(agent: Agent, systemPrompt?: string): Promise<void> {\n  const readline = require('readline');\n  const rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout,\n  });\n\n  console.log(chalk.cyan('\uD83D\uDE80 \u542F\u52A8\u4EA4\u4E92\u5F0F\u5BF9\u8BDD (\u8F93\u5165 \"exit\" \u6216 \"quit\" \u9000\u51FA)'));\n  if (systemPrompt) {\n    console.log(chalk.gray(`\u7CFB\u7EDF\u63D0\u793A\u8BCD: ${systemPrompt}`));\n  }\n  console.log('');\n\n  const chatLoop = async () => {\n    rl.question(chalk.green('\uD83D\uDC64 \u4F60: '), async (input: string) => {\n      if (input.toLowerCase() === 'exit' || input.toLowerCase() === 'quit') {\n        console.log(chalk.yellow('\uD83D\uDC4B \u518D\u89C1!'));\n        rl.close();\n        return;\n      }\n\n      if (input.trim()) {\n        try {\n          process.stdout.write(chalk.blue('\uD83E\uDD16 AI: '));\n          const response = systemPrompt\n            ? await agent.chatWithSystem(systemPrompt, input)\n            : await agent.chat(input);\n          console.log(response);\n        } catch (error) {\n          console.error(chalk.red(`\\n\u274C \u8C03\u7528\u5931\u8D25: ${(error as Error).message}`));\n        }\n      }\n      console.log('');\n      chatLoop();\n    });\n  };\n\n  chatLoop();\n}", "import crypto from 'crypto';\nimport { promises as fs } from 'fs';\nimport os from 'os';\nimport path from 'path';\nimport { performance } from 'perf_hooks';\nimport {\n  BladeConfig,\n  ConfigError,\n  ConfigLocations,\n  ConfigMigration,\n  ConfigStatus,\n  DEFAULT_CONFIG,\n  EnvMapping,\n  UserConfigOverride,\n} from './types.js';\n\nexport class ConfigManager {\n  private static instance: ConfigManager;\n  private config: BladeConfig | null = null;\n  private configStatus: ConfigStatus | null = null;\n  private readonly locations: ConfigLocations;\n  private readonly envMapping: EnvMapping;\n  private migrations: ConfigMigration[];\n  private configLoaded = false;\n  private configLoading = false;\n\n  private constructor() {\n    this.locations = this.getConfigLocations();\n    this.envMapping = this.getEnvMapping();\n    this.migrations = this.getConfigMigrations();\n  }\n\n  public static getInstance(): ConfigManager {\n    if (!ConfigManager.instance) {\n      ConfigManager.instance = new ConfigManager();\n    }\n    return ConfigManager.instance;\n  }\n\n  public async initialize(userConfig?: Partial<BladeConfig>): Promise<BladeConfig> {\n    if (this.configLoaded) {\n      return this.config!;\n    }\n\n    if (this.configLoading) {\n      // \u7B49\u5F85\u914D\u7F6E\u52A0\u8F7D\u5B8C\u6210\n      await this.waitForConfigLoad();\n      return this.config!;\n    }\n\n    this.configLoading = true;\n    const startTime = performance.now();\n\n    try {\n      // 1. \u52A0\u8F7D\u9ED8\u8BA4\u914D\u7F6E\n      this.config = await this.loadDefaultConfig();\n\n      // 2. \u5E94\u7528\u73AF\u5883\u53D8\u91CF\n      this.config = this.applyEnvVariables(this.config);\n\n      // 3. \u52A0\u8F7D\u7528\u6237\u914D\u7F6E\u6587\u4EF6\n      const userConfigData = await this.loadUserConfigFile();\n      if (userConfigData) {\n        this.config = this.mergeConfig(this.config, userConfigData);\n      }\n\n      // 4. \u5E94\u7528\u7528\u6237\u4F20\u5165\u7684\u914D\u7F6E\n      if (userConfig) {\n        this.config = this.mergeConfig(this.config, userConfig);\n      }\n\n      // 5. \u8FD0\u884C\u914D\u7F6E\u8FC1\u79FB\n      this.config = await this.runMigrations(this.config);\n\n      // 6. \u9A8C\u8BC1\u914D\u7F6E\n      const { isValid, errors, warnings } = this.validateConfig(this.config);\n\n      // 7. \u66F4\u65B0\u914D\u7F6E\u72B6\u6001\n      this.configStatus = {\n        isValid,\n        errors,\n        warnings,\n        loadedFrom: this.determineConfigSource(),\n        lastModified: Date.now(),\n        checksum: this.generateConfigChecksum(this.config),\n      };\n\n      // 8. \u521B\u5EFA\u5FC5\u8981\u7684\u76EE\u5F55\n      await this.ensureConfigDirectories();\n\n      // 9. \u4FDD\u5B58\u914D\u7F6E\uFF08\u5982\u679C\u9A8C\u8BC1\u901A\u8FC7\uFF09\n      if (isValid) {\n        await this.saveConfig(this.config);\n      } else {\n        console.warn('\u914D\u7F6E\u9A8C\u8BC1\u5931\u8D25\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E');\n        console.warn('\u9519\u8BEF\u4FE1\u606F:', errors.map(e => e.message).join(', '));\n      }\n\n      this.configLoaded = true;\n      const loadTime = performance.now() - startTime;\n\n      if (this.config.core.debug) {\n        console.log(`\u914D\u7F6E\u52A0\u8F7D\u5B8C\u6210\uFF0C\u8017\u65F6: ${loadTime.toFixed(2)}ms`);\n      }\n\n      return this.config!;\n    } catch (error) {\n      console.error('\u914D\u7F6E\u521D\u59CB\u5316\u5931\u8D25:', error);\n      this.config = this.createFallbackConfig();\n      this.configLoaded = true;\n      return this.config!;\n    } finally {\n      this.configLoading = false;\n    }\n  }\n\n  public getConfig(): BladeConfig {\n    if (!this.configLoaded || !this.config) {\n      throw new Error('\u914D\u7F6E\u5C1A\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5148\u8C03\u7528 initialize()');\n    }\n    return this.config;\n  }\n\n  public getConfigStatus(): ConfigStatus {\n    if (!this.configStatus) {\n      throw new Error('\u914D\u7F6E\u72B6\u6001\u5C1A\u672A\u521D\u59CB\u5316');\n    }\n    return this.configStatus;\n  }\n\n  public async updateConfig(\n    updates: Partial<BladeConfig> | UserConfigOverride\n  ): Promise<ConfigStatus> {\n    if (!this.config) {\n      throw new Error('\u914D\u7F6E\u5C1A\u672A\u521D\u59CB\u5316');\n    }\n\n    const startTime = performance.now();\n\n    try {\n      // \u521B\u5EFA\u914D\u7F6E\u526F\u672C\n      const newConfig = this.cloneConfig(this.config);\n\n      // \u5E94\u7528\u66F4\u65B0\n      const mergedConfig = this.mergeConfig(newConfig, updates);\n\n      // \u9A8C\u8BC1\u65B0\u914D\u7F6E\n      const { isValid, errors, warnings } = this.validateConfig(mergedConfig);\n\n      if (isValid) {\n        // \u66F4\u65B0\u5185\u5B58\u4E2D\u7684\u914D\u7F6E\n        this.config = mergedConfig;\n\n        // \u4FDD\u5B58\u5230\u6587\u4EF6\n        await this.saveConfig(this.config);\n\n        // \u66F4\u65B0\u72B6\u6001\n        this.configStatus = {\n          isValid,\n          errors,\n          warnings,\n          loadedFrom: this.determineConfigSource(),\n          lastModified: Date.now(),\n          checksum: this.generateConfigChecksum(this.config),\n        };\n\n        if (this.config.core.debug) {\n          const update_time = performance.now() - startTime;\n          console.log(`\u914D\u7F6E\u66F4\u65B0\u5B8C\u6210\uFF0C\u8017\u65F6: ${update_time.toFixed(2)}ms`);\n        }\n      } else {\n        console.warn('\u914D\u7F6E\u66F4\u65B0\u5931\u8D25\uFF0C\u9A8C\u8BC1\u672A\u901A\u8FC7');\n        errors.forEach(error => {\n          console.warn(`\u914D\u7F6E\u9519\u8BEF: ${error.path} - ${error.message}`);\n        });\n      }\n\n      return this.configStatus!;\n    } catch (error) {\n      console.error('\u914D\u7F6E\u66F4\u65B0\u5931\u8D25:', error);\n      throw error;\n    }\n  }\n\n  public async resetConfig(): Promise<BladeConfig> {\n    // \u5220\u9664\u7528\u6237\u914D\u7F6E\u6587\u4EF6\n    try {\n      await fs.unlink(this.locations.userConfigPath);\n    } catch (error) {\n      // \u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5FFD\u7565\n    }\n\n    // \u91CD\u65B0\u521D\u59CB\u5316\n    this.configLoaded = false;\n    this.config = null;\n    this.configStatus = null;\n\n    return await this.initialize();\n  }\n\n  public exportConfig(): string {\n    if (!this.config) {\n      throw new Error('\u914D\u7F6E\u5C1A\u672A\u521D\u59CB\u5316');\n    }\n    return JSON.stringify(this.config, null, 2);\n  }\n\n  public importConfig(configJson: string): Promise<ConfigStatus> {\n    try {\n      const importedConfig = JSON.parse(configJson) as Partial<BladeConfig>;\n      return this.updateConfig(importedConfig);\n    } catch (error) {\n      throw new Error('\u914D\u7F6E\u5BFC\u5165\u5931\u8D25: ' + (error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF'));\n    }\n  }\n\n  private async loadDefaultConfig(): Promise<BladeConfig> {\n    const packageJson = await this.loadPackageJson();\n    return {\n      version: packageJson.version || '1.0.0',\n      name: packageJson.name || 'blade-ai',\n      description: packageJson.description || '\u667A\u80FDAI\u52A9\u624B\u547D\u4EE4\u884C\u5DE5\u5177',\n      ...DEFAULT_CONFIG,\n    };\n  }\n\n  private async loadPackageJson(): Promise<any> {\n    try {\n      const packagePath = path.resolve(process.cwd(), 'package.json');\n      const content = await fs.readFile(packagePath, 'utf-8');\n      return JSON.parse(content);\n    } catch (error) {\n      return { version: '1.0.0', name: 'blade-ai', description: '\u667A\u80FDAI\u52A9\u624B\u547D\u4EE4\u884C\u5DE5\u5177' };\n    }\n  }\n\n  private async loadUserConfigFile(): Promise<Partial<BladeConfig> | null> {\n    const configPaths = [\n      this.locations.userConfigPath,\n      this.locations.globalConfigPath,\n      this.locations.localConfigPath,\n    ];\n\n    for (const configPath of configPaths) {\n      try {\n        if (await this.fileExists(configPath)) {\n          const content = await fs.readFile(configPath, 'utf-8');\n          const config = JSON.parse(content) as Partial<BladeConfig>;\n\n          if (this.config?.core.debug) {\n            console.log(`\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6: ${configPath}`);\n          }\n\n          return config;\n        }\n      } catch (error) {\n        console.warn(`\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5931\u8D25: ${configPath}`, error);\n      }\n    }\n\n    return null;\n  }\n\n  private applyEnvVariables(config: BladeConfig): BladeConfig {\n    const result = this.cloneConfig(config);\n\n    for (const [envKey, mapping] of Object.entries(this.envMapping)) {\n      const envValue = process.env[envKey];\n\n      if (envValue !== undefined) {\n        try {\n          const value = this.parseEnvValue(envValue, mapping.type, mapping.default);\n          this.setConfigValue(result, mapping.path, value);\n\n          if (this.config?.core.debug) {\n            console.log(`\u5E94\u7528\u73AF\u5883\u53D8\u91CF: ${envKey} -> ${mapping.path} = ${value}`);\n          }\n        } catch (error) {\n          console.warn(`\u73AF\u5883\u53D8\u91CF\u89E3\u6790\u5931\u8D25: ${envKey} = ${envValue}`);\n        }\n      } else if (mapping.required && mapping.default === undefined) {\n        console.warn(`\u7F3A\u5C11\u5FC5\u9700\u7684\u73AF\u5883\u53D8\u91CF: ${envKey}`);\n      }\n    }\n\n    return result;\n  }\n\n  private parseEnvValue(rawValue: string, type: string, defaultValue?: any): any {\n    if (rawValue === undefined || rawValue === '') {\n      return defaultValue;\n    }\n\n    switch (type) {\n      case 'string':\n        return rawValue;\n      case 'number':\n        return Number(rawValue);\n      case 'boolean':\n        return rawValue.toLowerCase() === 'true' || rawValue === '1';\n      default:\n        return rawValue;\n    }\n  }\n\n  private setConfigValue(config: any, path: string, value: any): void {\n    const keys = path.split('.');\n    let current = config;\n\n    for (let i = 0; i < keys.length - 1; i++) {\n      const key = keys[i];\n      if (!(key in current) || typeof current[key] !== 'object') {\n        current[key] = {};\n      }\n      current = current[key];\n    }\n\n    current[keys[keys.length - 1]] = value;\n  }\n\n  private mergeConfig(\n    base: BladeConfig,\n    override: Partial<BladeConfig> | UserConfigOverride\n  ): BladeConfig {\n    const result = this.cloneConfig(base);\n    this.deepMerge(result, override);\n    return result;\n  }\n\n  private deepMerge(target: any, source: any): void {\n    if (\n      typeof target !== 'object' ||\n      target === null ||\n      typeof source !== 'object' ||\n      source === null\n    ) {\n      return;\n    }\n\n    for (const key of Object.keys(source)) {\n      if (source[key] === undefined || source[key] === null) {\n        continue;\n      }\n\n      if (typeof source[key] === 'object' && !Array.isArray(source[key])) {\n        if (!(key in target) || typeof target[key] !== 'object') {\n          target[key] = {};\n        }\n        this.deepMerge(target[key], source[key]);\n      } else {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  private cloneConfig(config: BladeConfig): BladeConfig {\n    return JSON.parse(JSON.stringify(config));\n  }\n\n  private validateConfig(config: BladeConfig): {\n    isValid: boolean;\n    errors: ConfigError[];\n    warnings: ConfigError[];\n  } {\n    const errors: ConfigError[] = [];\n    const warnings: ConfigError[] = [];\n\n    // \u57FA\u672C\u9A8C\u8BC1\n    if (!config.version) {\n      errors.push({\n        code: 'MISSING_VERSION',\n        message: '\u7F3A\u5C11\u7248\u672C\u4FE1\u606F',\n        path: 'version',\n        severity: 'error',\n      });\n    }\n\n    if (!config.core.workingDirectory) {\n      errors.push({\n        code: 'MISSING_WORKING_DIR',\n        message: '\u7F3A\u5C11\u5DE5\u4F5C\u76EE\u5F55\u914D\u7F6E',\n        path: 'core.workingDirectory',\n        severity: 'error',\n      });\n    }\n\n    // \u7F51\u7EDC\u914D\u7F6E\u9A8C\u8BC1\n    if (config.tools.network.timeout <= 0) {\n      errors.push({\n        code: 'INVALID_TIMEOUT',\n        message: '\u7F51\u7EDC\u8D85\u65F6\u65F6\u95F4\u5FC5\u987B\u5927\u4E8E0',\n        path: 'tools.network.timeout',\n        severity: 'error',\n        value: config.tools.network.timeout,\n      });\n    }\n\n    // \u5185\u5B58\u914D\u7F6E\u9A8C\u8BC1\n    if (config.core.maxMemory <= 0) {\n      errors.push({\n        code: 'INVALID_MAX_MEMORY',\n        message: '\u6700\u5927\u5185\u5B58\u5FC5\u987B\u5927\u4E8E0',\n        path: 'core.maxMemory',\n        severity: 'error',\n        value: config.core.maxMemory,\n      });\n    }\n\n    // \u4E0B\u7EA7\u914D\u7F6E\u9A8C\u8BC1\n    if (config.ui.fontSize < 8 || config.ui.fontSize > 32) {\n      warnings.push({\n        code: 'FONT_SIZE_OUT_OF_RANGE',\n        message: '\u5B57\u4F53\u5927\u5C0F\u5EFA\u8BAE\u57288-32\u4E4B\u95F4',\n        path: 'ui.fontSize',\n        severity: 'warning',\n        value: config.ui.fontSize,\n      });\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n    };\n  }\n\n  private async runMigrations(config: BladeConfig): Promise<BladeConfig> {\n    const result = this.cloneConfig(config);\n\n    for (const migration of this.migrations) {\n      if (config.version === migration.from) {\n        console.log(`\u8FD0\u884C\u914D\u7F6E\u8FC1\u79FB: ${migration.from} -> ${migration.to}`);\n\n        for (const change of migration.changes) {\n          if (change.migrationScript) {\n            try {\n              change.migrationScript(result);\n            } catch (error) {\n              console.warn(`\u8FC1\u79FB\u811A\u672C\u6267\u884C\u5931\u8D25: ${change.path}`, error);\n            }\n          }\n        }\n\n        result.version = migration.to;\n      }\n    }\n\n    return result;\n  }\n\n  private async saveConfig(config: BladeConfig): Promise<void> {\n    const configPath = this.locations.userConfigPath;\n    const configDir = path.dirname(configPath);\n\n    // \u786E\u4FDD\u76EE\u5F55\u5B58\u5728\n    await fs.mkdir(configDir, { recursive: true });\n\n    // \u4FDD\u5B58\u914D\u7F6E\n    const configJson = JSON.stringify(config, null, 2);\n    await fs.writeFile(configPath, configJson, 'utf-8');\n\n    if (config.core.debug) {\n      console.log(`\u914D\u7F6E\u5DF2\u4FDD\u5B58\u5230: ${configPath}`);\n    }\n  }\n\n  private async ensureConfigDirectories(): Promise<void> {\n    const directories = [\n      this.locations.userConfigPath,\n      path.dirname(this.locations.tempConfigPath),\n    ];\n\n    for (const dir of directories) {\n      const configDir = path.dirname(dir);\n      await fs.mkdir(configDir, { recursive: true });\n    }\n  }\n\n  private async fileExists(filePath: string): Promise<boolean> {\n    try {\n      await fs.access(filePath);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  private async waitForConfigLoad(): Promise<void> {\n    let attempts = 0;\n    const maxAttempts = 100;\n    const interval = 50;\n\n    return new Promise((resolve, reject) => {\n      const checkInterval = setInterval(() => {\n        if (this.configLoaded) {\n          clearInterval(checkInterval);\n          resolve(void 0);\n        } else if (attempts >= maxAttempts) {\n          clearInterval(checkInterval);\n          reject(new Error('\u7B49\u5F85\u914D\u7F6E\u52A0\u8F7D\u8D85\u65F6'));\n        }\n        attempts++;\n      }, interval);\n    });\n  }\n\n  private determineConfigSource(): string {\n    // \u8FD9\u91CC\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u52A0\u8F7D\u7684\u914D\u7F6E\u6587\u4EF6\u8FD4\u56DE\u6E90\n    return this.locations.userConfigPath;\n  }\n\n  private generateConfigChecksum(config: BladeConfig): string {\n    const configString = JSON.stringify(config);\n    return crypto.createHash('sha256').update(configString).digest('hex');\n  }\n\n  private createFallbackConfig(): BladeConfig {\n    console.warn('\u4F7F\u7528\u5907\u7528\u914D\u7F6E');\n    return {\n      version: '1.0.0',\n      name: 'blade-ai',\n      description: '\u667A\u80FDAI\u52A9\u624B\u547D\u4EE4\u884C\u5DE5\u5177',\n      ...DEFAULT_CONFIG,\n    };\n  }\n\n  private getConfigLocations(): ConfigLocations {\n    const homeDir = os.homedir();\n\n    return {\n      userConfigPath: path.join(homeDir, '.blade', 'config.json'),\n      globalConfigPath: path.join('/usr', 'local', 'etc', 'blade', 'config.json'),\n      localConfigPath: path.join(process.cwd(), '.blade', 'config.json'),\n      tempConfigPath: path.join(os.tmpdir(), 'blade-config.json'),\n    };\n  }\n\n  private getEnvMapping(): EnvMapping {\n    return {\n      BLADE_DEBUG: {\n        path: 'core.debug',\n        type: 'boolean',\n        default: false,\n        description: '\u542F\u7528\u8C03\u8BD5\u6A21\u5F0F',\n      },\n      BLADE_API_KEY: {\n        path: 'auth.apiKey',\n        type: 'string',\n        required: false,\n        description: 'API\u5BC6\u94A5',\n      },\n      BLADE_THEME: {\n        path: 'ui.theme',\n        type: 'string',\n        default: 'default',\n        description: 'UI\u4E3B\u9898',\n      },\n      BLADE_LANGUAGE: {\n        path: 'ui.language',\n        type: 'string',\n        default: 'zh-CN',\n        description: '\u754C\u9762\u8BED\u8A00',\n      },\n      BLADE_WORKING_DIR: {\n        path: 'core.workingDirectory',\n        type: 'string',\n        default: process.cwd(),\n        description: '\u5DE5\u4F5C\u76EE\u5F55',\n      },\n      BLADE_MAX_MEMORY: {\n        path: 'core.maxMemory',\n        type: 'number',\n        default: 1024 * 1024 * 1024,\n        description: '\u6700\u5927\u5185\u5B58\u4F7F\u7528\u91CF',\n      },\n      BLADE_LLM_PROVIDER: {\n        path: 'llm.provider',\n        type: 'string',\n        default: 'qwen',\n        description: 'LLM\u63D0\u4F9B\u5546',\n      },\n      BLADE_LLM_MODEL: {\n        path: 'llm.model',\n        type: 'string',\n        default: 'qwen-turbo',\n        description: 'LLM\u6A21\u578B',\n      },\n      BLADE_TELEMETRY: {\n        path: 'core.telemetry',\n        type: 'boolean',\n        default: true,\n        description: '\u9065\u6D4B\u6570\u636E\u6536\u96C6',\n      },\n      BLADE_AUTO_UPDATE: {\n        path: 'core.autoUpdate',\n        type: 'boolean',\n        default: true,\n        description: '\u81EA\u52A8\u66F4\u65B0',\n      },\n    };\n  }\n\n  private getConfigMigrations(): ConfigMigration[] {\n    return [\n      {\n        from: '1.0.0',\n        to: '1.1.0',\n        breaking: false,\n        notes: '\u6DFB\u52A0\u9065\u6D4B\u914D\u7F6E',\n        changes: [\n          {\n            path: 'telemetry',\n            type: 'add',\n            description: '\u6DFB\u52A0\u9065\u6D4B\u914D\u7F6E',\n            defaultValue: DEFAULT_CONFIG.services.telemetry,\n          },\n        ],\n      },\n      {\n        from: '1.1.0',\n        to: '1.2.0',\n        breaking: false,\n        notes: '\u6DFB\u52A0MCP\u914D\u7F6E',\n        changes: [\n          {\n            path: 'mcp',\n            type: 'add',\n            description: '\u6DFB\u52A0MCP\u670D\u52A1\u5668\u914D\u7F6E',\n            defaultValue: DEFAULT_CONFIG.mcp,\n          },\n        ],\n      },\n    ];\n  }\n}\n", "export interface BladeConfig {\n  version: string;\n  name: string;\n  description: string;\n  \n  // \u6838\u5FC3\u914D\u7F6E\n  core: {\n    debug: boolean;\n    telemetry: boolean;\n    autoUpdate: boolean;\n    maxMemory: number;\n    timeout: number;\n    workingDirectory: string;\n    tempDirectory: string;\n  };\n  \n  // \u8BA4\u8BC1\u914D\u7F6E\n  auth: {\n    apiKey: string;\n    apiSecret: string;\n    tokenStorage: 'memory' | 'file' | 'system';\n    tokenRefreshInterval: number;\n    providers: AuthProvider[];\n  };\n  \n  // LLM\u914D\u7F6E\n  llm: {\n    provider: 'qwen' | 'volcengine' | 'openai' | 'custom';\n    model: string;\n    temperature: number;\n    maxTokens: number;\n    topP: number;\n    topK: number;\n    frequencyPenalty: number;\n    presencePenalty: number;\n    stream: boolean;\n  };\n  \n  // MCP\u914D\u7F6E\n  mcp: {\n    enabled: boolean;\n    servers: MCPServer[];\n    autoConnect: boolean;\n    timeout: number;\n    maxConnections: number;\n  };\n  \n  // UI\u914D\u7F6E\n  ui: {\n    theme: string;\n    fontSize: number;\n    fontFamily: string;\n    lineHeight: number;\n    showStatusBar: boolean;\n    showNotifications: boolean;\n    animations: boolean;\n    shortcuts: Record<string, string>;\n    language: string;\n  };\n  \n  // \u5DE5\u5177\u914D\u7F6E\n  tools: {\n    git: {\n      autoDetect: boolean;\n      defaultBranch: string;\n      commitVerification: boolean;\n    };\n    fileSystem: {\n      allowedPaths: string[];\n      blockedPaths: string[];\n      maxFileSize: number;\n    };\n    shell: {\n      allowedCommands: string[];\n      blockedCommands: string[];\n      timeout: number;\n    };\n    network: {\n      timeout: number;\n      maxRetries: number;\n      userAgent: string;\n      proxy?: {\n        host: string;\n        port: number;\n        username?: string;\n        password?: string;\n      };\n    };\n  };\n  \n  // \u670D\u52A1\u914D\u7F6E\n  services: {\n    fileSystem: {\n      watchEnabled: boolean;\n      watchInterval: number;\n      indexingEnabled: boolean;\n    };\n    git: {\n      autoSync: boolean;\n      syncInterval: number;\n      commitOnExit: boolean;\n    };\n    logging: {\n      level: 'debug' | 'info' | 'warn' | 'error';\n      format: 'json' | 'text';\n      output: 'file' | 'console' | 'both';\n      maxFiles: number;\n      maxSize: string;\n    };\n    telemetry: {\n      enabled: boolean;\n      endpoint: string;\n      interval: number;\n      batchSize: number;\n    };\n  };\n  \n  // \u9AD8\u7EA7\u914D\u7F6E\n  advanced: {\n    experimentalFeatures: boolean;\n    performanceMode: 'fast' | 'balanced' | 'stable';\n    memoryManagement: 'auto' | 'manual';\n    gcInterval: number;\n    threadPool: {\n      minThreads: number;\n      maxThreads: number;\n    };\n    cache: {\n      enabled: boolean;\n      maxSize: number;\n      ttl: number;\n      strategy: 'lru' | 'fifo' | 'ttl';\n    };\n    security: {\n      sandboxEnabled: boolean;\n      validateInputs: boolean;\n      rateLimiting: {\n        enabled: boolean;\n        requests: number;\n        window: number;\n      };\n      encryption: {\n        algorithm: string;\n        keyRotationInterval: number;\n      };\n    };\n  };\n  \n  // \u9690\u79C1\u914D\u7F6E\n  privacy: {\n    dataCollection: boolean;\n    crashReporting: boolean;\n    usageMetrics: boolean;\n    personalizedExperience: boolean;\n    thirdPartySharing: boolean;\n  };\n  \n  // \u6269\u5C55\u914D\u7F6E\n  extensions: {\n    enabled: boolean;\n    directory: string;\n    autoInstall: boolean;\n    autoUpdate: boolean;\n    trustedSources: string[];\n    installed: ExtensionConfig[];\n  };\n  \n  // \u5F00\u53D1\u914D\u7F6E\n  development: {\n    mode: 'development' | 'production' | 'test';\n    hotReload: boolean;\n    debugTools: boolean;\n    mockData: boolean;\n    testRunner: {\n      enabled: boolean;\n      autoRun: boolean;\n      coverage: boolean;\n    };\n  };\n  \n  // \u63D2\u4EF6\u914D\u7F6E\n  plugins: {\n    enabled: boolean;\n    directory: string;\n    loadOrder: PluginLoadOrder;\n    hooks: Record<string, string[]>;\n  };\n}\n\n// \u8BA4\u8BC1\u63D0\u4F9B\u8005\nexport interface AuthProvider {\n  name: string;\n  type: 'oauth' | 'api-key' | 'custom';\n  endpoint: string;\n  scopes: string[];\n  clientId?: string;\n  clientSecret?: string;\n  redirectUri?: string;\n  enabled: boolean;\n  config: Record<string, any>;\n}\n\n// MCP\u670D\u52A1\u5668\u914D\u7F6E\nexport interface MCPServer {\n  id: string;\n  name: string;\n  endpoint: string;\n  transport: 'stdio' | 'sse' | 'websocket';\n  enabled: boolean;\n  config: Record<string, any>;\n  capabilities: string[];\n  autoConnect: boolean;\n}\n\n// \u6269\u5C55\u914D\u7F6E\nexport interface ExtensionConfig {\n  id: string;\n  name: string;\n  version: string;\n  enabled: boolean;\n  config: Record<string, any>;\n  dependencies: string[];\n  permissions: string[];\n  priority: number;\n}\n\n// \u63D2\u4EF6\u52A0\u8F7D\u987A\u5E8F\nexport interface PluginLoadOrder {\n  pre: string[];\n  core: string[];\n  post: string[];\n}\n\n// \u8DEF\u7531\u914D\u7F6E\nexport interface RouteConfig {\n  path: string;\n  component: string;\n  title: string;\n  icon?: string;\n  guards?: ((targetView: string, options?: any) => boolean)[];\n  sidebar?: boolean;\n  footer?: boolean;\n  meta?: Record<string, any>;\n  onNavigate?: (view: string, options?: any) => void;\n}\n\n// \u7528\u6237\u914D\u7F6E\u8986\u76D6\nexport interface UserConfigOverride {\n  ui?: Partial<BladeConfig['ui']>;\n  tools?: Partial<BladeConfig['tools']>;\n  services?: Partial<BladeConfig['services']>;\n  advanced?: Partial<BladeConfig['advanced']>;\n  privacy?: Partial<BladeConfig['privacy']>;\n  extensions?: Partial<BladeConfig['extensions']>;\n  development?: Partial<BladeConfig['development']>;\n  plugins?: Partial<BladeConfig['plugins']>;\n}\n\n// \u914D\u7F6E\u9A8C\u8BC1\u5668\nexport interface ConfigValidator {\n  validate: (config: Partial<BladeConfig>) => boolean;\n  errors: string[];\n  warnings: string[];\n}\n\n// \u914D\u7F6E\u6587\u4EF6\u4F4D\u7F6E\nexport interface ConfigLocations {\n  userConfigPath: string;\n  globalConfigPath: string;\n  localConfigPath: string;\n  tempConfigPath: string;\n}\n\n// \u914D\u7F6E\u8FC1\u79FB\u4FE1\u606F\nexport interface ConfigMigration {\n  from: string;\n  to: string;\n  changes: MigrationChange[];\n  breaking: boolean;\n  notes?: string;\n}\n\nexport interface MigrationChange {\n  path: string;\n  type: 'add' | 'remove' | 'modify' | 'move';\n  description: string;\n  defaultValue?: any;\n  migrationScript?: (config: any) => any;\n}\n\n// \u914D\u7F6E\u9519\u8BEF\nexport interface ConfigError {\n  code: string;\n  message: string;\n  path: string;\n  value?: any;\n  severity: 'error' | 'warning';\n  details?: Record<string, any>;\n}\n\n// \u914D\u7F6E\u72B6\u6001\nexport interface ConfigStatus {\n  isValid: boolean;\n  errors: ConfigError[];\n  warnings: ConfigError[];\n  loadedFrom: string;\n  lastModified: number;\n  checksum: string;\n}\n\n// \u73AF\u5883\u53D8\u91CF\u6620\u5C04\nexport interface EnvMapping {\n  [key: string]: {\n    path: string;\n    type: 'string' | 'number' | 'boolean';\n    required?: boolean;\n    default?: any;\n    description?: string;\n  };\n}\n\n// \u9ED8\u8BA4\u914D\u7F6E\u5BFC\u51FA\nexport const DEFAULT_CONFIG: Omit<BladeConfig, 'version' | 'name' | 'description'> = {\n  core: {\n    debug: false,\n    telemetry: true,\n    autoUpdate: true,\n    maxMemory: 1024 * 1024 * 1024, // 1GB\n    timeout: 30000,\n    workingDirectory: process.cwd(),\n    tempDirectory: process.env.TEMP || '/tmp',\n  },\n  auth: {\n    apiKey: '',\n    apiSecret: '',\n    tokenStorage: 'file',\n    tokenRefreshInterval: 3600,\n    providers: [],\n  },\n  llm: {\n    provider: 'qwen',\n    model: 'qwen-turbo',\n    temperature: 0.7,\n    maxTokens: 4000,\n    topP: 0.9,\n    topK: 50,\n    frequencyPenalty: 0,\n    presencePenalty: 0,\n    stream: true,\n  },\n  mcp: {\n    enabled: false,\n    servers: [],\n    autoConnect: false,\n    timeout: 5000,\n    maxConnections: 5,\n  },\n  ui: {\n    theme: 'default',\n    fontSize: 14,\n    fontFamily: 'monospace',\n    lineHeight: 1.4,\n    showStatusBar: true,\n    showNotifications: true,\n    animations: true,\n    shortcuts: {},\n    language: 'zh-CN',\n  },\n  tools: {\n    git: {\n      autoDetect: true,\n      defaultBranch: 'main',\n      commitVerification: false,\n    },\n    fileSystem: {\n      allowedPaths: [],\n      blockedPaths: [],\n      maxFileSize: 10 * 1024 * 1024, // 10MB\n    },\n    shell: {\n      allowedCommands: [],\n      blockedCommands: ['rm -rf', 'format', 'del'],\n      timeout: 30000,\n    },\n    network: {\n      timeout: 10000,\n      maxRetries: 3,\n      userAgent: 'Blade-Agent/1.0',\n    },\n  },\n  services: {\n    fileSystem: {\n      watchEnabled: true,\n      watchInterval: 1000,\n      indexingEnabled: true,\n    },\n    git: {\n      autoSync: false,\n      syncInterval: 60000,\n      commitOnExit: false,\n    },\n    logging: {\n      level: 'info',\n      format: 'text',\n      output: 'both',\n      maxFiles: 5,\n      maxSize: '10MB',\n    },\n    telemetry: {\n      enabled: true,\n      endpoint: 'https://telemetry.blade-ai.com/api/v1/events',\n      interval: 300000, // 5\u5206\u949F\n      batchSize: 100,\n    },\n  },\n  advanced: {\n    experimentalFeatures: false,\n    performanceMode: 'balanced',\n    memoryManagement: 'auto',\n    gcInterval: 60000,\n    threadPool: {\n      minThreads: 2,\n      maxThreads: 8,\n    },\n    cache: {\n      enabled: true,\n      maxSize: 100 * 1024 * 1024, // 100MB\n      ttl: 3600000, // 1\u5C0F\u65F6\n      strategy: 'lru',\n    },\n    security: {\n      sandboxEnabled: true,\n      validateInputs: true,\n      rateLimiting: {\n        enabled: true,\n        requests: 100,\n        window: 60000,\n      },\n      encryption: {\n        algorithm: 'aes-256-gcm',\n        keyRotationInterval: 86400000, // 24\u5C0F\u65F6\n      },\n    },\n  },\n  privacy: {\n    dataCollection: true,\n    crashReporting: true,\n    usageMetrics: true,\n    personalizedExperience: true,\n    thirdPartySharing: false,\n  },\n  extensions: {\n    enabled: true,\n    directory: './extensions',\n    autoInstall: false,\n    autoUpdate: true,\n    trustedSources: ['https://extensions.blade-ai.com'],\n    installed: [],\n  },\n  development: {\n    mode: 'production',\n    hotReload: false,\n    debugTools: false,\n    mockData: false,\n    testRunner: {\n      enabled: false,\n      autoRun: false,\n      coverage: false,\n    },\n  },\n  plugins: {\n    enabled: false,\n    directory: './plugins',\n    loadOrder: {\n      pre: [],\n      core: [],\n      post: [],\n    },\n    hooks: {},\n  },\n};", "/**\n * UI\u52A8\u753B\u7EC4\u4EF6\n * \u63D0\u4F9B\u5404\u79CD\u89C6\u89C9\u52A8\u753B\u6548\u679C\n */\n\nimport chalk from 'chalk';\nimport { UIColors } from '../themes/colors.js';\n\nexport interface AnimationConfig {\n  duration?: number;\n  interval?: number;\n  repeat?: number | 'infinite';\n  direction?: 'forward' | 'reverse' | 'alternate';\n}\n\nexport interface TypewriterConfig extends AnimationConfig {\n  speed?: number;\n  cursor?: boolean;\n  cursorChar?: string;\n}\n\nexport interface PulseConfig extends AnimationConfig {\n  colors?: string[];\n  intensity?: number;\n}\n\n/**\n * \u52A8\u753B\u6548\u679C\u7EC4\u4EF6\n */\nexport class UIAnimation {\n  private static readonly defaultConfig: AnimationConfig = {\n    duration: 1000,\n    interval: 100,\n    repeat: 1,\n    direction: 'forward',\n  };\n\n  /**\n   * \u6253\u5B57\u673A\u6548\u679C\n   */\n  public static async typewriter(text: string, config: TypewriterConfig = {}): Promise<void> {\n    const opts = {\n      speed: 50,\n      cursor: true,\n      cursorChar: '\u258B',\n      ...this.defaultConfig,\n      ...config,\n    };\n\n    return new Promise(resolve => {\n      let index = 0;\n      const timer = setInterval(() => {\n        // \u6E05\u9664\u5F53\u524D\u884C\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n\n        // \u663E\u793A\u5F53\u524D\u6587\u672C\n        const currentText = text.slice(0, index);\n        const cursor = opts.cursor && index < text.length ? opts.cursorChar : '';\n        process.stdout.write(currentText + cursor);\n\n        index++;\n\n        if (index > text.length) {\n          clearInterval(timer);\n          if (!opts.cursor) {\n            process.stdout.write('\\r');\n            process.stdout.write(' '.repeat(process.stdout.columns || 80));\n            process.stdout.write('\\r');\n            process.stdout.write(text);\n          }\n          console.log(); // \u6362\u884C\n          resolve();\n        }\n      }, opts.speed);\n    });\n  }\n\n  /**\n   * \u8109\u51B2\u6548\u679C\n   */\n  public static pulse(\n    text: string,\n    config: PulseConfig = {}\n  ): { start: () => void; stop: () => void } {\n    const opts = {\n      ...this.defaultConfig,\n      colors: [UIColors.primary, UIColors.secondary],\n      ...config,\n    };\n\n    let timer: any = null;\n    let colorIndex = 0;\n\n    const start = () => {\n      timer = setInterval(() => {\n        process.stdout.write('\\r');\n\n        const color = opts.colors![colorIndex % opts.colors!.length];\n        process.stdout.write(chalk.hex(color)(text));\n\n        colorIndex++;\n      }, opts.interval!);\n    };\n\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n        console.log(text);\n      }\n    };\n\n    return { start, stop };\n  }\n\n  /**\n   * \u6CE2\u6D6A\u6548\u679C\n   */\n  public static wave(\n    text: string,\n    config: AnimationConfig = {}\n  ): { start: () => void; stop: () => void } {\n    const opts = { ...this.defaultConfig, ...config };\n    let timer: any = null;\n    let frame = 0;\n\n    const start = () => {\n      timer = setInterval(() => {\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n\n        const waveText = text\n          .split('')\n          .map((char, index) => {\n            const offset = Math.sin((frame + index) * 0.5) * 2;\n            const spaces = ' '.repeat(Math.max(0, Math.floor(offset)));\n            return spaces + char;\n          })\n          .join('');\n\n        process.stdout.write(chalk.hex(UIColors.primary)(waveText));\n        frame++;\n      }, opts.interval!);\n    };\n\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n        console.log(text);\n      }\n    };\n\n    return { start, stop };\n  }\n\n  /**\n   * \u5F69\u8679\u6548\u679C\n   */\n  public static rainbow(\n    text: string,\n    config: AnimationConfig = {}\n  ): { start: () => void; stop: () => void } {\n    const opts = { ...this.defaultConfig, ...config };\n    let timer: any = null;\n    let offset = 0;\n\n    const colors = [\n      UIColors.error, // \u7EA2\n      UIColors.warning, // \u9EC4\n      UIColors.success, // \u7EFF\n      UIColors.info, // \u9752\n      UIColors.primary, // \u84DD\n      UIColors.muted, // \u7D2B\n    ];\n\n    const start = () => {\n      timer = setInterval(() => {\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n\n        const rainbowText = text\n          .split('')\n          .map((char, index) => {\n            const colorIndex = (index + offset) % colors.length;\n            return chalk.hex(colors[colorIndex])(char);\n          })\n          .join('');\n\n        process.stdout.write(rainbowText);\n        offset++;\n      }, opts.interval!);\n    };\n\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n        console.log(text);\n      }\n    };\n\n    return { start, stop };\n  }\n\n  /**\n   * \u77E9\u9635\u96E8\u6548\u679C\uFF08\u7B80\u5316\u7248\uFF09\n   */\n  public static matrix(\n    lines: number = 10,\n    config: AnimationConfig = {}\n  ): { start: () => void; stop: () => void } {\n    const opts = {\n      duration: 5000,\n      interval: 100,\n      ...config,\n    };\n\n    let timer: any = null;\n    const chars = '0123456789ABCDEF';\n    const matrixLines: string[] = [];\n\n    const start = () => {\n      // \u521D\u59CB\u5316\n      for (let i = 0; i < lines; i++) {\n        matrixLines[i] = '';\n      }\n\n      timer = setInterval(() => {\n        // \u6E05\u5C4F\n        console.clear();\n\n        // \u66F4\u65B0\u6BCF\u4E00\u884C\n        for (let i = 0; i < lines; i++) {\n          if (Math.random() < 0.1) {\n            // \u751F\u6210\u65B0\u7684\u968F\u673A\u5B57\u7B26\u4E32\n            const length = Math.floor(Math.random() * 20) + 10;\n            matrixLines[i] = Array(length)\n              .fill(0)\n              .map(() => chars[Math.floor(Math.random() * chars.length)])\n              .join('');\n          }\n\n          // \u663E\u793A\u884C\n          if (matrixLines[i]) {\n            console.log(chalk.hex(UIColors.success)(matrixLines[i]));\n          }\n        }\n      }, opts.interval!);\n\n      // \u81EA\u52A8\u505C\u6B62\n      if (opts.duration && opts.duration > 0) {\n        setTimeout(() => stop(), opts.duration);\n      }\n    };\n\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n        console.clear();\n      }\n    };\n\n    return { start, stop };\n  }\n\n  /**\n   * \u6EDA\u52A8\u6587\u672C\u6548\u679C\n   */\n  public static scroll(\n    texts: string[],\n    config: AnimationConfig = {}\n  ): { start: () => void; stop: () => void } {\n    const opts = {\n      interval: 500,\n      repeat: 'infinite' as const,\n      ...config,\n    };\n\n    let timer: any = null;\n    let index = 0;\n\n    const start = () => {\n      timer = setInterval(() => {\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n\n        const currentText = texts[index % texts.length];\n        process.stdout.write(chalk.hex(UIColors.primary)(currentText));\n\n        index++;\n\n        if (opts.repeat !== 'infinite' && index >= texts.length * (opts.repeat as number)) {\n          stop();\n        }\n      }, opts.interval!);\n    };\n\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n        console.log();\n      }\n    };\n\n    return { start, stop };\n  }\n\n  /**\n   * \u95EA\u70C1\u6548\u679C\n   */\n  public static blink(\n    text: string,\n    config: AnimationConfig = {}\n  ): { start: () => void; stop: () => void } {\n    const opts = { ...this.defaultConfig, ...config };\n    let timer: any = null;\n    let visible = true;\n\n    const start = () => {\n      timer = setInterval(() => {\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n\n        if (visible) {\n          process.stdout.write(chalk.hex(UIColors.primary)(text));\n        }\n\n        visible = !visible;\n      }, opts.interval!);\n    };\n\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n        process.stdout.write('\\r');\n        process.stdout.write(' '.repeat(process.stdout.columns || 80));\n        process.stdout.write('\\r');\n        console.log(text);\n      }\n    };\n\n    return { start, stop };\n  }\n\n  /**\n   * \u6DE1\u5165\u6548\u679C\uFF08\u6A21\u62DF\uFF09\n   */\n  public static async fadeIn(text: string, config: AnimationConfig = {}): Promise<void> {\n    const opts = {\n      duration: 1000,\n      ...config,\n    };\n\n    const steps = 10;\n    const stepDuration = opts.duration! / steps;\n\n    for (let i = 0; i <= steps; i++) {\n      process.stdout.write('\\r');\n      process.stdout.write(' '.repeat(process.stdout.columns || 80));\n      process.stdout.write('\\r');\n\n      // \u6A21\u62DF\u900F\u660E\u5EA6\u6548\u679C\uFF08\u4F7F\u7528\u4E0D\u540C\u7684\u7070\u5EA6\uFF09\n      const opacity = i / steps;\n      const grayValue = Math.floor(128 + 127 * opacity);\n      const fadeText = `\\x1b[38;2;${grayValue};${grayValue};${grayValue}m${text}\\x1b[0m`;\n\n      process.stdout.write(chalk.hex(UIColors.primary)(fadeText));\n\n      await new Promise(resolve => setTimeout(resolve, stepDuration));\n    }\n\n    console.log(); // \u6362\u884C\n  }\n}\n", "/**\n * UI\u663E\u793A\u7EC4\u4EF6\n * \u7EDF\u4E00\u7BA1\u7406\u6240\u6709\u8F93\u51FA\u5C55\u793A\u529F\u80FD\n */\n\nimport { UIStyles } from '../themes/styles.js';\n\nexport interface DisplayOptions {\n  prefix?: string;\n  suffix?: string;\n  newline?: boolean;\n  indent?: number;\n}\n\nexport class UIDisplay {\n  private static defaultOptions: DisplayOptions = {\n    newline: true,\n    indent: 0,\n  };\n\n  /**\n   * \u683C\u5F0F\u5316\u8F93\u51FA\u6587\u672C\n   */\n  private static formatText(text: string, options: DisplayOptions = {}): string {\n    const opts = { ...this.defaultOptions, ...options };\n\n    let result = text;\n\n    // \u6DFB\u52A0\u524D\u7F00\n    if (opts.prefix) {\n      result = opts.prefix + result;\n    }\n\n    // \u6DFB\u52A0\u540E\u7F00\n    if (opts.suffix) {\n      result = result + opts.suffix;\n    }\n\n    // \u6DFB\u52A0\u7F29\u8FDB\n    if (opts.indent && opts.indent > 0) {\n      const indent = ' '.repeat(opts.indent);\n      result = indent + result.split('\\n').join('\\n' + indent);\n    }\n\n    return result;\n  }\n\n  /**\n   * \u8F93\u51FA\u6587\u672C\n   */\n  private static output(text: string, options: DisplayOptions = {}): void {\n    const opts = { ...this.defaultOptions, ...options };\n    const formatted = this.formatText(text, opts);\n\n    if (opts.newline) {\n      console.log(formatted);\n    } else {\n      process.stdout.write(formatted);\n    }\n  }\n\n  /**\n   * \u6210\u529F\u6D88\u606F\n   */\n  public static success(message: string, options?: DisplayOptions): void {\n    const text = `${UIStyles.icon.success} ${UIStyles.status.success(message)}`;\n    this.output(text, options);\n  }\n\n  /**\n   * \u9519\u8BEF\u6D88\u606F\n   */\n  public static error(message: string, options?: DisplayOptions): void {\n    const text = `${UIStyles.icon.error} ${UIStyles.status.error(message)}`;\n    this.output(text, options);\n  }\n\n  /**\n   * \u8B66\u544A\u6D88\u606F\n   */\n  public static warning(message: string, options?: DisplayOptions): void {\n    const text = `${UIStyles.icon.warning} ${UIStyles.status.warning(message)}`;\n    this.output(text, options);\n  }\n\n  /**\n   * \u4FE1\u606F\u6D88\u606F\n   */\n  public static info(message: string, options?: DisplayOptions): void {\n    const text = `${UIStyles.icon.info} ${UIStyles.status.info(message)}`;\n    this.output(text, options);\n  }\n\n  /**\n   * \u9759\u9ED8\u6587\u672C\n   */\n  public static muted(message: string, options?: DisplayOptions): void {\n    const text = UIStyles.status.muted(message);\n    this.output(text, options);\n  }\n\n  /**\n   * \u9875\u9762\u6807\u9898\n   */\n  public static header(title: string, options?: DisplayOptions): void {\n    const text = `${UIStyles.icon.rocket} ${UIStyles.component.header(title)}`;\n    this.output(text, options);\n  }\n\n  /**\n   * \u8282\u6807\u9898\n   */\n  public static section(title: string, content?: string, options?: DisplayOptions): void {\n    const text = UIStyles.component.section(title);\n    this.output(text, options);\n\n    if (content) {\n      this.output(content, { ...options, indent: 2 });\n    }\n  }\n\n  /**\n   * \u952E\u503C\u5BF9\u663E\u793A\n   */\n  public static keyValue(key: string, value: string, options?: DisplayOptions): void {\n    const text = `${UIStyles.component.label(key)}: ${UIStyles.component.value(value)}`;\n    this.output(text, options);\n  }\n\n  /**\n   * \u4EE3\u7801\u5757\u663E\u793A\n   */\n  public static code(code: string, language?: string, options?: DisplayOptions): void {\n    const prefix = language ? UIStyles.status.muted(`[${language}]`) + '\\n' : '';\n    const text = prefix + UIStyles.component.code(code);\n    this.output(text, options);\n  }\n\n  /**\n   * \u5F15\u7528\u6587\u672C\n   */\n  public static quote(text: string, author?: string, options?: DisplayOptions): void {\n    const quote = UIStyles.component.quote(`\"${text}\"`);\n    const attribution = author ? UIStyles.status.muted(` - ${author}`) : '';\n    this.output(quote + attribution, options);\n  }\n\n  /**\n   * \u5206\u9694\u7EBF\n   */\n  public static separator(length: number = 50, double: boolean = false): void {\n    const line = double ? UIStyles.border.doubleLine(length) : UIStyles.border.line(length);\n    this.output(line);\n  }\n\n  /**\n   * \u7A7A\u884C\n   */\n  public static newline(count: number = 1): void {\n    for (let i = 0; i < count; i++) {\n      console.log();\n    }\n  }\n\n  /**\n   * \u6E05\u5C4F\n   */\n  public static clear(): void {\n    console.clear();\n  }\n\n  /**\n   * \u666E\u901A\u8F93\u51FA\n   */\n  public static text(message: string, options?: DisplayOptions): void {\n    this.output(message, options);\n  }\n\n  /**\n   * \u9AD8\u4EAE\u6587\u672C\n   */\n  public static highlight(message: string, options?: DisplayOptions): void {\n    const text = UIStyles.semantic.highlight(message);\n    this.output(text, options);\n  }\n\n  /**\n   * \u6B65\u9AA4\u63D0\u793A\n   */\n  public static step(step: number, total: number, message: string, options?: DisplayOptions): void {\n    const stepText = UIStyles.status.info(`[${step}/${total}]`);\n    const text = `${stepText} ${message}`;\n    this.output(text, options);\n  }\n}\n", "/**\n * UI\u8F93\u5165\u7EC4\u4EF6\n * \u7EDF\u4E00\u7BA1\u7406\u6240\u6709\u7528\u6237\u4EA4\u4E92\u8F93\u5165\u529F\u80FD\n */\n\nimport inquirer from 'inquirer';\nimport { UIStyles } from '../themes/styles.js';\n\nexport interface Choice {\n  name: string;\n  value: any;\n  short?: string;\n  disabled?: boolean | string;\n}\n\nexport interface TextInputOptions {\n  default?: string;\n  validate?: (input: string) => boolean | string | Promise<boolean | string>;\n  filter?: (input: string) => string | Promise<string>;\n  transformer?: (input: string, answers: any, flags: any) => string;\n  when?: boolean | ((answers: any) => boolean | Promise<boolean>);\n}\n\nexport interface SelectOptions {\n  default?: any;\n  pageSize?: number;\n  loop?: boolean;\n  when?: boolean | ((answers: any) => boolean | Promise<boolean>);\n}\n\nexport interface ConfirmOptions {\n  default?: boolean;\n  when?: boolean | ((answers: any) => boolean | Promise<boolean>);\n}\n\nexport class UIInput {\n  /**\n   * \u6587\u672C\u8F93\u5165\n   */\n  public static async text(message: string, options: TextInputOptions = {}): Promise<string> {\n    const answers = await inquirer.prompt([\n      {\n        type: 'input',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        ...options,\n      } as any,\n    ]);\n    return answers.value;\n  }\n\n  /**\n   * \u5BC6\u7801\u8F93\u5165\n   */\n  public static async password(\n    message: string,\n    options: Omit<TextInputOptions, 'transformer'> = {}\n  ): Promise<string> {\n    const answers = await inquirer.prompt([\n      {\n        type: 'password',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        mask: '*',\n        ...options,\n      },\n    ]);\n    return answers.value;\n  }\n\n  /**\n   * \u786E\u8BA4\u8F93\u5165\n   */\n  public static async confirm(message: string, options: ConfirmOptions = {}): Promise<boolean> {\n    const answers = await inquirer.prompt([\n      {\n        type: 'confirm',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        default: false,\n        ...options,\n      },\n    ]);\n    return answers.value;\n  }\n\n  /**\n   * \u5355\u9009\u5217\u8868\n   */\n  public static async select(\n    message: string,\n    choices: Choice[],\n    options: SelectOptions = {}\n  ): Promise<any> {\n    const answers = await inquirer.prompt([\n      {\n        type: 'list',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        choices: choices.map(choice => ({\n          name: choice.name,\n          value: choice.value,\n          short: choice.short || choice.name,\n          disabled: choice.disabled,\n        })),\n        pageSize: 10,\n        ...options,\n      },\n    ]);\n    return answers.value;\n  }\n\n  /**\n   * \u591A\u9009\u5217\u8868\n   */\n  public static async multiSelect(\n    message: string,\n    choices: Choice[],\n    options: SelectOptions = {}\n  ): Promise<any[]> {\n    const answers = await inquirer.prompt([\n      {\n        type: 'checkbox',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        choices: choices.map(choice => ({\n          name: choice.name,\n          value: choice.value,\n          checked: false,\n          disabled: choice.disabled,\n        })),\n        pageSize: 10,\n        ...options,\n      },\n    ]);\n    return answers.value;\n  }\n\n  /**\n   * \u81EA\u52A8\u5B8C\u6210\u8F93\u5165\n   */\n  public static async autocomplete(\n    message: string,\n    source: (answersSoFar: any, input: string) => Promise<string[]>\n  ): Promise<string> {\n    const answers = await inquirer.prompt([\n      {\n        type: 'autocomplete',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        source,\n      } as any, // \u9700\u8981\u989D\u5916\u7684\u63D2\u4EF6\u652F\u6301\n    ]);\n    return answers.value;\n  }\n\n  /**\n   * \u6570\u5B57\u8F93\u5165\n   */\n  public static async number(\n    message: string,\n    options: TextInputOptions & { min?: number; max?: number } = {}\n  ): Promise<number> {\n    const { min, max, ...inputOptions } = options;\n\n    const validate = (input: string) => {\n      const num = parseFloat(input);\n\n      if (isNaN(num)) {\n        return '\u8BF7\u8F93\u5165\u6709\u6548\u7684\u6570\u5B57';\n      }\n\n      if (min !== undefined && num < min) {\n        return `\u6570\u5B57\u4E0D\u80FD\u5C0F\u4E8E ${min}`;\n      }\n\n      if (max !== undefined && num > max) {\n        return `\u6570\u5B57\u4E0D\u80FD\u5927\u4E8E ${max}`;\n      }\n\n      if (options.validate) {\n        return options.validate(input);\n      }\n\n      return true;\n    };\n\n    const filter = (input: string) => {\n      return parseFloat(input);\n    };\n\n    const answers = await inquirer.prompt([\n      {\n        type: 'input',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        validate,\n        filter,\n        ...inputOptions,\n      } as any,\n    ]);\n\n    return answers.value;\n  }\n\n  /**\n   * \u7F16\u8F91\u5668\u8F93\u5165\uFF08\u591A\u884C\u6587\u672C\uFF09\n   */\n  public static async editor(message: string, options: TextInputOptions = {}): Promise<string> {\n    const answers = await inquirer.prompt([\n      {\n        type: 'editor',\n        name: 'value',\n        message: UIStyles.component.label(message),\n        ...options,\n      },\n    ]);\n    return answers.value;\n  }\n\n  /**\n   * \u539F\u59CB\u63D0\u793A\u7B26\uFF08\u4E0D\u5E26\u6837\u5F0F\uFF09\n   */\n  public static async raw(questions: any[]): Promise<any> {\n    return inquirer.prompt(questions);\n  }\n\n  /**\n   * \u7B49\u5F85\u7528\u6237\u6309\u952E\u7EE7\u7EED\n   */\n  public static async pressKeyToContinue(message: string = '\u6309\u4EFB\u610F\u952E\u7EE7\u7EED...'): Promise<void> {\n    await inquirer.prompt([\n      {\n        type: 'input',\n        name: 'continue',\n        message: UIStyles.status.muted(message),\n      },\n    ]);\n  }\n\n  /**\n   * \u5FEB\u901F\u786E\u8BA4\uFF08\u5E26\u9ED8\u8BA4\u503C\uFF09\n   */\n  public static async quickConfirm(\n    message: string,\n    defaultValue: boolean = true\n  ): Promise<boolean> {\n    return this.confirm(message, { default: defaultValue });\n  }\n\n  /**\n   * \u5FEB\u901F\u9009\u62E9\uFF08\u5E26\u5E38\u7528\u9009\u9879\uFF09\n   */\n  public static async quickSelect(\n    message: string,\n    options: string[],\n    defaultIndex: number = 0\n  ): Promise<string> {\n    const choices: Choice[] = options.map(option => ({\n      name: option,\n      value: option,\n      short: option,\n    }));\n\n    return this.select(message, choices, {\n      default: options[defaultIndex],\n    });\n  }\n}\n", "/**\n * UI\u5E03\u5C40\u7EC4\u4EF6\n * \u7528\u4E8E\u9875\u9762\u7ED3\u6784\u548C\u7248\u9762\u7BA1\u7406\n */\n\nimport { UIStyles } from '../themes/styles.js';\nimport { UIDisplay } from './Display.js';\n\nexport interface LayoutOptions {\n  width?: number;\n  padding?: number;\n  margin?: number;\n  border?: boolean;\n  title?: string;\n}\n\nexport interface BoxOptions extends LayoutOptions {\n  style?: 'single' | 'double' | 'rounded' | 'bold';\n  align?: 'left' | 'center' | 'right';\n}\n\nexport class UILayout {\n  /**\n   * \u521B\u5EFA\u9875\u9762\u5934\u90E8\n   */\n  public static header(title: string, subtitle?: string, options: LayoutOptions = {}): void {\n    const opts = { width: 80, padding: 2, border: true, ...options };\n\n    UIDisplay.newline();\n\n    if (opts.border) {\n      UIDisplay.text(UIStyles.border.doubleLine(opts.width));\n    }\n\n    // \u4E3B\u6807\u9898\n    const centeredTitle = this.centerText(title, opts.width);\n    UIDisplay.text(UIStyles.heading.h1(centeredTitle));\n\n    // \u526F\u6807\u9898\n    if (subtitle) {\n      const centeredSubtitle = this.centerText(subtitle, opts.width);\n      UIDisplay.text(UIStyles.heading.h2(centeredSubtitle));\n    }\n\n    if (opts.border) {\n      UIDisplay.text(UIStyles.border.doubleLine(opts.width));\n    }\n\n    UIDisplay.newline();\n  }\n\n  /**\n   * \u521B\u5EFA\u9875\u9762\u5C3E\u90E8\n   */\n  public static footer(content: string, options: LayoutOptions = {}): void {\n    const opts = { width: 80, border: true, ...options };\n\n    UIDisplay.newline();\n\n    if (opts.border) {\n      UIDisplay.text(UIStyles.border.line(opts.width));\n    }\n\n    const centeredContent = this.centerText(content, opts.width);\n    UIDisplay.text(UIStyles.status.muted(centeredContent));\n\n    if (opts.border) {\n      UIDisplay.text(UIStyles.border.line(opts.width));\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u4FA7\u8FB9\u680F\u5E03\u5C40\n   */\n  public static sidebar(\n    sidebarContent: string[],\n    mainContent: string[],\n    options: { sidebarWidth?: number; totalWidth?: number } = {}\n  ): void {\n    const opts = { sidebarWidth: 20, totalWidth: 80, ...options };\n    const mainWidth = opts.totalWidth - opts.sidebarWidth - 3; // 3 for separator\n\n    const maxLines = Math.max(sidebarContent.length, mainContent.length);\n\n    for (let i = 0; i < maxLines; i++) {\n      const sidebar = (sidebarContent[i] || '').padEnd(opts.sidebarWidth);\n      const main = mainContent[i] || '';\n\n      UIDisplay.text(`${UIStyles.status.muted(sidebar)} \u2502 ${main}`);\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u5206\u680F\u5E03\u5C40\n   */\n  public static columns(\n    columns: string[][],\n    options: { columnWidths?: number[]; totalWidth?: number } = {}\n  ): void {\n    const opts = { totalWidth: 80, ...options };\n    const colCount = columns.length;\n\n    // \u8BA1\u7B97\u5217\u5BBD\n    const columnWidths =\n      opts.columnWidths ||\n      Array(colCount).fill(Math.floor((opts.totalWidth - (colCount - 1) * 3) / colCount));\n\n    const maxLines = Math.max(...columns.map(col => col.length));\n\n    for (let i = 0; i < maxLines; i++) {\n      const line = columns\n        .map((col, colIndex) => {\n          const content = col[i] || '';\n          const width = columnWidths[colIndex];\n          return content.padEnd(width).substring(0, width);\n        })\n        .join(' \u2502 ');\n\n      UIDisplay.text(line);\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u6846\u6846\n   */\n  public static box(content: string | string[], options: BoxOptions = {}): void {\n    const opts = {\n      width: 60,\n      padding: 1,\n      style: 'single' as const,\n      align: 'left' as const,\n      ...options,\n    };\n\n    const lines = Array.isArray(content) ? content : content.split('\\n');\n    const boxChars = this.getBoxChars(opts.style);\n\n    // \u8BA1\u7B97\u5185\u5BB9\u5BBD\u5EA6\n    const contentWidth = opts.width - 2 - opts.padding * 2;\n\n    // \u9876\u90E8\u8FB9\u6846\n    UIDisplay.text(\n      boxChars.topLeft + boxChars.horizontal.repeat(opts.width - 2) + boxChars.topRight\n    );\n\n    // \u4E0A\u8FB9\u8DDD\n    for (let i = 0; i < opts.padding; i++) {\n      UIDisplay.text(boxChars.vertical + ' '.repeat(opts.width - 2) + boxChars.vertical);\n    }\n\n    // \u5185\u5BB9\u884C\n    lines.forEach(line => {\n      const trimmedLine = line.substring(0, contentWidth);\n      const alignedLine = this.alignText(trimmedLine, contentWidth, opts.align);\n\n      UIDisplay.text(\n        boxChars.vertical +\n          ' '.repeat(opts.padding) +\n          alignedLine +\n          ' '.repeat(opts.padding) +\n          boxChars.vertical\n      );\n    });\n\n    // \u4E0B\u8FB9\u8DDD\n    for (let i = 0; i < opts.padding; i++) {\n      UIDisplay.text(boxChars.vertical + ' '.repeat(opts.width - 2) + boxChars.vertical);\n    }\n\n    // \u5E95\u90E8\u8FB9\u6846\n    UIDisplay.text(\n      boxChars.bottomLeft + boxChars.horizontal.repeat(opts.width - 2) + boxChars.bottomRight\n    );\n  }\n\n  /**\n   * \u521B\u5EFA\u5361\u7247\u5E03\u5C40\n   */\n  public static card(\n    title: string,\n    content: string | string[],\n    options: BoxOptions & { icon?: string } = {}\n  ): void {\n    const lines = Array.isArray(content) ? content : content.split('\\n');\n\n    // \u6DFB\u52A0\u6807\u9898\u5230\u5185\u5BB9\n    const cardContent = [\n      options.icon ? `${options.icon} ${title}` : title,\n      UIStyles.border.line(Math.min(title.length + (options.icon ? 3 : 0), 40)),\n      '',\n      ...lines,\n    ];\n\n    this.box(cardContent, {\n      ...options,\n      align: 'left',\n    });\n  }\n\n  /**\n   * \u521B\u5EFA\u7F51\u683C\u5E03\u5C40\n   */\n  public static grid(\n    items: string[],\n    options: { columns?: number; cellWidth?: number; spacing?: number } = {}\n  ): void {\n    const opts = { columns: 3, cellWidth: 20, spacing: 2, ...options };\n\n    for (let i = 0; i < items.length; i += opts.columns) {\n      const row = items.slice(i, i + opts.columns);\n      const line = row\n        .map(item => {\n          return item.padEnd(opts.cellWidth).substring(0, opts.cellWidth);\n        })\n        .join(' '.repeat(opts.spacing));\n\n      UIDisplay.text(line);\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u9762\u677F\n   */\n  public static panel(\n    sections: Array<{ title: string; content: string | string[] }>,\n    options: LayoutOptions = {}\n  ): void {\n    const opts = { width: 80, padding: 1, border: true, ...options };\n\n    sections.forEach((section, index) => {\n      if (index > 0) {\n        UIDisplay.newline();\n      }\n\n      // \u8282\u6807\u9898\n      UIDisplay.section(section.title);\n\n      // \u8282\u5185\u5BB9\n      const lines = Array.isArray(section.content) ? section.content : [section.content];\n      lines.forEach(line => {\n        UIDisplay.text(line, { indent: 2 });\n      });\n    });\n  }\n\n  /**\n   * \u5C45\u4E2D\u6587\u672C\n   */\n  private static centerText(text: string, width: number): string {\n    const padding = Math.max(0, width - text.length);\n    const leftPad = Math.floor(padding / 2);\n    const rightPad = padding - leftPad;\n    return ' '.repeat(leftPad) + text + ' '.repeat(rightPad);\n  }\n\n  /**\n   * \u5BF9\u9F50\u6587\u672C\n   */\n  private static alignText(\n    text: string,\n    width: number,\n    align: 'left' | 'center' | 'right'\n  ): string {\n    if (text.length >= width) {\n      return text.substring(0, width);\n    }\n\n    const padding = width - text.length;\n\n    switch (align) {\n      case 'center':\n        const leftPad = Math.floor(padding / 2);\n        const rightPad = padding - leftPad;\n        return ' '.repeat(leftPad) + text + ' '.repeat(rightPad);\n      case 'right':\n        return ' '.repeat(padding) + text;\n      default: // left\n        return text + ' '.repeat(padding);\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u8FB9\u6846\u5B57\u7B26\n   */\n  private static getBoxChars(style: 'single' | 'double' | 'rounded' | 'bold'): {\n    topLeft: string;\n    topRight: string;\n    bottomLeft: string;\n    bottomRight: string;\n    horizontal: string;\n    vertical: string;\n  } {\n    switch (style) {\n      case 'double':\n        return {\n          topLeft: '\u2554',\n          topRight: '\u2557',\n          bottomLeft: '\u255A',\n          bottomRight: '\u255D',\n          horizontal: '\u2550',\n          vertical: '\u2551',\n        };\n      case 'rounded':\n        return {\n          topLeft: '\u256D',\n          topRight: '\u256E',\n          bottomLeft: '\u2570',\n          bottomRight: '\u256F',\n          horizontal: '\u2500',\n          vertical: '\u2502',\n        };\n      case 'bold':\n        return {\n          topLeft: '\u250F',\n          topRight: '\u2513',\n          bottomLeft: '\u2517',\n          bottomRight: '\u251B',\n          horizontal: '\u2501',\n          vertical: '\u2503',\n        };\n      default: // single\n        return {\n          topLeft: '\u250C',\n          topRight: '\u2510',\n          bottomLeft: '\u2514',\n          bottomRight: '\u2518',\n          horizontal: '\u2500',\n          vertical: '\u2502',\n        };\n    }\n  }\n\n  /**\n   * \u521B\u5EFA\u5206\u9694\u5668\n   */\n  public static divider(\n    text?: string,\n    options: {\n      width?: number;\n      style?: 'single' | 'double';\n      align?: 'left' | 'center' | 'right';\n    } = {}\n  ): void {\n    const opts = { width: 80, style: 'single' as const, align: 'center' as const, ...options };\n\n    if (!text) {\n      const line = opts.style === 'double' ? '\u2550' : '\u2500';\n      UIDisplay.text(UIStyles.status.muted(line.repeat(opts.width)));\n      return;\n    }\n\n    const line = opts.style === 'double' ? '\u2550' : '\u2500';\n    const availableWidth = opts.width - text.length - 2; // 2 for spaces around text\n\n    if (availableWidth <= 0) {\n      UIDisplay.text(UIStyles.status.muted(text));\n      return;\n    }\n\n    let leftPadding: number;\n    let rightPadding: number;\n\n    switch (opts.align) {\n      case 'left':\n        leftPadding = 0;\n        rightPadding = availableWidth;\n        break;\n      case 'right':\n        leftPadding = availableWidth;\n        rightPadding = 0;\n        break;\n      default: // center\n        leftPadding = Math.floor(availableWidth / 2);\n        rightPadding = availableWidth - leftPadding;\n        break;\n    }\n\n    const result =\n      UIStyles.status.muted(line.repeat(leftPadding)) +\n      ' ' +\n      UIStyles.status.info(text) +\n      ' ' +\n      UIStyles.status.muted(line.repeat(rightPadding));\n\n    UIDisplay.text(result);\n  }\n}\n", "/**\n * UI\u5217\u8868\u7EC4\u4EF6\n * \u7EDF\u4E00\u7BA1\u7406\u5217\u8868\u6570\u636E\u7684\u663E\u793A\n */\n\nimport { UIStyles } from '../themes/styles.js';\nimport { UIDisplay } from './Display.js';\n\nexport interface ListItem {\n  label: string;\n  value?: string;\n  description?: string;\n  status?: 'success' | 'error' | 'warning' | 'info';\n  icon?: string;\n  indent?: number;\n}\n\nexport interface TableColumn {\n  key: string;\n  title: string;\n  width?: number;\n  align?: 'left' | 'center' | 'right';\n  format?: (value: any) => string;\n}\n\nexport interface ListOptions {\n  showNumbers?: boolean;\n  showBullets?: boolean;\n  indent?: number;\n  separator?: string;\n}\n\nexport class UIList {\n  /**\n   * \u663E\u793A\u9879\u76EE\u7B26\u53F7\u5217\u8868\n   */\n  public static bullets(items: string[], options: ListOptions = {}): void {\n    this.simple(items, { ...options, showBullets: true });\n  }\n\n  /**\n   * \u663E\u793A\u7B80\u5355\u5217\u8868\n   */\n  public static simple(items: string[], options: ListOptions = {}): void {\n    const opts = {\n      showNumbers: false,\n      showBullets: true,\n      indent: 0,\n      separator: '',\n      ...options,\n    };\n\n    items.forEach((item, index) => {\n      let prefix = '';\n\n      if (opts.showNumbers) {\n        prefix = UIStyles.status.muted(`${index + 1}. `);\n      } else if (opts.showBullets) {\n        prefix = UIStyles.status.muted('\u2022 ');\n      }\n\n      const text = prefix + item;\n      UIDisplay.text(text, { indent: opts.indent });\n\n      if (opts.separator && index < items.length - 1) {\n        UIDisplay.text(opts.separator);\n      }\n    });\n  }\n\n  /**\n   * \u663E\u793A\u8BE6\u7EC6\u5217\u8868\n   */\n  public static detailed(items: ListItem[], options: ListOptions = {}): void {\n    const opts = {\n      showNumbers: false,\n      showBullets: false,\n      indent: 0,\n      ...options,\n    };\n\n    items.forEach((item, index) => {\n      const indent = (item.indent || 0) + opts.indent;\n\n      // \u6784\u5EFA\u524D\u7F00\n      let prefix = '';\n      if (opts.showNumbers) {\n        prefix = UIStyles.status.muted(`${index + 1}. `);\n      } else if (opts.showBullets) {\n        prefix = UIStyles.status.muted('\u2022 ');\n      }\n\n      // \u6DFB\u52A0\u56FE\u6807\n      if (item.icon) {\n        prefix += item.icon + ' ';\n      }\n\n      // \u6DFB\u52A0\u72B6\u6001\u56FE\u6807\n      if (item.status) {\n        switch (item.status) {\n          case 'success':\n            prefix += UIStyles.icon.success + ' ';\n            break;\n          case 'error':\n            prefix += UIStyles.icon.error + ' ';\n            break;\n          case 'warning':\n            prefix += UIStyles.icon.warning + ' ';\n            break;\n          case 'info':\n            prefix += UIStyles.icon.info + ' ';\n            break;\n        }\n      }\n\n      // \u4E3B\u6807\u7B7E\n      let text = prefix + UIStyles.component.label(item.label);\n\n      // \u6DFB\u52A0\u503C\n      if (item.value) {\n        text += ': ' + UIStyles.component.value(item.value);\n      }\n\n      UIDisplay.text(text, { indent });\n\n      // \u6DFB\u52A0\u63CF\u8FF0\n      if (item.description) {\n        const descText = UIStyles.status.muted(item.description);\n        UIDisplay.text(descText, { indent: indent + 2 });\n      }\n    });\n  }\n\n  /**\n   * \u663E\u793A\u952E\u503C\u5BF9\u5217\u8868\n   */\n  public static keyValue(data: Record<string, string>, options: ListOptions = {}): void {\n    const items: ListItem[] = Object.entries(data).map(([key, value]) => ({\n      label: key,\n      value: value,\n    }));\n\n    this.detailed(items, options);\n  }\n\n  /**\n   * \u663E\u793A\u8868\u683C\n   */\n  public static table(data: any[], columns: TableColumn[]): void {\n    if (data.length === 0) {\n      UIDisplay.muted('\u6CA1\u6709\u6570\u636E');\n      return;\n    }\n\n    // \u8BA1\u7B97\u5217\u5BBD\n    const colWidths = columns.map(col => {\n      const headerWidth = col.title.length;\n      const dataWidth = Math.max(\n        ...data.map(row => {\n          const value = row[col.key];\n          const formatted = col.format ? col.format(value) : String(value || '');\n          return formatted.length;\n        })\n      );\n      return Math.max(headerWidth, dataWidth, col.width || 0);\n    });\n\n    // \u663E\u793A\u8868\u5934\n    const header = columns\n      .map((col, i) => {\n        const title = UIStyles.text.bold(col.title);\n        const align = col.align || 'left';\n        return this.alignText(title, colWidths[i], align);\n      })\n      .join(' | ');\n\n    UIDisplay.text(header);\n\n    // \u663E\u793A\u5206\u9694\u7EBF\n    const separator = colWidths.map(width => '\u2500'.repeat(width)).join('\u2500\u253C\u2500');\n    UIDisplay.muted('\u2500' + separator + '\u2500');\n\n    // \u663E\u793A\u6570\u636E\u884C\n    data.forEach(row => {\n      const line = columns\n        .map((col, i) => {\n          const value = row[col.key];\n          const formatted = col.format ? col.format(value) : String(value || '');\n          const align = col.align || 'left';\n          return this.alignText(formatted, colWidths[i], align);\n        })\n        .join(' | ');\n\n      UIDisplay.text(line);\n    });\n  }\n\n  /**\n   * \u663E\u793A\u6811\u5F62\u7ED3\u6784\n   */\n  public static tree(\n    items: any[],\n    options: {\n      childrenKey?: string;\n      labelKey?: string;\n      showConnectors?: boolean;\n    } = {}\n  ): void {\n    const opts = {\n      childrenKey: 'children',\n      labelKey: 'label',\n      showConnectors: true,\n      ...options,\n    };\n\n    const renderNode = (node: any, prefix: string = '', isLast: boolean = true) => {\n      const label = typeof node === 'string' ? node : node[opts.labelKey];\n      const connector = opts.showConnectors ? (isLast ? '\u2514\u2500\u2500 ' : '\u251C\u2500\u2500 ') : '';\n\n      UIDisplay.text(prefix + connector + label);\n\n      const children = typeof node === 'object' ? node[opts.childrenKey] : null;\n      if (children && Array.isArray(children)) {\n        const newPrefix = prefix + (isLast ? '    ' : '\u2502   ');\n        children.forEach((child, index) => {\n          const isLastChild = index === children.length - 1;\n          renderNode(child, newPrefix, isLastChild);\n        });\n      }\n    };\n\n    items.forEach((item, index) => {\n      const isLast = index === items.length - 1;\n      renderNode(item, '', isLast);\n    });\n  }\n\n  /**\n   * \u663E\u793A\u72B6\u6001\u5217\u8868\n   */\n  public static status(\n    items: Array<{ name: string; status: 'success' | 'error' | 'warning' | 'pending' }>\n  ): void {\n    const maxLength = Math.max(...items.map(item => item.name.length));\n\n    items.forEach(item => {\n      const name = item.name.padEnd(maxLength);\n      let statusText = '';\n\n      switch (item.status) {\n        case 'success':\n          statusText = UIStyles.status.success('\u2713 \u6210\u529F');\n          break;\n        case 'error':\n          statusText = UIStyles.status.error('\u2717 \u5931\u8D25');\n          break;\n        case 'warning':\n          statusText = UIStyles.status.warning('\u26A0 \u8B66\u544A');\n          break;\n        case 'pending':\n          statusText = UIStyles.status.muted('\u25EF \u7B49\u5F85');\n          break;\n      }\n\n      UIDisplay.text(`${UIStyles.component.label(name)} ${statusText}`);\n    });\n  }\n\n  /**\n   * \u6587\u672C\u5BF9\u9F50\u52A9\u624B\n   */\n  private static alignText(\n    text: string,\n    width: number,\n    align: 'left' | 'center' | 'right'\n  ): string {\n    const plainText = text.replace(/\\x1b\\[[0-9;]*m/g, ''); // \u79FB\u9664ANSI\u989C\u8272\u4EE3\u7801\u8BA1\u7B97\u957F\u5EA6\n    const padding = Math.max(0, width - plainText.length);\n\n    switch (align) {\n      case 'center':\n        const leftPad = Math.floor(padding / 2);\n        const rightPad = padding - leftPad;\n        return ' '.repeat(leftPad) + text + ' '.repeat(rightPad);\n      case 'right':\n        return ' '.repeat(padding) + text;\n      default: // left\n        return text + ' '.repeat(padding);\n    }\n  }\n\n  /**\n   * \u5206\u9875\u663E\u793A\n   */\n  public static paginated(items: string[], pageSize: number = 10): void {\n    if (items.length <= pageSize) {\n      this.simple(items);\n      return;\n    }\n\n    const totalPages = Math.ceil(items.length / pageSize);\n    const currentPage = 0;\n\n    const showPage = () => {\n      const start = currentPage * pageSize;\n      const end = Math.min(start + pageSize, items.length);\n      const pageItems = items.slice(start, end);\n\n      UIDisplay.clear();\n      UIDisplay.header(`\u7B2C ${currentPage + 1} \u9875\uFF0C\u5171 ${totalPages} \u9875`);\n      UIDisplay.newline();\n      this.simple(pageItems, { showNumbers: true });\n      UIDisplay.newline();\n      UIDisplay.muted(`\u663E\u793A ${start + 1}-${end} \u9879\uFF0C\u5171 ${items.length} \u9879`);\n    };\n\n    // \u8FD9\u91CC\u53EF\u4EE5\u6DFB\u52A0\u4EA4\u4E92\u5F0F\u5206\u9875\u903B\u8F91\n    showPage();\n  }\n}\n", "/**\n * UI\u8FDB\u5EA6\u7EC4\u4EF6\n * \u7528\u4E8E\u663E\u793A\u52A0\u8F7D\u548C\u8FDB\u5EA6\u72B6\u6001\n */\n\nimport { UIStyles } from '../themes/styles.js';\nimport { UIDisplay } from './Display.js';\n\nexport interface SpinnerOptions {\n  text?: string;\n  color?: 'blue' | 'green' | 'yellow' | 'red' | 'gray';\n  interval?: number;\n}\n\nexport interface ProgressBarOptions {\n  width?: number;\n  format?: string;\n  complete?: string;\n  incomplete?: string;\n  renderThrottle?: number;\n}\n\nexport class UIProgress {\n  private static spinners = {\n    dots: ['\u280B', '\u2819', '\u2839', '\u2838', '\u283C', '\u2834', '\u2826', '\u2827', '\u2807', '\u280F'],\n    line: ['|', '/', '-', '\\\\'],\n    arrow: ['\u2190', '\u2196', '\u2191', '\u2197', '\u2192', '\u2198', '\u2193', '\u2199'],\n    bounce: ['\u2801', '\u2802', '\u2804', '\u2802'],\n    pulse: ['\u25CF', '\u25D0', '\u25D1', '\u25D2', '\u25D3', '\u25D4', '\u25D5', '\u25D6', '\u25D7', '\u25D8'],\n  };\n\n  /**\n   * \u521B\u5EFA\u65CB\u8F6C\u52A0\u8F7D\u5668\n   */\n  public static spinner(text: string = '\u52A0\u8F7D\u4E2D...', options: SpinnerOptions = {}): Spinner {\n    return new Spinner(text, options);\n  }\n\n  /**\n   * \u521B\u5EFA\u8FDB\u5EA6\u6761\n   */\n  public static progressBar(total: number, options: ProgressBarOptions = {}): ProgressBar {\n    return new ProgressBar(total, options);\n  }\n\n  /**\n   * \u663E\u793A\u6B65\u9AA4\u8FDB\u5EA6\n   */\n  public static step(current: number, total: number, message: string): void {\n    const percentage = Math.round((current / total) * 100);\n    const progress = this.createProgressBar(percentage, 30);\n\n    UIDisplay.text(\n      `${UIStyles.status.info(`[${current}/${total}]`)} ${progress} ${percentage}% - ${message}`\n    );\n  }\n\n  /**\n   * \u663E\u793A\u5E26\u65F6\u95F4\u7684\u8FDB\u5EA6\n   */\n  public static timedStep(\n    current: number,\n    total: number,\n    message: string,\n    startTime: number\n  ): void {\n    const elapsed = Date.now() - startTime;\n    const rate = current / (elapsed / 1000);\n    const eta = rate > 0 ? Math.round((total - current) / rate) : 0;\n\n    const percentage = Math.round((current / total) * 100);\n    const progress = this.createProgressBar(percentage, 20);\n\n    const timeInfo = `${this.formatTime(elapsed)} | ETA: ${this.formatTime(eta * 1000)}`;\n\n    UIDisplay.text(\n      `${UIStyles.status.info(`[${current}/${total}]`)} ${progress} ${percentage}% - ${message} (${UIStyles.status.muted(timeInfo)})`\n    );\n  }\n\n  /**\n   * \u521B\u5EFA\u7B80\u5355\u7684\u8FDB\u5EA6\u6761\u5B57\u7B26\u4E32\n   */\n  private static createProgressBar(percentage: number, width: number = 20): string {\n    const filled = Math.round((percentage / 100) * width);\n    const empty = width - filled;\n\n    const filledBar = UIStyles.status.success('\u2588'.repeat(filled));\n    const emptyBar = UIStyles.status.muted('\u2591'.repeat(empty));\n\n    return `[${filledBar}${emptyBar}]`;\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u65F6\u95F4\n   */\n  private static formatTime(ms: number): string {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n\n    if (hours > 0) {\n      return `${hours}h ${minutes % 60}m ${seconds % 60}s`;\n    } else if (minutes > 0) {\n      return `${minutes}m ${seconds % 60}s`;\n    } else {\n      return `${seconds}s`;\n    }\n  }\n\n  /**\n   * \u5012\u8BA1\u65F6\n   */\n  public static countdown(seconds: number, message: string = '\u5012\u8BA1\u65F6'): Promise<void> {\n    return new Promise(resolve => {\n      let remaining = seconds;\n\n      const timer = setInterval(() => {\n        process.stdout.write(`\\r${message}: ${UIStyles.status.warning(remaining.toString())}s `);\n\n        remaining--;\n\n        if (remaining < 0) {\n          clearInterval(timer);\n          process.stdout.write('\\r');\n          UIDisplay.success('\u5012\u8BA1\u65F6\u5B8C\u6210\uFF01');\n          resolve();\n        }\n      }, 1000);\n    });\n  }\n\n  /**\n   * \u6A21\u62DF\u52A0\u8F7D\u8FC7\u7A0B\n   */\n  public static async simulate(duration: number, message: string = '\u5904\u7406\u4E2D'): Promise<void> {\n    const steps = 20;\n    const stepDuration = duration / steps;\n\n    for (let i = 0; i <= steps; i++) {\n      const percentage = Math.round((i / steps) * 100);\n      const progress = this.createProgressBar(percentage);\n\n      process.stdout.write(`\\r${message}: ${progress} ${percentage}%`);\n\n      if (i < steps) {\n        await new Promise(resolve => setTimeout(resolve, stepDuration));\n      }\n    }\n\n    process.stdout.write('\\n');\n    UIDisplay.success('\u5B8C\u6210\uFF01');\n  }\n}\n\n/**\n * \u65CB\u8F6C\u52A0\u8F7D\u5668\u7C7B\n */\nexport class Spinner {\n  private interval: NodeJS.Timeout | null = null;\n  private frameIndex = 0;\n  private frames: string[];\n  private text: string;\n  private options: SpinnerOptions;\n\n  constructor(text: string, options: SpinnerOptions = {}) {\n    this.text = text;\n    this.options = {\n      color: 'blue',\n      interval: 100,\n      ...options,\n    };\n    this.frames = UIProgress['spinners'].dots;\n  }\n\n  /**\n   * \u5F00\u59CB\u65CB\u8F6C\n   */\n  public start(): void {\n    if (this.interval) {\n      this.stop();\n    }\n\n    this.interval = setInterval(() => {\n      const frame = this.frames[this.frameIndex];\n      const coloredFrame = this.colorize(frame);\n      process.stdout.write(`\\r${coloredFrame} ${this.text}`);\n\n      this.frameIndex = (this.frameIndex + 1) % this.frames.length;\n    }, this.options.interval);\n  }\n\n  /**\n   * \u505C\u6B62\u65CB\u8F6C\n   */\n  public stop(): void {\n    if (this.interval) {\n      clearInterval(this.interval);\n      this.interval = null;\n      process.stdout.write('\\r');\n    }\n  }\n\n  /**\n   * \u66F4\u65B0\u6587\u672C\n   */\n  public updateText(text: string): void {\n    this.text = text;\n  }\n\n  /**\n   * \u6210\u529F\u5B8C\u6210\n   */\n  public succeed(text?: string): void {\n    this.stop();\n    UIDisplay.success(text || this.text);\n  }\n\n  /**\n   * \u5931\u8D25\n   */\n  public fail(text?: string): void {\n    this.stop();\n    UIDisplay.error(text || this.text);\n  }\n\n  /**\n   * \u8B66\u544A\n   */\n  public warn(text?: string): void {\n    this.stop();\n    UIDisplay.warning(text || this.text);\n  }\n\n  /**\n   * \u4FE1\u606F\n   */\n  public info(text?: string): void {\n    this.stop();\n    UIDisplay.info(text || this.text);\n  }\n\n  /**\n   * \u989C\u8272\u5316\u6846\u67B6\n   */\n  private colorize(frame: string): string {\n    switch (this.options.color) {\n      case 'green':\n        return UIStyles.status.success(frame);\n      case 'yellow':\n        return UIStyles.status.warning(frame);\n      case 'red':\n        return UIStyles.status.error(frame);\n      case 'gray':\n        return UIStyles.status.muted(frame);\n      default:\n        return UIStyles.status.info(frame);\n    }\n  }\n}\n\n/**\n * \u8FDB\u5EA6\u6761\u7C7B\n */\nexport class ProgressBar {\n  private current = 0;\n  private total: number;\n  private options: ProgressBarOptions;\n  private startTime: number;\n\n  constructor(total: number, options: ProgressBarOptions = {}) {\n    this.total = total;\n    this.options = {\n      width: 40,\n      format: '{bar} {percentage}% | {current}/{total} | {eta}',\n      complete: '\u2588',\n      incomplete: '\u2591',\n      renderThrottle: 16,\n      ...options,\n    };\n    this.startTime = Date.now();\n  }\n\n  /**\n   * \u66F4\u65B0\u8FDB\u5EA6\n   */\n  public update(value: number): void {\n    this.current = Math.min(value, this.total);\n    this.render();\n  }\n\n  /**\n   * \u589E\u52A0\u8FDB\u5EA6\n   */\n  public increment(delta: number = 1): void {\n    this.update(this.current + delta);\n  }\n\n  /**\n   * \u6E32\u67D3\u8FDB\u5EA6\u6761\n   */\n  private render(): void {\n    const percentage = Math.round((this.current / this.total) * 100);\n    const elapsed = Date.now() - this.startTime;\n    const rate = this.current / (elapsed / 1000);\n    const eta = rate > 0 ? Math.round((this.total - this.current) / rate) : 0;\n\n    // \u521B\u5EFA\u8FDB\u5EA6\u6761\n    const filledWidth = Math.round((this.current / this.total) * this.options.width!);\n    const emptyWidth = this.options.width! - filledWidth;\n\n    const filledBar = UIStyles.status.success(this.options.complete!.repeat(filledWidth));\n    const emptyBar = UIStyles.status.muted(this.options.incomplete!.repeat(emptyWidth));\n    const bar = `[${filledBar}${emptyBar}]`;\n\n    // \u66FF\u6362\u683C\u5F0F\u5B57\u7B26\u4E32\n    const output = this.options\n      .format!.replace('{bar}', bar)\n      .replace('{percentage}', percentage.toString())\n      .replace('{current}', this.current.toString())\n      .replace('{total}', this.total.toString())\n      .replace('{eta}', this.formatTime(eta * 1000));\n\n    process.stdout.write(`\\r${output}`);\n\n    if (this.current >= this.total) {\n      process.stdout.write('\\n');\n    }\n  }\n\n  /**\n   * \u5B8C\u6210\u8FDB\u5EA6\u6761\n   */\n  public complete(): void {\n    this.update(this.total);\n    UIDisplay.success('\u5B8C\u6210\uFF01');\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u65F6\u95F4\n   */\n  private formatTime(ms: number): string {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n\n    if (minutes > 0) {\n      return `${minutes}m ${seconds % 60}s`;\n    } else {\n      return `${seconds}s`;\n    }\n  }\n}\n", "/**\n * UI\u6A21\u5757\u4E3B\u5165\u53E3\n * \u63D0\u4F9B\u7EDF\u4E00\u7684UI\u7EC4\u4EF6\u63A5\u53E3\n */\n\nimport { UIAnimation } from './components/Animation.js';\nimport { UIDisplay } from './components/Display.js';\nimport { UIInput } from './components/Input.js';\nimport { UILayout } from './components/Layout.js';\nimport { UIList } from './components/List.js';\nimport { UIProgress } from './components/Progress.js';\nimport { UIColors, UIStyles, ThemeManager, themeManager } from './themes/index.js';\nimport { UIFormatter, UIValidator } from './utils/index.js';\n\n// \u5BFC\u51FA\u5404\u4E2A\u7EC4\u4EF6\nexport {\n  ThemeManager,\n  UIAnimation,\n  UIColors,\n  UIDisplay,\n  UIFormatter,\n  UIInput,\n  UILayout,\n  UIList,\n  UIProgress,\n  UIStyles,\n  UIValidator,\n  themeManager,\n};\n\n// \u4FBF\u6377\u5BFC\u51FA\nexport const UI = {\n  Animation: UIAnimation,\n  Display: UIDisplay,\n  Input: UIInput,\n  Progress: UIProgress,\n  List: UIList,\n  Layout: UILayout,\n  Theme: themeManager,\n};\n", "/**\n * UI\u683C\u5F0F\u5316\u5DE5\u5177\u51FD\u6570\n */\n\nimport { UIStyles } from '../themes/styles.js';\n\nexport class UIFormatter {\n  /**\n   * \u683C\u5F0F\u5316\u6587\u4EF6\u5927\u5C0F\n   */\n  public static fileSize(bytes: number): string {\n    const units = ['B', 'KB', 'MB', 'GB', 'TB'];\n    let size = bytes;\n    let unitIndex = 0;\n\n    while (size >= 1024 && unitIndex < units.length - 1) {\n      size /= 1024;\n      unitIndex++;\n    }\n\n    return `${size.toFixed(unitIndex === 0 ? 0 : 1)} ${units[unitIndex]}`;\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u65F6\u95F4\u95F4\u9694\n   */\n  public static duration(ms: number): string {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n\n    if (days > 0) {\n      return `${days}\u5929 ${hours % 24}\u5C0F\u65F6`;\n    } else if (hours > 0) {\n      return `${hours}\u5C0F\u65F6 ${minutes % 60}\u5206\u949F`;\n    } else if (minutes > 0) {\n      return `${minutes}\u5206\u949F ${seconds % 60}\u79D2`;\n    } else {\n      return `${seconds}\u79D2`;\n    }\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u65E5\u671F\u65F6\u95F4\n   */\n  public static dateTime(date: Date | string | number): string {\n    const d = new Date(date);\n    return d.toLocaleString('zh-CN', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n    });\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u76F8\u5BF9\u65F6\u95F4\n   */\n  public static relativeTime(date: Date | string | number): string {\n    const now = new Date();\n    const target = new Date(date);\n    const diff = now.getTime() - target.getTime();\n\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n\n    if (days > 0) {\n      return `${days}\u5929\u524D`;\n    } else if (hours > 0) {\n      return `${hours}\u5C0F\u65F6\u524D`;\n    } else if (minutes > 0) {\n      return `${minutes}\u5206\u949F\u524D`;\n    } else if (seconds > 0) {\n      return `${seconds}\u79D2\u524D`;\n    } else {\n      return '\u521A\u521A';\n    }\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u6570\u5B57\uFF08\u6DFB\u52A0\u5343\u4F4D\u5206\u9694\u7B26\uFF09\n   */\n  public static number(num: number): string {\n    return num.toLocaleString('zh-CN');\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u767E\u5206\u6BD4\n   */\n  public static percentage(value: number, total: number, decimals: number = 1): string {\n    const percent = (value / total) * 100;\n    return `${percent.toFixed(decimals)}%`;\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u72B6\u6001\n   */\n  public static status(\n    status: 'success' | 'error' | 'warning' | 'info' | 'pending',\n    text?: string\n  ): string {\n    const statusText = text || status;\n\n    switch (status) {\n      case 'success':\n        return UIStyles.status.success(`\u2713 ${statusText}`);\n      case 'error':\n        return UIStyles.status.error(`\u2717 ${statusText}`);\n      case 'warning':\n        return UIStyles.status.warning(`\u26A0 ${statusText}`);\n      case 'info':\n        return UIStyles.status.info(`\u2139 ${statusText}`);\n      case 'pending':\n        return UIStyles.status.muted(`\u25EF ${statusText}`);\n      default:\n        return statusText;\n    }\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u5217\u8868\u9879\n   */\n  public static listItem(\n    index: number,\n    content: string,\n    options: { style?: 'bullet' | 'number' | 'arrow'; indent?: number } = {}\n  ): string {\n    const opts = { style: 'bullet' as const, indent: 0, ...options };\n\n    let prefix = '';\n    switch (opts.style) {\n      case 'number':\n        prefix = UIStyles.status.muted(`${index + 1}. `);\n        break;\n      case 'arrow':\n        prefix = UIStyles.status.muted('\u2192 ');\n        break;\n      default:\n        prefix = UIStyles.status.muted('\u2022 ');\n        break;\n    }\n\n    const indent = ' '.repeat(opts.indent);\n    return indent + prefix + content;\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u952E\u503C\u5BF9\n   */\n  public static keyValue(\n    key: string,\n    value: string,\n    options: { separator?: string; keyWidth?: number } = {}\n  ): string {\n    const opts = { separator: ': ', keyWidth: 0, ...options };\n\n    const formattedKey =\n      opts.keyWidth > 0\n        ? UIStyles.component.label(key.padEnd(opts.keyWidth))\n        : UIStyles.component.label(key);\n\n    return formattedKey + opts.separator + UIStyles.component.value(value);\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u8868\u683C\u884C\n   */\n  public static tableRow(\n    values: string[],\n    widths: number[],\n    alignments: Array<'left' | 'center' | 'right'> = []\n  ): string {\n    return values\n      .map((value, index) => {\n        const width = widths[index] || 0;\n        const align = alignments[index] || 'left';\n        return this.alignText(value, width, align);\n      })\n      .join(' | ');\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u4EE3\u7801\u5757\n   */\n  public static codeBlock(code: string, language?: string): string {\n    const lines = code.split('\\n');\n    const maxLineNumber = lines.length;\n    const lineNumberWidth = maxLineNumber.toString().length;\n\n    const formattedLines = lines.map((line, index) => {\n      const lineNumber = (index + 1).toString().padStart(lineNumberWidth);\n      const numberedLine = UIStyles.status.muted(`${lineNumber} \u2502 `) + line;\n      return numberedLine;\n    });\n\n    const header = language ? UIStyles.status.info(`[${language}]`) : '';\n\n    return [\n      header,\n      UIStyles.border.line(\n        Math.max(60, Math.max(...lines.map(l => l.length)) + lineNumberWidth + 3)\n      ),\n      ...formattedLines,\n      UIStyles.border.line(\n        Math.max(60, Math.max(...lines.map(l => l.length)) + lineNumberWidth + 3)\n      ),\n    ]\n      .filter(Boolean)\n      .join('\\n');\n  }\n\n  /**\n   * \u683C\u5F0F\u5316JSON\n   */\n  public static json(obj: any, indent: number = 2): string {\n    try {\n      const json = JSON.stringify(obj, null, indent);\n      return json\n        .split('\\n')\n        .map(line => {\n          // \u7B80\u5355\u7684\u8BED\u6CD5\u9AD8\u4EAE\n          if (line.includes(':')) {\n            const [key, ...valueParts] = line.split(':');\n            const value = valueParts.join(':');\n            return key + ':' + UIStyles.status.success(value);\n          }\n          return line;\n        })\n        .join('\\n');\n    } catch (error) {\n      return UIStyles.status.error('\u65E0\u6548\u7684JSON\u6570\u636E');\n    }\n  }\n\n  /**\n   * \u6587\u672C\u622A\u65AD\n   */\n  public static truncate(text: string, maxLength: number, suffix: string = '...'): string {\n    if (text.length <= maxLength) {\n      return text;\n    }\n    return text.substring(0, maxLength - suffix.length) + suffix;\n  }\n\n  /**\n   * \u6587\u672C\u5BF9\u9F50\n   */\n  private static alignText(\n    text: string,\n    width: number,\n    align: 'left' | 'center' | 'right'\n  ): string {\n    if (text.length >= width) {\n      return text.substring(0, width);\n    }\n\n    const padding = width - text.length;\n\n    switch (align) {\n      case 'center':\n        const leftPad = Math.floor(padding / 2);\n        const rightPad = padding - leftPad;\n        return ' '.repeat(leftPad) + text + ' '.repeat(rightPad);\n      case 'right':\n        return ' '.repeat(padding) + text;\n      default: // left\n        return text + ' '.repeat(padding);\n    }\n  }\n\n  /**\n   * \u5355\u4F4D\u8F6C\u6362\n   */\n  public static unit(value: number, unit: string, precision: number = 2): string {\n    return `${value.toFixed(precision)} ${unit}`;\n  }\n\n  /**\n   * \u683C\u5F0F\u5316URL\n   */\n  public static url(url: string, maxLength: number = 50): string {\n    if (url.length <= maxLength) {\n      return UIStyles.semantic.accent(url);\n    }\n\n    const truncated = this.truncate(url, maxLength);\n    return UIStyles.semantic.accent(truncated);\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u8DEF\u5F84\n   */\n  public static path(path: string, maxLength: number = 60): string {\n    if (path.length <= maxLength) {\n      return UIStyles.status.muted(path);\n    }\n\n    // \u667A\u80FD\u622A\u65AD\uFF1A\u4FDD\u7559\u6587\u4EF6\u540D\u548C\u90E8\u5206\u76EE\u5F55\n    const parts = path.split('/');\n    if (parts.length > 2) {\n      const filename = parts[parts.length - 1];\n      const remaining = maxLength - filename.length - 5; // 5 for \".../\"\n\n      if (remaining > 0) {\n        const prefix = path.substring(0, remaining);\n        return UIStyles.status.muted(`${prefix}.../${filename}`);\n      }\n    }\n\n    return UIStyles.status.muted(this.truncate(path, maxLength));\n  }\n}\n", "/**\n * \u914D\u7F6E\u7BA1\u7406\u547D\u4EE4\n */\n\nimport { Command } from 'commander';\nimport { ConfigManager } from '../config/config-manager.js';\nimport { UIDisplay, UIInput } from '../ui/index.js';\n\n/**\n * \u6CE8\u518C\u914D\u7F6E\u76F8\u5173\u547D\u4EE4\n */\nexport function configCommand(program: Command) {\n  const configCmd = program.command('config').description('\u2699\uFE0F \u914D\u7F6E\u7BA1\u7406');\n  const configManager = ConfigManager.getInstance();\n\n  // \u663E\u793A\u5F53\u524D\u914D\u7F6E\n  configCmd\n    .command('show')\n    .alias('s')\n    .description('\uD83D\uDCCB \u663E\u793A\u5F53\u524D\u914D\u7F6E')\n    .action(async () => {\n      try {\n        await configManager.initialize(); //\u786E\u4FDD\u914D\u7F6E\u5DF2\u52A0\u8F7D\n        const config = configManager.getConfig();\n        UIDisplay.text(JSON.stringify(config, null, 2));\n      } catch (error) {\n        UIDisplay.error(`\u83B7\u53D6\u914D\u7F6E\u5931\u8D25: ${error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF'}`);\n      }\n    });\n\n  // \u91CD\u7F6E\u914D\u7F6E\n  configCmd\n    .command('reset')\n    .description('\uD83D\uDD04 \u91CD\u7F6E\u914D\u7F6E\u4E3A\u9ED8\u8BA4\u503C')\n    .action(async () => {\n      const confirm = await UIInput.confirm('\u786E\u5B9A\u8981\u91CD\u7F6E\u6240\u6709\u914D\u7F6E\u5417\uFF1F\u8FD9\u5C06\u5220\u9664\u60A8\u7684\u7528\u6237\u914D\u7F6E\u3002', { default: false });\n\n      if (confirm) {\n        try {\n          await configManager.resetConfig();\n          UIDisplay.success('\u914D\u7F6E\u5DF2\u6210\u529F\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C\u3002');\n        } catch (error) {\n          UIDisplay.error(`\u91CD\u7F6E\u914D\u7F6E\u5931\u8D25: ${error instanceof Error ? error.message : '\u672A\u77E5\u9519\u8BEF'}`);\n        }\n      } else {\n        UIDisplay.muted('\u53D6\u6D88\u91CD\u7F6E');\n      }\n    });\n}\n", "import chalk from 'chalk';\nimport { Command } from 'commander';\nimport { Agent } from '@blade-ai/core';\n\n/**\n * \u6CE8\u518C LLM \u76F8\u5173\u547D\u4EE4\n */\nexport function llmCommand(program: Command) {\n  // LLM \u76F4\u63A5\u804A\u5929\u547D\u4EE4\n  program\n    .command('llm')\n    .description('\uD83E\uDD16 \u7EAF LLM \u6A21\u5F0F\u804A\u5929')\n    .argument('[message...]', '\u8981\u53D1\u9001\u7684\u6D88\u606F')\n    .option('-k, --api-key <key>', 'API \u5BC6\u94A5')\n    .option('-u, --base-url <url>', 'API \u57FA\u7840 URL')\n    .option('-m, --model <model>', '\u6A21\u578B\u540D\u79F0')\n    .option('--stream', '\u542F\u7528\u6D41\u5F0F\u8F93\u51FA', false)\n    .action(async (messageArgs, options) => {\n      try {\n        // \u6784\u5EFA\u914D\u7F6E\n        const config: any = {};\n        if (options.apiKey) config.apiKey = options.apiKey;\n        if (options.baseUrl) config.baseUrl = options.baseUrl;\n        if (options.model) config.modelName = options.model;\n\n        // \u521B\u5EFA Agent \u5B9E\u4F8B\n        const agent = new Agent(config);\n\n        const message = messageArgs.join(' ');\n\n        if (!message) {\n          console.log(chalk.red('\u274C \u8BF7\u8F93\u5165\u8981\u53D1\u9001\u7684\u6D88\u606F'));\n          return;\n        }\n\n        if (options.stream) {\n          console.log(chalk.green('\uD83E\uDD16 AI: '), { newline: false });\n          // \u6D41\u5F0F\u8F93\u51FA\u5B9E\u73B0\n          console.log('\u6D41\u5F0F\u8F93\u51FA\u529F\u80FD\u5F00\u53D1\u4E2D...');\n        } else {\n          const response = await agent.chat(message);\n          console.log(chalk.green(`\uD83E\uDD16 AI: ${response}`));\n        }\n      } catch (error) {\n        console.error(chalk.red('\u274C LLM \u8C03\u7528\u5931\u8D25:'), error);\n      }\n    });\n}\n", "import chalk from 'chalk';\nimport { Command } from 'commander';\nimport inquirer from 'inquirer';\nimport { Client, Server } from '@modelcontextprotocol/sdk';\nimport { ToolComponent } from '@blade-ai/core';\nimport { UIDisplay, UIInput, UILayout, UIList, UIProgress } from '../ui/index.js';\n\n/**\n * MCP \u76F8\u5173\u547D\u4EE4\n */\nexport function mcpCommand(program: Command): void {\n  const mcpCmd = program.command('mcp').description('\uD83D\uDD17 MCP (Model Context Protocol) \u7BA1\u7406\u547D\u4EE4');\n\n  // MCP \u670D\u52A1\u5668\u547D\u4EE4\n  const serverCmd = mcpCmd.command('server').description('MCP \u670D\u52A1\u5668\u7BA1\u7406');\n\n  serverCmd\n    .command('start')\n    .description('\u542F\u52A8 MCP \u670D\u52A1\u5668')\n    .option('-p, --port <port>', '\u76D1\u542C\u7AEF\u53E3', '3001')\n    .option('-h, --host <host>', '\u76D1\u542C\u5730\u5740', 'localhost')\n    .option('-t, --transport <type>', '\u4F20\u8F93\u7C7B\u578B (ws|stdio)', 'ws')\n    .action(async options => {\n      let spinner = UIProgress.spinner('\u6B63\u5728\u521D\u59CB\u5316\u670D\u52A1\u5668\u914D\u7F6E...');\n      spinner.start();\n\n      try {\n        const serverConfig = mcpConfig.getServerConfig();\n        const config = {\n          port: parseInt(options.port) || serverConfig.port,\n          host: options.host || serverConfig.host,\n          transport: options.transport || serverConfig.transport,\n          auth: serverConfig.auth,\n        };\n\n        spinner.succeed('\u914D\u7F6E\u521D\u59CB\u5316\u5B8C\u6210');\n\n        spinner = UIProgress.spinner('\u6B63\u5728\u542F\u52A8\u5DE5\u5177\u7BA1\u7406\u5668...');\n        spinner.start();\n\n        const toolManager = await createToolManager();\n\n        spinner.succeed('\u5DE5\u5177\u7BA1\u7406\u5668\u542F\u52A8\u5B8C\u6210');\n\n        UILayout.card(\n          'MCP \u670D\u52A1\u5668\u914D\u7F6E',\n          [\n            `\u4F20\u8F93\u65B9\u5F0F: ${config.transport}`,\n            config.transport === 'ws' ? `\u76D1\u542C\u5730\u5740: ws://${config.host}:${config.port}` : null,\n          ].filter(Boolean) as string[],\n          { icon: '\uD83D\uDE80' }\n        );\n\n        spinner = UIProgress.spinner('\u6B63\u5728\u542F\u52A8 MCP \u670D\u52A1\u5668...');\n        spinner.start();\n\n        const server = new Server(config, toolManager);\n        await server.start();\n\n        server.on('started', info => {\n          spinner.succeed('MCP \u670D\u52A1\u5668\u542F\u52A8\u6210\u529F');\n\n          if (info.host && info.port) {\n            UIDisplay.success(`\u670D\u52A1\u5668\u5730\u5740: ws://${info.host}:${info.port}`);\n          }\n          UIDisplay.info('\u6309 Ctrl+C \u505C\u6B62\u670D\u52A1\u5668');\n        });\n\n        server.on('error', error => {\n          UIDisplay.error(`\u670D\u52A1\u5668\u9519\u8BEF: ${error.message}`);\n        });\n\n        // \u5904\u7406\u9000\u51FA\u4FE1\u53F7\n        process.on('SIGINT', async () => {\n          const exitSpinner = UIProgress.spinner('\u6B63\u5728\u505C\u6B62\u670D\u52A1\u5668...');\n          exitSpinner.start();\n\n          await server.stop();\n          exitSpinner.succeed('\u670D\u52A1\u5668\u5DF2\u505C\u6B62');\n          process.exit(0);\n        });\n      } catch (error) {\n        if (spinner) spinner.fail('\u670D\u52A1\u5668\u542F\u52A8\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error instanceof Error ? error.message : error}`);\n        process.exit(1);\n      }\n    });\n\n  // MCP \u5BA2\u6237\u7AEF\u547D\u4EE4\n  const clientCmd = mcpCmd.command('client').description('MCP \u5BA2\u6237\u7AEF\u7BA1\u7406');\n\n  clientCmd\n    .command('connect <server>')\n    .description('\u8FDE\u63A5\u5230 MCP \u670D\u52A1\u5668')\n    .option('-i, --interactive', '\u4EA4\u4E92\u5F0F\u6A21\u5F0F')\n    .action(async (serverName, options) => {\n      let spinner = UIProgress.spinner('\u6B63\u5728\u9A8C\u8BC1\u670D\u52A1\u5668\u914D\u7F6E...');\n      spinner.start();\n\n      try {\n        const serverConfig = mcpConfig.getServer(serverName);\n        if (!serverConfig) {\n          spinner.fail('\u670D\u52A1\u5668\u914D\u7F6E\u4E0D\u5B58\u5728');\n          UIDisplay.error(`\u672A\u627E\u5230\u670D\u52A1\u5668\u914D\u7F6E: ${serverName}`);\n          UIDisplay.info('\u4F7F\u7528 \"blade mcp config add\" \u6DFB\u52A0\u670D\u52A1\u5668\u914D\u7F6E');\n          return;\n        }\n\n        spinner.succeed('\u670D\u52A1\u5668\u914D\u7F6E\u9A8C\u8BC1\u5B8C\u6210');\n\n        UILayout.card(\n          '\u8FDE\u63A5\u4FE1\u606F',\n          [\n            `\u670D\u52A1\u5668: ${serverName}`,\n            `\u5730\u5740: ${serverConfig.endpoint || serverConfig.command}`,\n            `\u4F20\u8F93\u65B9\u5F0F: ${serverConfig.transport}`,\n          ],\n          { icon: '\uD83D\uDD17' }\n        );\n\n        spinner = UIProgress.spinner('\u6B63\u5728\u8FDE\u63A5\u5230 MCP \u670D\u52A1\u5668...');\n        spinner.start();\n\n        const client = new Client();\n        const session = await client.connect(serverConfig);\n\n        spinner.succeed('\u8FDE\u63A5\u6210\u529F');\n\n        UILayout.card(\n          '\u4F1A\u8BDD\u4FE1\u606F',\n          [\n            `\u4F1A\u8BDD ID: ${session.id}`,\n            session.serverInfo\n              ? `\u670D\u52A1\u5668: ${session.serverInfo.name} v${session.serverInfo.version}`\n              : null,\n          ].filter(Boolean) as string[],\n          { icon: '\u2705' }\n        );\n\n        if (options.interactive) {\n          await runInteractiveClient(client, session.id);\n        } else {\n          // \u663E\u793A\u57FA\u672C\u4FE1\u606F\n          await showServerInfo(client, session.id);\n        }\n\n        const disconnectSpinner = UIProgress.spinner('\u6B63\u5728\u65AD\u5F00\u8FDE\u63A5...');\n        disconnectSpinner.start();\n\n        await client.disconnect(session.id);\n        disconnectSpinner.succeed('\u8FDE\u63A5\u5DF2\u65AD\u5F00');\n      } catch (error) {\n        if (spinner) spinner.fail('\u8FDE\u63A5\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error instanceof Error ? error.message : error}`);\n        process.exit(1);\n      }\n    });\n\n  clientCmd\n    .command('list')\n    .description('\u5217\u51FA\u5DF2\u914D\u7F6E\u7684\u670D\u52A1\u5668')\n    .action(() => {\n      const servers = mcpConfig.getServers();\n      const serverNames = Object.keys(servers);\n\n      if (serverNames.length === 0) {\n        UIDisplay.warning('\u6682\u65E0\u914D\u7F6E\u7684 MCP \u670D\u52A1\u5668');\n        UIDisplay.info('\u4F7F\u7528 \"blade mcp config add\" \u6DFB\u52A0\u670D\u52A1\u5668\u914D\u7F6E');\n        return;\n      }\n\n      UIDisplay.section('\u5DF2\u914D\u7F6E\u7684 MCP \u670D\u52A1\u5668');\n\n      const serverList = serverNames.map(name => {\n        const config = servers[name];\n        let info = `${name} (${config.transport})`;\n\n        if (config.endpoint) {\n          info += ` - ${config.endpoint}`;\n        } else if (config.command) {\n          info += ` - ${config.command}`;\n        }\n\n        return info;\n      });\n\n      UIList.simple(serverList);\n      UIDisplay.info(`\u5171 ${serverNames.length} \u4E2A\u670D\u52A1\u5668`);\n    });\n\n  // MCP \u914D\u7F6E\u547D\u4EE4\n  const configCmd = mcpCmd.command('config').description('MCP \u914D\u7F6E\u7BA1\u7406');\n\n  configCmd\n    .command('add')\n    .description('\u6DFB\u52A0 MCP \u670D\u52A1\u5668\u914D\u7F6E')\n    .action(async () => {\n      try {\n        UIDisplay.header('\u6DFB\u52A0 MCP \u670D\u52A1\u5668\u914D\u7F6E');\n\n        const name = await UIInput.text('\u670D\u52A1\u5668\u540D\u79F0:', {\n          validate: input => (input.trim() ? true : '\u8BF7\u8F93\u5165\u670D\u52A1\u5668\u540D\u79F0'),\n        });\n\n        const transport = await UIInput.select('\u4F20\u8F93\u65B9\u5F0F:', [\n          { name: 'WebSocket (ws)', value: 'ws' },\n          { name: 'Standard I/O (stdio)', value: 'stdio' },\n        ]);\n\n        let config: MCPConnectionConfig = {\n          name,\n          transport: transport as 'ws' | 'stdio',\n        };\n\n        if (transport === 'ws') {\n          const endpoint = await UIInput.text('WebSocket \u5730\u5740:', {\n            default: 'ws://localhost:3001',\n            validate: input => (input.trim() ? true : '\u8BF7\u8F93\u5165 WebSocket \u5730\u5740'),\n          });\n\n          const timeout = await UIInput.text('\u8FDE\u63A5\u8D85\u65F6 (\u6BEB\u79D2):', {\n            default: '10000',\n            validate: input => (!isNaN(Number(input)) ? true : '\u8BF7\u8F93\u5165\u6709\u6548\u6570\u5B57'),\n          });\n\n          config = {\n            ...config,\n            endpoint,\n            timeout: parseInt(timeout),\n          };\n        } else {\n          const command = await UIInput.text('\u6267\u884C\u547D\u4EE4:', {\n            validate: input => (input.trim() ? true : '\u8BF7\u8F93\u5165\u6267\u884C\u547D\u4EE4'),\n          });\n\n          const args = await UIInput.text('\u547D\u4EE4\u53C2\u6570 (\u53EF\u9009):', { default: '' });\n\n          config = {\n            ...config,\n            command,\n            args: args ? args.split(' ') : undefined,\n          };\n        }\n\n        const spinner = UIProgress.spinner('\u6B63\u5728\u4FDD\u5B58\u914D\u7F6E...');\n        spinner.start();\n\n        mcpConfig.addServer(name, config);\n\n        spinner.succeed('\u670D\u52A1\u5668\u914D\u7F6E\u6DFB\u52A0\u6210\u529F');\n\n        UILayout.card(\n          '\u914D\u7F6E\u8BE6\u60C5',\n          [\n            `\u540D\u79F0: ${config.name}`,\n            `\u4F20\u8F93\u65B9\u5F0F: ${config.transport}`,\n            config.endpoint ? `\u5730\u5740: ${config.endpoint}` : null,\n            config.command ? `\u547D\u4EE4: ${config.command}` : null,\n          ].filter(Boolean) as string[],\n          { icon: '\u2705' }\n        );\n      } catch (error: any) {\n        UIDisplay.error(`\u914D\u7F6E\u6DFB\u52A0\u5931\u8D25: ${error.message}`);\n      }\n    });\n\n  configCmd\n    .command('remove <name>')\n    .description('\u5220\u9664\u670D\u52A1\u5668\u914D\u7F6E')\n    .action(async name => {\n      try {\n        const servers = mcpConfig.getServers();\n        if (!servers[name]) {\n          UIDisplay.error(`\u670D\u52A1\u5668\u914D\u7F6E \"${name}\" \u4E0D\u5B58\u5728`);\n          return;\n        }\n\n        UILayout.card('\u5C06\u8981\u5220\u9664\u7684\u914D\u7F6E', [`\u540D\u79F0: ${name}`, `\u4F20\u8F93\u65B9\u5F0F: ${servers[name].transport}`], {\n          icon: '\u26A0\uFE0F',\n        });\n\n        const confirmed = await UIInput.confirm('\u786E\u8BA4\u5220\u9664\u6B64\u914D\u7F6E\uFF1F', { default: false });\n\n        if (!confirmed) {\n          UIDisplay.info('\u64CD\u4F5C\u5DF2\u53D6\u6D88');\n          return;\n        }\n\n        const spinner = UIProgress.spinner('\u6B63\u5728\u5220\u9664\u914D\u7F6E...');\n        spinner.start();\n\n        mcpConfig.removeServer(name);\n\n        spinner.succeed(`\u670D\u52A1\u5668\u914D\u7F6E \"${name}\" \u5DF2\u5220\u9664`);\n      } catch (error: any) {\n        UIDisplay.error(`\u5220\u9664\u914D\u7F6E\u5931\u8D25: ${error.message}`);\n      }\n    });\n\n  configCmd\n    .command('show [name]')\n    .description('\u663E\u793A\u670D\u52A1\u5668\u914D\u7F6E')\n    .action(name => {\n      try {\n        if (name) {\n          const config = mcpConfig.getServer(name);\n          if (!config) {\n            UIDisplay.error(`\u670D\u52A1\u5668\u914D\u7F6E \"${name}\" \u4E0D\u5B58\u5728`);\n            return;\n          }\n\n          UILayout.card(\n            `\u670D\u52A1\u5668\u914D\u7F6E: ${name}`,\n            [\n              `\u4F20\u8F93\u65B9\u5F0F: ${config.transport}`,\n              config.endpoint ? `\u5730\u5740: ${config.endpoint}` : null,\n              config.command ? `\u547D\u4EE4: ${config.command}` : null,\n              config.args?.length ? `\u53C2\u6570: ${config.args.join(' ')}` : null,\n              config.timeout ? `\u8D85\u65F6: ${config.timeout}ms` : null,\n            ].filter(Boolean) as string[],\n            { icon: '\uD83D\uDCCB' }\n          );\n        } else {\n          const servers = mcpConfig.getServers();\n          const serverNames = Object.keys(servers);\n\n          if (serverNames.length === 0) {\n            UIDisplay.warning('\u6682\u65E0\u914D\u7F6E\u7684\u670D\u52A1\u5668');\n            return;\n          }\n\n          UIDisplay.section('\u6240\u6709\u670D\u52A1\u5668\u914D\u7F6E');\n\n          serverNames.forEach(serverName => {\n            const config = servers[serverName];\n            UILayout.card(\n              serverName,\n              [\n                `\u4F20\u8F93\u65B9\u5F0F: ${config.transport}`,\n                config.endpoint ? `\u5730\u5740: ${config.endpoint}` : null,\n                config.command ? `\u547D\u4EE4: ${config.command}` : null,\n              ].filter(Boolean) as string[]\n            );\n            UIDisplay.newline();\n          });\n        }\n      } catch (error: any) {\n        UIDisplay.error(`\u83B7\u53D6\u914D\u7F6E\u5931\u8D25: ${error.message}`);\n      }\n    });\n}\n\n/**\n * \u8FD0\u884C\u4EA4\u4E92\u5F0F\u5BA2\u6237\u7AEF\n */\nasync function runInteractiveClient(client: Client, sessionId: string): Promise<void> {\n  console.log(chalk.blue('\\n\uD83C\uDFAE \u8FDB\u5165\u4EA4\u4E92\u5F0F\u6A21\u5F0F (\u8F93\u5165 \"exit\" \u9000\u51FA)'));\n  console.log('');\n\n  while (true) {\n    try {\n      const { action } = await inquirer.prompt([\n        {\n          type: 'list',\n          name: 'action',\n          message: '\u9009\u62E9\u64CD\u4F5C:',\n          choices: [\n            { name: '\uD83D\uDCCB \u5217\u51FA\u8D44\u6E90', value: 'list-resources' },\n            { name: '\uD83D\uDCD6 \u8BFB\u53D6\u8D44\u6E90', value: 'read-resource' },\n            { name: '\uD83D\uDD27 \u5217\u51FA\u5DE5\u5177', value: 'list-tools' },\n            { name: '\u26A1 \u8C03\u7528\u5DE5\u5177', value: 'call-tool' },\n            { name: '\uD83D\uDEAA \u9000\u51FA', value: 'exit' },\n          ],\n        },\n      ]);\n\n      if (action === 'exit') {\n        break;\n      }\n\n      switch (action) {\n        case 'list-resources':\n          await listResources(client, sessionId);\n          break;\n        case 'read-resource':\n          await readResource(client, sessionId);\n          break;\n        case 'list-tools':\n          await listTools(client, sessionId);\n          break;\n        case 'call-tool':\n          await callTool(client, sessionId);\n          break;\n      }\n\n      console.log('');\n    } catch (error) {\n      console.error(chalk.red('\u274C \u64CD\u4F5C\u5931\u8D25:'), error instanceof Error ? error.message : error);\n    }\n  }\n}\n\n/**\n * \u663E\u793A\u670D\u52A1\u5668\u4FE1\u606F\n */\nasync function showServerInfo(client: Client, sessionId: string): Promise<void> {\n  try {\n    console.log(chalk.blue('\\n\uD83D\uDCCB \u670D\u52A1\u5668\u4FE1\u606F:'));\n\n    // \u5217\u51FA\u8D44\u6E90\n    const resources = await client.listResources(sessionId);\n    console.log(chalk.green(`\uD83D\uDCC1 \u53EF\u7528\u8D44\u6E90 (${resources.length}):`));\n    resources.forEach(resource => {\n      console.log(chalk.gray(`   \u2022 ${resource.name}: ${resource.description || resource.uri}`));\n    });\n\n    // \u5217\u51FA\u5DE5\u5177\n    const tools = await client.listTools(sessionId);\n    console.log(chalk.green(`\uD83D\uDD27 \u53EF\u7528\u5DE5\u5177 (${tools.length}):`));\n    tools.forEach(tool => {\n      console.log(chalk.gray(`   \u2022 ${tool.name}: ${tool.description}`));\n    });\n  } catch (error) {\n    console.error(\n      chalk.red('\u274C \u83B7\u53D6\u670D\u52A1\u5668\u4FE1\u606F\u5931\u8D25:'),\n      error instanceof Error ? error.message : error\n    );\n  }\n}\n\n/**\n * \u5217\u51FA\u8D44\u6E90\n */\nasync function listResources(client: Client, sessionId: string): Promise<void> {\n  try {\n    const resources = await client.listResources(sessionId);\n\n    if (resources.length === 0) {\n      console.log(chalk.yellow('\uD83D\uDCED \u6CA1\u6709\u53EF\u7528\u7684\u8D44\u6E90'));\n      return;\n    }\n\n    console.log(chalk.blue(`\uD83D\uDCC1 \u53EF\u7528\u8D44\u6E90 (${resources.length}):`));\n    resources.forEach((resource, index) => {\n      console.log(chalk.green(`${index + 1}. ${resource.name}`));\n      console.log(chalk.gray(`   URI: ${resource.uri}`));\n      if (resource.description) {\n        console.log(chalk.gray(`   \u63CF\u8FF0: ${resource.description}`));\n      }\n      if (resource.mimeType) {\n        console.log(chalk.gray(`   \u7C7B\u578B: ${resource.mimeType}`));\n      }\n      console.log('');\n    });\n  } catch (error) {\n    console.error(\n      chalk.red('\u274C \u83B7\u53D6\u8D44\u6E90\u5217\u8868\u5931\u8D25:'),\n      error instanceof Error ? error.message : error\n    );\n  }\n}\n\n/**\n * \u8BFB\u53D6\u8D44\u6E90\n */\nasync function readResource(client: Client, sessionId: string): Promise<void> {\n  try {\n    const resources = await client.listResources(sessionId);\n\n    if (resources.length === 0) {\n      console.log(chalk.yellow('\uD83D\uDCED \u6CA1\u6709\u53EF\u7528\u7684\u8D44\u6E90'));\n      return;\n    }\n\n    const { selectedResource } = await inquirer.prompt([\n      {\n        type: 'list',\n        name: 'selectedResource',\n        message: '\u9009\u62E9\u8981\u8BFB\u53D6\u7684\u8D44\u6E90:',\n        choices: resources.map(resource => ({\n          name: `${resource.name} (${resource.uri})`,\n          value: resource.uri,\n        })),\n      },\n    ]);\n\n    const content = await client.readResource(sessionId, selectedResource);\n\n    console.log(chalk.blue(`\uD83D\uDCD6 \u8D44\u6E90\u5185\u5BB9 (${content.mimeType}):`));\n    console.log('');\n    console.log(content.text || content.blob || '[\u4E8C\u8FDB\u5236\u5185\u5BB9]');\n  } catch (error) {\n    console.error(chalk.red('\u274C \u8BFB\u53D6\u8D44\u6E90\u5931\u8D25:'), error instanceof Error ? error.message : error);\n  }\n}\n\n/**\n * \u5217\u51FA\u5DE5\u5177\n */\nasync function listTools(client: Client, sessionId: string): Promise<void> {\n  try {\n    const tools = await client.listTools(sessionId);\n\n    if (tools.length === 0) {\n      console.log(chalk.yellow('\uD83D\uDD27 \u6CA1\u6709\u53EF\u7528\u7684\u5DE5\u5177'));\n      return;\n    }\n\n    console.log(chalk.blue(`\uD83D\uDD27 \u53EF\u7528\u5DE5\u5177 (${tools.length}):`));\n    tools.forEach((tool, index) => {\n      console.log(chalk.green(`${index + 1}. ${tool.name}`));\n      console.log(chalk.gray(`   \u63CF\u8FF0: ${tool.description}`));\n\n      const properties = tool.inputSchema.properties;\n      if (properties && Object.keys(properties).length > 0) {\n        console.log(chalk.gray('   \u53C2\u6570:'));\n        Object.entries(properties).forEach(([key, value]: [string, any]) => {\n          const required = tool.inputSchema.required?.includes(key) ? ' (\u5FC5\u9700)' : '';\n          console.log(chalk.gray(`     \u2022 ${key}${required}: ${value.description || value.type}`));\n        });\n      }\n      console.log('');\n    });\n  } catch (error) {\n    console.error(\n      chalk.red('\u274C \u83B7\u53D6\u5DE5\u5177\u5217\u8868\u5931\u8D25:'),\n      error instanceof Error ? error.message : error\n    );\n  }\n}\n\n/**\n * \u8C03\u7528\u5DE5\u5177\n */\nasync function callTool(client: Client, sessionId: string): Promise<void> {\n  try {\n    const tools = await client.listTools(sessionId);\n\n    if (tools.length === 0) {\n      console.log(chalk.yellow('\uD83D\uDD27 \u6CA1\u6709\u53EF\u7528\u7684\u5DE5\u5177'));\n      return;\n    }\n\n    const { selectedTool } = await inquirer.prompt([\n      {\n        type: 'list',\n        name: 'selectedTool',\n        message: '\u9009\u62E9\u8981\u8C03\u7528\u7684\u5DE5\u5177:',\n        choices: tools.map(tool => ({\n          name: `${tool.name} - ${tool.description}`,\n          value: tool.name,\n        })),\n      },\n    ]);\n\n    const tool = tools.find(t => t.name === selectedTool)!;\n    const toolArgs: Record<string, any> = {};\n\n    // \u6536\u96C6\u5DE5\u5177\u53C2\u6570\n    const properties = tool.inputSchema.properties;\n    if (properties && Object.keys(properties).length > 0) {\n      console.log(chalk.blue('\uD83D\uDCDD \u8BF7\u8F93\u5165\u5DE5\u5177\u53C2\u6570:'));\n\n      for (const [key] of Object.entries(properties)) {\n        const isRequired = tool.inputSchema.required?.includes(key);\n        const { value } = await inquirer.prompt([\n          {\n            type: 'input',\n            name: 'value',\n            message: `${key}${isRequired ? ' (\u5FC5\u9700)' : ''}:`,\n            validate: input => {\n              if (isRequired && !input.trim()) {\n                return `${key} \u662F\u5FC5\u9700\u53C2\u6570`;\n              }\n              return true;\n            },\n          },\n        ]);\n\n        if (value.trim()) {\n          toolArgs[key] = value;\n        }\n      }\n    }\n\n    console.log(chalk.blue('\u26A1 \u8C03\u7528\u5DE5\u5177...'));\n    const result = await client.callTool(sessionId, {\n      name: selectedTool,\n      arguments: toolArgs,\n    });\n\n    console.log(chalk.green('\u2705 \u5DE5\u5177\u8C03\u7528\u6210\u529F:'));\n    console.log('');\n    result.content.forEach(content => {\n      if (content.type === 'text') {\n        console.log(content.text);\n      } else {\n        console.log(chalk.gray(`[${content.type}\u5185\u5BB9]`));\n      }\n    });\n\n    if (result.isError) {\n      console.log(chalk.red('\u26A0\uFE0F  \u5DE5\u5177\u6267\u884C\u51FA\u73B0\u9519\u8BEF'));\n    }\n  } catch (error) {\n    console.error(chalk.red('\u274C \u8C03\u7528\u5DE5\u5177\u5931\u8D25:'), error instanceof Error ? error.message : error);\n  }\n}\n", "import { Command } from 'commander';\nimport { ToolComponent, ToolDefinition } from '@blade-ai/core';\nimport { UIDisplay, UIInput, UILayout, UIList, UIProgress } from '../ui/index.js';\n\n/**\n * \u5DE5\u5177\u76F8\u5173\u547D\u4EE4\n */\nexport function toolsCommand(program: Command): void {\n  const toolsCmd = program.command('tools').description('\uD83D\uDD27 \u5DE5\u5177\u7BA1\u7406\u548C\u64CD\u4F5C');\n\n  // \u5217\u51FA\u6240\u6709\u5DE5\u5177\n  toolsCmd\n    .command('list')\n    .description('\u5217\u51FA\u6240\u6709\u53EF\u7528\u5DE5\u5177')\n    .option('-c, --category <category>', '\u6309\u5206\u7C7B\u8FC7\u6EE4')\n    .option('-s, --search <query>', '\u641C\u7D22\u5DE5\u5177')\n    .option('--format <format>', '\u8F93\u51FA\u683C\u5F0F', 'table')\n    .action(async options => {\n      const spinner = UIProgress.spinner('\u6B63\u5728\u52A0\u8F7D\u5DE5\u5177\u5217\u8868...');\n      spinner.start();\n\n      try {\n        const toolManager = await createToolManager();\n        let tools = toolManager.getTools();\n\n        // \u5206\u7C7B\u8FC7\u6EE4\n        if (options.category) {\n          tools = tools.filter(\n            tool => tool.category?.toLowerCase() === options.category.toLowerCase()\n          );\n        }\n\n        // \u641C\u7D22\u8FC7\u6EE4\n        if (options.search) {\n          const query = options.search.toLowerCase();\n          tools = tools.filter(\n            tool =>\n              tool.name.toLowerCase().includes(query) ||\n              tool.description.toLowerCase().includes(query) ||\n              (tool.tags && tool.tags.some(tag => tag.toLowerCase().includes(query)))\n          );\n        }\n\n        spinner.succeed('\u5DE5\u5177\u5217\u8868\u52A0\u8F7D\u5B8C\u6210');\n\n        if (tools.length === 0) {\n          UIDisplay.warning('\u672A\u627E\u5230\u5339\u914D\u7684\u5DE5\u5177');\n          return;\n        }\n\n        if (options.format === 'json') {\n          console.log(JSON.stringify(tools, null, 2));\n        } else {\n          displayToolsTable(tools);\n        }\n      } catch (error: any) {\n        spinner.fail('\u5DE5\u5177\u5217\u8868\u83B7\u53D6\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error.message}`);\n      }\n    });\n\n  // \u67E5\u770B\u5DE5\u5177\u8BE6\u60C5\n  toolsCmd\n    .command('info <toolName>')\n    .description('\u67E5\u770B\u5DE5\u5177\u8BE6\u7EC6\u4FE1\u606F')\n    .action(async toolName => {\n      const spinner = UIProgress.spinner(`\u6B63\u5728\u83B7\u53D6\u5DE5\u5177 \"${toolName}\" \u7684\u4FE1\u606F...`);\n      spinner.start();\n\n      try {\n        const toolManager = await createToolManager();\n        const tool = toolManager.getTool(toolName);\n\n        if (!tool) {\n          spinner.fail('\u5DE5\u5177\u4E0D\u5B58\u5728');\n          UIDisplay.error(`\u5DE5\u5177 \"${toolName}\" \u4E0D\u5B58\u5728`);\n          return;\n        }\n\n        spinner.succeed('\u5DE5\u5177\u4FE1\u606F\u83B7\u53D6\u5B8C\u6210');\n        displayToolInfo(tool);\n      } catch (error: any) {\n        spinner.fail('\u5DE5\u5177\u4FE1\u606F\u83B7\u53D6\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error.message}`);\n      }\n    });\n\n  // \u8C03\u7528\u5DE5\u5177\n  toolsCmd\n    .command('call <toolName>')\n    .description('\u8C03\u7528\u6307\u5B9A\u5DE5\u5177')\n    .option('-p, --params <params>', '\u5DE5\u5177\u53C2\u6570\uFF08JSON\u683C\u5F0F\uFF09', '{}')\n    .option('-f, --file <file>', '\u4ECE\u6587\u4EF6\u8BFB\u53D6\u53C2\u6570')\n    .action(async (toolName, options) => {\n      let spinner = UIProgress.spinner('\u6B63\u5728\u9A8C\u8BC1\u5DE5\u5177...');\n      spinner.start();\n\n      try {\n        const toolManager = await createToolManager();\n\n        if (!toolManager.hasTool(toolName)) {\n          spinner.fail('\u5DE5\u5177\u4E0D\u5B58\u5728');\n          UIDisplay.error(`\u5DE5\u5177 \"${toolName}\" \u4E0D\u5B58\u5728`);\n          return;\n        }\n\n        spinner.succeed('\u5DE5\u5177\u9A8C\u8BC1\u5B8C\u6210');\n\n        let params: Record<string, any> = {};\n\n        if (options.file) {\n          spinner = UIProgress.spinner('\u6B63\u5728\u8BFB\u53D6\u53C2\u6570\u6587\u4EF6...');\n          spinner.start();\n\n          const fs = await import('fs/promises');\n          const fileContent = await fs.readFile(options.file, 'utf8');\n          params = JSON.parse(fileContent);\n\n          spinner.succeed('\u53C2\u6570\u6587\u4EF6\u8BFB\u53D6\u5B8C\u6210');\n        } else {\n          params = JSON.parse(options.params);\n        }\n\n        UILayout.card(\n          '\u5DE5\u5177\u8C03\u7528',\n          [`\u5DE5\u5177\u540D\u79F0: ${toolName}`, `\u53C2\u6570: ${JSON.stringify(params, null, 2)}`],\n          { icon: '\uD83D\uDD27' }\n        );\n\n        const confirmed = await UIInput.confirm('\u786E\u8BA4\u8C03\u7528\u8BE5\u5DE5\u5177\uFF1F', { default: true });\n        if (!confirmed) {\n          UIDisplay.info('\u64CD\u4F5C\u5DF2\u53D6\u6D88');\n          return;\n        }\n\n        spinner = UIProgress.spinner('\u6B63\u5728\u8C03\u7528\u5DE5\u5177...');\n        spinner.start();\n\n        const response = await toolManager.callTool({\n          toolName,\n          parameters: params,\n        });\n\n        spinner.succeed('\u5DE5\u5177\u8C03\u7528\u5B8C\u6210');\n        displayToolResult(response);\n      } catch (error: any) {\n        if (spinner) spinner.fail('\u5DE5\u5177\u8C03\u7528\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error.message}`);\n      }\n    });\n\n  // \u751F\u6210\u5DE5\u5177\u6587\u6863\n  toolsCmd\n    .command('docs')\n    .description('\u751F\u6210\u5DE5\u5177\u6587\u6863')\n    .option('-o, --output <file>', '\u8F93\u51FA\u6587\u4EF6\u8DEF\u5F84')\n    .option('-f, --format <format>', '\u6587\u6863\u683C\u5F0F', 'markdown')\n    .action(async options => {\n      const spinner = UIProgress.spinner('\u6B63\u5728\u751F\u6210\u5DE5\u5177\u6587\u6863...');\n      spinner.start();\n\n      try {\n        const toolManager = await createToolManager();\n        const tools = toolManager.getTools();\n        const categories = getBuiltinToolsByCategory();\n\n        const docs = generateToolDocs(tools, categories);\n\n        if (options.output) {\n          const fs = await import('fs/promises');\n          await fs.writeFile(options.output, docs, 'utf8');\n          spinner.succeed(`\u5DE5\u5177\u6587\u6863\u5DF2\u4FDD\u5B58\u5230: ${options.output}`);\n        } else {\n          spinner.succeed('\u5DE5\u5177\u6587\u6863\u751F\u6210\u5B8C\u6210');\n          console.log(docs);\n        }\n      } catch (error: any) {\n        spinner.fail('\u6587\u6863\u751F\u6210\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error.message}`);\n      }\n    });\n\n  // \u5DE5\u5177\u7EDF\u8BA1\n  toolsCmd\n    .command('stats')\n    .description('\u663E\u793A\u5DE5\u5177\u7EDF\u8BA1\u4FE1\u606F')\n    .action(async () => {\n      const spinner = UIProgress.spinner('\u6B63\u5728\u6536\u96C6\u7EDF\u8BA1\u4FE1\u606F...');\n      spinner.start();\n\n      try {\n        const toolManager = await createToolManager();\n        const stats = toolManager.getStats();\n        const categories = getBuiltinToolsByCategory();\n\n        spinner.succeed('\u7EDF\u8BA1\u4FE1\u606F\u6536\u96C6\u5B8C\u6210');\n\n        UILayout.card(\n          '\u5DE5\u5177\u7EDF\u8BA1\u4FE1\u606F',\n          [\n            `\u603B\u5DE5\u5177\u6570: ${stats.totalTools}`,\n            `\u542F\u7528\u5DE5\u5177: ${stats.enabledTools}`,\n            `\u7981\u7528\u5DE5\u5177: ${stats.totalTools - stats.enabledTools}`,\n            `\u6B63\u5728\u8FD0\u884C: ${stats.runningExecutions}`,\n            '',\n            '\u6267\u884C\u7EDF\u8BA1:',\n            `  \u603B\u6267\u884C\u6B21\u6570: ${stats.totalExecutions}`,\n            `  \u6210\u529F\u6267\u884C: ${stats.successfulExecutions}`,\n            `  \u5931\u8D25\u6267\u884C: ${stats.failedExecutions}`,\n          ],\n          { icon: '\uD83D\uDCCA' }\n        );\n\n        UIDisplay.section('\u5206\u7C7B\u7EDF\u8BA1');\n        const categoryStats = Object.entries(categories).map(\n          ([category, tools]) => `${category}: ${tools.length} \u4E2A\u5DE5\u5177`\n        );\n        UIList.simple(categoryStats);\n      } catch (error: any) {\n        spinner.fail('\u7EDF\u8BA1\u4FE1\u606F\u83B7\u53D6\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error.message}`);\n      }\n    });\n\n  // \u6D4B\u8BD5\u5DE5\u5177\n  toolsCmd\n    .command('test <toolName>')\n    .description('\u6D4B\u8BD5\u5DE5\u5177\u529F\u80FD')\n    .action(async toolName => {\n      let spinner = UIProgress.spinner(`\u6B63\u5728\u51C6\u5907\u6D4B\u8BD5\u5DE5\u5177 \"${toolName}\"...`);\n      spinner.start();\n\n      try {\n        const toolManager = await createToolManager();\n        const tool = toolManager.getTool(toolName);\n\n        if (!tool) {\n          spinner.fail('\u5DE5\u5177\u4E0D\u5B58\u5728');\n          UIDisplay.error(`\u5DE5\u5177 \"${toolName}\" \u4E0D\u5B58\u5728`);\n          return;\n        }\n\n        spinner.succeed('\u6D4B\u8BD5\u51C6\u5907\u5B8C\u6210');\n\n        UILayout.card('\u5DE5\u5177\u6D4B\u8BD5', [`\u5DE5\u5177\u540D\u79F0: ${toolName}`, `\u63CF\u8FF0: ${tool.description}`], {\n          icon: '\uD83E\uDDEA',\n        });\n\n        // \u751F\u6210\u6D4B\u8BD5\u53C2\u6570\n        const testParams = generateTestParams(tool);\n        UIDisplay.info('\u751F\u6210\u7684\u6D4B\u8BD5\u53C2\u6570:');\n        console.log(JSON.stringify(testParams, null, 2));\n\n        const confirmed = await UIInput.confirm('\u786E\u8BA4\u4F7F\u7528\u8FD9\u4E9B\u53C2\u6570\u8FDB\u884C\u6D4B\u8BD5\uFF1F', { default: true });\n        if (!confirmed) {\n          UIDisplay.info('\u6D4B\u8BD5\u5DF2\u53D6\u6D88');\n          return;\n        }\n\n        spinner = UIProgress.spinner('\u6B63\u5728\u6267\u884C\u6D4B\u8BD5...');\n        spinner.start();\n\n        const startTime = Date.now();\n        const response = await toolManager.callTool({\n          toolName,\n          parameters: testParams,\n        });\n        const duration = Date.now() - startTime;\n\n        spinner.succeed(`\u6D4B\u8BD5\u5B8C\u6210 (\u8017\u65F6: ${duration}ms)`);\n\n        UIDisplay.section('\u6D4B\u8BD5\u7ED3\u679C');\n        displayToolResult(response);\n      } catch (error: any) {\n        if (spinner) spinner.fail('\u6D4B\u8BD5\u5931\u8D25');\n        UIDisplay.error(`\u9519\u8BEF: ${error.message}`);\n      }\n    });\n}\n\n/**\n * \u663E\u793A\u5DE5\u5177\u8868\u683C\n */\nfunction displayToolsTable(tools: ToolDefinition[]): void {\n  UIDisplay.section('\uD83D\uDD27 \u53EF\u7528\u5DE5\u5177\u5217\u8868');\n\n  // \u6309\u5206\u7C7B\u5206\u7EC4\n  const categories = tools.reduce(\n    (acc, tool) => {\n      const category = tool.category || '\u5176\u4ED6';\n      if (!acc[category]) acc[category] = [];\n      acc[category].push(tool);\n      return acc;\n    },\n    {} as Record<string, ToolDefinition[]>\n  );\n\n  Object.entries(categories).forEach(([category, categoryTools]) => {\n    UIDisplay.section(category);\n\n    const toolList = categoryTools.map(tool => {\n      const tags = tool.tags?.length ? ` (${tool.tags.join(', ')})` : '';\n      return `${tool.name}: ${tool.description}${tags}`;\n    });\n\n    UIList.simple(toolList);\n    UIDisplay.newline();\n  });\n\n  UIDisplay.info(`\u5171\u627E\u5230 ${tools.length} \u4E2A\u5DE5\u5177`);\n}\n\n/**\n * \u663E\u793A\u5DE5\u5177\u8BE6\u7EC6\u4FE1\u606F\n */\nfunction displayToolInfo(tool: ToolDefinition): void {\n  UILayout.card(\n    `\u5DE5\u5177\u8BE6\u60C5: ${tool.name}`,\n    [\n      `\u63CF\u8FF0: ${tool.description}`,\n      tool.category ? `\u5206\u7C7B: ${tool.category}` : null,\n      tool.tags?.length ? `\u6807\u7B7E: ${tool.tags.join(', ')}` : null,\n      tool.version ? `\u7248\u672C: ${tool.version}` : null,\n    ].filter(Boolean) as string[],\n    { icon: '\uD83D\uDD27' }\n  );\n\n  if (tool.inputSchema) {\n    UIDisplay.section('\u8F93\u5165\u53C2\u6570');\n\n    if (tool.inputSchema.properties) {\n      const params = Object.entries(tool.inputSchema.properties).map(\n        ([name, schema]: [string, any]) => {\n          const required = tool.inputSchema?.required?.includes(name) ? ' (\u5FC5\u9700)' : ' (\u53EF\u9009)';\n          const type = schema.type ? ` [${schema.type}]` : '';\n          const desc = schema.description ? `: ${schema.description}` : '';\n          return `${name}${required}${type}${desc}`;\n        }\n      );\n\n      UIList.bullets(params);\n    }\n  }\n\n  if (tool.outputSchema) {\n    UIDisplay.section('\u8F93\u51FA\u683C\u5F0F');\n    console.log(JSON.stringify(tool.outputSchema, null, 2));\n  }\n\n  if (tool.examples?.length) {\n    UIDisplay.section('\u4F7F\u7528\u793A\u4F8B');\n    tool.examples.forEach((example, index) => {\n      UIDisplay.text(`\u793A\u4F8B ${index + 1}:`);\n      console.log(JSON.stringify(example, null, 2));\n      UIDisplay.newline();\n    });\n  }\n}\n\n/**\n * \u663E\u793A\u5DE5\u5177\u6267\u884C\u7ED3\u679C\n */\nfunction displayToolResult(response: any): void {\n  if (response.success) {\n    UIDisplay.success('\u5DE5\u5177\u6267\u884C\u6210\u529F');\n\n    if (response.data) {\n      UIDisplay.section('\u6267\u884C\u7ED3\u679C');\n      if (typeof response.data === 'string') {\n        UIDisplay.text(response.data);\n      } else {\n        console.log(JSON.stringify(response.data, null, 2));\n      }\n    }\n\n    if (response.metadata) {\n      UIDisplay.section('\u5143\u6570\u636E');\n      console.log(JSON.stringify(response.metadata, null, 2));\n    }\n  } else {\n    UIDisplay.error('\u5DE5\u5177\u6267\u884C\u5931\u8D25');\n    if (response.error) {\n      UIDisplay.text(`\u9519\u8BEF\u4FE1\u606F: ${response.error}`);\n    }\n  }\n}\n\n/**\n * \u751F\u6210\u5DE5\u5177\u6587\u6863\n */\nfunction generateToolDocs(\n  tools: ToolDefinition[],\n  categories: Record<string, ToolDefinition[]>\n): string {\n  let docs = '# \u5DE5\u5177\u6587\u6863\\n\\n';\n  docs += `> \u603B\u8BA1 ${tools.length} \u4E2A\u5DE5\u5177\\n\\n`;\n  docs += '## \u76EE\u5F55\\n\\n';\n\n  // \u751F\u6210\u76EE\u5F55\n  for (const [category, categoryTools] of Object.entries(categories)) {\n    docs += `- [${category.toUpperCase()}](#${category.toLowerCase()}) (${categoryTools.length})\\n`;\n  }\n  docs += '\\n';\n\n  // \u751F\u6210\u8BE6\u7EC6\u6587\u6863\n  for (const [category, categoryTools] of Object.entries(categories)) {\n    docs += `## ${category.toUpperCase()}\\n\\n`;\n\n    for (const tool of categoryTools) {\n      docs += `### ${tool.name}\\n\\n`;\n      docs += `${tool.description}\\n\\n`;\n\n      if (tool.version || tool.author) {\n        docs += '**\u5143\u4FE1\u606F:**\\n';\n        if (tool.version) docs += `- \u7248\u672C: ${tool.version}\\n`;\n        if (tool.author) docs += `- \u4F5C\u8005: ${tool.author}\\n`;\n        docs += '\\n';\n      }\n\n      if (tool.tags && tool.tags.length > 0) {\n        docs += `**\u6807\u7B7E:** \\`${tool.tags.join('`\u3001`')}\\`\\n\\n`;\n      }\n\n      docs += '**\u53C2\u6570:**\\n\\n';\n      docs += '| \u53C2\u6570\u540D | \u7C7B\u578B | \u5FC5\u9700 | \u9ED8\u8BA4\u503C | \u63CF\u8FF0 |\\n';\n      docs += '|--------|------|------|--------|------|\\n';\n\n      for (const [paramName, paramSchema] of Object.entries(tool.parameters)) {\n        const required = tool.required?.includes(paramName) ? '\u2705' : '\u274C';\n        const defaultValue = paramSchema.default !== undefined ? `\\`${paramSchema.default}\\`` : '-';\n        const description = paramSchema.description || '-';\n\n        docs += `| \\`${paramName}\\` | \\`${paramSchema.type}\\` | ${required} | ${defaultValue} | ${description} |\\n`;\n      }\n\n      docs += '\\n---\\n\\n';\n    }\n  }\n\n  return docs;\n}\n\n/**\n * \u751F\u6210\u6D4B\u8BD5\u53C2\u6570\n */\nfunction generateTestParams(tool: ToolDefinition): Record<string, any> {\n  const testParams: Record<string, any> = {};\n\n  for (const [paramName, paramSchema] of Object.entries(tool.parameters)) {\n    if (paramSchema.default !== undefined) {\n      testParams[paramName] = paramSchema.default;\n    } else if (paramSchema.enum && paramSchema.enum.length > 0) {\n      testParams[paramName] = paramSchema.enum[0];\n    } else {\n      switch (paramSchema.type) {\n        case 'string':\n          testParams[paramName] = 'test';\n          break;\n        case 'number':\n          testParams[paramName] = 42;\n          break;\n        case 'boolean':\n          testParams[paramName] = true;\n          break;\n        case 'array':\n          testParams[paramName] = [];\n          break;\n        case 'object':\n          testParams[paramName] = {};\n          break;\n      }\n    }\n  }\n\n  return testParams;\n}\n", "#!/usr/bin/env node\n\n/**\n * Blade CLI \u603B\u5165\u53E3\u6587\u4EF6\n *\n * @description\n * \u8FD9\u4E2A\u6587\u4EF6\u4F5C\u4E3A\u547D\u4EE4\u884C\u5DE5\u5177\u7684\u53EF\u6267\u884C\u5165\u53E3\u3002\u5B83\u7684\u4E3B\u8981\u804C\u8D23\u662F\uFF1A\n * 1. \u8BBE\u7F6E Node.js shebang\uFF0C\u786E\u4FDD\u811A\u672C\u7531\u6B63\u786E\u7684\u89E3\u91CA\u5668\u6267\u884C\u3002\n * 2. \u5BFC\u5165\u5E76\u542F\u52A8\u6838\u5FC3\u5E94\u7528\u903B\u8F91\u3002\n * 3. \u63D0\u4F9B\u4E00\u4E2A\u9876\u5C42\u7684\u5168\u5C40\u9519\u8BEF\u6355\u83B7\u673A\u5236\uFF0C\u9632\u6B62\u5E94\u7528\u5728\u542F\u52A8\u9636\u6BB5\u56E0\u672A\u6355\u83B7\u7684\u5F02\u5E38\u800C\u5D29\u6E83\uFF0C\n *    \u5E76\u4EE5\u53CB\u597D\u7684\u65B9\u5F0F\u5411\u7528\u6237\u62A5\u544A\u9519\u8BEF\u3002\n */\n\nimport { main } from './src/blade.js';\n\n// \u5168\u5C40\u9519\u8BEF\u5904\u7406\nprocess.on('unhandledRejection', (reason, promise) => {\n  console.error('\u274C \u53D1\u751F\u4E86\u672A\u5904\u7406\u7684 Promise Rejection:');\n  console.error(reason);\n});\n\nprocess.on('uncaughtException', (error) => {\n  console.error('\u274C \u53D1\u751F\u4E86\u672A\u6355\u83B7\u7684\u5F02\u5E38:');\n  console.error(error);\n  process.exit(1);\n});\n\n// \u542F\u52A8\u5E94\u7528\nasync function run() {\n  try {\n    await main();\n  } catch (error) {\n    console.error('\u274C \u5E94\u7528\u542F\u52A8\u5931\u8D25:');\n    console.error(error);\n    process.exit(1);\n  }\n}\n\nrun();\n"],
  "mappings": "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",
  "names": ["chalk", "React", "useState", "useCallback", "Box", "Text", "useApp", "jsx", "util", "objectUtil", "path", "errorUtil", "path", "errorMap", "ctx", "result", "issues", "elements", "processed", "result", "r", "ZodFirstPartyTypeKind", "resolve", "path", "path", "resolve", "resolve", "EventEmitter", "fs", "dirname", "join", "resolve", "path", "resolve", "fs", "dirname", "exec", "promisify", "execAsync", "promisify", "exec", "exec", "promisify", "execAsync", "promisify", "exec", "exec", "promisify", "execAsync", "promisify", "exec", "stat", "exec", "promisify", "execAsync", "promisify", "exec", "exec", "promisify", "execAsync", "promisify", "exec", "path", "exec", "promisify", "execAsync", "promisify", "exec", "fs", "extname", "resolve", "path", "fs", "dirname", "extname", "resolve", "detectLanguage", "EventEmitter", "fs", "path", "randomBytes", "createHash", "axios", "fs", "path", "os", "crypto", "fs", "path", "os", "CONFIG_PATHS", "os", "fs", "path", "path", "React", "Box", "Text", "jsx", "jsxs", "ErrorBoundary", "chalk", "themeManager", "chalk", "crypto", "fs", "os", "path", "DEFAULT_CONFIG", "ConfigManager", "isValid", "fs", "DEFAULT_CONFIG", "path", "resolve", "crypto", "os", "chalk", "inquirer", "main", "line", "resolve", "ConfigManager", "chalk", "chalk", "chalk", "inquirer", "Server", "Server", "chalk", "inquirer", "tool", "fs", "_a", "_b", "jsx", "jsxs", "useState", "useApp", "useCallback", "Box", "Text", "ErrorBoundary", "React"]
}
